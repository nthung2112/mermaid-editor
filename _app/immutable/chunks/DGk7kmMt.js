const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./D0hkvT88.js","./Dl9SUaQF.js","./Z2K0rNRr.js","./PWQH_40k.js","./v0gSCWm3.js","./OT39IWXC.js","./C635Jk5Z.js","./D9vX6XGc.js","./CQl_Xrnc.js","./2z9LKCB3.js","./CehMLrIh.js","./D8Fh5hcN.js","./bIJYs0n4.js","./Bn9JEPhg.js","./BeXJCr3O.js","./PHiTP5j9.js","./NsqjlG-V.js","./DLg1LVVK.js","./kAF4D_-6.js","./Ctn9CEZF.js","./DtN69PHy.js","./C3j031ox.js","./B1VRwZFm.js","./DI1yRqS_.js","./Bppi_bOF.js","./FNP3IL09.js","./WX2qwxI8.js","./Gi6I4Gst.js","./C4B-KCzX.js","./sSjuhqhB.js","./0LmpuJJB.js","./uPcp4oIB.js","./CmKTTxBW.js","./CQ8ZScYV.js","./CZkqOa_T.js","./BZDUc91_.js","./DmU-xdSl.js","./DliYsLmx.js","./Yo6a-9A6.js","./KXwaX8V4.js","./BIxA3e_b.js","./TX0X4cv6.js","./BcGH05_P.js","./U9lrJi0d.js","./lLhvsyh2.js","./-OG4lyqv.js","./CnQiAC7J.js","./B-kR6ifo.js","./u78r0Sxy.js","./C65Lm6-m.js","./GgaeWRGF.js","./DQkBcXs3.js","./Ch7qpXGQ.js"])))=>i.map(i=>d[i]);
import{h as hydrating,y as get$2,by as writable,bB as derived}from"./DI1yRqS_.js";import{_ as __vitePreload}from"./B1VRwZFm.js";function r$1(rt){var it,lt,ct="";if(typeof rt=="string"||typeof rt=="number")ct+=rt;else if(typeof rt=="object")if(Array.isArray(rt)){var ht=rt.length;for(it=0;it<ht;it++)rt[it]&&(lt=r$1(rt[it]))&&(ct&&(ct+=" "),ct+=lt)}else for(lt in rt)rt[lt]&&(ct&&(ct+=" "),ct+=lt);return ct}function clsx$1(){for(var rt,it,lt=0,ct="",ht=arguments.length;lt<ht;lt++)(rt=arguments[lt])&&(it=r$1(rt))&&(ct&&(ct+=" "),ct+=it);return ct}function clsx(rt){return typeof rt=="object"?clsx$1(rt):rt??""}const whitespace$1=[...` 	
\r\fÂ \v\uFEFF`];function to_class(rt,it,lt){var ct=rt==null?"":""+rt;if(it&&(ct=ct?ct+" "+it:it),lt){for(var ht in lt)if(lt[ht])ct=ct?ct+" "+ht:ht;else if(ct.length)for(var dt=ht.length,ft=0;(ft=ct.indexOf(ht,ft))>=0;){var ut=ft+dt;(ft===0||whitespace$1.includes(ct[ft-1]))&&(ut===ct.length||whitespace$1.includes(ct[ut]))?ct=(ft===0?"":ct.substring(0,ft))+ct.substring(ut+1):ft=ut}}return ct===""?null:ct}function append_styles(rt,it=!1){var lt=it?" !important;":";",ct="";for(var ht in rt){var dt=rt[ht];dt!=null&&dt!==""&&(ct+=" "+ht+": "+dt+lt)}return ct}function to_css_name(rt){return rt[0]!=="-"||rt[1]!=="-"?rt.toLowerCase():rt}function to_style(rt,it){if(it){var lt="",ct,ht;if(Array.isArray(it)?(ct=it[0],ht=it[1]):ct=it,rt){rt=String(rt).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var dt=!1,ft=0,ut=!1,pt=[];ct&&pt.push(...Object.keys(ct).map(to_css_name)),ht&&pt.push(...Object.keys(ht).map(to_css_name));var gt=0,mt=-1;const wt=rt.length;for(var _t=0;_t<wt;_t++){var yt=rt[_t];if(ut?yt==="/"&&rt[_t-1]==="*"&&(ut=!1):dt?dt===yt&&(dt=!1):yt==="/"&&rt[_t+1]==="*"?ut=!0:yt==='"'||yt==="'"?dt=yt:yt==="("?ft++:yt===")"&&ft--,!ut&&dt===!1&&ft===0){if(yt===":"&&mt===-1)mt=_t;else if(yt===";"||_t===wt-1){if(mt!==-1){var bt=to_css_name(rt.substring(gt,mt).trim());if(!pt.includes(bt)){yt!==";"&&_t++;var xt=rt.substring(gt,_t).trim();lt+=" "+xt+";"}}gt=_t+1,mt=-1}}}}return ct&&(lt+=append_styles(ct)),ht&&(lt+=append_styles(ht,!0)),lt=lt.trim(),lt===""?null:lt}return rt==null?null:String(rt)}function set_class(rt,it,lt,ct,ht,dt){var ft=rt.__className;if(hydrating||ft!==lt||ft===void 0){var ut=to_class(lt,ct,dt);(!hydrating||ut!==rt.getAttribute("class"))&&(ut==null?rt.removeAttribute("class"):it?rt.className=ut:rt.setAttribute("class",ut)),rt.__className=lt}else if(dt&&ht!==dt)for(var pt in dt){var gt=!!dt[pt];(ht==null||gt!==!!ht[pt])&&rt.classList.toggle(pt,gt)}return dt}let timeoutAction,timeoutEnable;function withoutTransition(rt){if(typeof document>"u")return;clearTimeout(timeoutAction),clearTimeout(timeoutEnable);const it=document.createElement("style"),lt=document.createTextNode(`* {
     -webkit-transition: none !important;
     -moz-transition: none !important;
     -o-transition: none !important;
     -ms-transition: none !important;
     transition: none !important;
  }`);it.appendChild(lt);const ct=()=>document.head.appendChild(it),ht=()=>document.head.removeChild(it);if(typeof window.getComputedStyle<"u"){ct(),rt(),window.getComputedStyle(it).opacity,ht();return}if(typeof window.requestAnimationFrame<"u"){ct(),rt(),window.requestAnimationFrame(ht);return}ct(),timeoutAction=window.setTimeout(()=>{rt(),timeoutEnable=window.setTimeout(ht,120)},120)}function sanitizeClassNames(rt){return rt.filter(it=>it.length>0)}const noopStorage$1={getItem:rt=>null,setItem:(rt,it)=>{}},isBrowser=typeof document<"u",modes=["dark","light","system"],modeStorageKey=writable("mode-watcher-mode"),themeStorageKey=writable("mode-watcher-theme"),userPrefersMode=createUserPrefersMode(),systemPrefersMode=createSystemMode(),themeColors=writable(void 0),theme=createCustomTheme(),disableTransitions=writable(!0),darkClassNames=writable([]),lightClassNames=writable([]),derivedMode=createDerivedMode(),derivedTheme=createDerivedTheme();function createUserPrefersMode(){const rt="system",it=isBrowser?localStorage:noopStorage$1,lt=it.getItem(ht());let ct=isValidMode(lt)?lt:rt;function ht(){return get$2(modeStorageKey)}const{subscribe:dt,set:ft}=writable(ct,()=>{if(!isBrowser)return;const pt=gt=>{if(gt.key!==ht())return;const mt=gt.newValue;isValidMode(mt)?ft(ct=mt):ft(ct=rt)};return addEventListener("storage",pt),()=>removeEventListener("storage",pt)});function ut(pt){ft(ct=pt),it.setItem(ht(),ct)}return{subscribe:dt,set:ut}}function createCustomTheme(){const rt=isBrowser?localStorage:noopStorage$1,it=rt.getItem(ct());let lt=it??"";function ct(){return get$2(themeStorageKey)}const{subscribe:ht,set:dt}=writable(lt,()=>{if(!isBrowser)return;const ut=pt=>{if(pt.key!==ct())return;const gt=pt.newValue;dt(gt===null?lt="":lt=gt)};return addEventListener("storage",ut),()=>removeEventListener("storage",ut)});function ft(ut){dt(lt=ut),rt.setItem(ct(),lt)}return{subscribe:ht,set:ft}}function createSystemMode(){let it=!0;const{subscribe:lt,set:ct}=writable(void 0,()=>{if(!isBrowser)return;const ft=pt=>{it&&ct(pt.matches?"light":"dark")},ut=window.matchMedia("(prefers-color-scheme: light)");return ut.addEventListener("change",ft),()=>ut.removeEventListener("change",ft)});function ht(){if(!isBrowser)return;const ft=window.matchMedia("(prefers-color-scheme: light)");ct(ft.matches?"light":"dark")}function dt(ft){it=ft}return{subscribe:lt,query:ht,tracking:dt}}function createDerivedMode(){const{subscribe:rt}=derived([userPrefersMode,systemPrefersMode,themeColors,disableTransitions,darkClassNames,lightClassNames],([it,lt,ct,ht,dt,ft])=>{if(!isBrowser)return;const ut=it==="system"?lt:it,pt=sanitizeClassNames(dt),gt=sanitizeClassNames(ft);function mt(){const _t=document.documentElement,yt=document.querySelector('meta[name="theme-color"]');ut==="light"?(pt.length&&_t.classList.remove(...pt),gt.length&&_t.classList.add(...gt),_t.style.colorScheme="light",yt&&ct&&yt.setAttribute("content",ct.light)):(gt.length&&_t.classList.remove(...gt),pt.length&&_t.classList.add(...pt),_t.style.colorScheme="dark",yt&&ct&&yt.setAttribute("content",ct.dark))}return ht?withoutTransition(mt):mt(),ut});return{subscribe:rt}}function createDerivedTheme(){const{subscribe:rt}=derived([theme,disableTransitions],([it,lt])=>{if(!isBrowser)return;function ct(){document.documentElement.setAttribute("data-theme",it)}return lt?withoutTransition(ct):ct(),it});return{subscribe:rt}}function isValidMode(rt){return typeof rt!="string"?!1:modes.includes(rt)}const defaultLoading={loading:!1},loadingStateStore=writable(defaultLoading),initLoading=async(rt,it)=>{loadingStateStore.set({loading:!0,message:rt});const lt=await it;return loadingStateStore.set({loading:!1}),lt},TID={aiRepairButton:"ai-repair-button",copyMarkdown:"copy-markdown",diagramDocumentationButton:"diagram-documentation-button",errorContainer:"error-container",themeToggleButton:"theme-toggle-button"},C$2={utmSource:"mermaid_live_editor"};var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$1=freeGlobal||freeSelf||Function("return this")(),Symbol$1=root$1.Symbol,objectProto$c=Object.prototype,hasOwnProperty$a=objectProto$c.hasOwnProperty,nativeObjectToString$1=objectProto$c.toString,symToStringTag$1=Symbol$1?Symbol$1.toStringTag:void 0;function getRawTag(rt){var it=hasOwnProperty$a.call(rt,symToStringTag$1),lt=rt[symToStringTag$1];try{rt[symToStringTag$1]=void 0;var ct=!0}catch{}var ht=nativeObjectToString$1.call(rt);return ct&&(it?rt[symToStringTag$1]=lt:delete rt[symToStringTag$1]),ht}var objectProto$b=Object.prototype,nativeObjectToString=objectProto$b.toString;function objectToString(rt){return nativeObjectToString.call(rt)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$1?Symbol$1.toStringTag:void 0;function baseGetTag(rt){return rt==null?rt===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(rt)?getRawTag(rt):objectToString(rt)}function isObjectLike(rt){return rt!=null&&typeof rt=="object"}var symbolTag="[object Symbol]";function isSymbol(rt){return typeof rt=="symbol"||isObjectLike(rt)&&baseGetTag(rt)==symbolTag}var isArray=Array.isArray,reWhitespace=/\s/;function trimmedEndIndex(rt){for(var it=rt.length;it--&&reWhitespace.test(rt.charAt(it)););return it}var reTrimStart=/^\s+/;function baseTrim(rt){return rt&&rt.slice(0,trimmedEndIndex(rt)+1).replace(reTrimStart,"")}function isObject$1(rt){var it=typeof rt;return rt!=null&&(it=="object"||it=="function")}var NAN=NaN,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(rt){if(typeof rt=="number")return rt;if(isSymbol(rt))return NAN;if(isObject$1(rt)){var it=typeof rt.valueOf=="function"?rt.valueOf():rt;rt=isObject$1(it)?it+"":it}if(typeof rt!="string")return rt===0?rt:+rt;rt=baseTrim(rt);var lt=reIsBinary.test(rt);return lt||reIsOctal.test(rt)?freeParseInt(rt.slice(2),lt?2:8):reIsBadHex.test(rt)?NAN:+rt}function identity$1(rt){return rt}var asyncTag="[object AsyncFunction]",funcTag$1="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(rt){if(!isObject$1(rt))return!1;var it=baseGetTag(rt);return it==funcTag$1||it==genTag||it==asyncTag||it==proxyTag}var coreJsData=root$1["__core-js_shared__"],maskSrcKey=(function(){var rt=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return rt?"Symbol(src)_1."+rt:""})();function isMasked(rt){return!!maskSrcKey&&maskSrcKey in rt}var funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource(rt){if(rt!=null){try{return funcToString$2.call(rt)}catch{}try{return rt+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$a=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$9=objectProto$a.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$9).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(rt){if(!isObject$1(rt)||isMasked(rt))return!1;var it=isFunction(rt)?reIsNative:reIsHostCtor;return it.test(toSource(rt))}function getValue(rt,it){return rt?.[it]}function getNative(rt,it){var lt=getValue(rt,it);return baseIsNative(lt)?lt:void 0}var WeakMap=getNative(root$1,"WeakMap"),objectCreate=Object.create,baseCreate=(function(){function rt(){}return function(it){if(!isObject$1(it))return{};if(objectCreate)return objectCreate(it);rt.prototype=it;var lt=new rt;return rt.prototype=void 0,lt}})();function apply$1(rt,it,lt){switch(lt.length){case 0:return rt.call(it);case 1:return rt.call(it,lt[0]);case 2:return rt.call(it,lt[0],lt[1]);case 3:return rt.call(it,lt[0],lt[1],lt[2])}return rt.apply(it,lt)}function copyArray(rt,it){var lt=-1,ct=rt.length;for(it||(it=Array(ct));++lt<ct;)it[lt]=rt[lt];return it}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(rt){var it=0,lt=0;return function(){var ct=nativeNow(),ht=HOT_SPAN-(ct-lt);if(lt=ct,ht>0){if(++it>=HOT_COUNT)return arguments[0]}else it=0;return rt.apply(void 0,arguments)}}function constant$3(rt){return function(){return rt}}var defineProperty=(function(){try{var rt=getNative(Object,"defineProperty");return rt({},"",{}),rt}catch{}})(),baseSetToString=defineProperty?function(rt,it){return defineProperty(rt,"toString",{configurable:!0,enumerable:!1,value:constant$3(it),writable:!0})}:identity$1,setToString=shortOut(baseSetToString),MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(rt,it){var lt=typeof rt;return it=it??MAX_SAFE_INTEGER$1,!!it&&(lt=="number"||lt!="symbol"&&reIsUint.test(rt))&&rt>-1&&rt%1==0&&rt<it}function baseAssignValue(rt,it,lt){it=="__proto__"&&defineProperty?defineProperty(rt,it,{configurable:!0,enumerable:!0,value:lt,writable:!0}):rt[it]=lt}function eq(rt,it){return rt===it||rt!==rt&&it!==it}var objectProto$9=Object.prototype,hasOwnProperty$8=objectProto$9.hasOwnProperty;function assignValue(rt,it,lt){var ct=rt[it];(!(hasOwnProperty$8.call(rt,it)&&eq(ct,lt))||lt===void 0&&!(it in rt))&&baseAssignValue(rt,it,lt)}function copyObject(rt,it,lt,ct){var ht=!lt;lt||(lt={});for(var dt=-1,ft=it.length;++dt<ft;){var ut=it[dt],pt=void 0;pt===void 0&&(pt=rt[ut]),ht?baseAssignValue(lt,ut,pt):assignValue(lt,ut,pt)}return lt}var nativeMax$1=Math.max;function overRest(rt,it,lt){return it=nativeMax$1(it===void 0?rt.length-1:it,0),function(){for(var ct=arguments,ht=-1,dt=nativeMax$1(ct.length-it,0),ft=Array(dt);++ht<dt;)ft[ht]=ct[it+ht];ht=-1;for(var ut=Array(it+1);++ht<it;)ut[ht]=ct[ht];return ut[it]=lt(ft),apply$1(rt,this,ut)}}function baseRest(rt,it){return setToString(overRest(rt,it,identity$1),rt+"")}var MAX_SAFE_INTEGER=9007199254740991;function isLength(rt){return typeof rt=="number"&&rt>-1&&rt%1==0&&rt<=MAX_SAFE_INTEGER}function isArrayLike(rt){return rt!=null&&isLength(rt.length)&&!isFunction(rt)}function isIterateeCall(rt,it,lt){if(!isObject$1(lt))return!1;var ct=typeof it;return(ct=="number"?isArrayLike(lt)&&isIndex(it,lt.length):ct=="string"&&it in lt)?eq(lt[it],rt):!1}function createAssigner(rt){return baseRest(function(it,lt){var ct=-1,ht=lt.length,dt=ht>1?lt[ht-1]:void 0,ft=ht>2?lt[2]:void 0;for(dt=rt.length>3&&typeof dt=="function"?(ht--,dt):void 0,ft&&isIterateeCall(lt[0],lt[1],ft)&&(dt=ht<3?void 0:dt,ht=1),it=Object(it);++ct<ht;){var ut=lt[ct];ut&&rt(it,ut,ct,dt)}return it})}var objectProto$8=Object.prototype;function isPrototype(rt){var it=rt&&rt.constructor,lt=typeof it=="function"&&it.prototype||objectProto$8;return rt===lt}function baseTimes(rt,it){for(var lt=-1,ct=Array(rt);++lt<rt;)ct[lt]=it(lt);return ct}var argsTag$1="[object Arguments]";function baseIsArguments(rt){return isObjectLike(rt)&&baseGetTag(rt)==argsTag$1}var objectProto$7=Object.prototype,hasOwnProperty$7=objectProto$7.hasOwnProperty,propertyIsEnumerable=objectProto$7.propertyIsEnumerable,isArguments=baseIsArguments((function(){return arguments})())?baseIsArguments:function(rt){return isObjectLike(rt)&&hasOwnProperty$7.call(rt,"callee")&&!propertyIsEnumerable.call(rt,"callee")};function stubFalse(){return!1}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$2=moduleExports$2?root$1.Buffer:void 0,nativeIsBuffer=Buffer$2?Buffer$2.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse,argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag$2="[object Map]",numberTag="[object Number]",objectTag$2="[object Object]",regexpTag="[object RegExp]",setTag$2="[object Set]",stringTag="[object String]",weakMapTag$1="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag$1]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag$2]=typedArrayTags[numberTag]=typedArrayTags[objectTag$2]=typedArrayTags[regexpTag]=typedArrayTags[setTag$2]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag$1]=!1;function baseIsTypedArray(rt){return isObjectLike(rt)&&isLength(rt.length)&&!!typedArrayTags[baseGetTag(rt)]}function baseUnary(rt){return function(it){return rt(it)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal.process,nodeUtil=(function(){try{var rt=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return rt||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}})(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,objectProto$6=Object.prototype,hasOwnProperty$6=objectProto$6.hasOwnProperty;function arrayLikeKeys(rt,it){var lt=isArray(rt),ct=!lt&&isArguments(rt),ht=!lt&&!ct&&isBuffer(rt),dt=!lt&&!ct&&!ht&&isTypedArray(rt),ft=lt||ct||ht||dt,ut=ft?baseTimes(rt.length,String):[],pt=ut.length;for(var gt in rt)(it||hasOwnProperty$6.call(rt,gt))&&!(ft&&(gt=="length"||ht&&(gt=="offset"||gt=="parent")||dt&&(gt=="buffer"||gt=="byteLength"||gt=="byteOffset")||isIndex(gt,pt)))&&ut.push(gt);return ut}function overArg(rt,it){return function(lt){return rt(it(lt))}}var nativeKeys=overArg(Object.keys,Object),objectProto$5=Object.prototype,hasOwnProperty$5=objectProto$5.hasOwnProperty;function baseKeys(rt){if(!isPrototype(rt))return nativeKeys(rt);var it=[];for(var lt in Object(rt))hasOwnProperty$5.call(rt,lt)&&lt!="constructor"&&it.push(lt);return it}function nativeKeysIn(rt){var it=[];if(rt!=null)for(var lt in Object(rt))it.push(lt);return it}var objectProto$4=Object.prototype,hasOwnProperty$4=objectProto$4.hasOwnProperty;function baseKeysIn(rt){if(!isObject$1(rt))return nativeKeysIn(rt);var it=isPrototype(rt),lt=[];for(var ct in rt)ct=="constructor"&&(it||!hasOwnProperty$4.call(rt,ct))||lt.push(ct);return lt}function keysIn(rt){return isArrayLike(rt)?arrayLikeKeys(rt,!0):baseKeysIn(rt)}var nativeCreate=getNative(Object,"create");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(rt){var it=this.has(rt)&&delete this.__data__[rt];return this.size-=it?1:0,it}var HASH_UNDEFINED$1="__lodash_hash_undefined__",objectProto$3=Object.prototype,hasOwnProperty$3=objectProto$3.hasOwnProperty;function hashGet(rt){var it=this.__data__;if(nativeCreate){var lt=it[rt];return lt===HASH_UNDEFINED$1?void 0:lt}return hasOwnProperty$3.call(it,rt)?it[rt]:void 0}var objectProto$2=Object.prototype,hasOwnProperty$2=objectProto$2.hasOwnProperty;function hashHas(rt){var it=this.__data__;return nativeCreate?it[rt]!==void 0:hasOwnProperty$2.call(it,rt)}var HASH_UNDEFINED="__lodash_hash_undefined__";function hashSet(rt,it){var lt=this.__data__;return this.size+=this.has(rt)?0:1,lt[rt]=nativeCreate&&it===void 0?HASH_UNDEFINED:it,this}function Hash(rt){var it=-1,lt=rt==null?0:rt.length;for(this.clear();++it<lt;){var ct=rt[it];this.set(ct[0],ct[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(rt,it){for(var lt=rt.length;lt--;)if(eq(rt[lt][0],it))return lt;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(rt){var it=this.__data__,lt=assocIndexOf(it,rt);if(lt<0)return!1;var ct=it.length-1;return lt==ct?it.pop():splice.call(it,lt,1),--this.size,!0}function listCacheGet(rt){var it=this.__data__,lt=assocIndexOf(it,rt);return lt<0?void 0:it[lt][1]}function listCacheHas(rt){return assocIndexOf(this.__data__,rt)>-1}function listCacheSet(rt,it){var lt=this.__data__,ct=assocIndexOf(lt,rt);return ct<0?(++this.size,lt.push([rt,it])):lt[ct][1]=it,this}function ListCache(rt){var it=-1,lt=rt==null?0:rt.length;for(this.clear();++it<lt;){var ct=rt[it];this.set(ct[0],ct[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map$1=getNative(root$1,"Map");function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$1||ListCache),string:new Hash}}function isKeyable(rt){var it=typeof rt;return it=="string"||it=="number"||it=="symbol"||it=="boolean"?rt!=="__proto__":rt===null}function getMapData(rt,it){var lt=rt.__data__;return isKeyable(it)?lt[typeof it=="string"?"string":"hash"]:lt.map}function mapCacheDelete(rt){var it=getMapData(this,rt).delete(rt);return this.size-=it?1:0,it}function mapCacheGet(rt){return getMapData(this,rt).get(rt)}function mapCacheHas(rt){return getMapData(this,rt).has(rt)}function mapCacheSet(rt,it){var lt=getMapData(this,rt),ct=lt.size;return lt.set(rt,it),this.size+=lt.size==ct?0:1,this}function MapCache(rt){var it=-1,lt=rt==null?0:rt.length;for(this.clear();++it<lt;){var ct=rt[it];this.set(ct[0],ct[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT$1="Expected a function";function memoize(rt,it){if(typeof rt!="function"||it!=null&&typeof it!="function")throw new TypeError(FUNC_ERROR_TEXT$1);var lt=function(){var ct=arguments,ht=it?it.apply(this,ct):ct[0],dt=lt.cache;if(dt.has(ht))return dt.get(ht);var ft=rt.apply(this,ct);return lt.cache=dt.set(ht,ft)||dt,ft};return lt.cache=new(memoize.Cache||MapCache),lt}memoize.Cache=MapCache;var getPrototype=overArg(Object.getPrototypeOf,Object),objectTag$1="[object Object]",funcProto=Function.prototype,objectProto$1=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$1=objectProto$1.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject(rt){if(!isObjectLike(rt)||baseGetTag(rt)!=objectTag$1)return!1;var it=getPrototype(rt);if(it===null)return!0;var lt=hasOwnProperty$1.call(it,"constructor")&&it.constructor;return typeof lt=="function"&&lt instanceof lt&&funcToString.call(lt)==objectCtorString}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(rt){var it=this.__data__,lt=it.delete(rt);return this.size=it.size,lt}function stackGet(rt){return this.__data__.get(rt)}function stackHas(rt){return this.__data__.has(rt)}var LARGE_ARRAY_SIZE=200;function stackSet(rt,it){var lt=this.__data__;if(lt instanceof ListCache){var ct=lt.__data__;if(!Map$1||ct.length<LARGE_ARRAY_SIZE-1)return ct.push([rt,it]),this.size=++lt.size,this;lt=this.__data__=new MapCache(ct)}return lt.set(rt,it),this.size=lt.size,this}function Stack(rt){var it=this.__data__=new ListCache(rt);this.size=it.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer$1=moduleExports?root$1.Buffer:void 0,allocUnsafe=Buffer$1?Buffer$1.allocUnsafe:void 0;function cloneBuffer(rt,it){if(it)return rt.slice();var lt=rt.length,ct=allocUnsafe?allocUnsafe(lt):new rt.constructor(lt);return rt.copy(ct),ct}var DataView$1=getNative(root$1,"DataView"),Promise$1=getNative(root$1,"Promise"),Set$1=getNative(root$1,"Set"),mapTag$1="[object Map]",objectTag="[object Object]",promiseTag="[object Promise]",setTag$1="[object Set]",weakMapTag="[object WeakMap]",dataViewTag="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$1),weakMapCtorString=toSource(WeakMap),getTag=baseGetTag;(DataView$1&&getTag(new DataView$1(new ArrayBuffer(1)))!=dataViewTag||Map$1&&getTag(new Map$1)!=mapTag$1||Promise$1&&getTag(Promise$1.resolve())!=promiseTag||Set$1&&getTag(new Set$1)!=setTag$1||WeakMap&&getTag(new WeakMap)!=weakMapTag)&&(getTag=function(rt){var it=baseGetTag(rt),lt=it==objectTag?rt.constructor:void 0,ct=lt?toSource(lt):"";if(ct)switch(ct){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag$1;case promiseCtorString:return promiseTag;case setCtorString:return setTag$1;case weakMapCtorString:return weakMapTag}return it});var Uint8Array$1=root$1.Uint8Array;function cloneArrayBuffer(rt){var it=new rt.constructor(rt.byteLength);return new Uint8Array$1(it).set(new Uint8Array$1(rt)),it}function cloneTypedArray(rt,it){var lt=it?cloneArrayBuffer(rt.buffer):rt.buffer;return new rt.constructor(lt,rt.byteOffset,rt.length)}function initCloneObject(rt){return typeof rt.constructor=="function"&&!isPrototype(rt)?baseCreate(getPrototype(rt)):{}}function createBaseFor(rt){return function(it,lt,ct){for(var ht=-1,dt=Object(it),ft=ct(it),ut=ft.length;ut--;){var pt=ft[++ht];if(lt(dt[pt],pt,dt)===!1)break}return it}}var baseFor=createBaseFor(),now$1=function(){return root$1.Date.now()},FUNC_ERROR_TEXT="Expected a function",nativeMax=Math.max,nativeMin=Math.min;function debounce(rt,it,lt){var ct,ht,dt,ft,ut,pt,gt=0,mt=!1,_t=!1,yt=!0;if(typeof rt!="function")throw new TypeError(FUNC_ERROR_TEXT);it=toNumber(it)||0,isObject$1(lt)&&(mt=!!lt.leading,_t="maxWait"in lt,dt=_t?nativeMax(toNumber(lt.maxWait)||0,it):dt,yt="trailing"in lt?!!lt.trailing:yt);function bt(Lt){var At=ct,It=ht;return ct=ht=void 0,gt=Lt,ft=rt.apply(It,At),ft}function xt(Lt){return gt=Lt,ut=setTimeout(St,it),mt?bt(Lt):ft}function wt(Lt){var At=Lt-pt,It=Lt-gt,Bt=it-At;return _t?nativeMin(Bt,dt-It):Bt}function Ct(Lt){var At=Lt-pt,It=Lt-gt;return pt===void 0||At>=it||At<0||_t&&It>=dt}function St(){var Lt=now$1();if(Ct(Lt))return Tt(Lt);ut=setTimeout(St,wt(Lt))}function Tt(Lt){return ut=void 0,yt&&ct?bt(Lt):(ct=ht=void 0,ft)}function vt(){ut!==void 0&&clearTimeout(ut),gt=0,ct=pt=ht=ut=void 0}function kt(){return ut===void 0?ft:Tt(now$1())}function Et(){var Lt=now$1(),At=Ct(Lt);if(ct=arguments,ht=this,pt=Lt,At){if(ut===void 0)return xt(pt);if(_t)return clearTimeout(ut),ut=setTimeout(St,it),bt(pt)}return ut===void 0&&(ut=setTimeout(St,it)),ft}return Et.cancel=vt,Et.flush=kt,Et}function assignMergeValue(rt,it,lt){(lt!==void 0&&!eq(rt[it],lt)||lt===void 0&&!(it in rt))&&baseAssignValue(rt,it,lt)}function isArrayLikeObject(rt){return isObjectLike(rt)&&isArrayLike(rt)}function safeGet(rt,it){if(!(it==="constructor"&&typeof rt[it]=="function")&&it!="__proto__")return rt[it]}function toPlainObject(rt){return copyObject(rt,keysIn(rt))}function baseMergeDeep(rt,it,lt,ct,ht,dt,ft){var ut=safeGet(rt,lt),pt=safeGet(it,lt),gt=ft.get(pt);if(gt){assignMergeValue(rt,lt,gt);return}var mt=dt?dt(ut,pt,lt+"",rt,it,ft):void 0,_t=mt===void 0;if(_t){var yt=isArray(pt),bt=!yt&&isBuffer(pt),xt=!yt&&!bt&&isTypedArray(pt);mt=pt,yt||bt||xt?isArray(ut)?mt=ut:isArrayLikeObject(ut)?mt=copyArray(ut):bt?(_t=!1,mt=cloneBuffer(pt,!0)):xt?(_t=!1,mt=cloneTypedArray(pt,!0)):mt=[]:isPlainObject(pt)||isArguments(pt)?(mt=ut,isArguments(ut)?mt=toPlainObject(ut):(!isObject$1(ut)||isFunction(ut))&&(mt=initCloneObject(pt))):_t=!1}_t&&(ft.set(pt,mt),ht(mt,pt,ct,dt,ft),ft.delete(pt)),assignMergeValue(rt,lt,mt)}function baseMerge(rt,it,lt,ct,ht){rt!==it&&baseFor(it,function(dt,ft){if(ht||(ht=new Stack),isObject$1(dt))baseMergeDeep(rt,it,ft,lt,baseMerge,ct,ht);else{var ut=ct?ct(safeGet(rt,ft),dt,ft+"",rt,it,ht):void 0;ut===void 0&&(ut=dt),assignMergeValue(rt,ft,ut)}},keysIn)}var mapTag="[object Map]",setTag="[object Set]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function isEmpty(rt){if(rt==null)return!0;if(isArrayLike(rt)&&(isArray(rt)||typeof rt=="string"||typeof rt.splice=="function"||isBuffer(rt)||isTypedArray(rt)||isArguments(rt)))return!rt.length;var it=getTag(rt);if(it==mapTag||it==setTag)return!rt.size;if(isPrototype(rt))return!baseKeys(rt).length;for(var lt in rt)if(hasOwnProperty.call(rt,lt))return!1;return!0}var merge$1=createAssigner(function(rt,it,lt){baseMerge(rt,it,lt)});function findMostRelevantLineNumber(rt,it){const lt=it.split(`
`);let ct=-1,ht=0;for(const[dt,ft]of lt.entries()){let ut=0;for(let pt=0;pt<=rt.length;pt++)for(let gt=pt+1;gt<=rt.length;gt++){const mt=rt.slice(pt,gt);ft.includes(mt)&&(ut=Math.max(ut,mt.length))}ut>ht&&(ht=ut,ct=dt+1)}return ct}function replaceLineNumberInErrorMessage(rt,it){const lt=/Parse error on line (\d+):/,ct=/Lexical error on line (\d+)/;return rt.replace(lt,`Parse error on line ${it}:`).replace(ct,`Lexical error on line ${it}:`)}function extractErrorLineText(rt){const it=/Error: Parse error on line \d+:\n(.+)\n+/,lt=rt.match(it);if(lt)return lt[1].slice(3);const ct=/Error: Lexical error on line \d+. Unrecognized text.\n(.+)\n-+/,ht=rt.match(ct);return ht?ht[1].slice(3):""}var flowchart_default={id:"flowchart-v2",name:"Flowchart",description:"Visualize flowcharts and directed graphs",examples:[{title:"Basic Flowchart",isDefault:!0,code:`flowchart TD
    A[Christmas] -->|Get money| B(Go shopping)
    B --> C{Let me think}
    C -->|One| D[Laptop]
    C -->|Two| E[iPhone]
    C -->|Three| F[fa:fa-car Car]`}]},c4_default={id:"c4",name:"C4 Diagram",description:"Visualize software architecture using the C4 model (Context, Container, Component, Code)",examples:[{title:"Internet Banking System Context",isDefault:!0,code:`C4Context
    title System Context diagram for Internet Banking System
    Enterprise_Boundary(b0, "BankBoundary0") {
        Person(customerA, "Banking Customer A", "A customer of the bank, with personal bank accounts.")
        Person(customerB, "Banking Customer B")
        Person_Ext(customerC, "Banking Customer C", "desc")

        Person(customerD, "Banking Customer D", "A customer of the bank, <br/> with personal bank accounts.")

        System(SystemAA, "Internet Banking System", "Allows customers to view information about their bank accounts, and make payments.")

        Enterprise_Boundary(b1, "BankBoundary") {
            SystemDb_Ext(SystemE, "Mainframe Banking System", "Stores all of the core banking information about customers, accounts, transactions, etc.")

            System_Boundary(b2, "BankBoundary2") {
                System(SystemA, "Banking System A")
                System(SystemB, "Banking System B", "A system of the bank, with personal bank accounts. next line.")
            }

            System_Ext(SystemC, "E-mail system", "The internal Microsoft Exchange e-mail system.")
            SystemDb(SystemD, "Banking System D Database", "A system of the bank, with personal bank accounts.")

            Boundary(b3, "BankBoundary3", "boundary") {
                SystemQueue(SystemF, "Banking System F Queue", "A system of the bank.")
                SystemQueue_Ext(SystemG, "Banking System G Queue", "A system of the bank, with personal bank accounts.")
            }
        }
    }

    BiRel(customerA, SystemAA, "Uses")
    BiRel(SystemAA, SystemE, "Uses")
    Rel(SystemAA, SystemC, "Sends e-mails", "SMTP")
    Rel(SystemC, customerA, "Sends e-mails to")`}]},kanban_default={id:"kanban",name:"Kanban Diagram",description:"Visualize work items in a Kanban board",examples:[{title:"Kanban Diagram",isDefault:!0,code:`---
config:
  kanban:
    ticketBaseUrl: 'https://github.com/mermaid-js/mermaid/issues/#TICKET#'
---
kanban
  Todo
    [Create Documentation]
    docs[Create Blog about the new diagram]
  [In progress]
    id6[Create renderer so that it works in all cases. We also add some extra text here for testing purposes. And some more just for the extra flare.]
  id9[Ready for deploy]
    id8[Design grammar]@{ assigned: 'knsv' }
  id10[Ready for test]
    id4[Create parsing tests]@{ ticket: 2038, assigned: 'K.Sveidqvist', priority: 'High' }
    id66[last item]@{ priority: 'Very Low', assigned: 'knsv' }
  id11[Done]
    id5[define getData]
    id2[Title of diagram is more than 100 chars when user duplicates diagram with 100 char]@{ ticket: 2036, priority: 'Very High'}
    id3[Update DB function]@{ ticket: 2037, assigned: knsv, priority: 'High' }

  id12[Can't reproduce]
    id3[Weird flickering in Firefox]
`}]},class_default={id:"classDiagram",name:"Class Diagram",description:"Visualize class structures and relationships in object-oriented programming",examples:[{title:"Basic Class Inheritance",isDefault:!0,code:`classDiagram
    Animal <|-- Duck
    Animal <|-- Fish
    Animal <|-- Zebra
    Animal : +int age
    Animal : +String gender
    Animal: +isMammal()
    Animal: +mate()
    class Duck{
      +String beakColor
      +swim()
      +quack()
    }
    class Fish{
      -int sizeInFeet
      -canEat()
    }
    class Zebra{
      +bool is_wild
      +run()
    }`}]},sequence_default={id:"sequence",name:"Sequence Diagram",description:"Visualize interactions between objects over time",examples:[{title:"Basic Sequence",isDefault:!0,code:`sequenceDiagram
    Alice->>+John: Hello John, how are you?
    Alice->>+John: John, can you hear me?
    John-->>-Alice: Hi Alice, I can hear you!
    John-->>-Alice: I feel great!`}]},pie_default={id:"pie",name:"Pie Chart",description:"Visualize data as proportional segments of a circle",examples:[{title:"Basic Pie Chart",isDefault:!0,code:`pie title Pets adopted by volunteers
    "Dogs" : 386
    "Cats" : 85
    "Rats" : 15`}]},user_journey_default={id:"journey",name:"User Journey Diagram",description:"Visualize user interactions and experiences with a system",examples:[{title:"My Working Day",isDefault:!0,code:`journey
    title My working day
    section Go to work
      Make tea: 5: Me
      Go upstairs: 3: Me
      Do work: 1: Me, Cat
    section Go home
      Go downstairs: 5: Me
      Sit down: 5: Me`}]},mindmap_default={id:"mindmap",name:"Mindmap",description:"Visualize ideas and concepts in a tree-like structure",examples:[{title:"Basic Mindmap",isDefault:!0,code:`mindmap
  root((mindmap))
    Origins
      Long history
      ::icon(fa fa-book)
      Popularisation
        British popular psychology author Tony Buzan
    Research
      On effectiveness<br/>and features
      On Automatic creation
        Uses
            Creative techniques
            Strategic planning
            Argument mapping
    Tools
      Pen and paper
      Mermaid`}]},requirement_default={id:"requirement",name:"Requirement Diagram",description:"Visualize system requirements and their relationships",examples:[{title:"Basic Requirements",code:`requirementDiagram

    requirement test_req {
    id: 1
    text: the test text.
    risk: high
    verifymethod: test
    }

    element test_entity {
    type: simulation
    }

    test_entity - satisfies -> test_req`,isDefault:!0}]},radar_default={id:"radar",name:"Radar Diagram",description:"Visualize data in a radial format",examples:[{title:"Student Grades",isDefault:!0,code:`---
title: "Grades"
---
radar-beta
  axis m["Math"], s["Science"], e["English"]
  axis h["History"], g["Geography"], a["Art"]
  curve a["Alice"]{85, 90, 80, 70, 75, 90}
  curve b["Bob"]{70, 75, 85, 80, 90, 85}

  max 100
  min 0
`}]},state_default={id:"stateDiagram",name:"State Diagram",description:"Visualize the states and transitions of a system",examples:[{title:"Basic State Diagram",code:`stateDiagram-v2
    [*] --> Still
    Still --> [*]
    Still --> Moving
    Moving --> Still
    Moving --> Crash
    Crash --> [*]`,isDefault:!0}]},er_default={id:"er",name:"Entity Relationship Diagram",description:"Visualize database schemas and relationships between entities",examples:[{title:"Basic ER Schema",isDefault:!0,code:`erDiagram
    CUSTOMER ||--o{ ORDER : places
    ORDER ||--|{ ORDER_ITEM : contains
    PRODUCT ||--o{ ORDER_ITEM : includes
    CUSTOMER {
        string id
        string name
        string email
    }
    ORDER {
        string id
        date orderDate
        string status
    }
    PRODUCT {
        string id
        string name
        float price
    }
    ORDER_ITEM {
        int quantity
        float price
    }`}]},git_default={id:"gitGraph",name:"Git Graph",description:"Visualize Git repository history and branch relationships",examples:[{title:"Basic Git Flow",isDefault:!0,code:`gitGraph
    commit
    branch develop
    checkout develop
    commit
    commit
    checkout main
    merge develop
    commit
    branch feature
    checkout feature
    commit
    commit
    checkout main
    merge feature`}]},architecture_default={id:"architecture",name:"Architecture Diagram",description:"Visualize system architecture and components",examples:[{title:"Basic System Architecture",isDefault:!0,code:`architecture-beta
    group api(cloud)[API]

    service db(database)[Database] in api
    service disk1(disk)[Storage] in api
    service disk2(disk)[Storage] in api
    service server(server)[Server] in api

    db:L -- R:server
    disk1:T -- B:server
    disk2:T -- B:db`}]},xychart_default={id:"xychart",name:"XY Chart",description:"Create scatter plots and line charts with customizable axes",examples:[{title:"Sales Revenue",isDefault:!0,code:`xychart-beta
    title "Sales Revenue"
    x-axis [jan, feb, mar, apr, may, jun, jul, aug, sep, oct, nov, dec]
    y-axis "Revenue (in $)" 4000 --> 11000
    bar [5000, 6000, 7500, 8200, 9500, 10500, 11000, 10200, 9200, 8500, 7000, 6000]
    line [5000, 6000, 7500, 8200, 9500, 10500, 11000, 10200, 9200, 8500, 7000, 6000]`}]},sankey_default={id:"sankey",name:"Sankey Diagram",description:"Visualize flow quantities between different stages or processes",examples:[{title:"Energy Flow",isDefault:!0,code:`---
config:
  sankey:
    showValues: false
---
sankey-beta

Agricultural 'waste',Bio-conversion,124.729
Bio-conversion,Liquid,0.597
Bio-conversion,Losses,26.862
Bio-conversion,Solid,280.322
Bio-conversion,Gas,81.144
Biofuel imports,Liquid,35
Biomass imports,Solid,35
Coal imports,Coal,11.606
Coal reserves,Coal,63.965
Coal,Solid,75.571
District heating,Industry,10.639
District heating,Heating and cooling - commercial,22.505
District heating,Heating and cooling - homes,46.184
Electricity grid,Over generation / exports,104.453
Electricity grid,Heating and cooling - homes,113.726
Electricity grid,H2 conversion,27.14
Electricity grid,Industry,342.165
Electricity grid,Road transport,37.797
Electricity grid,Agriculture,4.412
Electricity grid,Heating and cooling - commercial,40.858
Electricity grid,Losses,56.691
Electricity grid,Rail transport,7.863
Electricity grid,Lighting & appliances - commercial,90.008
Electricity grid,Lighting & appliances - homes,93.494
Gas imports,NGas,40.719
Gas reserves,NGas,82.233
Gas,Heating and cooling - commercial,0.129
Gas,Losses,1.401
Gas,Thermal generation,151.891
Gas,Agriculture,2.096
Gas,Industry,48.58
Geothermal,Electricity grid,7.013
H2 conversion,H2,20.897
H2 conversion,Losses,6.242
H2,Road transport,20.897
Hydro,Electricity grid,6.995
Liquid,Industry,121.066
Liquid,International shipping,128.69
Liquid,Road transport,135.835
Liquid,Domestic aviation,14.458
Liquid,International aviation,206.267
Liquid,Agriculture,3.64
Liquid,National navigation,33.218
Liquid,Rail transport,4.413
Marine algae,Bio-conversion,4.375
NGas,Gas,122.952
Nuclear,Thermal generation,839.978
Oil imports,Oil,504.287
Oil reserves,Oil,107.703
Oil,Liquid,611.99
Other waste,Solid,56.587
Other waste,Bio-conversion,77.81
Pumped heat,Heating and cooling - homes,193.026
Pumped heat,Heating and cooling - commercial,70.672
Solar PV,Electricity grid,59.901
Solar Thermal,Heating and cooling - homes,19.263
Solar,Solar Thermal,19.263
Solar,Solar PV,59.901
Solid,Agriculture,0.882
Solid,Thermal generation,400.12
Solid,Industry,46.477
Thermal generation,Electricity grid,525.531
Thermal generation,Losses,787.129
Thermal generation,District heating,79.329
Tidal,Electricity grid,9.452
UK land based bioenergy,Bio-conversion,182.01
Wave,Electricity grid,19.013
Wind,Electricity grid,289.366`}]},gantt_default={id:"gantt",name:"Gantt Chart",description:"Visualize project schedules and timelines",examples:[{title:"Basic Project Timeline",isDefault:!0,code:`gantt
    title A Gantt Diagram
    dateFormat  YYYY-MM-DD
    section Section
    A task           :a1, 2014-01-01, 30d
    Another task     :after a1  , 20d
    section Another
    Task in sec      :2014-01-12  , 12d
    another task      : 24d`}]},timeline_default={id:"timeline",name:"Timeline Diagram",description:"Visualize events and milestones in chronological order",examples:[{title:"Project Timeline",isDefault:!0,code:`timeline
    title History of Social Media Platform
    2002 : LinkedIn
    2004 : Facebook
         : Google
    2005 : YouTube
    2006 : Twitter`}]},quadrant_chart_default={id:"quadrantChart",name:"Quadrant Chart",description:"Visualize items in a 2x2 matrix based on two variables",examples:[{title:"Product Positioning",isDefault:!0,code:`quadrantChart
    title Reach and engagement of campaigns
    x-axis Low Reach --> High Reach
    y-axis Low Engagement --> High Engagement
    quadrant-1 We should expand
    quadrant-2 Need to promote
    quadrant-3 Re-evaluate
    quadrant-4 May be improved
    Campaign A: [0.3, 0.6]
    Campaign B: [0.45, 0.23]
    Campaign C: [0.57, 0.69]
    Campaign D: [0.78, 0.34]
    Campaign E: [0.40, 0.34]
    Campaign F: [0.35, 0.78]`}]},packet_default={id:"packet",name:"Packet Diagram",description:"Visualize packet data and network traffic",examples:[{title:"TCP Packet",isDefault:!0,code:`---
title: "TCP Packet"
---
packet
0-15: "Source Port"
16-31: "Destination Port"
32-63: "Sequence Number"
64-95: "Acknowledgment Number"
96-99: "Data Offset"
100-105: "Reserved"
106: "URG"
107: "ACK"
108: "PSH"
109: "RST"
110: "SYN"
111: "FIN"
112-127: "Window"
128-143: "Checksum"
144-159: "Urgent Pointer"
160-191: "(Options and Padding)"
192-255: "Data (variable length)"`}]},block_default={id:"block",name:"Block Diagram",description:"Create block-based visualizations with beta styling",examples:[{title:"Basic Block Layout",isDefault:!0,code:`block-beta
columns 1
  db(("DB"))
  blockArrowId6<["&nbsp;&nbsp;&nbsp;"]>(down)
  block:ID
    A
    B["A wide one in the middle"]
    C
  end
  space
  D
  ID --> D
  C --> D
  style B fill:#969,stroke:#333,stroke-width:4px`}]},treemap_default={id:"treemap",name:"Treemap",description:"Visualize hierarchical data as nested rectangles",examples:[{title:"Treemap",isDefault:!0,code:`treemap-beta
"Section 1"
    "Leaf 1.1": 12
    "Section 1.2"
      "Leaf 1.2.1": 12
"Section 2"
    "Leaf 2.1": 20
    "Leaf 2.2": 25`}]},diagramData=[flowchart_default,c4_default,kanban_default,class_default,sequence_default,pie_default,user_journey_default,mindmap_default,requirement_default,radar_default,state_default,er_default,git_default,architecture_default,xychart_default,sankey_default,gantt_default,timeline_default,quadrant_chart_default,packet_default,block_default,treemap_default],__defProp$3=Object.defineProperty,__name$3=(rt,it)=>__defProp$3(rt,"name",{value:it,configurable:!0}),loader$4=__name$3(async()=>await __vitePreload(()=>import("./LCGG3ZJU.js"),[],import.meta.url),"loader"),algos=["elk.stress","elk.force","elk.mrtree","elk.sporeOverlap"],layouts=[{name:"elk",loader:loader$4,algorithm:"elk.layered"},...algos.map(rt=>({name:rt,loader:loader$4,algorithm:rt}))],layouts_default$1=layouts;class Tree{constructor(it,lt,ct,ht){this.w=it,this.h=lt,this.y=ct,this.c=ht,this.cs=ht.length,this.x=0,this.prelim=0,this.mod=0,this.shift=0,this.change=0,this.tl=null,this.tr=null,this.el=null,this.er=null,this.msel=0,this.mser=0}}function setExtremes(rt){rt.cs===0?(rt.el=rt,rt.er=rt,rt.msel=rt.mser=0):(rt.el=rt.c[0].el,rt.msel=rt.c[0].msel,rt.er=rt.c[rt.cs-1].er,rt.mser=rt.c[rt.cs-1].mser)}function bottom(rt){return rt.y+rt.h}class IYL{constructor(it,lt,ct){this.lowY=it,this.index=lt,this.next=ct}}function updateIYL(rt,it,lt){for(;lt!==null&&rt>=lt.lowY;)lt=lt.next;return new IYL(rt,it,lt)}function distributeExtra(rt,it,lt,ct){if(lt!==it-1){const ht=it-lt;rt.c[lt+1].shift+=ct/ht,rt.c[it].shift-=ct/ht,rt.c[it].change-=ct-ct/ht}}function moveSubtree(rt,it,lt,ct){rt.c[it].mod+=ct,rt.c[it].msel+=ct,rt.c[it].mser+=ct,distributeExtra(rt,it,lt,ct)}function nextLeftContour(rt){return rt.cs===0?rt.tl:rt.c[0]}function nextRightContour(rt){return rt.cs===0?rt.tr:rt.c[rt.cs-1]}function setLeftThread(rt,it,lt,ct){const ht=rt.c[0].el;ht.tl=lt;const dt=ct-lt.mod-rt.c[0].msel;ht.mod+=dt,ht.prelim-=dt,rt.c[0].el=rt.c[it].el,rt.c[0].msel=rt.c[it].msel}function setRightThread(rt,it,lt,ct){const ht=rt.c[it].er;ht.tr=lt;const dt=ct-lt.mod-rt.c[it].mser;ht.mod+=dt,ht.prelim-=dt,rt.c[it].er=rt.c[it-1].er,rt.c[it].mser=rt.c[it-1].mser}function seperate(rt,it,lt){let ct=rt.c[it-1],ht=ct.mod,dt=rt.c[it],ft=dt.mod;for(;ct!==null&&dt!==null;){bottom(ct)>lt.lowY&&(lt=lt.next);const ut=ht+ct.prelim+ct.w-(ft+dt.prelim);ut>0&&(ft+=ut,moveSubtree(rt,it,lt.index,ut));const pt=bottom(ct),gt=bottom(dt);pt<=gt&&(ct=nextRightContour(ct),ct!==null&&(ht+=ct.mod)),pt>=gt&&(dt=nextLeftContour(dt),dt!==null&&(ft+=dt.mod))}ct===null&&dt!==null?setLeftThread(rt,it,dt,ft):ct!==null&&dt===null&&setRightThread(rt,it,ct,ht)}function positionRoot(rt){rt.prelim=(rt.c[0].prelim+rt.c[0].mod+rt.c[rt.cs-1].mod+rt.c[rt.cs-1].prelim+rt.c[rt.cs-1].w)/2-rt.w/2}function firstWalk(rt){if(rt.cs===0){setExtremes(rt);return}firstWalk(rt.c[0]);let it=updateIYL(bottom(rt.c[0].el),0,null);for(let lt=1;lt<rt.cs;lt++){firstWalk(rt.c[lt]);const ct=bottom(rt.c[lt].er);seperate(rt,lt,it),it=updateIYL(ct,lt,it)}positionRoot(rt),setExtremes(rt)}function addChildSpacing(rt){let it=0,lt=0;for(let ct=0;ct<rt.cs;ct++)it+=rt.c[ct].shift,lt+=it+rt.c[ct].change,rt.c[ct].mod+=lt}function secondWalk(rt,it){it+=rt.mod,rt.x=rt.prelim+it,addChildSpacing(rt);for(let lt=0;lt<rt.cs;lt++)secondWalk(rt.c[lt],it)}function layout(rt){firstWalk(rt),secondWalk(rt,0)}class BoundingBox{constructor(it,lt){this.gap=it,this.bottomPadding=lt}addBoundingBox(it,lt){return{width:it+this.gap,height:lt+this.bottomPadding}}removeBoundingBox(it,lt){return{x:it+this.gap/2,y:lt}}}class Layout{constructor(it){this.bb=it}layout(it){const lt=this.convert(it);layout(lt);const{boundingBox:ct,result:ht}=this.assignLayout(lt,it);return{result:ht,boundingBox:ct}}convert(it,lt=0){if(it===null)return null;const{width:ct,height:ht}=this.bb.addBoundingBox(it.width,it.height);let dt=[];if(it.children&&it.children.length)for(let ft=0;ft<it.children.length;ft++)dt[ft]=this.convert(it.children[ft],lt+ht);return new Tree(ct,ht,lt,dt)}assignCoordinates(it,lt){const{x:ct,y:ht}=this.bb.removeBoundingBox(it.x,it.y);lt.x=ct,lt.y=ht;for(let dt=0;dt<it.c.length;dt++)this.assignCoordinates(it.c[dt],lt.children[dt])}getSize(it,lt=null){const{x:ct,y:ht,width:dt,height:ft}=it;if(lt===null&&(lt={left:ct,right:ct+dt,top:ht,bottom:ht+ft}),lt.left=Math.min(lt.left,ct),lt.right=Math.max(lt.right,ct+dt),lt.top=Math.min(lt.top,ht),lt.bottom=Math.max(lt.bottom,ht+ft),it.children)for(const ut of it.children)this.getSize(ut,lt);return lt}assignLayout(it,lt,ct=null){const{x:ht,y:dt}=this.bb.removeBoundingBox(it.x,it.y);lt.x=ht,lt.y=dt;const{width:ft,height:ut}=lt;ct===null&&(ct={left:ht,right:ht+ft,top:dt,bottom:dt+ut}),ct.left=Math.min(ct.left,ht),ct.right=Math.max(ct.right,ht+ft),ct.top=Math.min(ct.top,dt),ct.bottom=Math.max(ct.bottom,dt+ut);for(let pt=0;pt<it.c.length;pt++)this.assignLayout(it.c[pt],lt.children[pt],ct);return{result:lt,boundingBox:ct}}}var __defProp$2=Object.defineProperty,__name$2=(rt,it)=>__defProp$2(rt,"name",{value:it,configurable:!0});function executeTidyTreeLayout(rt){let it=50;return new Promise((lt,ct)=>{try{if(!rt.nodes||!Array.isArray(rt.nodes)||rt.nodes.length===0)throw new Error("No nodes found in layout data");(!rt.edges||!Array.isArray(rt.edges))&&(rt.edges=[]);const{leftTree:ht,rightTree:dt,rootNode:ft}=convertToDualTreeFormat(rt),ut=20,pt=40;it=30;const gt=new BoundingBox(ut,pt),mt=new Layout(gt);let _t=null,yt=null;ht&&(_t=mt.layout(ht).result),dt&&(yt=mt.layout(dt).result);const bt=combineAndPositionTrees(ft,_t,yt),xt=calculateEdgePositions(rt.edges,bt,it);lt({nodes:bt,edges:xt})}catch(ht){ct(ht)}})}__name$2(executeTidyTreeLayout,"executeTidyTreeLayout");function convertToDualTreeFormat(rt){const{nodes:it,edges:lt}=rt,ct=new Map;it.forEach(xt=>ct.set(xt.id,xt));const ht=new Map,dt=new Map;lt.forEach(xt=>{const wt=xt.start,Ct=xt.end;wt&&Ct&&(ht.has(wt)||ht.set(wt,[]),ht.get(wt).push(Ct),dt.set(Ct,wt))});const ft=it.find(xt=>!dt.has(xt.id));if(!ft&&it.length===0)throw new Error("No nodes available to create tree");const ut=ft??it[0],pt={id:ut.id,width:ut.width??100,height:ut.height??50,_originalNode:ut},gt=ht.get(ut.id)??[],mt=[],_t=[];gt.forEach((xt,wt)=>{wt%2===0?mt.push(xt):_t.push(xt)});const yt=mt.length>0?buildSubTree(mt,ht,ct):null,bt=_t.length>0?buildSubTree(_t,ht,ct):null;return{leftTree:yt,rightTree:bt,rootNode:pt}}__name$2(convertToDualTreeFormat,"convertToDualTreeFormat");function buildSubTree(rt,it,lt){return{id:`virtual-root-${Math.random()}`,width:1,height:1,children:rt.map(ht=>lt.get(ht)).filter(ht=>ht!==void 0).map(ht=>convertNodeToTidyTreeTransposed(ht,it,lt))}}__name$2(buildSubTree,"buildSubTree");function convertNodeToTidyTreeTransposed(rt,it,lt){const ht=(it.get(rt.id)??[]).map(dt=>lt.get(dt)).filter(dt=>dt!==void 0).map(dt=>convertNodeToTidyTreeTransposed(dt,it,lt));return{id:rt.id,width:rt.height??50,height:rt.width??100,children:ht.length>0?ht:void 0,_originalNode:rt}}__name$2(convertNodeToTidyTreeTransposed,"convertNodeToTidyTreeTransposed");function combineAndPositionTrees(rt,it,lt){const ct=[],ft=rt.width/2+30,ut=[],pt=[];it?.children&&positionLeftTreeBidirectional(it.children,ut,0-ft,0),lt?.children&&positionRightTreeBidirectional(lt.children,pt,0+ft,0);let gt=0,mt=0;if(ut.length>0){const Ct=[...new Set(ut.map(Tt=>Tt.x))].sort((Tt,vt)=>vt-Tt)[0],St=ut.filter(Tt=>Tt.x===Ct);if(St.length>0){const Tt=Math.min(...St.map(kt=>kt.y-(kt.height??50)/2)),vt=Math.max(...St.map(kt=>kt.y+(kt.height??50)/2));gt=(Tt+vt)/2}}if(pt.length>0){const Ct=[...new Set(pt.map(Tt=>Tt.x))].sort((Tt,vt)=>Tt-vt)[0],St=pt.filter(Tt=>Tt.x===Ct);if(St.length>0){const Tt=Math.min(...St.map(kt=>kt.y-(kt.height??50)/2)),vt=Math.max(...St.map(kt=>kt.y+(kt.height??50)/2));mt=(Tt+vt)/2}}const _t=-gt,yt=-mt;ct.push({id:String(rt.id),x:0,y:20,section:"root",width:rt._originalNode?.width??rt.width,height:rt._originalNode?.height??rt.height,originalNode:rt._originalNode});const bt=ut.map(wt=>({id:wt.id,x:wt.x-(wt.width??0)/2,y:wt.y+_t+(wt.height??0)/2,section:"left",width:wt.width,height:wt.height,originalNode:wt.originalNode})),xt=pt.map(wt=>({id:wt.id,x:wt.x+(wt.width??0)/2,y:wt.y+yt+(wt.height??0)/2,section:"right",width:wt.width,height:wt.height,originalNode:wt.originalNode}));return ct.push(...bt),ct.push(...xt),ct}__name$2(combineAndPositionTrees,"combineAndPositionTrees");function positionLeftTreeBidirectional(rt,it,lt,ct){rt.forEach(ht=>{const dt=ht.y??0,ft=ht.x??0,ut=ht._originalNode?.width??100,pt=ht._originalNode?.height??50,gt=ct+ft;it.push({id:String(ht.id),x:lt-dt,y:gt,width:ut,height:pt,originalNode:ht._originalNode}),ht.children&&positionLeftTreeBidirectional(ht.children,it,lt,ct)})}__name$2(positionLeftTreeBidirectional,"positionLeftTreeBidirectional");function positionRightTreeBidirectional(rt,it,lt,ct){rt.forEach(ht=>{const dt=ht.y??0,ft=ht.x??0,ut=ht._originalNode?.width??100,pt=ht._originalNode?.height??50,gt=ct+ft;it.push({id:String(ht.id),x:lt+dt,y:gt,width:ut,height:pt,originalNode:ht._originalNode}),ht.children&&positionRightTreeBidirectional(ht.children,it,lt,ct)})}__name$2(positionRightTreeBidirectional,"positionRightTreeBidirectional");function computeCircleEdgeIntersection(rt,it,lt){const ct=Math.min(rt.width,rt.height)/2,ht=lt.x-it.x,dt=lt.y-it.y,ft=Math.sqrt(ht*ht+dt*dt);if(ft===0)return it;const ut=ht/ft,pt=dt/ft;return{x:rt.x-ut*ct,y:rt.y-pt*ct}}__name$2(computeCircleEdgeIntersection,"computeCircleEdgeIntersection");function intersection$1(rt,it,lt){const ct=rt.x,ht=rt.y;if(!rt.width||!rt.height)return{x:it.x,y:it.y};const dt=Math.abs(ct-lt.x),ft=rt?.width/2;let ut=lt.x<it.x?ft-dt:ft+dt;const pt=rt.height/2,gt=Math.abs(it.y-lt.y),mt=Math.abs(it.x-lt.x);if(Math.abs(ht-it.y)*ft>Math.abs(ct-it.x)*pt){const _t=lt.y<it.y?it.y-pt-ht:ht-pt-it.y;ut=mt*_t/gt;const yt={x:lt.x<it.x?lt.x+ut:lt.x-mt+ut,y:lt.y<it.y?lt.y+gt-_t:lt.y-gt+_t};return ut===0&&(yt.x=it.x,yt.y=it.y),mt===0&&(yt.x=it.x),gt===0&&(yt.y=it.y),yt}else{lt.x<it.x?ut=it.x-ft-ct:ut=ct-ft-it.x;const _t=gt*ut/mt;let yt=lt.x<it.x?lt.x+mt-ut:lt.x-mt+ut,bt=lt.y<it.y?lt.y+_t:lt.y-_t;return ut===0&&(yt=it.x,bt=it.y),mt===0&&(yt=it.x),gt===0&&(bt=it.y),{x:yt,y:bt}}}__name$2(intersection$1,"intersection");function calculateEdgePositions(rt,it,lt){const ct=new Map;return it.forEach(ht=>{ct.set(ht.id,ht)}),rt.map(ht=>{const dt=ct.get(ht.start??""),ft=ct.get(ht.end??"");if(!dt||!ft)return{id:ht.id,source:ht.start??"",target:ht.end??"",startX:0,startY:0,midX:0,midY:0,endX:0,endY:0,points:[{x:0,y:0}],sourceSection:void 0,targetSection:void 0,sourceWidth:void 0,sourceHeight:void 0,targetWidth:void 0,targetHeight:void 0};const ut={x:dt.x,y:dt.y},pt={x:ft.x,y:ft.y},gt=["circle","cloud","bang"].includes(dt.originalNode?.shape??""),mt=["circle","cloud","bang"].includes(ft.originalNode?.shape??"");let _t=gt?computeCircleEdgeIntersection({x:dt.x,y:dt.y,width:dt.width??100,height:dt.height??100},pt,ut):intersection$1(dt,ut,pt),yt=mt?computeCircleEdgeIntersection({x:ft.x,y:ft.y,width:ft.width??100,height:ft.height??100},ut,pt):intersection$1(ft,pt,ut);const bt=(_t.x+yt.x)/2,xt=(_t.y+yt.y)/2,wt=[_t];dt.section==="left"?wt.push({x:dt.x-(dt.width??0)/2-lt,y:dt.y}):dt.section==="right"&&wt.push({x:dt.x+(dt.width??0)/2+lt,y:dt.y}),ft.section==="left"?wt.push({x:ft.x+(ft.width??0)/2+lt,y:ft.y}):ft.section==="right"&&wt.push({x:ft.x-(ft.width??0)/2-lt,y:ft.y}),wt.push(yt);const Ct=wt.length>1?wt[1]:pt;_t=gt?computeCircleEdgeIntersection({x:dt.x,y:dt.y,width:dt.width??100,height:dt.height??100},Ct,ut):intersection$1(dt,Ct,ut),wt[0]=_t;const St=wt.length>1?wt[wt.length-2]:ut;return yt=mt?computeCircleEdgeIntersection({x:ft.x,y:ft.y,width:ft.width??100,height:ft.height??100},St,pt):intersection$1(ft,St,pt),wt[wt.length-1]=yt,{id:ht.id,source:ht.start??"",target:ht.end??"",startX:_t.x,startY:_t.y,midX:bt,midY:xt,endX:yt.x,endY:yt.y,points:wt,sourceSection:dt?.section,targetSection:ft?.section,sourceWidth:dt?.width,sourceHeight:dt?.height,targetWidth:ft?.width,targetHeight:ft?.height}})}__name$2(calculateEdgePositions,"calculateEdgePositions");function validateLayoutData(rt){if(!rt)throw new Error("Layout data is required");if(!rt.config)throw new Error("Configuration is required in layout data");if(!Array.isArray(rt.nodes))throw new Error("Nodes array is required in layout data");if(!Array.isArray(rt.edges))throw new Error("Edges array is required in layout data");return!0}__name$2(validateLayoutData,"validateLayoutData");var render$3=__name$2(async(rt,it,{insertCluster:lt,insertEdge:ct,insertEdgeLabel:ht,insertMarkers:dt,insertNode:ft,log:ut,positionEdgeLabel:pt},{algorithm:gt})=>{const mt={},_t={},yt=it.select("g");dt(yt,rt.markers,rt.type,rt.diagramId);const bt=yt.insert("g").attr("class","subgraphs"),xt=yt.insert("g").attr("class","edgePaths"),wt=yt.insert("g").attr("class","edgeLabels"),Ct=yt.insert("g").attr("class","nodes");ut.debug("Inserting nodes into DOM for dimension calculation"),await Promise.all(rt.nodes.map(async vt=>{if(vt.isGroup){const kt={...vt,id:vt.id,width:vt.width,height:vt.height};_t[vt.id]=kt,mt[vt.id]=kt,await lt(bt,vt)}else{const kt={...vt,id:vt.id,width:vt.width,height:vt.height};mt[vt.id]=kt;const Et=await ft(Ct,vt,{config:rt.config,dir:rt.direction||"TB"}),Lt=Et.node().getBBox();kt.width=Lt.width,kt.height=Lt.height,kt.domId=Et,ut.debug(`Node ${vt.id} dimensions: ${Lt.width}x${Lt.height}`)}})),ut.debug("Running bidirectional tidy-tree layout algorithm");const St={...rt,nodes:rt.nodes.map(vt=>{const kt=mt[vt.id];return{...vt,width:kt.width??vt.width??100,height:kt.height??vt.height??50}})},Tt=await executeTidyTreeLayout(St);ut.debug("Positioning nodes based on bidirectional layout results"),Tt.nodes.forEach(vt=>{const kt=mt[vt.id];kt?.domId&&(kt.domId.attr("transform",`translate(${vt.x}, ${vt.y})`),kt.x=vt.x,kt.y=vt.y,ut.debug(`Positioned node ${kt.id} at (${vt.x}, ${vt.y})`))}),ut.debug("Inserting and positioning edges"),await Promise.all(rt.edges.map(async vt=>{await ht(wt,vt);const kt=mt[vt.start??""],Et=mt[vt.end??""];if(kt&&Et){const Lt=Tt.edges.find(At=>At.id===vt.id);if(Lt){ut.debug("APA01 positionedEdge",Lt);const At={...vt,points:Lt.points},It=ct(xt,At,_t,rt.type,kt,Et,rt.diagramId);pt(At,It)}else{const At={...vt,points:[{x:kt.x??0,y:kt.y??0},{x:Et.x??0,y:Et.y??0}]},It=ct(xt,At,_t,rt.type,kt,Et,rt.diagramId);pt(At,It)}}})),ut.debug("Bidirectional tidy-tree rendering completed")},"render"),loader$3=__name$2(async()=>await __vitePreload(()=>Promise.resolve().then(()=>renderB53XAZ4G),void 0,import.meta.url),"loader"),tidyTreeLayout=[{name:"tidy-tree",loader:loader$3,algorithm:"tidy-tree"}],layouts_default=tidyTreeLayout,__defProp$1=Object.defineProperty,__name$1=(rt,it)=>__defProp$1(rt,"name",{value:it,configurable:!0}),id$2="zenuml",detector$1=__name$1(rt=>/^\s*zenuml/.test(rt),"detector"),loader$2=__name$1(async()=>{const{diagram:rt}=await __vitePreload(async()=>{const{diagram:it}=await import("./BTs3YgBY.js");return{diagram:it}},[],import.meta.url);return{id:id$2,diagram:rt}},"loader"),plugin$1={id:id$2,detector:detector$1,loader:loader$2},detector_default$1=plugin$1,package_default={name:"mermaid",version:"11.12.0",description:"Markdown-ish syntax for generating flowcharts, mindmaps, sequence diagrams, class diagrams, gantt charts, git graphs and more.",type:"module",module:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts",exports:{".":{types:"./dist/mermaid.d.ts",import:"./dist/mermaid.core.mjs",default:"./dist/mermaid.core.mjs"},"./*":"./*"},keywords:["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph","mindmap","packet diagram","c4 diagram","er diagram","pie chart","pie diagram","quadrant chart","requirement diagram","graph"],scripts:{clean:"rimraf dist",dev:"pnpm -w dev","docs:code":"typedoc src/defaultConfig.ts src/config.ts src/mermaid.ts && prettier --write ./src/docs/config/setup","docs:build":"rimraf ../../docs && pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts","docs:verify":"pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts --verify","docs:pre:vitepress":"pnpm --filter ./src/docs prefetch && rimraf src/vitepress && pnpm docs:code && tsx scripts/docs.cli.mts --vitepress && pnpm --filter ./src/vitepress install --no-frozen-lockfile --ignore-scripts","docs:build:vitepress":"pnpm docs:pre:vitepress && (cd src/vitepress && pnpm run build) && cpy --flat src/docs/landing/ ./src/vitepress/.vitepress/dist/landing","docs:dev":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:dev:docker":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev:docker" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:serve":"pnpm docs:build:vitepress && vitepress serve src/vitepress","docs:spellcheck":'cspell "src/docs/**/*.md"',"docs:release-version":"tsx scripts/update-release-version.mts","docs:verify-version":"tsx scripts/update-release-version.mts --verify","types:build-config":"tsx scripts/create-types-from-json-schema.mts","types:verify-config":"tsx scripts/create-types-from-json-schema.mts --verify",checkCircle:"npx madge --circular ./src",prepublishOnly:"pnpm docs:verify-version"},repository:{type:"git",url:"https://github.com/mermaid-js/mermaid"},author:"Knut Sveidqvist",license:"MIT",standard:{ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},dependencies:{"@braintree/sanitize-url":"^7.1.1","@iconify/utils":"^3.0.1","@mermaid-js/parser":"workspace:^","@types/d3":"^7.4.3",cytoscape:"^3.29.3","cytoscape-cose-bilkent":"^4.1.0","cytoscape-fcose":"^2.2.0",d3:"^7.9.0","d3-sankey":"^0.12.3","dagre-d3-es":"7.0.11",dayjs:"^1.11.18",dompurify:"^3.2.5",katex:"^0.16.22",khroma:"^2.1.0","lodash-es":"^4.17.21",marked:"^16.2.1",roughjs:"^4.6.6",stylis:"^4.3.6","ts-dedent":"^2.2.0",uuid:"^11.1.0"},devDependencies:{"@adobe/jsonschema2md":"^8.0.5","@iconify/types":"^2.0.0","@types/cytoscape":"^3.21.9","@types/cytoscape-fcose":"^2.2.4","@types/d3-sankey":"^0.12.4","@types/d3-scale":"^4.0.9","@types/d3-scale-chromatic":"^3.1.0","@types/d3-selection":"^3.0.11","@types/d3-shape":"^3.1.7","@types/jsdom":"^21.1.7","@types/katex":"^0.16.7","@types/lodash-es":"^4.17.12","@types/micromatch":"^4.0.9","@types/stylis":"^4.2.7","@types/uuid":"^10.0.0",ajv:"^8.17.1",canvas:"^3.1.2",chokidar:"3.6.0",concurrently:"^9.1.2","csstree-validator":"^4.0.1",globby:"^14.1.0",jison:"^0.4.18","js-base64":"^3.7.8",jsdom:"^26.1.0","json-schema-to-typescript":"^15.0.4",micromatch:"^4.0.8","path-browserify":"^1.0.1",prettier:"^3.5.3",remark:"^15.0.1","remark-frontmatter":"^5.0.0","remark-gfm":"^4.0.1",rimraf:"^6.0.1","start-server-and-test":"^2.0.13","type-fest":"^4.35.0",typedoc:"^0.28.12","typedoc-plugin-markdown":"^4.8.1",typescript:"~5.7.3","unist-util-flatmap":"^1.0.0","unist-util-visit":"^5.0.0",vitepress:"^1.6.4","vitepress-plugin-search":"1.0.4-alpha.22"},files:["dist/","README.md"],publishConfig:{access:"public"}},commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(rt){return rt&&rt.__esModule&&Object.prototype.hasOwnProperty.call(rt,"default")?rt.default:rt}var dayjs_min$1={exports:{}},dayjs_min=dayjs_min$1.exports,hasRequiredDayjs_min;function requireDayjs_min(){return hasRequiredDayjs_min||(hasRequiredDayjs_min=1,(function(rt,it){(function(lt,ct){rt.exports=ct()})(dayjs_min,(function(){var lt=1e3,ct=6e4,ht=36e5,dt="millisecond",ft="second",ut="minute",pt="hour",gt="day",mt="week",_t="month",yt="quarter",bt="year",xt="date",wt="Invalid Date",Ct=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,St=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Tt={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Nt){var Ot=["th","st","nd","rd"],Mt=Nt%100;return"["+Nt+(Ot[(Mt-20)%10]||Ot[Mt]||Ot[0])+"]"}},vt=function(Nt,Ot,Mt){var zt=String(Nt);return!zt||zt.length>=Ot?Nt:""+Array(Ot+1-zt.length).join(Mt)+Nt},kt={s:vt,z:function(Nt){var Ot=-Nt.utcOffset(),Mt=Math.abs(Ot),zt=Math.floor(Mt/60),Ft=Mt%60;return(Ot<=0?"+":"-")+vt(zt,2,"0")+":"+vt(Ft,2,"0")},m:function Nt(Ot,Mt){if(Ot.date()<Mt.date())return-Nt(Mt,Ot);var zt=12*(Mt.year()-Ot.year())+(Mt.month()-Ot.month()),Ft=Ot.clone().add(zt,_t),Wt=Mt-Ft<0,jt=Ot.clone().add(zt+(Wt?-1:1),_t);return+(-(zt+(Mt-Ft)/(Wt?Ft-jt:jt-Ft))||0)},a:function(Nt){return Nt<0?Math.ceil(Nt)||0:Math.floor(Nt)},p:function(Nt){return{M:_t,y:bt,w:mt,d:gt,D:xt,h:pt,m:ut,s:ft,ms:dt,Q:yt}[Nt]||String(Nt||"").toLowerCase().replace(/s$/,"")},u:function(Nt){return Nt===void 0}},Et="en",Lt={};Lt[Et]=Tt;var At="$isDayjsObject",It=function(Nt){return Nt instanceof Pt||!(!Nt||!Nt[At])},Bt=function Nt(Ot,Mt,zt){var Ft;if(!Ot)return Et;if(typeof Ot=="string"){var Wt=Ot.toLowerCase();Lt[Wt]&&(Ft=Wt),Mt&&(Lt[Wt]=Mt,Ft=Wt);var jt=Ot.split("-");if(!Ft&&jt.length>1)return Nt(jt[0])}else{var Yt=Ot.name;Lt[Yt]=Ot,Ft=Yt}return!zt&&Ft&&(Et=Ft),Ft||!zt&&Et},Dt=function(Nt,Ot){if(It(Nt))return Nt.clone();var Mt=typeof Ot=="object"?Ot:{};return Mt.date=Nt,Mt.args=arguments,new Pt(Mt)},Rt=kt;Rt.l=Bt,Rt.i=It,Rt.w=function(Nt,Ot){return Dt(Nt,{locale:Ot.$L,utc:Ot.$u,x:Ot.$x,$offset:Ot.$offset})};var Pt=(function(){function Nt(Mt){this.$L=Bt(Mt.locale,null,!0),this.parse(Mt),this.$x=this.$x||Mt.x||{},this[At]=!0}var Ot=Nt.prototype;return Ot.parse=function(Mt){this.$d=(function(zt){var Ft=zt.date,Wt=zt.utc;if(Ft===null)return new Date(NaN);if(Rt.u(Ft))return new Date;if(Ft instanceof Date)return new Date(Ft);if(typeof Ft=="string"&&!/Z$/i.test(Ft)){var jt=Ft.match(Ct);if(jt){var Yt=jt[2]-1||0,Zt=(jt[7]||"0").substring(0,3);return Wt?new Date(Date.UTC(jt[1],Yt,jt[3]||1,jt[4]||0,jt[5]||0,jt[6]||0,Zt)):new Date(jt[1],Yt,jt[3]||1,jt[4]||0,jt[5]||0,jt[6]||0,Zt)}}return new Date(Ft)})(Mt),this.init()},Ot.init=function(){var Mt=this.$d;this.$y=Mt.getFullYear(),this.$M=Mt.getMonth(),this.$D=Mt.getDate(),this.$W=Mt.getDay(),this.$H=Mt.getHours(),this.$m=Mt.getMinutes(),this.$s=Mt.getSeconds(),this.$ms=Mt.getMilliseconds()},Ot.$utils=function(){return Rt},Ot.isValid=function(){return this.$d.toString()!==wt},Ot.isSame=function(Mt,zt){var Ft=Dt(Mt);return this.startOf(zt)<=Ft&&Ft<=this.endOf(zt)},Ot.isAfter=function(Mt,zt){return Dt(Mt)<this.startOf(zt)},Ot.isBefore=function(Mt,zt){return this.endOf(zt)<Dt(Mt)},Ot.$g=function(Mt,zt,Ft){return Rt.u(Mt)?this[zt]:this.set(Ft,Mt)},Ot.unix=function(){return Math.floor(this.valueOf()/1e3)},Ot.valueOf=function(){return this.$d.getTime()},Ot.startOf=function(Mt,zt){var Ft=this,Wt=!!Rt.u(zt)||zt,jt=Rt.p(Mt),Yt=function(er,Jt){var ar=Rt.w(Ft.$u?Date.UTC(Ft.$y,Jt,er):new Date(Ft.$y,Jt,er),Ft);return Wt?ar:ar.endOf(gt)},Zt=function(er,Jt){return Rt.w(Ft.toDate()[er].apply(Ft.toDate("s"),(Wt?[0,0,0,0]:[23,59,59,999]).slice(Jt)),Ft)},qt=this.$W,Kt=this.$M,Xt=this.$D,te="set"+(this.$u?"UTC":"");switch(jt){case bt:return Wt?Yt(1,0):Yt(31,11);case _t:return Wt?Yt(1,Kt):Yt(0,Kt+1);case mt:var ee=this.$locale().weekStart||0,ir=(qt<ee?qt+7:qt)-ee;return Yt(Wt?Xt-ir:Xt+(6-ir),Kt);case gt:case xt:return Zt(te+"Hours",0);case pt:return Zt(te+"Minutes",1);case ut:return Zt(te+"Seconds",2);case ft:return Zt(te+"Milliseconds",3);default:return this.clone()}},Ot.endOf=function(Mt){return this.startOf(Mt,!1)},Ot.$set=function(Mt,zt){var Ft,Wt=Rt.p(Mt),jt="set"+(this.$u?"UTC":""),Yt=(Ft={},Ft[gt]=jt+"Date",Ft[xt]=jt+"Date",Ft[_t]=jt+"Month",Ft[bt]=jt+"FullYear",Ft[pt]=jt+"Hours",Ft[ut]=jt+"Minutes",Ft[ft]=jt+"Seconds",Ft[dt]=jt+"Milliseconds",Ft)[Wt],Zt=Wt===gt?this.$D+(zt-this.$W):zt;if(Wt===_t||Wt===bt){var qt=this.clone().set(xt,1);qt.$d[Yt](Zt),qt.init(),this.$d=qt.set(xt,Math.min(this.$D,qt.daysInMonth())).$d}else Yt&&this.$d[Yt](Zt);return this.init(),this},Ot.set=function(Mt,zt){return this.clone().$set(Mt,zt)},Ot.get=function(Mt){return this[Rt.p(Mt)]()},Ot.add=function(Mt,zt){var Ft,Wt=this;Mt=Number(Mt);var jt=Rt.p(zt),Yt=function(Kt){var Xt=Dt(Wt);return Rt.w(Xt.date(Xt.date()+Math.round(Kt*Mt)),Wt)};if(jt===_t)return this.set(_t,this.$M+Mt);if(jt===bt)return this.set(bt,this.$y+Mt);if(jt===gt)return Yt(1);if(jt===mt)return Yt(7);var Zt=(Ft={},Ft[ut]=ct,Ft[pt]=ht,Ft[ft]=lt,Ft)[jt]||1,qt=this.$d.getTime()+Mt*Zt;return Rt.w(qt,this)},Ot.subtract=function(Mt,zt){return this.add(-1*Mt,zt)},Ot.format=function(Mt){var zt=this,Ft=this.$locale();if(!this.isValid())return Ft.invalidDate||wt;var Wt=Mt||"YYYY-MM-DDTHH:mm:ssZ",jt=Rt.z(this),Yt=this.$H,Zt=this.$m,qt=this.$M,Kt=Ft.weekdays,Xt=Ft.months,te=Ft.meridiem,ee=function(Jt,ar,rr,sr){return Jt&&(Jt[ar]||Jt(zt,Wt))||rr[ar].slice(0,sr)},ir=function(Jt){return Rt.s(Yt%12||12,Jt,"0")},er=te||function(Jt,ar,rr){var sr=Jt<12?"AM":"PM";return rr?sr.toLowerCase():sr};return Wt.replace(St,(function(Jt,ar){return ar||(function(rr){switch(rr){case"YY":return String(zt.$y).slice(-2);case"YYYY":return Rt.s(zt.$y,4,"0");case"M":return qt+1;case"MM":return Rt.s(qt+1,2,"0");case"MMM":return ee(Ft.monthsShort,qt,Xt,3);case"MMMM":return ee(Xt,qt);case"D":return zt.$D;case"DD":return Rt.s(zt.$D,2,"0");case"d":return String(zt.$W);case"dd":return ee(Ft.weekdaysMin,zt.$W,Kt,2);case"ddd":return ee(Ft.weekdaysShort,zt.$W,Kt,3);case"dddd":return Kt[zt.$W];case"H":return String(Yt);case"HH":return Rt.s(Yt,2,"0");case"h":return ir(1);case"hh":return ir(2);case"a":return er(Yt,Zt,!0);case"A":return er(Yt,Zt,!1);case"m":return String(Zt);case"mm":return Rt.s(Zt,2,"0");case"s":return String(zt.$s);case"ss":return Rt.s(zt.$s,2,"0");case"SSS":return Rt.s(zt.$ms,3,"0");case"Z":return jt}return null})(Jt)||jt.replace(":","")}))},Ot.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},Ot.diff=function(Mt,zt,Ft){var Wt,jt=this,Yt=Rt.p(zt),Zt=Dt(Mt),qt=(Zt.utcOffset()-this.utcOffset())*ct,Kt=this-Zt,Xt=function(){return Rt.m(jt,Zt)};switch(Yt){case bt:Wt=Xt()/12;break;case _t:Wt=Xt();break;case yt:Wt=Xt()/3;break;case mt:Wt=(Kt-qt)/6048e5;break;case gt:Wt=(Kt-qt)/864e5;break;case pt:Wt=Kt/ht;break;case ut:Wt=Kt/ct;break;case ft:Wt=Kt/lt;break;default:Wt=Kt}return Ft?Wt:Rt.a(Wt)},Ot.daysInMonth=function(){return this.endOf(_t).$D},Ot.$locale=function(){return Lt[this.$L]},Ot.locale=function(Mt,zt){if(!Mt)return this.$L;var Ft=this.clone(),Wt=Bt(Mt,zt,!0);return Wt&&(Ft.$L=Wt),Ft},Ot.clone=function(){return Rt.w(this.$d,this)},Ot.toDate=function(){return new Date(this.valueOf())},Ot.toJSON=function(){return this.isValid()?this.toISOString():null},Ot.toISOString=function(){return this.$d.toISOString()},Ot.toString=function(){return this.$d.toUTCString()},Nt})(),Ht=Pt.prototype;return Dt.prototype=Ht,[["$ms",dt],["$s",ft],["$m",ut],["$H",pt],["$W",gt],["$M",_t],["$y",bt],["$D",xt]].forEach((function(Nt){Ht[Nt[1]]=function(Ot){return this.$g(Ot,Nt[0],Nt[1])}})),Dt.extend=function(Nt,Ot){return Nt.$i||(Nt(Ot,Pt,Dt),Nt.$i=!0),Dt},Dt.locale=Bt,Dt.isDayjs=It,Dt.unix=function(Nt){return Dt(1e3*Nt)},Dt.en=Lt[Et],Dt.Ls=Lt,Dt.p={},Dt}))})(dayjs_min$1)),dayjs_min$1.exports}var dayjs_minExports=requireDayjs_min();const dayjs2=getDefaultExportFromCjs(dayjs_minExports);var __defProp=Object.defineProperty,__name=(rt,it)=>__defProp(rt,"name",{value:it,configurable:!0}),__export=(rt,it)=>{for(var lt in it)__defProp(rt,lt,{get:it[lt],enumerable:!0})},LEVELS={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},log={trace:__name((...rt)=>{},"trace"),debug:__name((...rt)=>{},"debug"),info:__name((...rt)=>{},"info"),warn:__name((...rt)=>{},"warn"),error:__name((...rt)=>{},"error"),fatal:__name((...rt)=>{},"fatal")},setLogLevel=__name(function(rt="fatal"){let it=LEVELS.fatal;typeof rt=="string"?rt.toLowerCase()in LEVELS&&(it=LEVELS[rt]):typeof rt=="number"&&(it=rt),log.trace=()=>{},log.debug=()=>{},log.info=()=>{},log.warn=()=>{},log.error=()=>{},log.fatal=()=>{},it<=LEVELS.fatal&&(log.fatal=console.error?console.error.bind(console,format("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",format("FATAL"))),it<=LEVELS.error&&(log.error=console.error?console.error.bind(console,format("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",format("ERROR"))),it<=LEVELS.warn&&(log.warn=console.warn?console.warn.bind(console,format("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",format("WARN"))),it<=LEVELS.info&&(log.info=console.info?console.info.bind(console,format("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",format("INFO"))),it<=LEVELS.debug&&(log.debug=console.debug?console.debug.bind(console,format("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",format("DEBUG"))),it<=LEVELS.trace&&(log.trace=console.debug?console.debug.bind(console,format("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",format("TRACE")))},"setLogLevel"),format=__name(rt=>`%c${dayjs2().format("ss.SSS")} : ${rt} : `,"format");const Channel={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:rt=>rt>=255?255:rt<0?0:rt,g:rt=>rt>=255?255:rt<0?0:rt,b:rt=>rt>=255?255:rt<0?0:rt,h:rt=>rt%360,s:rt=>rt>=100?100:rt<0?0:rt,l:rt=>rt>=100?100:rt<0?0:rt,a:rt=>rt>=1?1:rt<0?0:rt},toLinear:rt=>{const it=rt/255;return rt>.03928?Math.pow((it+.055)/1.055,2.4):it/12.92},hue2rgb:(rt,it,lt)=>(lt<0&&(lt+=1),lt>1&&(lt-=1),lt<1/6?rt+(it-rt)*6*lt:lt<1/2?it:lt<2/3?rt+(it-rt)*(2/3-lt)*6:rt),hsl2rgb:({h:rt,s:it,l:lt},ct)=>{if(!it)return lt*2.55;rt/=360,it/=100,lt/=100;const ht=lt<.5?lt*(1+it):lt+it-lt*it,dt=2*lt-ht;switch(ct){case"r":return Channel.hue2rgb(dt,ht,rt+1/3)*255;case"g":return Channel.hue2rgb(dt,ht,rt)*255;case"b":return Channel.hue2rgb(dt,ht,rt-1/3)*255}},rgb2hsl:({r:rt,g:it,b:lt},ct)=>{rt/=255,it/=255,lt/=255;const ht=Math.max(rt,it,lt),dt=Math.min(rt,it,lt),ft=(ht+dt)/2;if(ct==="l")return ft*100;if(ht===dt)return 0;const ut=ht-dt,pt=ft>.5?ut/(2-ht-dt):ut/(ht+dt);if(ct==="s")return pt*100;switch(ht){case rt:return((it-lt)/ut+(it<lt?6:0))*60;case it:return((lt-rt)/ut+2)*60;case lt:return((rt-it)/ut+4)*60;default:return-1}}},Lang={clamp:(rt,it,lt)=>it>lt?Math.min(it,Math.max(lt,rt)):Math.min(lt,Math.max(it,rt)),round:rt=>Math.round(rt*1e10)/1e10},Unit={dec2hex:rt=>{const it=Math.round(rt).toString(16);return it.length>1?it:`0${it}`}},Utils={channel:Channel,lang:Lang,unit:Unit},DEC2HEX={};for(let rt=0;rt<=255;rt++)DEC2HEX[rt]=Utils.unit.dec2hex(rt);const TYPE$2={ALL:0,RGB:1,HSL:2};class Type{constructor(){this.type=TYPE$2.ALL}get(){return this.type}set(it){if(this.type&&this.type!==it)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=it}reset(){this.type=TYPE$2.ALL}is(it){return this.type===it}}class Channels{constructor(it,lt){this.color=lt,this.changed=!1,this.data=it,this.type=new Type}set(it,lt){return this.color=lt,this.changed=!1,this.data=it,this.type.type=TYPE$2.ALL,this}_ensureHSL(){const it=this.data,{h:lt,s:ct,l:ht}=it;lt===void 0&&(it.h=Utils.channel.rgb2hsl(it,"h")),ct===void 0&&(it.s=Utils.channel.rgb2hsl(it,"s")),ht===void 0&&(it.l=Utils.channel.rgb2hsl(it,"l"))}_ensureRGB(){const it=this.data,{r:lt,g:ct,b:ht}=it;lt===void 0&&(it.r=Utils.channel.hsl2rgb(it,"r")),ct===void 0&&(it.g=Utils.channel.hsl2rgb(it,"g")),ht===void 0&&(it.b=Utils.channel.hsl2rgb(it,"b"))}get r(){const it=this.data,lt=it.r;return!this.type.is(TYPE$2.HSL)&&lt!==void 0?lt:(this._ensureHSL(),Utils.channel.hsl2rgb(it,"r"))}get g(){const it=this.data,lt=it.g;return!this.type.is(TYPE$2.HSL)&&lt!==void 0?lt:(this._ensureHSL(),Utils.channel.hsl2rgb(it,"g"))}get b(){const it=this.data,lt=it.b;return!this.type.is(TYPE$2.HSL)&&lt!==void 0?lt:(this._ensureHSL(),Utils.channel.hsl2rgb(it,"b"))}get h(){const it=this.data,lt=it.h;return!this.type.is(TYPE$2.RGB)&&lt!==void 0?lt:(this._ensureRGB(),Utils.channel.rgb2hsl(it,"h"))}get s(){const it=this.data,lt=it.s;return!this.type.is(TYPE$2.RGB)&&lt!==void 0?lt:(this._ensureRGB(),Utils.channel.rgb2hsl(it,"s"))}get l(){const it=this.data,lt=it.l;return!this.type.is(TYPE$2.RGB)&&lt!==void 0?lt:(this._ensureRGB(),Utils.channel.rgb2hsl(it,"l"))}get a(){return this.data.a}set r(it){this.type.set(TYPE$2.RGB),this.changed=!0,this.data.r=it}set g(it){this.type.set(TYPE$2.RGB),this.changed=!0,this.data.g=it}set b(it){this.type.set(TYPE$2.RGB),this.changed=!0,this.data.b=it}set h(it){this.type.set(TYPE$2.HSL),this.changed=!0,this.data.h=it}set s(it){this.type.set(TYPE$2.HSL),this.changed=!0,this.data.s=it}set l(it){this.type.set(TYPE$2.HSL),this.changed=!0,this.data.l=it}set a(it){this.changed=!0,this.data.a=it}}const channels=new Channels({r:0,g:0,b:0,a:0},"transparent"),Hex={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:rt=>{if(rt.charCodeAt(0)!==35)return;const it=rt.match(Hex.re);if(!it)return;const lt=it[1],ct=parseInt(lt,16),ht=lt.length,dt=ht%4===0,ft=ht>4,ut=ft?1:17,pt=ft?8:4,gt=dt?0:-1,mt=ft?255:15;return channels.set({r:(ct>>pt*(gt+3)&mt)*ut,g:(ct>>pt*(gt+2)&mt)*ut,b:(ct>>pt*(gt+1)&mt)*ut,a:dt?(ct&mt)*ut/255:1},rt)},stringify:rt=>{const{r:it,g:lt,b:ct,a:ht}=rt;return ht<1?`#${DEC2HEX[Math.round(it)]}${DEC2HEX[Math.round(lt)]}${DEC2HEX[Math.round(ct)]}${DEC2HEX[Math.round(ht*255)]}`:`#${DEC2HEX[Math.round(it)]}${DEC2HEX[Math.round(lt)]}${DEC2HEX[Math.round(ct)]}`}},HSL={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:rt=>{const it=rt.match(HSL.hueRe);if(it){const[,lt,ct]=it;switch(ct){case"grad":return Utils.channel.clamp.h(parseFloat(lt)*.9);case"rad":return Utils.channel.clamp.h(parseFloat(lt)*180/Math.PI);case"turn":return Utils.channel.clamp.h(parseFloat(lt)*360)}}return Utils.channel.clamp.h(parseFloat(rt))},parse:rt=>{const it=rt.charCodeAt(0);if(it!==104&&it!==72)return;const lt=rt.match(HSL.re);if(!lt)return;const[,ct,ht,dt,ft,ut]=lt;return channels.set({h:HSL._hue2deg(ct),s:Utils.channel.clamp.s(parseFloat(ht)),l:Utils.channel.clamp.l(parseFloat(dt)),a:ft?Utils.channel.clamp.a(ut?parseFloat(ft)/100:parseFloat(ft)):1},rt)},stringify:rt=>{const{h:it,s:lt,l:ct,a:ht}=rt;return ht<1?`hsla(${Utils.lang.round(it)}, ${Utils.lang.round(lt)}%, ${Utils.lang.round(ct)}%, ${ht})`:`hsl(${Utils.lang.round(it)}, ${Utils.lang.round(lt)}%, ${Utils.lang.round(ct)}%)`}},Keyword={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:rt=>{rt=rt.toLowerCase();const it=Keyword.colors[rt];if(it)return Hex.parse(it)},stringify:rt=>{const it=Hex.stringify(rt);for(const lt in Keyword.colors)if(Keyword.colors[lt]===it)return lt}},RGB={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:rt=>{const it=rt.charCodeAt(0);if(it!==114&&it!==82)return;const lt=rt.match(RGB.re);if(!lt)return;const[,ct,ht,dt,ft,ut,pt,gt,mt]=lt;return channels.set({r:Utils.channel.clamp.r(ht?parseFloat(ct)*2.55:parseFloat(ct)),g:Utils.channel.clamp.g(ft?parseFloat(dt)*2.55:parseFloat(dt)),b:Utils.channel.clamp.b(pt?parseFloat(ut)*2.55:parseFloat(ut)),a:gt?Utils.channel.clamp.a(mt?parseFloat(gt)/100:parseFloat(gt)):1},rt)},stringify:rt=>{const{r:it,g:lt,b:ct,a:ht}=rt;return ht<1?`rgba(${Utils.lang.round(it)}, ${Utils.lang.round(lt)}, ${Utils.lang.round(ct)}, ${Utils.lang.round(ht)})`:`rgb(${Utils.lang.round(it)}, ${Utils.lang.round(lt)}, ${Utils.lang.round(ct)})`}},Color$1={format:{keyword:Keyword,hex:Hex,rgb:RGB,rgba:RGB,hsl:HSL,hsla:HSL},parse:rt=>{if(typeof rt!="string")return rt;const it=Hex.parse(rt)||RGB.parse(rt)||HSL.parse(rt)||Keyword.parse(rt);if(it)return it;throw new Error(`Unsupported color format: "${rt}"`)},stringify:rt=>!rt.changed&&rt.color?rt.color:rt.type.is(TYPE$2.HSL)||rt.data.r===void 0?HSL.stringify(rt):rt.a<1||!Number.isInteger(rt.r)||!Number.isInteger(rt.g)||!Number.isInteger(rt.b)?RGB.stringify(rt):Hex.stringify(rt)},change=(rt,it)=>{const lt=Color$1.parse(rt);for(const ct in it)lt[ct]=Utils.channel.clamp[ct](it[ct]);return Color$1.stringify(lt)},rgba$1=(rt,it,lt=0,ct=1)=>{if(typeof rt!="number")return change(rt,{a:it});const ht=channels.set({r:Utils.channel.clamp.r(rt),g:Utils.channel.clamp.g(it),b:Utils.channel.clamp.b(lt),a:Utils.channel.clamp.a(ct)});return Color$1.stringify(ht)},luminance=rt=>{const{r:it,g:lt,b:ct}=Color$1.parse(rt),ht=.2126*Utils.channel.toLinear(it)+.7152*Utils.channel.toLinear(lt)+.0722*Utils.channel.toLinear(ct);return Utils.lang.round(ht)},isLight=rt=>luminance(rt)>=.5,isDark=rt=>!isLight(rt),adjustChannel=(rt,it,lt)=>{const ct=Color$1.parse(rt),ht=ct[it],dt=Utils.channel.clamp[it](ht+lt);return ht!==dt&&(ct[it]=dt),Color$1.stringify(ct)},lighten=(rt,it)=>adjustChannel(rt,"l",it),darken=(rt,it)=>adjustChannel(rt,"l",-it),adjust=(rt,it)=>{const lt=Color$1.parse(rt),ct={};for(const ht in it)it[ht]&&(ct[ht]=lt[ht]+it[ht]);return change(rt,ct)},mix=(rt,it,lt=50)=>{const{r:ct,g:ht,b:dt,a:ft}=Color$1.parse(rt),{r:ut,g:pt,b:gt,a:mt}=Color$1.parse(it),_t=lt/100,yt=_t*2-1,bt=ft-mt,wt=((yt*bt===-1?yt:(yt+bt)/(1+yt*bt))+1)/2,Ct=1-wt,St=ct*wt+ut*Ct,Tt=ht*wt+pt*Ct,vt=dt*wt+gt*Ct,kt=ft*_t+mt*(1-_t);return rgba$1(St,Tt,vt,kt)},invert=(rt,it=100)=>{const lt=Color$1.parse(rt);return lt.r=255-lt.r,lt.g=255-lt.g,lt.b=255-lt.b,mix(lt,rt,it)};/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries,setPrototypeOf,isFrozen,getPrototypeOf,getOwnPropertyDescriptor}=Object;let{freeze,seal,create:create$1}=Object,{apply,construct}=typeof Reflect<"u"&&Reflect;freeze||(freeze=function(it){return it});seal||(seal=function(it){return it});apply||(apply=function(it,lt,ct){return it.apply(lt,ct)});construct||(construct=function(it,lt){return new it(...lt)});const arrayForEach=unapply(Array.prototype.forEach),arrayLastIndexOf=unapply(Array.prototype.lastIndexOf),arrayPop=unapply(Array.prototype.pop),arrayPush=unapply(Array.prototype.push),arraySplice=unapply(Array.prototype.splice),stringToLowerCase=unapply(String.prototype.toLowerCase),stringToString=unapply(String.prototype.toString),stringMatch=unapply(String.prototype.match),stringReplace=unapply(String.prototype.replace),stringIndexOf=unapply(String.prototype.indexOf),stringTrim=unapply(String.prototype.trim),objectHasOwnProperty=unapply(Object.prototype.hasOwnProperty),regExpTest=unapply(RegExp.prototype.test),typeErrorCreate=unconstruct(TypeError);function unapply(rt){return function(it){it instanceof RegExp&&(it.lastIndex=0);for(var lt=arguments.length,ct=new Array(lt>1?lt-1:0),ht=1;ht<lt;ht++)ct[ht-1]=arguments[ht];return apply(rt,it,ct)}}function unconstruct(rt){return function(){for(var it=arguments.length,lt=new Array(it),ct=0;ct<it;ct++)lt[ct]=arguments[ct];return construct(rt,lt)}}function addToSet(rt,it){let lt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:stringToLowerCase;setPrototypeOf&&setPrototypeOf(rt,null);let ct=it.length;for(;ct--;){let ht=it[ct];if(typeof ht=="string"){const dt=lt(ht);dt!==ht&&(isFrozen(it)||(it[ct]=dt),ht=dt)}rt[ht]=!0}return rt}function cleanArray(rt){for(let it=0;it<rt.length;it++)objectHasOwnProperty(rt,it)||(rt[it]=null);return rt}function clone(rt){const it=create$1(null);for(const[lt,ct]of entries(rt))objectHasOwnProperty(rt,lt)&&(Array.isArray(ct)?it[lt]=cleanArray(ct):ct&&typeof ct=="object"&&ct.constructor===Object?it[lt]=clone(ct):it[lt]=ct);return it}function lookupGetter(rt,it){for(;rt!==null;){const ct=getOwnPropertyDescriptor(rt,it);if(ct){if(ct.get)return unapply(ct.get);if(typeof ct.value=="function")return unapply(ct.value)}rt=getPrototypeOf(rt)}function lt(){return null}return lt}const html$1=freeze(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),svg$1=freeze(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),svgFilters=freeze(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),svgDisallowed=freeze(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),mathMl$1=freeze(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),mathMlDisallowed=freeze(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),text$1=freeze(["#text"]),html=freeze(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),svg=freeze(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),mathMl=freeze(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),xml=freeze(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),MUSTACHE_EXPR=seal(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ERB_EXPR=seal(/<%[\w\W]*|[\w\W]*%>/gm),TMPLIT_EXPR=seal(/\$\{[\w\W]*/gm),DATA_ATTR=seal(/^data-[\-\w.\u00B7-\uFFFF]+$/),ARIA_ATTR=seal(/^aria-[\-\w]+$/),IS_ALLOWED_URI=seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),IS_SCRIPT_OR_DATA=seal(/^(?:\w+script|data):/i),ATTR_WHITESPACE=seal(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),DOCTYPE_NAME=seal(/^html$/i),CUSTOM_ELEMENT=seal(/^[a-z][.\w]*(-[.\w]+)+$/i);var EXPRESSIONS=Object.freeze({__proto__:null,ARIA_ATTR,ATTR_WHITESPACE,CUSTOM_ELEMENT,DATA_ATTR,DOCTYPE_NAME,ERB_EXPR,IS_ALLOWED_URI,IS_SCRIPT_OR_DATA,MUSTACHE_EXPR,TMPLIT_EXPR});const NODE_TYPE={element:1,text:3,progressingInstruction:7,comment:8,document:9},getGlobal=function(){return typeof window>"u"?null:window},_createTrustedTypesPolicy=function(it,lt){if(typeof it!="object"||typeof it.createPolicy!="function")return null;let ct=null;const ht="data-tt-policy-suffix";lt&&lt.hasAttribute(ht)&&(ct=lt.getAttribute(ht));const dt="dompurify"+(ct?"#"+ct:"");try{return it.createPolicy(dt,{createHTML(ft){return ft},createScriptURL(ft){return ft}})}catch{return console.warn("TrustedTypes policy "+dt+" could not be created."),null}},_createHooksMap=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function createDOMPurify(){let rt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:getGlobal();const it=Vt=>createDOMPurify(Vt);if(it.version="3.2.6",it.removed=[],!rt||!rt.document||rt.document.nodeType!==NODE_TYPE.document||!rt.Element)return it.isSupported=!1,it;let{document:lt}=rt;const ct=lt,ht=ct.currentScript,{DocumentFragment:dt,HTMLTemplateElement:ft,Node:ut,Element:pt,NodeFilter:gt,NamedNodeMap:mt=rt.NamedNodeMap||rt.MozNamedAttrMap,HTMLFormElement:_t,DOMParser:yt,trustedTypes:bt}=rt,xt=pt.prototype,wt=lookupGetter(xt,"cloneNode"),Ct=lookupGetter(xt,"remove"),St=lookupGetter(xt,"nextSibling"),Tt=lookupGetter(xt,"childNodes"),vt=lookupGetter(xt,"parentNode");if(typeof ft=="function"){const Vt=lt.createElement("template");Vt.content&&Vt.content.ownerDocument&&(lt=Vt.content.ownerDocument)}let kt,Et="";const{implementation:Lt,createNodeIterator:At,createDocumentFragment:It,getElementsByTagName:Bt}=lt,{importNode:Dt}=ct;let Rt=_createHooksMap();it.isSupported=typeof entries=="function"&&typeof vt=="function"&&Lt&&Lt.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Pt,ERB_EXPR:Ht,TMPLIT_EXPR:Nt,DATA_ATTR:Ot,ARIA_ATTR:Mt,IS_SCRIPT_OR_DATA:zt,ATTR_WHITESPACE:Ft,CUSTOM_ELEMENT:Wt}=EXPRESSIONS;let{IS_ALLOWED_URI:jt}=EXPRESSIONS,Yt=null;const Zt=addToSet({},[...html$1,...svg$1,...svgFilters,...mathMl$1,...text$1]);let qt=null;const Kt=addToSet({},[...html,...svg,...mathMl,...xml]);let Xt=Object.seal(create$1(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),te=null,ee=null,ir=!0,er=!0,Jt=!1,ar=!0,rr=!1,sr=!0,hr=!1,Nr=!1,Dr=!1,ur=!1,Lr=!1,$r=!1,Yr=!0,Gr=!1;const hi="user-content-";let Or=!0,kr=!1,fr={},gr=null;const Zr=addToSet({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Vr=null;const Xr=addToSet({},["audio","video","img","source","image","track"]);let Fr=null;const Kr=addToSet({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Br="http://www.w3.org/1998/Math/MathML",Rr="http://www.w3.org/2000/svg",or="http://www.w3.org/1999/xhtml";let pr=or,Pr=!1,Hr=null;const di=addToSet({},[Br,Rr,or],stringToString);let Ir=addToSet({},["mi","mo","mn","ms","mtext"]),Mr=addToSet({},["annotation-xml"]);const ui=addToSet({},["title","style","font","a","script"]);let Er=null;const fi=["application/xhtml+xml","text/html"],gi="text/html";let me=null,mr=null;const mi=lt.createElement("form"),Qr=function($t){return $t instanceof RegExp||$t instanceof Function},zr=function(){let $t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(mr&&mr===$t)){if((!$t||typeof $t!="object")&&($t={}),$t=clone($t),Er=fi.indexOf($t.PARSER_MEDIA_TYPE)===-1?gi:$t.PARSER_MEDIA_TYPE,me=Er==="application/xhtml+xml"?stringToString:stringToLowerCase,Yt=objectHasOwnProperty($t,"ALLOWED_TAGS")?addToSet({},$t.ALLOWED_TAGS,me):Zt,qt=objectHasOwnProperty($t,"ALLOWED_ATTR")?addToSet({},$t.ALLOWED_ATTR,me):Kt,Hr=objectHasOwnProperty($t,"ALLOWED_NAMESPACES")?addToSet({},$t.ALLOWED_NAMESPACES,stringToString):di,Fr=objectHasOwnProperty($t,"ADD_URI_SAFE_ATTR")?addToSet(clone(Kr),$t.ADD_URI_SAFE_ATTR,me):Kr,Vr=objectHasOwnProperty($t,"ADD_DATA_URI_TAGS")?addToSet(clone(Xr),$t.ADD_DATA_URI_TAGS,me):Xr,gr=objectHasOwnProperty($t,"FORBID_CONTENTS")?addToSet({},$t.FORBID_CONTENTS,me):Zr,te=objectHasOwnProperty($t,"FORBID_TAGS")?addToSet({},$t.FORBID_TAGS,me):clone({}),ee=objectHasOwnProperty($t,"FORBID_ATTR")?addToSet({},$t.FORBID_ATTR,me):clone({}),fr=objectHasOwnProperty($t,"USE_PROFILES")?$t.USE_PROFILES:!1,ir=$t.ALLOW_ARIA_ATTR!==!1,er=$t.ALLOW_DATA_ATTR!==!1,Jt=$t.ALLOW_UNKNOWN_PROTOCOLS||!1,ar=$t.ALLOW_SELF_CLOSE_IN_ATTR!==!1,rr=$t.SAFE_FOR_TEMPLATES||!1,sr=$t.SAFE_FOR_XML!==!1,hr=$t.WHOLE_DOCUMENT||!1,ur=$t.RETURN_DOM||!1,Lr=$t.RETURN_DOM_FRAGMENT||!1,$r=$t.RETURN_TRUSTED_TYPE||!1,Dr=$t.FORCE_BODY||!1,Yr=$t.SANITIZE_DOM!==!1,Gr=$t.SANITIZE_NAMED_PROPS||!1,Or=$t.KEEP_CONTENT!==!1,kr=$t.IN_PLACE||!1,jt=$t.ALLOWED_URI_REGEXP||IS_ALLOWED_URI,pr=$t.NAMESPACE||or,Ir=$t.MATHML_TEXT_INTEGRATION_POINTS||Ir,Mr=$t.HTML_INTEGRATION_POINTS||Mr,Xt=$t.CUSTOM_ELEMENT_HANDLING||{},$t.CUSTOM_ELEMENT_HANDLING&&Qr($t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Xt.tagNameCheck=$t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),$t.CUSTOM_ELEMENT_HANDLING&&Qr($t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Xt.attributeNameCheck=$t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),$t.CUSTOM_ELEMENT_HANDLING&&typeof $t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Xt.allowCustomizedBuiltInElements=$t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),rr&&(er=!1),Lr&&(ur=!0),fr&&(Yt=addToSet({},text$1),qt=[],fr.html===!0&&(addToSet(Yt,html$1),addToSet(qt,html)),fr.svg===!0&&(addToSet(Yt,svg$1),addToSet(qt,svg),addToSet(qt,xml)),fr.svgFilters===!0&&(addToSet(Yt,svgFilters),addToSet(qt,svg),addToSet(qt,xml)),fr.mathMl===!0&&(addToSet(Yt,mathMl$1),addToSet(qt,mathMl),addToSet(qt,xml))),$t.ADD_TAGS&&(Yt===Zt&&(Yt=clone(Yt)),addToSet(Yt,$t.ADD_TAGS,me)),$t.ADD_ATTR&&(qt===Kt&&(qt=clone(qt)),addToSet(qt,$t.ADD_ATTR,me)),$t.ADD_URI_SAFE_ATTR&&addToSet(Fr,$t.ADD_URI_SAFE_ATTR,me),$t.FORBID_CONTENTS&&(gr===Zr&&(gr=clone(gr)),addToSet(gr,$t.FORBID_CONTENTS,me)),Or&&(Yt["#text"]=!0),hr&&addToSet(Yt,["html","head","body"]),Yt.table&&(addToSet(Yt,["tbody"]),delete te.tbody),$t.TRUSTED_TYPES_POLICY){if(typeof $t.TRUSTED_TYPES_POLICY.createHTML!="function")throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof $t.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');kt=$t.TRUSTED_TYPES_POLICY,Et=kt.createHTML("")}else kt===void 0&&(kt=_createTrustedTypesPolicy(bt,ht)),kt!==null&&typeof Et=="string"&&(Et=kt.createHTML(""));freeze&&freeze($t),mr=$t}},Jr=addToSet({},[...svg$1,...svgFilters,...svgDisallowed]),ti=addToSet({},[...mathMl$1,...mathMlDisallowed]),_i=function($t){let Ut=vt($t);(!Ut||!Ut.tagName)&&(Ut={namespaceURI:pr,tagName:"template"});const Gt=stringToLowerCase($t.tagName),Qt=stringToLowerCase(Ut.tagName);return Hr[$t.namespaceURI]?$t.namespaceURI===Rr?Ut.namespaceURI===or?Gt==="svg":Ut.namespaceURI===Br?Gt==="svg"&&(Qt==="annotation-xml"||Ir[Qt]):!!Jr[Gt]:$t.namespaceURI===Br?Ut.namespaceURI===or?Gt==="math":Ut.namespaceURI===Rr?Gt==="math"&&Mr[Qt]:!!ti[Gt]:$t.namespaceURI===or?Ut.namespaceURI===Rr&&!Mr[Qt]||Ut.namespaceURI===Br&&!Ir[Qt]?!1:!ti[Gt]&&(ui[Gt]||!Jr[Gt]):!!(Er==="application/xhtml+xml"&&Hr[$t.namespaceURI]):!1},nr=function($t){arrayPush(it.removed,{element:$t});try{vt($t).removeChild($t)}catch{Ct($t)}},_r=function($t,Ut){try{arrayPush(it.removed,{attribute:Ut.getAttributeNode($t),from:Ut})}catch{arrayPush(it.removed,{attribute:null,from:Ut})}if(Ut.removeAttribute($t),$t==="is")if(ur||Lr)try{nr(Ut)}catch{}else try{Ut.setAttribute($t,"")}catch{}},ei=function($t){let Ut=null,Gt=null;if(Dr)$t="<remove></remove>"+$t;else{const ne=stringMatch($t,/^[\r\n\t ]+/);Gt=ne&&ne[0]}Er==="application/xhtml+xml"&&pr===or&&($t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+$t+"</body></html>");const Qt=kt?kt.createHTML($t):$t;if(pr===or)try{Ut=new yt().parseFromString(Qt,Er)}catch{}if(!Ut||!Ut.documentElement){Ut=Lt.createDocument(pr,"template",null);try{Ut.documentElement.innerHTML=Pr?Et:Qt}catch{}}const Ye=Ut.body||Ut.documentElement;return $t&&Gt&&Ye.insertBefore(lt.createTextNode(Gt),Ye.childNodes[0]||null),pr===or?Bt.call(Ut,hr?"html":"body")[0]:hr?Ut.documentElement:Ye},ri=function($t){return At.call($t.ownerDocument||$t,$t,gt.SHOW_ELEMENT|gt.SHOW_COMMENT|gt.SHOW_TEXT|gt.SHOW_PROCESSING_INSTRUCTION|gt.SHOW_CDATA_SECTION,null)},Ur=function($t){return $t instanceof _t&&(typeof $t.nodeName!="string"||typeof $t.textContent!="string"||typeof $t.removeChild!="function"||!($t.attributes instanceof mt)||typeof $t.removeAttribute!="function"||typeof $t.setAttribute!="function"||typeof $t.namespaceURI!="string"||typeof $t.insertBefore!="function"||typeof $t.hasChildNodes!="function")},ii=function($t){return typeof ut=="function"&&$t instanceof ut};function lr(Vt,$t,Ut){arrayForEach(Vt,Gt=>{Gt.call(it,$t,Ut,mr)})}const ai=function($t){let Ut=null;if(lr(Rt.beforeSanitizeElements,$t,null),Ur($t))return nr($t),!0;const Gt=me($t.nodeName);if(lr(Rt.uponSanitizeElement,$t,{tagName:Gt,allowedTags:Yt}),sr&&$t.hasChildNodes()&&!ii($t.firstElementChild)&&regExpTest(/<[/\w!]/g,$t.innerHTML)&&regExpTest(/<[/\w!]/g,$t.textContent)||$t.nodeType===NODE_TYPE.progressingInstruction||sr&&$t.nodeType===NODE_TYPE.comment&&regExpTest(/<[/\w]/g,$t.data))return nr($t),!0;if(!Yt[Gt]||te[Gt]){if(!te[Gt]&&si(Gt)&&(Xt.tagNameCheck instanceof RegExp&&regExpTest(Xt.tagNameCheck,Gt)||Xt.tagNameCheck instanceof Function&&Xt.tagNameCheck(Gt)))return!1;if(Or&&!gr[Gt]){const Qt=vt($t)||$t.parentNode,Ye=Tt($t)||$t.childNodes;if(Ye&&Qt){const ne=Ye.length;for(let tr=ne-1;tr>=0;--tr){const cr=wt(Ye[tr],!0);cr.__removalCount=($t.__removalCount||0)+1,Qt.insertBefore(cr,St($t))}}}return nr($t),!0}return $t instanceof pt&&!_i($t)||(Gt==="noscript"||Gt==="noembed"||Gt==="noframes")&&regExpTest(/<\/no(script|embed|frames)/i,$t.innerHTML)?(nr($t),!0):(rr&&$t.nodeType===NODE_TYPE.text&&(Ut=$t.textContent,arrayForEach([Pt,Ht,Nt],Qt=>{Ut=stringReplace(Ut,Qt," ")}),$t.textContent!==Ut&&(arrayPush(it.removed,{element:$t.cloneNode()}),$t.textContent=Ut)),lr(Rt.afterSanitizeElements,$t,null),!1)},ni=function($t,Ut,Gt){if(Yr&&(Ut==="id"||Ut==="name")&&(Gt in lt||Gt in mi))return!1;if(!(er&&!ee[Ut]&&regExpTest(Ot,Ut))){if(!(ir&&regExpTest(Mt,Ut))){if(!qt[Ut]||ee[Ut]){if(!(si($t)&&(Xt.tagNameCheck instanceof RegExp&&regExpTest(Xt.tagNameCheck,$t)||Xt.tagNameCheck instanceof Function&&Xt.tagNameCheck($t))&&(Xt.attributeNameCheck instanceof RegExp&&regExpTest(Xt.attributeNameCheck,Ut)||Xt.attributeNameCheck instanceof Function&&Xt.attributeNameCheck(Ut))||Ut==="is"&&Xt.allowCustomizedBuiltInElements&&(Xt.tagNameCheck instanceof RegExp&&regExpTest(Xt.tagNameCheck,Gt)||Xt.tagNameCheck instanceof Function&&Xt.tagNameCheck(Gt))))return!1}else if(!Fr[Ut]){if(!regExpTest(jt,stringReplace(Gt,Ft,""))){if(!((Ut==="src"||Ut==="xlink:href"||Ut==="href")&&$t!=="script"&&stringIndexOf(Gt,"data:")===0&&Vr[$t])){if(!(Jt&&!regExpTest(zt,stringReplace(Gt,Ft,"")))){if(Gt)return!1}}}}}}return!0},si=function($t){return $t!=="annotation-xml"&&stringMatch($t,Wt)},oi=function($t){lr(Rt.beforeSanitizeAttributes,$t,null);const{attributes:Ut}=$t;if(!Ut||Ur($t))return;const Gt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:qt,forceKeepAttr:void 0};let Qt=Ut.length;for(;Qt--;){const Ye=Ut[Qt],{name:ne,namespaceURI:tr,value:cr}=Ye,Ar=me(ne),Wr=cr;let Ve=ne==="value"?Wr:stringTrim(Wr);if(Gt.attrName=Ar,Gt.attrValue=Ve,Gt.keepAttr=!0,Gt.forceKeepAttr=void 0,lr(Rt.uponSanitizeAttribute,$t,Gt),Ve=Gt.attrValue,Gr&&(Ar==="id"||Ar==="name")&&(_r(ne,$t),Ve=hi+Ve),sr&&regExpTest(/((--!?|])>)|<\/(style|title)/i,Ve)){_r(ne,$t);continue}if(Gt.forceKeepAttr)continue;if(!Gt.keepAttr){_r(ne,$t);continue}if(!ar&&regExpTest(/\/>/i,Ve)){_r(ne,$t);continue}rr&&arrayForEach([Pt,Ht,Nt],ci=>{Ve=stringReplace(Ve,ci," ")});const li=me($t.nodeName);if(!ni(li,Ar,Ve)){_r(ne,$t);continue}if(kt&&typeof bt=="object"&&typeof bt.getAttributeType=="function"&&!tr)switch(bt.getAttributeType(li,Ar)){case"TrustedHTML":{Ve=kt.createHTML(Ve);break}case"TrustedScriptURL":{Ve=kt.createScriptURL(Ve);break}}if(Ve!==Wr)try{tr?$t.setAttributeNS(tr,ne,Ve):$t.setAttribute(ne,Ve),Ur($t)?nr($t):arrayPop(it.removed)}catch{_r(ne,$t)}}lr(Rt.afterSanitizeAttributes,$t,null)},yi=function Vt($t){let Ut=null;const Gt=ri($t);for(lr(Rt.beforeSanitizeShadowDOM,$t,null);Ut=Gt.nextNode();)lr(Rt.uponSanitizeShadowNode,Ut,null),ai(Ut),oi(Ut),Ut.content instanceof dt&&Vt(Ut.content);lr(Rt.afterSanitizeShadowDOM,$t,null)};return it.sanitize=function(Vt){let $t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ut=null,Gt=null,Qt=null,Ye=null;if(Pr=!Vt,Pr&&(Vt="<!-->"),typeof Vt!="string"&&!ii(Vt))if(typeof Vt.toString=="function"){if(Vt=Vt.toString(),typeof Vt!="string")throw typeErrorCreate("dirty is not a string, aborting")}else throw typeErrorCreate("toString is not a function");if(!it.isSupported)return Vt;if(Nr||zr($t),it.removed=[],typeof Vt=="string"&&(kr=!1),kr){if(Vt.nodeName){const cr=me(Vt.nodeName);if(!Yt[cr]||te[cr])throw typeErrorCreate("root node is forbidden and cannot be sanitized in-place")}}else if(Vt instanceof ut)Ut=ei("<!---->"),Gt=Ut.ownerDocument.importNode(Vt,!0),Gt.nodeType===NODE_TYPE.element&&Gt.nodeName==="BODY"||Gt.nodeName==="HTML"?Ut=Gt:Ut.appendChild(Gt);else{if(!ur&&!rr&&!hr&&Vt.indexOf("<")===-1)return kt&&$r?kt.createHTML(Vt):Vt;if(Ut=ei(Vt),!Ut)return ur?null:$r?Et:""}Ut&&Dr&&nr(Ut.firstChild);const ne=ri(kr?Vt:Ut);for(;Qt=ne.nextNode();)ai(Qt),oi(Qt),Qt.content instanceof dt&&yi(Qt.content);if(kr)return Vt;if(ur){if(Lr)for(Ye=It.call(Ut.ownerDocument);Ut.firstChild;)Ye.appendChild(Ut.firstChild);else Ye=Ut;return(qt.shadowroot||qt.shadowrootmode)&&(Ye=Dt.call(ct,Ye,!0)),Ye}let tr=hr?Ut.outerHTML:Ut.innerHTML;return hr&&Yt["!doctype"]&&Ut.ownerDocument&&Ut.ownerDocument.doctype&&Ut.ownerDocument.doctype.name&&regExpTest(DOCTYPE_NAME,Ut.ownerDocument.doctype.name)&&(tr="<!DOCTYPE "+Ut.ownerDocument.doctype.name+`>
`+tr),rr&&arrayForEach([Pt,Ht,Nt],cr=>{tr=stringReplace(tr,cr," ")}),kt&&$r?kt.createHTML(tr):tr},it.setConfig=function(){let Vt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};zr(Vt),Nr=!0},it.clearConfig=function(){mr=null,Nr=!1},it.isValidAttribute=function(Vt,$t,Ut){mr||zr({});const Gt=me(Vt),Qt=me($t);return ni(Gt,Qt,Ut)},it.addHook=function(Vt,$t){typeof $t=="function"&&arrayPush(Rt[Vt],$t)},it.removeHook=function(Vt,$t){if($t!==void 0){const Ut=arrayLastIndexOf(Rt[Vt],$t);return Ut===-1?void 0:arraySplice(Rt[Vt],Ut,1)[0]}return arrayPop(Rt[Vt])},it.removeHooks=function(Vt){Rt[Vt]=[]},it.removeAllHooks=function(){Rt=_createHooksMap()},it}var purify=createDOMPurify(),frontMatterRegex=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,directiveRegex=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,anyCommentRegex=/\s*%%.*\n/gm,yr,UnknownDiagramError=(yr=class extends Error{constructor(it){super(it),this.name="UnknownDiagramError"}},__name(yr,"UnknownDiagramError"),yr),detectors={},detectType$1=__name(function(rt,it){rt=rt.replace(frontMatterRegex,"").replace(directiveRegex,"").replace(anyCommentRegex,`
`);for(const[lt,{detector:ct}]of Object.entries(detectors))if(ct(rt,it))return lt;throw new UnknownDiagramError(`No diagram type detected matching given configuration for text: ${rt}`)},"detectType"),registerLazyLoadedDiagrams=__name((...rt)=>{for(const{id:it,detector:lt,loader:ct}of rt)addDetector(it,lt,ct)},"registerLazyLoadedDiagrams"),addDetector=__name((rt,it,lt)=>{detectors[rt]&&log.warn(`Detector with key ${rt} already exists. Overwriting.`),detectors[rt]={detector:it,loader:lt},log.debug(`Detector with key ${rt} added${lt?" with loader":""}`)},"addDetector"),getDiagramLoader=__name(rt=>detectors[rt].loader,"getDiagramLoader"),assignWithDepth=__name((rt,it,{depth:lt=2,clobber:ct=!1}={})=>{const ht={depth:lt,clobber:ct};return Array.isArray(it)&&!Array.isArray(rt)?(it.forEach(dt=>assignWithDepth(rt,dt,ht)),rt):Array.isArray(it)&&Array.isArray(rt)?(it.forEach(dt=>{rt.includes(dt)||rt.push(dt)}),rt):rt===void 0||lt<=0?rt!=null&&typeof rt=="object"&&typeof it=="object"?Object.assign(rt,it):it:(it!==void 0&&typeof rt=="object"&&typeof it=="object"&&Object.keys(it).forEach(dt=>{typeof it[dt]=="object"&&(rt[dt]===void 0||typeof rt[dt]=="object")?(rt[dt]===void 0&&(rt[dt]=Array.isArray(it[dt])?[]:{}),rt[dt]=assignWithDepth(rt[dt],it[dt],{depth:lt-1,clobber:ct})):(ct||typeof rt[dt]!="object"&&typeof it[dt]!="object")&&(rt[dt]=it[dt])}),rt)},"assignWithDepth"),assignWithDepth_default=assignWithDepth,oldAttributeBackgroundColorOdd="#ffffff",oldAttributeBackgroundColorEven="#f2f2f2",mkBorder=__name((rt,it)=>it?adjust(rt,{s:-40,l:10}):adjust(rt,{s:-40,l:-10}),"mkBorder"),br,Theme=(br=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||adjust(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||adjust(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||mkBorder(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||mkBorder(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||mkBorder(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||mkBorder(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||invert(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||invert(this.tertiaryColor),this.lineColor=this.lineColor||invert(this.background),this.arrowheadColor=this.arrowheadColor||invert(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?darken(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||this.actorBorder,this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||darken(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||invert(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||lighten(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.vertLineColor=this.vertLineColor||"navy",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.darkMode?(this.rowOdd=this.rowOdd||darken(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||darken(this.mainBkg,10)):(this.rowOdd=this.rowOdd||lighten(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||lighten(this.mainBkg,5)),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||adjust(this.primaryColor,{h:30}),this.cScale4=this.cScale4||adjust(this.primaryColor,{h:60}),this.cScale5=this.cScale5||adjust(this.primaryColor,{h:90}),this.cScale6=this.cScale6||adjust(this.primaryColor,{h:120}),this.cScale7=this.cScale7||adjust(this.primaryColor,{h:150}),this.cScale8=this.cScale8||adjust(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||adjust(this.primaryColor,{h:270}),this.cScale10=this.cScale10||adjust(this.primaryColor,{h:300}),this.cScale11=this.cScale11||adjust(this.primaryColor,{h:330}),this.darkMode)for(let lt=0;lt<this.THEME_COLOR_LIMIT;lt++)this["cScale"+lt]=darken(this["cScale"+lt],75);else for(let lt=0;lt<this.THEME_COLOR_LIMIT;lt++)this["cScale"+lt]=darken(this["cScale"+lt],25);for(let lt=0;lt<this.THEME_COLOR_LIMIT;lt++)this["cScaleInv"+lt]=this["cScaleInv"+lt]||invert(this["cScale"+lt]);for(let lt=0;lt<this.THEME_COLOR_LIMIT;lt++)this.darkMode?this["cScalePeer"+lt]=this["cScalePeer"+lt]||lighten(this["cScale"+lt],10):this["cScalePeer"+lt]=this["cScalePeer"+lt]||darken(this["cScale"+lt],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let lt=0;lt<this.THEME_COLOR_LIMIT;lt++)this["cScaleLabel"+lt]=this["cScaleLabel"+lt]||this.scaleLabelColor;const it=this.darkMode?-4:-1;for(let lt=0;lt<5;lt++)this["surface"+lt]=this["surface"+lt]||adjust(this.mainBkg,{h:180,s:-15,l:it*(5+lt*3)}),this["surfacePeer"+lt]=this["surfacePeer"+lt]||adjust(this.mainBkg,{h:180,s:-15,l:it*(8+lt*3)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||adjust(this.primaryColor,{h:64}),this.fillType3=this.fillType3||adjust(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||adjust(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||adjust(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||adjust(this.primaryColor,{h:128}),this.fillType7=this.fillType7||adjust(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||adjust(this.primaryColor,{l:-10}),this.pie5=this.pie5||adjust(this.secondaryColor,{l:-10}),this.pie6=this.pie6||adjust(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||adjust(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||adjust(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||adjust(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||adjust(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||adjust(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||adjust(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.archEdgeColor=this.archEdgeColor||"#777",this.archEdgeArrowColor=this.archEdgeArrowColor||"#777",this.archEdgeWidth=this.archEdgeWidth||"3",this.archGroupBorderColor=this.archGroupBorderColor||"#000",this.archGroupBorderWidth=this.archGroupBorderWidth||"2px",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||adjust(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||adjust(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||adjust(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||adjust(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||adjust(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||adjust(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||isDark(this.quadrant1Fill)?lighten(this.quadrant1Fill):darken(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?darken(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||adjust(this.primaryColor,{h:-30}),this.git4=this.git4||adjust(this.primaryColor,{h:-60}),this.git5=this.git5||adjust(this.primaryColor,{h:-90}),this.git6=this.git6||adjust(this.primaryColor,{h:60}),this.git7=this.git7||adjust(this.primaryColor,{h:120}),this.darkMode?(this.git0=lighten(this.git0,25),this.git1=lighten(this.git1,25),this.git2=lighten(this.git2,25),this.git3=lighten(this.git3,25),this.git4=lighten(this.git4,25),this.git5=lighten(this.git5,25),this.git6=lighten(this.git6,25),this.git7=lighten(this.git7,25)):(this.git0=darken(this.git0,25),this.git1=darken(this.git1,25),this.git2=darken(this.git2,25),this.git3=darken(this.git3,25),this.git4=darken(this.git4,25),this.git5=darken(this.git5,25),this.git6=darken(this.git6,25),this.git7=darken(this.git7,25)),this.gitInv0=this.gitInv0||invert(this.git0),this.gitInv1=this.gitInv1||invert(this.git1),this.gitInv2=this.gitInv2||invert(this.git2),this.gitInv3=this.gitInv3||invert(this.git3),this.gitInv4=this.gitInv4||invert(this.git4),this.gitInv5=this.gitInv5||invert(this.git5),this.gitInv6=this.gitInv6||invert(this.git6),this.gitInv7=this.gitInv7||invert(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||oldAttributeBackgroundColorOdd,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||oldAttributeBackgroundColorEven}calculate(it){if(typeof it!="object"){this.updateColors();return}const lt=Object.keys(it);lt.forEach(ct=>{this[ct]=it[ct]}),this.updateColors(),lt.forEach(ct=>{this[ct]=it[ct]})}},__name(br,"Theme"),br),getThemeVariables=__name(rt=>{const it=new Theme;return it.calculate(rt),it},"getThemeVariables"),xr,Theme2=(xr=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=lighten(this.primaryColor,16),this.tertiaryColor=adjust(this.primaryColor,{h:-160}),this.primaryBorderColor=invert(this.background),this.secondaryBorderColor=mkBorder(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=mkBorder(this.tertiaryColor,this.darkMode),this.primaryTextColor=invert(this.primaryColor),this.secondaryTextColor=invert(this.secondaryColor),this.tertiaryTextColor=invert(this.tertiaryColor),this.lineColor=invert(this.background),this.textColor=invert(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=lighten(invert("#323D47"),10),this.lineColor="calculated",this.border1="#ccc",this.border2=rgba$1(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=darken("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=darken(this.sectionBkgColor,10),this.taskBorderColor=rgba$1(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=rgba$1(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||lighten(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||darken(this.mainBkg,10),this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){this.secondBkg=lighten(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=lighten(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.actorBorder,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=lighten(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=adjust(this.primaryColor,{h:64}),this.fillType3=adjust(this.secondaryColor,{h:64}),this.fillType4=adjust(this.primaryColor,{h:-64}),this.fillType5=adjust(this.secondaryColor,{h:-64}),this.fillType6=adjust(this.primaryColor,{h:128}),this.fillType7=adjust(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||adjust(this.primaryColor,{h:30}),this.cScale4=this.cScale4||adjust(this.primaryColor,{h:60}),this.cScale5=this.cScale5||adjust(this.primaryColor,{h:90}),this.cScale6=this.cScale6||adjust(this.primaryColor,{h:120}),this.cScale7=this.cScale7||adjust(this.primaryColor,{h:150}),this.cScale8=this.cScale8||adjust(this.primaryColor,{h:210}),this.cScale9=this.cScale9||adjust(this.primaryColor,{h:270}),this.cScale10=this.cScale10||adjust(this.primaryColor,{h:300}),this.cScale11=this.cScale11||adjust(this.primaryColor,{h:330});for(let it=0;it<this.THEME_COLOR_LIMIT;it++)this["cScaleInv"+it]=this["cScaleInv"+it]||invert(this["cScale"+it]);for(let it=0;it<this.THEME_COLOR_LIMIT;it++)this["cScalePeer"+it]=this["cScalePeer"+it]||lighten(this["cScale"+it],10);for(let it=0;it<5;it++)this["surface"+it]=this["surface"+it]||adjust(this.mainBkg,{h:30,s:-30,l:-(-10+it*4)}),this["surfacePeer"+it]=this["surfacePeer"+it]||adjust(this.mainBkg,{h:30,s:-30,l:-(-7+it*4)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let it=0;it<this.THEME_COLOR_LIMIT;it++)this["cScaleLabel"+it]=this["cScaleLabel"+it]||this.scaleLabelColor;for(let it=0;it<this.THEME_COLOR_LIMIT;it++)this["pie"+it]=this["cScale"+it];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||adjust(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||adjust(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||adjust(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||adjust(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||adjust(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||adjust(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||isDark(this.quadrant1Fill)?lighten(this.quadrant1Fill):darken(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.background},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?darken(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=lighten(this.secondaryColor,20),this.git1=lighten(this.pie2||this.secondaryColor,20),this.git2=lighten(this.pie3||this.tertiaryColor,20),this.git3=lighten(this.pie4||adjust(this.primaryColor,{h:-30}),20),this.git4=lighten(this.pie5||adjust(this.primaryColor,{h:-60}),20),this.git5=lighten(this.pie6||adjust(this.primaryColor,{h:-90}),10),this.git6=lighten(this.pie7||adjust(this.primaryColor,{h:60}),10),this.git7=lighten(this.pie8||adjust(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||invert(this.git0),this.gitInv1=this.gitInv1||invert(this.git1),this.gitInv2=this.gitInv2||invert(this.git2),this.gitInv3=this.gitInv3||invert(this.git3),this.gitInv4=this.gitInv4||invert(this.git4),this.gitInv5=this.gitInv5||invert(this.git5),this.gitInv6=this.gitInv6||invert(this.git6),this.gitInv7=this.gitInv7||invert(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||invert(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||invert(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||lighten(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||lighten(this.background,2),this.nodeBorder=this.nodeBorder||"#999"}calculate(it){if(typeof it!="object"){this.updateColors();return}const lt=Object.keys(it);lt.forEach(ct=>{this[ct]=it[ct]}),this.updateColors(),lt.forEach(ct=>{this[ct]=it[ct]})}},__name(xr,"Theme"),xr),getThemeVariables2=__name(rt=>{const it=new Theme2;return it.calculate(rt),it},"getThemeVariables"),wr,Theme3=(wr=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=adjust(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=adjust(this.primaryColor,{h:-160}),this.primaryBorderColor=mkBorder(this.primaryColor,this.darkMode),this.secondaryBorderColor=mkBorder(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=mkBorder(this.tertiaryColor,this.darkMode),this.primaryTextColor=invert(this.primaryColor),this.secondaryTextColor=invert(this.secondaryColor),this.tertiaryTextColor=invert(this.tertiaryColor),this.lineColor=invert(this.background),this.textColor=invert(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="rgba(232,232,232, 0.8)",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.sectionBkgColor=rgba$1(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="navy",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd="calculated",this.rowEven="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||adjust(this.primaryColor,{h:30}),this.cScale4=this.cScale4||adjust(this.primaryColor,{h:60}),this.cScale5=this.cScale5||adjust(this.primaryColor,{h:90}),this.cScale6=this.cScale6||adjust(this.primaryColor,{h:120}),this.cScale7=this.cScale7||adjust(this.primaryColor,{h:150}),this.cScale8=this.cScale8||adjust(this.primaryColor,{h:210}),this.cScale9=this.cScale9||adjust(this.primaryColor,{h:270}),this.cScale10=this.cScale10||adjust(this.primaryColor,{h:300}),this.cScale11=this.cScale11||adjust(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||darken(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||darken(this.tertiaryColor,40);for(let it=0;it<this.THEME_COLOR_LIMIT;it++)this["cScale"+it]=darken(this["cScale"+it],10),this["cScalePeer"+it]=this["cScalePeer"+it]||darken(this["cScale"+it],25);for(let it=0;it<this.THEME_COLOR_LIMIT;it++)this["cScaleInv"+it]=this["cScaleInv"+it]||adjust(this["cScale"+it],{h:180});for(let it=0;it<5;it++)this["surface"+it]=this["surface"+it]||adjust(this.mainBkg,{h:30,l:-(5+it*5)}),this["surfacePeer"+it]=this["surfacePeer"+it]||adjust(this.mainBkg,{h:30,l:-(7+it*5)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||invert(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||invert(this.labelTextColor);for(let it=0;it<this.THEME_COLOR_LIMIT;it++)this["cScaleLabel"+it]=this["cScaleLabel"+it]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=lighten(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||lighten(this.primaryColor,75)||"#ffffff",this.rowEven=this.rowEven||lighten(this.primaryColor,1),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=adjust(this.primaryColor,{h:64}),this.fillType3=adjust(this.secondaryColor,{h:64}),this.fillType4=adjust(this.primaryColor,{h:-64}),this.fillType5=adjust(this.secondaryColor,{h:-64}),this.fillType6=adjust(this.primaryColor,{h:128}),this.fillType7=adjust(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||adjust(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||adjust(this.primaryColor,{l:-10}),this.pie5=this.pie5||adjust(this.secondaryColor,{l:-30}),this.pie6=this.pie6||adjust(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||adjust(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||adjust(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||adjust(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||adjust(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||adjust(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||adjust(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||adjust(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||adjust(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||adjust(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||adjust(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||adjust(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||adjust(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||isDark(this.quadrant1Fill)?lighten(this.quadrant1Fill):darken(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||adjust(this.primaryColor,{h:-30}),this.git4=this.git4||adjust(this.primaryColor,{h:-60}),this.git5=this.git5||adjust(this.primaryColor,{h:-90}),this.git6=this.git6||adjust(this.primaryColor,{h:60}),this.git7=this.git7||adjust(this.primaryColor,{h:120}),this.darkMode?(this.git0=lighten(this.git0,25),this.git1=lighten(this.git1,25),this.git2=lighten(this.git2,25),this.git3=lighten(this.git3,25),this.git4=lighten(this.git4,25),this.git5=lighten(this.git5,25),this.git6=lighten(this.git6,25),this.git7=lighten(this.git7,25)):(this.git0=darken(this.git0,25),this.git1=darken(this.git1,25),this.git2=darken(this.git2,25),this.git3=darken(this.git3,25),this.git4=darken(this.git4,25),this.git5=darken(this.git5,25),this.git6=darken(this.git6,25),this.git7=darken(this.git7,25)),this.gitInv0=this.gitInv0||darken(invert(this.git0),25),this.gitInv1=this.gitInv1||invert(this.git1),this.gitInv2=this.gitInv2||invert(this.git2),this.gitInv3=this.gitInv3||invert(this.git3),this.gitInv4=this.gitInv4||invert(this.git4),this.gitInv5=this.gitInv5||invert(this.git5),this.gitInv6=this.gitInv6||invert(this.git6),this.gitInv7=this.gitInv7||invert(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||invert(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||invert(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||oldAttributeBackgroundColorOdd,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||oldAttributeBackgroundColorEven}calculate(it){if(Object.keys(this).forEach(ct=>{this[ct]==="calculated"&&(this[ct]=void 0)}),typeof it!="object"){this.updateColors();return}const lt=Object.keys(it);lt.forEach(ct=>{this[ct]=it[ct]}),this.updateColors(),lt.forEach(ct=>{this[ct]=it[ct]})}},__name(wr,"Theme"),wr),getThemeVariables3=__name(rt=>{const it=new Theme3;return it.calculate(rt),it},"getThemeVariables"),Sr,Theme4=(Sr=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=lighten("#cde498",10),this.primaryBorderColor=mkBorder(this.primaryColor,this.darkMode),this.secondaryBorderColor=mkBorder(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=mkBorder(this.tertiaryColor,this.darkMode),this.primaryTextColor=invert(this.primaryColor),this.secondaryTextColor=invert(this.secondaryColor),this.tertiaryTextColor=invert(this.primaryColor),this.lineColor=invert(this.background),this.textColor=invert(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.actorBorder=darken(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||adjust(this.primaryColor,{h:30}),this.cScale4=this.cScale4||adjust(this.primaryColor,{h:60}),this.cScale5=this.cScale5||adjust(this.primaryColor,{h:90}),this.cScale6=this.cScale6||adjust(this.primaryColor,{h:120}),this.cScale7=this.cScale7||adjust(this.primaryColor,{h:150}),this.cScale8=this.cScale8||adjust(this.primaryColor,{h:210}),this.cScale9=this.cScale9||adjust(this.primaryColor,{h:270}),this.cScale10=this.cScale10||adjust(this.primaryColor,{h:300}),this.cScale11=this.cScale11||adjust(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||darken(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||darken(this.tertiaryColor,40);for(let it=0;it<this.THEME_COLOR_LIMIT;it++)this["cScale"+it]=darken(this["cScale"+it],10),this["cScalePeer"+it]=this["cScalePeer"+it]||darken(this["cScale"+it],25);for(let it=0;it<this.THEME_COLOR_LIMIT;it++)this["cScaleInv"+it]=this["cScaleInv"+it]||adjust(this["cScale"+it],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let it=0;it<this.THEME_COLOR_LIMIT;it++)this["cScaleLabel"+it]=this["cScaleLabel"+it]||this.scaleLabelColor;for(let it=0;it<5;it++)this["surface"+it]=this["surface"+it]||adjust(this.mainBkg,{h:30,s:-30,l:-(5+it*5)}),this["surfacePeer"+it]=this["surfacePeer"+it]||adjust(this.mainBkg,{h:30,s:-30,l:-(8+it*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||lighten(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||lighten(this.mainBkg,20),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=adjust(this.primaryColor,{h:64}),this.fillType3=adjust(this.secondaryColor,{h:64}),this.fillType4=adjust(this.primaryColor,{h:-64}),this.fillType5=adjust(this.secondaryColor,{h:-64}),this.fillType6=adjust(this.primaryColor,{h:128}),this.fillType7=adjust(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||adjust(this.primaryColor,{l:-30}),this.pie5=this.pie5||adjust(this.secondaryColor,{l:-30}),this.pie6=this.pie6||adjust(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||adjust(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||adjust(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||adjust(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||adjust(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||adjust(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||adjust(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||adjust(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||adjust(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||adjust(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||adjust(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||adjust(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||adjust(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||isDark(this.quadrant1Fill)?lighten(this.quadrant1Fill):darken(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.mainBkg},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||adjust(this.primaryColor,{h:-30}),this.git4=this.git4||adjust(this.primaryColor,{h:-60}),this.git5=this.git5||adjust(this.primaryColor,{h:-90}),this.git6=this.git6||adjust(this.primaryColor,{h:60}),this.git7=this.git7||adjust(this.primaryColor,{h:120}),this.darkMode?(this.git0=lighten(this.git0,25),this.git1=lighten(this.git1,25),this.git2=lighten(this.git2,25),this.git3=lighten(this.git3,25),this.git4=lighten(this.git4,25),this.git5=lighten(this.git5,25),this.git6=lighten(this.git6,25),this.git7=lighten(this.git7,25)):(this.git0=darken(this.git0,25),this.git1=darken(this.git1,25),this.git2=darken(this.git2,25),this.git3=darken(this.git3,25),this.git4=darken(this.git4,25),this.git5=darken(this.git5,25),this.git6=darken(this.git6,25),this.git7=darken(this.git7,25)),this.gitInv0=this.gitInv0||invert(this.git0),this.gitInv1=this.gitInv1||invert(this.git1),this.gitInv2=this.gitInv2||invert(this.git2),this.gitInv3=this.gitInv3||invert(this.git3),this.gitInv4=this.gitInv4||invert(this.git4),this.gitInv5=this.gitInv5||invert(this.git5),this.gitInv6=this.gitInv6||invert(this.git6),this.gitInv7=this.gitInv7||invert(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||invert(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||invert(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||oldAttributeBackgroundColorOdd,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||oldAttributeBackgroundColorEven}calculate(it){if(typeof it!="object"){this.updateColors();return}const lt=Object.keys(it);lt.forEach(ct=>{this[ct]=it[ct]}),this.updateColors(),lt.forEach(ct=>{this[ct]=it[ct]})}},__name(Sr,"Theme"),Sr),getThemeVariables4=__name(rt=>{const it=new Theme4;return it.calculate(rt),it},"getThemeVariables"),Cr,Theme5=(Cr=class{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=lighten(this.contrast,55),this.background="#ffffff",this.tertiaryColor=adjust(this.primaryColor,{h:-160}),this.primaryBorderColor=mkBorder(this.primaryColor,this.darkMode),this.secondaryBorderColor=mkBorder(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=mkBorder(this.tertiaryColor,this.darkMode),this.primaryTextColor=invert(this.primaryColor),this.secondaryTextColor=invert(this.secondaryColor),this.tertiaryTextColor=invert(this.tertiaryColor),this.lineColor=invert(this.background),this.textColor=invert(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor=this.actorBorder,this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||lighten(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||"#f4f4f4",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.secondBkg=lighten(this.contrast,55),this.border2=this.contrast,this.actorBorder=lighten(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.actorBorder,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let it=0;it<this.THEME_COLOR_LIMIT;it++)this["cScaleInv"+it]=this["cScaleInv"+it]||invert(this["cScale"+it]);for(let it=0;it<this.THEME_COLOR_LIMIT;it++)this.darkMode?this["cScalePeer"+it]=this["cScalePeer"+it]||lighten(this["cScale"+it],10):this["cScalePeer"+it]=this["cScalePeer"+it]||darken(this["cScale"+it],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let it=0;it<this.THEME_COLOR_LIMIT;it++)this["cScaleLabel"+it]=this["cScaleLabel"+it]||this.scaleLabelColor;for(let it=0;it<5;it++)this["surface"+it]=this["surface"+it]||adjust(this.mainBkg,{l:-(5+it*5)}),this["surfacePeer"+it]=this["surfacePeer"+it]||adjust(this.mainBkg,{l:-(8+it*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=lighten(this.contrast,30),this.sectionBkgColor2=lighten(this.contrast,30),this.taskBorderColor=darken(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=lighten(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=darken(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.vertLineColor=this.critBkgColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=adjust(this.primaryColor,{h:64}),this.fillType3=adjust(this.secondaryColor,{h:64}),this.fillType4=adjust(this.primaryColor,{h:-64}),this.fillType5=adjust(this.secondaryColor,{h:-64}),this.fillType6=adjust(this.primaryColor,{h:128}),this.fillType7=adjust(this.secondaryColor,{h:128});for(let it=0;it<this.THEME_COLOR_LIMIT;it++)this["pie"+it]=this["cScale"+it];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||adjust(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||adjust(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||adjust(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||adjust(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||adjust(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||adjust(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||isDark(this.quadrant1Fill)?lighten(this.quadrant1Fill):darken(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=darken(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||adjust(this.primaryColor,{h:-30}),this.git4=this.pie5||adjust(this.primaryColor,{h:-60}),this.git5=this.pie6||adjust(this.primaryColor,{h:-90}),this.git6=this.pie7||adjust(this.primaryColor,{h:60}),this.git7=this.pie8||adjust(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||invert(this.git0),this.gitInv1=this.gitInv1||invert(this.git1),this.gitInv2=this.gitInv2||invert(this.git2),this.gitInv3=this.gitInv3||invert(this.git3),this.gitInv4=this.gitInv4||invert(this.git4),this.gitInv5=this.gitInv5||invert(this.git5),this.gitInv6=this.gitInv6||invert(this.git6),this.gitInv7=this.gitInv7||invert(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||oldAttributeBackgroundColorOdd,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||oldAttributeBackgroundColorEven}calculate(it){if(typeof it!="object"){this.updateColors();return}const lt=Object.keys(it);lt.forEach(ct=>{this[ct]=it[ct]}),this.updateColors(),lt.forEach(ct=>{this[ct]=it[ct]})}},__name(Cr,"Theme"),Cr),getThemeVariables5=__name(rt=>{const it=new Theme5;return it.calculate(rt),it},"getThemeVariables"),themes_default={base:{getThemeVariables},dark:{getThemeVariables:getThemeVariables2},default:{getThemeVariables:getThemeVariables3},forest:{getThemeVariables:getThemeVariables4},neutral:{getThemeVariables:getThemeVariables5}},config_schema_default={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200,inheritDir:!1},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,maxLabelWidth:360,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],titleColor:"",titleFontFamily:'"trebuchet ms", verdana, arial, sans-serif',titleFontSize:"4ex"},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1,hideEmptyMembersBox:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,nodeSpacing:140,rankSpacing:80,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showDataLabel:!1,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200,layoutAlgorithm:"cose-bilkent"},kanban:{useMaxWidth:!0,padding:8,sectionWidth:200,ticketBaseUrl:""},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},packet:{useMaxWidth:!0,rowHeight:32,bitWidth:32,bitsPerRow:32,showBits:!0,paddingX:5,paddingY:5},architecture:{useMaxWidth:!0,padding:40,iconSize:80,fontSize:16},radar:{useMaxWidth:!0,width:600,height:600,marginTop:50,marginRight:50,marginBottom:50,marginLeft:50,axisScaleFactor:1,axisLabelFactor:1.05,curveTension:.17},theme:"default",look:"classic",handDrawnSeed:0,layout:"dagre",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","suppressErrorRendering","maxEdges"],legacyMathML:!1,forceLegacyMathML:!1,deterministicIds:!1,fontSize:16,markdownAutoWrap:!0,suppressErrorRendering:!1},config={...config_schema_default,deterministicIDSeed:void 0,elk:{mergeEdges:!1,nodePlacementStrategy:"BRANDES_KOEPF",forceNodeModelOrder:!1,considerModelOrder:"NODES_AND_EDGES"},themeCSS:void 0,themeVariables:themes_default.default.getThemeVariables(),sequence:{...config_schema_default.sequence,messageFont:__name(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont"),noteFont:__name(function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},"noteFont"),actorFont:__name(function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}},"actorFont")},class:{hideEmptyMembersBox:!1},gantt:{...config_schema_default.gantt,tickInterval:void 0,useWidth:void 0},c4:{...config_schema_default.c4,useWidth:void 0,personFont:__name(function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},"personFont"),flowchart:{...config_schema_default.flowchart,inheritDir:!1},external_personFont:__name(function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},"external_personFont"),systemFont:__name(function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},"systemFont"),external_systemFont:__name(function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},"external_systemFont"),system_dbFont:__name(function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},"system_dbFont"),external_system_dbFont:__name(function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},"external_system_dbFont"),system_queueFont:__name(function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},"system_queueFont"),external_system_queueFont:__name(function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},"external_system_queueFont"),containerFont:__name(function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},"containerFont"),external_containerFont:__name(function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},"external_containerFont"),container_dbFont:__name(function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},"container_dbFont"),external_container_dbFont:__name(function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},"external_container_dbFont"),container_queueFont:__name(function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},"container_queueFont"),external_container_queueFont:__name(function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},"external_container_queueFont"),componentFont:__name(function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},"componentFont"),external_componentFont:__name(function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},"external_componentFont"),component_dbFont:__name(function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},"component_dbFont"),external_component_dbFont:__name(function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},"external_component_dbFont"),component_queueFont:__name(function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},"component_queueFont"),external_component_queueFont:__name(function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},"external_component_queueFont"),boundaryFont:__name(function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},"boundaryFont"),messageFont:__name(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont")},pie:{...config_schema_default.pie,useWidth:984},xyChart:{...config_schema_default.xyChart,useWidth:void 0},requirement:{...config_schema_default.requirement,useWidth:void 0},packet:{...config_schema_default.packet},radar:{...config_schema_default.radar},treemap:{useMaxWidth:!0,padding:10,diagramPadding:8,showValues:!0,nodeWidth:100,nodeHeight:40,borderWidth:1,valueFontSize:12,labelFontSize:14,valueFormat:","}},keyify=__name((rt,it="")=>Object.keys(rt).reduce((lt,ct)=>Array.isArray(rt[ct])?lt:typeof rt[ct]=="object"&&rt[ct]!==null?[...lt,it+ct,...keyify(rt[ct],"")]:[...lt,it+ct],[]),"keyify"),configKeys=new Set(keyify(config,"")),defaultConfig_default=config,sanitizeDirective=__name(rt=>{if(log.debug("sanitizeDirective called with",rt),!(typeof rt!="object"||rt==null)){if(Array.isArray(rt)){rt.forEach(it=>sanitizeDirective(it));return}for(const it of Object.keys(rt)){if(log.debug("Checking key",it),it.startsWith("__")||it.includes("proto")||it.includes("constr")||!configKeys.has(it)||rt[it]==null){log.debug("sanitize deleting key: ",it),delete rt[it];continue}if(typeof rt[it]=="object"){log.debug("sanitizing object",it),sanitizeDirective(rt[it]);continue}const lt=["themeCSS","fontFamily","altFontFamily"];for(const ct of lt)it.includes(ct)&&(log.debug("sanitizing css option",it),rt[it]=sanitizeCss(rt[it]))}if(rt.themeVariables)for(const it of Object.keys(rt.themeVariables)){const lt=rt.themeVariables[it];lt?.match&&!lt.match(/^[\d "#%(),.;A-Za-z]+$/)&&(rt.themeVariables[it]="")}log.debug("After sanitization",rt)}},"sanitizeDirective"),sanitizeCss=__name(rt=>{let it=0,lt=0;for(const ct of rt){if(it<lt)return"{ /* ERROR: Unbalanced CSS */ }";ct==="{"?it++:ct==="}"&&lt++}return it!==lt?"{ /* ERROR: Unbalanced CSS */ }":rt},"sanitizeCss"),defaultConfig=Object.freeze(defaultConfig_default),siteConfig=assignWithDepth_default({},defaultConfig),configFromInitialize,directives=[],currentConfig=assignWithDepth_default({},defaultConfig),updateCurrentConfig=__name((rt,it)=>{let lt=assignWithDepth_default({},rt),ct={};for(const ht of it)sanitize(ht),ct=assignWithDepth_default(ct,ht);if(lt=assignWithDepth_default(lt,ct),ct.theme&&ct.theme in themes_default){const ht=assignWithDepth_default({},configFromInitialize),dt=assignWithDepth_default(ht.themeVariables||{},ct.themeVariables);lt.theme&&lt.theme in themes_default&&(lt.themeVariables=themes_default[lt.theme].getThemeVariables(dt))}return currentConfig=lt,checkConfig(currentConfig),currentConfig},"updateCurrentConfig"),setSiteConfig=__name(rt=>(siteConfig=assignWithDepth_default({},defaultConfig),siteConfig=assignWithDepth_default(siteConfig,rt),rt.theme&&themes_default[rt.theme]&&(siteConfig.themeVariables=themes_default[rt.theme].getThemeVariables(rt.themeVariables)),updateCurrentConfig(siteConfig,directives),siteConfig),"setSiteConfig"),saveConfigFromInitialize=__name(rt=>{configFromInitialize=assignWithDepth_default({},rt)},"saveConfigFromInitialize"),updateSiteConfig=__name(rt=>(siteConfig=assignWithDepth_default(siteConfig,rt),updateCurrentConfig(siteConfig,directives),siteConfig),"updateSiteConfig"),getSiteConfig=__name(()=>assignWithDepth_default({},siteConfig),"getSiteConfig"),setConfig=__name(rt=>(checkConfig(rt),assignWithDepth_default(currentConfig,rt),getConfig()),"setConfig"),getConfig=__name(()=>assignWithDepth_default({},currentConfig),"getConfig"),sanitize=__name(rt=>{rt&&(["secure",...siteConfig.secure??[]].forEach(it=>{Object.hasOwn(rt,it)&&(log.debug(`Denied attempt to modify a secure key ${it}`,rt[it]),delete rt[it])}),Object.keys(rt).forEach(it=>{it.startsWith("__")&&delete rt[it]}),Object.keys(rt).forEach(it=>{typeof rt[it]=="string"&&(rt[it].includes("<")||rt[it].includes(">")||rt[it].includes("url(data:"))&&delete rt[it],typeof rt[it]=="object"&&sanitize(rt[it])}))},"sanitize"),addDirective=__name(rt=>{sanitizeDirective(rt),rt.fontFamily&&!rt.themeVariables?.fontFamily&&(rt.themeVariables={...rt.themeVariables,fontFamily:rt.fontFamily}),directives.push(rt),updateCurrentConfig(siteConfig,directives)},"addDirective"),reset=__name((rt=siteConfig)=>{directives=[],updateCurrentConfig(rt,directives)},"reset"),ConfigWarning={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},issuedWarnings={},issueWarning=__name(rt=>{issuedWarnings[rt]||(log.warn(ConfigWarning[rt]),issuedWarnings[rt]=!0)},"issueWarning"),checkConfig=__name(rt=>{rt&&(rt.lazyLoadedDiagrams||rt.loadExternalDiagramsAtStartup)&&issueWarning("LAZY_LOAD_DEPRECATED")},"checkConfig"),getUserDefinedConfig=__name(()=>{let rt={};configFromInitialize&&(rt=assignWithDepth_default(rt,configFromInitialize));for(const it of directives)rt=assignWithDepth_default(rt,it);return rt},"getUserDefinedConfig"),lineBreakRegex=/<br\s*\/?>/gi,getRows=__name(rt=>rt?breakToPlaceholder(rt).replace(/\\n/g,"#br#").split("#br#"):[""],"getRows"),setupDompurifyHooksIfNotSetup=(()=>{let rt=!1;return()=>{rt||(setupDompurifyHooks(),rt=!0)}})();function setupDompurifyHooks(){const rt="data-temp-href-target";purify.addHook("beforeSanitizeAttributes",it=>{it.tagName==="A"&&it.hasAttribute("target")&&it.setAttribute(rt,it.getAttribute("target")??"")}),purify.addHook("afterSanitizeAttributes",it=>{it.tagName==="A"&&it.hasAttribute(rt)&&(it.setAttribute("target",it.getAttribute(rt)??""),it.removeAttribute(rt),it.getAttribute("target")==="_blank"&&it.setAttribute("rel","noopener"))})}__name(setupDompurifyHooks,"setupDompurifyHooks");var removeScript=__name(rt=>(setupDompurifyHooksIfNotSetup(),purify.sanitize(rt)),"removeScript"),sanitizeMore=__name((rt,it)=>{if(it.flowchart?.htmlLabels!==!1){const lt=it.securityLevel;lt==="antiscript"||lt==="strict"?rt=removeScript(rt):lt!=="loose"&&(rt=breakToPlaceholder(rt),rt=rt.replace(/</g,"&lt;").replace(/>/g,"&gt;"),rt=rt.replace(/=/g,"&equals;"),rt=placeholderToBreak(rt))}return rt},"sanitizeMore"),sanitizeText=__name((rt,it)=>rt&&(it.dompurifyConfig?rt=purify.sanitize(sanitizeMore(rt,it),it.dompurifyConfig).toString():rt=purify.sanitize(sanitizeMore(rt,it),{FORBID_TAGS:["style"]}).toString(),rt),"sanitizeText"),sanitizeTextOrArray=__name((rt,it)=>typeof rt=="string"?sanitizeText(rt,it):rt.flat().map(lt=>sanitizeText(lt,it)),"sanitizeTextOrArray"),hasBreaks=__name(rt=>lineBreakRegex.test(rt),"hasBreaks"),splitBreaks=__name(rt=>rt.split(lineBreakRegex),"splitBreaks"),placeholderToBreak=__name(rt=>rt.replace(/#br#/g,"<br/>"),"placeholderToBreak"),breakToPlaceholder=__name(rt=>rt.replace(lineBreakRegex,"#br#"),"breakToPlaceholder"),getUrl=__name(rt=>{let it="";return rt&&(it=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,it=CSS.escape(it)),it},"getUrl"),evaluate=__name(rt=>!(rt===!1||["false","null","0"].includes(String(rt).trim().toLowerCase())),"evaluate"),getMax=__name(function(...rt){const it=rt.filter(lt=>!isNaN(lt));return Math.max(...it)},"getMax"),getMin=__name(function(...rt){const it=rt.filter(lt=>!isNaN(lt));return Math.min(...it)},"getMin"),parseGenericTypes=__name(function(rt){const it=rt.split(/(,)/),lt=[];for(let ct=0;ct<it.length;ct++){let ht=it[ct];if(ht===","&&ct>0&&ct+1<it.length){const dt=it[ct-1],ft=it[ct+1];shouldCombineSets(dt,ft)&&(ht=dt+","+ft,ct++,lt.pop())}lt.push(processSet(ht))}return lt.join("")},"parseGenericTypes"),countOccurrence=__name((rt,it)=>Math.max(0,rt.split(it).length-1),"countOccurrence"),shouldCombineSets=__name((rt,it)=>{const lt=countOccurrence(rt,"~"),ct=countOccurrence(it,"~");return lt===1&&ct===1},"shouldCombineSets"),processSet=__name(rt=>{const it=countOccurrence(rt,"~");let lt=!1;if(it<=1)return rt;it%2!==0&&rt.startsWith("~")&&(rt=rt.substring(1),lt=!0);const ct=[...rt];let ht=ct.indexOf("~"),dt=ct.lastIndexOf("~");for(;ht!==-1&&dt!==-1&&ht!==dt;)ct[ht]="<",ct[dt]=">",ht=ct.indexOf("~"),dt=ct.lastIndexOf("~");return lt&&ct.unshift("~"),ct.join("")},"processSet"),isMathMLSupported=__name(()=>window.MathMLElement!==void 0,"isMathMLSupported"),katexRegex=/\$\$(.*)\$\$/g,hasKatex=__name(rt=>(rt.match(katexRegex)?.length??0)>0,"hasKatex"),calculateMathMLDimensions=__name(async(rt,it)=>{const lt=document.createElement("div");lt.innerHTML=await renderKatexSanitized(rt,it),lt.id="katex-temp",lt.style.visibility="hidden",lt.style.position="absolute",lt.style.top="0",document.querySelector("body")?.insertAdjacentElement("beforeend",lt);const ht={width:lt.clientWidth,height:lt.clientHeight};return lt.remove(),ht},"calculateMathMLDimensions"),renderKatexUnsanitized=__name(async(rt,it)=>{if(!hasKatex(rt))return rt;if(!(isMathMLSupported()||it.legacyMathML||it.forceLegacyMathML))return rt.replace(katexRegex,"MathML is unsupported in this environment.");{const{default:lt}=await __vitePreload(async()=>{const{default:ht}=await import("./DsmCZfJr.js");return{default:ht}},[],import.meta.url),ct=it.forceLegacyMathML||!isMathMLSupported()&&it.legacyMathML?"htmlAndMathml":"mathml";return rt.split(lineBreakRegex).map(ht=>hasKatex(ht)?`<div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">${ht}</div>`:`<div>${ht}</div>`).join("").replace(katexRegex,(ht,dt)=>lt.renderToString(dt,{throwOnError:!0,displayMode:!0,output:ct}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))}},"renderKatexUnsanitized"),renderKatexSanitized=__name(async(rt,it)=>sanitizeText(await renderKatexUnsanitized(rt,it),it),"renderKatexSanitized"),common_default={getRows,sanitizeText,sanitizeTextOrArray,hasBreaks,splitBreaks,lineBreakRegex,removeScript,getUrl,evaluate,getMax,getMin},d3Attrs=__name(function(rt,it){for(let lt of it)rt.attr(lt[0],lt[1])},"d3Attrs"),calculateSvgSizeAttrs=__name(function(rt,it,lt){let ct=new Map;return lt?(ct.set("width","100%"),ct.set("style",`max-width: ${it}px;`)):(ct.set("height",rt),ct.set("width",it)),ct},"calculateSvgSizeAttrs"),configureSvgSize=__name(function(rt,it,lt,ct){const ht=calculateSvgSizeAttrs(it,lt,ct);d3Attrs(rt,ht)},"configureSvgSize"),setupGraphViewbox=__name(function(rt,it,lt,ct){const ht=it.node().getBBox(),dt=ht.width,ft=ht.height;log.info(`SVG bounds: ${dt}x${ft}`,ht);let ut=0,pt=0;log.info(`Graph bounds: ${ut}x${pt}`,rt),ut=dt+lt*2,pt=ft+lt*2,log.info(`Calculated bounds: ${ut}x${pt}`),configureSvgSize(it,pt,ut,ct);const gt=`${ht.x-lt} ${ht.y-lt} ${ht.width+2*lt} ${ht.height+2*lt}`;it.attr("viewBox",gt)},"setupGraphViewbox"),themes={},getStyles=__name((rt,it,lt)=>{let ct="";return rt in themes&&themes[rt]?ct=themes[rt](lt):log.warn(`No theme found for ${rt}`),` & {
    font-family: ${lt.fontFamily};
    font-size: ${lt.fontSize};
    fill: ${lt.textColor}
  }
  @keyframes edge-animation-frame {
    from {
      stroke-dashoffset: 0;
    }
  }
  @keyframes dash {
    to {
      stroke-dashoffset: 0;
    }
  }
  & .edge-animation-slow {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 50s linear infinite;
    stroke-linecap: round;
  }
  & .edge-animation-fast {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 20s linear infinite;
    stroke-linecap: round;
  }
  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${lt.errorBkgColor};
  }
  & .error-text {
    fill: ${lt.errorTextColor};
    stroke: ${lt.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 1px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }
  & .edge-thickness-invisible {
    stroke-width: 0;
    fill: none;
  }
  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${lt.lineColor};
    stroke: ${lt.lineColor};
  }
  & .marker.cross {
    stroke: ${lt.lineColor};
  }

  & svg {
    font-family: ${lt.fontFamily};
    font-size: ${lt.fontSize};
  }
   & p {
    margin: 0
   }

  ${ct}

  ${it}
`},"getStyles"),addStylesForDiagram=__name((rt,it)=>{it!==void 0&&(themes[rt]=it)},"addStylesForDiagram"),styles_default=getStyles,commonDb_exports={};__export(commonDb_exports,{clear:()=>clear$2,getAccDescription:()=>getAccDescription,getAccTitle:()=>getAccTitle,getDiagramTitle:()=>getDiagramTitle,setAccDescription:()=>setAccDescription,setAccTitle:()=>setAccTitle,setDiagramTitle:()=>setDiagramTitle});var accTitle="",diagramTitle="",accDescription="",sanitizeText2=__name(rt=>sanitizeText(rt,getConfig()),"sanitizeText"),clear$2=__name(()=>{accTitle="",accDescription="",diagramTitle=""},"clear"),setAccTitle=__name(rt=>{accTitle=sanitizeText2(rt).replace(/^\s+/g,"")},"setAccTitle"),getAccTitle=__name(()=>accTitle,"getAccTitle"),setAccDescription=__name(rt=>{accDescription=sanitizeText2(rt).replace(/\n\s+/g,`
`)},"setAccDescription"),getAccDescription=__name(()=>accDescription,"getAccDescription"),setDiagramTitle=__name(rt=>{diagramTitle=sanitizeText2(rt)},"setDiagramTitle"),getDiagramTitle=__name(()=>diagramTitle,"getDiagramTitle"),log2=log,setLogLevel2=setLogLevel,getConfig2=getConfig,setConfig2=setConfig,defaultConfig2=defaultConfig,sanitizeText3=__name(rt=>sanitizeText(rt,getConfig2()),"sanitizeText"),setupGraphViewbox2=setupGraphViewbox,getCommonDb=__name(()=>commonDb_exports,"getCommonDb"),diagrams={},registerDiagram=__name((rt,it,lt)=>{diagrams[rt]&&log2.warn(`Diagram with id ${rt} already registered. Overwriting.`),diagrams[rt]=it,lt&&addDetector(rt,lt),addStylesForDiagram(rt,it.styles),it.injectUtils?.(log2,setLogLevel2,getConfig2,sanitizeText3,setupGraphViewbox2,getCommonDb(),()=>{})},"registerDiagram"),getDiagram=__name(rt=>{if(rt in diagrams)return diagrams[rt];throw new DiagramNotFoundError(rt)},"getDiagram"),Tr,DiagramNotFoundError=(Tr=class extends Error{constructor(it){super(`Diagram ${it} not found.`)}},__name(Tr,"DiagramNotFoundError"),Tr),noop$1={value:()=>{}};function dispatch(){for(var rt=0,it=arguments.length,lt={},ct;rt<it;++rt){if(!(ct=arguments[rt]+"")||ct in lt||/[\s.]/.test(ct))throw new Error("illegal type: "+ct);lt[ct]=[]}return new Dispatch(lt)}function Dispatch(rt){this._=rt}function parseTypenames$1(rt,it){return rt.trim().split(/^|\s+/).map(function(lt){var ct="",ht=lt.indexOf(".");if(ht>=0&&(ct=lt.slice(ht+1),lt=lt.slice(0,ht)),lt&&!it.hasOwnProperty(lt))throw new Error("unknown type: "+lt);return{type:lt,name:ct}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(rt,it){var lt=this._,ct=parseTypenames$1(rt+"",lt),ht,dt=-1,ft=ct.length;if(arguments.length<2){for(;++dt<ft;)if((ht=(rt=ct[dt]).type)&&(ht=get$1(lt[ht],rt.name)))return ht;return}if(it!=null&&typeof it!="function")throw new Error("invalid callback: "+it);for(;++dt<ft;)if(ht=(rt=ct[dt]).type)lt[ht]=set$2(lt[ht],rt.name,it);else if(it==null)for(ht in lt)lt[ht]=set$2(lt[ht],rt.name,null);return this},copy:function(){var rt={},it=this._;for(var lt in it)rt[lt]=it[lt].slice();return new Dispatch(rt)},call:function(rt,it){if((ht=arguments.length-2)>0)for(var lt=new Array(ht),ct=0,ht,dt;ct<ht;++ct)lt[ct]=arguments[ct+2];if(!this._.hasOwnProperty(rt))throw new Error("unknown type: "+rt);for(dt=this._[rt],ct=0,ht=dt.length;ct<ht;++ct)dt[ct].value.apply(it,lt)},apply:function(rt,it,lt){if(!this._.hasOwnProperty(rt))throw new Error("unknown type: "+rt);for(var ct=this._[rt],ht=0,dt=ct.length;ht<dt;++ht)ct[ht].value.apply(it,lt)}};function get$1(rt,it){for(var lt=0,ct=rt.length,ht;lt<ct;++lt)if((ht=rt[lt]).name===it)return ht.value}function set$2(rt,it,lt){for(var ct=0,ht=rt.length;ct<ht;++ct)if(rt[ct].name===it){rt[ct]=noop$1,rt=rt.slice(0,ct).concat(rt.slice(ct+1));break}return lt!=null&&rt.push({name:it,value:lt}),rt}var xhtml="http://www.w3.org/1999/xhtml";const namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(rt){var it=rt+="",lt=it.indexOf(":");return lt>=0&&(it=rt.slice(0,lt))!=="xmlns"&&(rt=rt.slice(lt+1)),namespaces.hasOwnProperty(it)?{space:namespaces[it],local:rt}:rt}function creatorInherit(rt){return function(){var it=this.ownerDocument,lt=this.namespaceURI;return lt===xhtml&&it.documentElement.namespaceURI===xhtml?it.createElement(rt):it.createElementNS(lt,rt)}}function creatorFixed(rt){return function(){return this.ownerDocument.createElementNS(rt.space,rt.local)}}function creator(rt){var it=namespace(rt);return(it.local?creatorFixed:creatorInherit)(it)}function none(){}function selector(rt){return rt==null?none:function(){return this.querySelector(rt)}}function selection_select(rt){typeof rt!="function"&&(rt=selector(rt));for(var it=this._groups,lt=it.length,ct=new Array(lt),ht=0;ht<lt;++ht)for(var dt=it[ht],ft=dt.length,ut=ct[ht]=new Array(ft),pt,gt,mt=0;mt<ft;++mt)(pt=dt[mt])&&(gt=rt.call(pt,pt.__data__,mt,dt))&&("__data__"in pt&&(gt.__data__=pt.__data__),ut[mt]=gt);return new Selection$1(ct,this._parents)}function array$1(rt){return rt==null?[]:Array.isArray(rt)?rt:Array.from(rt)}function empty(){return[]}function selectorAll(rt){return rt==null?empty:function(){return this.querySelectorAll(rt)}}function arrayAll(rt){return function(){return array$1(rt.apply(this,arguments))}}function selection_selectAll(rt){typeof rt=="function"?rt=arrayAll(rt):rt=selectorAll(rt);for(var it=this._groups,lt=it.length,ct=[],ht=[],dt=0;dt<lt;++dt)for(var ft=it[dt],ut=ft.length,pt,gt=0;gt<ut;++gt)(pt=ft[gt])&&(ct.push(rt.call(pt,pt.__data__,gt,ft)),ht.push(pt));return new Selection$1(ct,ht)}function matcher(rt){return function(){return this.matches(rt)}}function childMatcher(rt){return function(it){return it.matches(rt)}}var find=Array.prototype.find;function childFind(rt){return function(){return find.call(this.children,rt)}}function childFirst(){return this.firstElementChild}function selection_selectChild(rt){return this.select(rt==null?childFirst:childFind(typeof rt=="function"?rt:childMatcher(rt)))}var filter=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter(rt){return function(){return filter.call(this.children,rt)}}function selection_selectChildren(rt){return this.selectAll(rt==null?children:childrenFilter(typeof rt=="function"?rt:childMatcher(rt)))}function selection_filter(rt){typeof rt!="function"&&(rt=matcher(rt));for(var it=this._groups,lt=it.length,ct=new Array(lt),ht=0;ht<lt;++ht)for(var dt=it[ht],ft=dt.length,ut=ct[ht]=[],pt,gt=0;gt<ft;++gt)(pt=dt[gt])&&rt.call(pt,pt.__data__,gt,dt)&&ut.push(pt);return new Selection$1(ct,this._parents)}function sparse(rt){return new Array(rt.length)}function selection_enter(){return new Selection$1(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(rt,it){this.ownerDocument=rt.ownerDocument,this.namespaceURI=rt.namespaceURI,this._next=null,this._parent=rt,this.__data__=it}EnterNode.prototype={constructor:EnterNode,appendChild:function(rt){return this._parent.insertBefore(rt,this._next)},insertBefore:function(rt,it){return this._parent.insertBefore(rt,it)},querySelector:function(rt){return this._parent.querySelector(rt)},querySelectorAll:function(rt){return this._parent.querySelectorAll(rt)}};function constant$2(rt){return function(){return rt}}function bindIndex(rt,it,lt,ct,ht,dt){for(var ft=0,ut,pt=it.length,gt=dt.length;ft<gt;++ft)(ut=it[ft])?(ut.__data__=dt[ft],ct[ft]=ut):lt[ft]=new EnterNode(rt,dt[ft]);for(;ft<pt;++ft)(ut=it[ft])&&(ht[ft]=ut)}function bindKey(rt,it,lt,ct,ht,dt,ft){var ut,pt,gt=new Map,mt=it.length,_t=dt.length,yt=new Array(mt),bt;for(ut=0;ut<mt;++ut)(pt=it[ut])&&(yt[ut]=bt=ft.call(pt,pt.__data__,ut,it)+"",gt.has(bt)?ht[ut]=pt:gt.set(bt,pt));for(ut=0;ut<_t;++ut)bt=ft.call(rt,dt[ut],ut,dt)+"",(pt=gt.get(bt))?(ct[ut]=pt,pt.__data__=dt[ut],gt.delete(bt)):lt[ut]=new EnterNode(rt,dt[ut]);for(ut=0;ut<mt;++ut)(pt=it[ut])&&gt.get(yt[ut])===pt&&(ht[ut]=pt)}function datum(rt){return rt.__data__}function selection_data(rt,it){if(!arguments.length)return Array.from(this,datum);var lt=it?bindKey:bindIndex,ct=this._parents,ht=this._groups;typeof rt!="function"&&(rt=constant$2(rt));for(var dt=ht.length,ft=new Array(dt),ut=new Array(dt),pt=new Array(dt),gt=0;gt<dt;++gt){var mt=ct[gt],_t=ht[gt],yt=_t.length,bt=arraylike(rt.call(mt,mt&&mt.__data__,gt,ct)),xt=bt.length,wt=ut[gt]=new Array(xt),Ct=ft[gt]=new Array(xt),St=pt[gt]=new Array(yt);lt(mt,_t,wt,Ct,St,bt,it);for(var Tt=0,vt=0,kt,Et;Tt<xt;++Tt)if(kt=wt[Tt]){for(Tt>=vt&&(vt=Tt+1);!(Et=Ct[vt])&&++vt<xt;);kt._next=Et||null}}return ft=new Selection$1(ft,ct),ft._enter=ut,ft._exit=pt,ft}function arraylike(rt){return typeof rt=="object"&&"length"in rt?rt:Array.from(rt)}function selection_exit(){return new Selection$1(this._exit||this._groups.map(sparse),this._parents)}function selection_join(rt,it,lt){var ct=this.enter(),ht=this,dt=this.exit();return typeof rt=="function"?(ct=rt(ct),ct&&(ct=ct.selection())):ct=ct.append(rt+""),it!=null&&(ht=it(ht),ht&&(ht=ht.selection())),lt==null?dt.remove():lt(dt),ct&&ht?ct.merge(ht).order():ht}function selection_merge(rt){for(var it=rt.selection?rt.selection():rt,lt=this._groups,ct=it._groups,ht=lt.length,dt=ct.length,ft=Math.min(ht,dt),ut=new Array(ht),pt=0;pt<ft;++pt)for(var gt=lt[pt],mt=ct[pt],_t=gt.length,yt=ut[pt]=new Array(_t),bt,xt=0;xt<_t;++xt)(bt=gt[xt]||mt[xt])&&(yt[xt]=bt);for(;pt<ht;++pt)ut[pt]=lt[pt];return new Selection$1(ut,this._parents)}function selection_order(){for(var rt=this._groups,it=-1,lt=rt.length;++it<lt;)for(var ct=rt[it],ht=ct.length-1,dt=ct[ht],ft;--ht>=0;)(ft=ct[ht])&&(dt&&ft.compareDocumentPosition(dt)^4&&dt.parentNode.insertBefore(ft,dt),dt=ft);return this}function selection_sort(rt){rt||(rt=ascending);function it(_t,yt){return _t&&yt?rt(_t.__data__,yt.__data__):!_t-!yt}for(var lt=this._groups,ct=lt.length,ht=new Array(ct),dt=0;dt<ct;++dt){for(var ft=lt[dt],ut=ft.length,pt=ht[dt]=new Array(ut),gt,mt=0;mt<ut;++mt)(gt=ft[mt])&&(pt[mt]=gt);pt.sort(it)}return new Selection$1(ht,this._parents).order()}function ascending(rt,it){return rt<it?-1:rt>it?1:rt>=it?0:NaN}function selection_call(){var rt=arguments[0];return arguments[0]=this,rt.apply(null,arguments),this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var rt=this._groups,it=0,lt=rt.length;it<lt;++it)for(var ct=rt[it],ht=0,dt=ct.length;ht<dt;++ht){var ft=ct[ht];if(ft)return ft}return null}function selection_size(){let rt=0;for(const it of this)++rt;return rt}function selection_empty(){return!this.node()}function selection_each(rt){for(var it=this._groups,lt=0,ct=it.length;lt<ct;++lt)for(var ht=it[lt],dt=0,ft=ht.length,ut;dt<ft;++dt)(ut=ht[dt])&&rt.call(ut,ut.__data__,dt,ht);return this}function attrRemove$1(rt){return function(){this.removeAttribute(rt)}}function attrRemoveNS$1(rt){return function(){this.removeAttributeNS(rt.space,rt.local)}}function attrConstant$1(rt,it){return function(){this.setAttribute(rt,it)}}function attrConstantNS$1(rt,it){return function(){this.setAttributeNS(rt.space,rt.local,it)}}function attrFunction$1(rt,it){return function(){var lt=it.apply(this,arguments);lt==null?this.removeAttribute(rt):this.setAttribute(rt,lt)}}function attrFunctionNS$1(rt,it){return function(){var lt=it.apply(this,arguments);lt==null?this.removeAttributeNS(rt.space,rt.local):this.setAttributeNS(rt.space,rt.local,lt)}}function selection_attr(rt,it){var lt=namespace(rt);if(arguments.length<2){var ct=this.node();return lt.local?ct.getAttributeNS(lt.space,lt.local):ct.getAttribute(lt)}return this.each((it==null?lt.local?attrRemoveNS$1:attrRemove$1:typeof it=="function"?lt.local?attrFunctionNS$1:attrFunction$1:lt.local?attrConstantNS$1:attrConstant$1)(lt,it))}function defaultView(rt){return rt.ownerDocument&&rt.ownerDocument.defaultView||rt.document&&rt||rt.defaultView}function styleRemove$1(rt){return function(){this.style.removeProperty(rt)}}function styleConstant$1(rt,it,lt){return function(){this.style.setProperty(rt,it,lt)}}function styleFunction$1(rt,it,lt){return function(){var ct=it.apply(this,arguments);ct==null?this.style.removeProperty(rt):this.style.setProperty(rt,ct,lt)}}function selection_style(rt,it,lt){return arguments.length>1?this.each((it==null?styleRemove$1:typeof it=="function"?styleFunction$1:styleConstant$1)(rt,it,lt??"")):styleValue(this.node(),rt)}function styleValue(rt,it){return rt.style.getPropertyValue(it)||defaultView(rt).getComputedStyle(rt,null).getPropertyValue(it)}function propertyRemove(rt){return function(){delete this[rt]}}function propertyConstant(rt,it){return function(){this[rt]=it}}function propertyFunction(rt,it){return function(){var lt=it.apply(this,arguments);lt==null?delete this[rt]:this[rt]=lt}}function selection_property(rt,it){return arguments.length>1?this.each((it==null?propertyRemove:typeof it=="function"?propertyFunction:propertyConstant)(rt,it)):this.node()[rt]}function classArray(rt){return rt.trim().split(/^|\s+/)}function classList(rt){return rt.classList||new ClassList(rt)}function ClassList(rt){this._node=rt,this._names=classArray(rt.getAttribute("class")||"")}ClassList.prototype={add:function(rt){var it=this._names.indexOf(rt);it<0&&(this._names.push(rt),this._node.setAttribute("class",this._names.join(" ")))},remove:function(rt){var it=this._names.indexOf(rt);it>=0&&(this._names.splice(it,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(rt){return this._names.indexOf(rt)>=0}};function classedAdd(rt,it){for(var lt=classList(rt),ct=-1,ht=it.length;++ct<ht;)lt.add(it[ct])}function classedRemove(rt,it){for(var lt=classList(rt),ct=-1,ht=it.length;++ct<ht;)lt.remove(it[ct])}function classedTrue(rt){return function(){classedAdd(this,rt)}}function classedFalse(rt){return function(){classedRemove(this,rt)}}function classedFunction(rt,it){return function(){(it.apply(this,arguments)?classedAdd:classedRemove)(this,rt)}}function selection_classed(rt,it){var lt=classArray(rt+"");if(arguments.length<2){for(var ct=classList(this.node()),ht=-1,dt=lt.length;++ht<dt;)if(!ct.contains(lt[ht]))return!1;return!0}return this.each((typeof it=="function"?classedFunction:it?classedTrue:classedFalse)(lt,it))}function textRemove(){this.textContent=""}function textConstant$1(rt){return function(){this.textContent=rt}}function textFunction$1(rt){return function(){var it=rt.apply(this,arguments);this.textContent=it??""}}function selection_text(rt){return arguments.length?this.each(rt==null?textRemove:(typeof rt=="function"?textFunction$1:textConstant$1)(rt)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(rt){return function(){this.innerHTML=rt}}function htmlFunction(rt){return function(){var it=rt.apply(this,arguments);this.innerHTML=it??""}}function selection_html(rt){return arguments.length?this.each(rt==null?htmlRemove:(typeof rt=="function"?htmlFunction:htmlConstant)(rt)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(rt){var it=typeof rt=="function"?rt:creator(rt);return this.select(function(){return this.appendChild(it.apply(this,arguments))})}function constantNull(){return null}function selection_insert(rt,it){var lt=typeof rt=="function"?rt:creator(rt),ct=it==null?constantNull:typeof it=="function"?it:selector(it);return this.select(function(){return this.insertBefore(lt.apply(this,arguments),ct.apply(this,arguments)||null)})}function remove(){var rt=this.parentNode;rt&&rt.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var rt=this.cloneNode(!1),it=this.parentNode;return it?it.insertBefore(rt,this.nextSibling):rt}function selection_cloneDeep(){var rt=this.cloneNode(!0),it=this.parentNode;return it?it.insertBefore(rt,this.nextSibling):rt}function selection_clone(rt){return this.select(rt?selection_cloneDeep:selection_cloneShallow)}function selection_datum(rt){return arguments.length?this.property("__data__",rt):this.node().__data__}function contextListener(rt){return function(it){rt.call(this,it,this.__data__)}}function parseTypenames(rt){return rt.trim().split(/^|\s+/).map(function(it){var lt="",ct=it.indexOf(".");return ct>=0&&(lt=it.slice(ct+1),it=it.slice(0,ct)),{type:it,name:lt}})}function onRemove(rt){return function(){var it=this.__on;if(it){for(var lt=0,ct=-1,ht=it.length,dt;lt<ht;++lt)dt=it[lt],(!rt.type||dt.type===rt.type)&&dt.name===rt.name?this.removeEventListener(dt.type,dt.listener,dt.options):it[++ct]=dt;++ct?it.length=ct:delete this.__on}}}function onAdd(rt,it,lt){return function(){var ct=this.__on,ht,dt=contextListener(it);if(ct){for(var ft=0,ut=ct.length;ft<ut;++ft)if((ht=ct[ft]).type===rt.type&&ht.name===rt.name){this.removeEventListener(ht.type,ht.listener,ht.options),this.addEventListener(ht.type,ht.listener=dt,ht.options=lt),ht.value=it;return}}this.addEventListener(rt.type,dt,lt),ht={type:rt.type,name:rt.name,value:it,listener:dt,options:lt},ct?ct.push(ht):this.__on=[ht]}}function selection_on(rt,it,lt){var ct=parseTypenames(rt+""),ht,dt=ct.length,ft;if(arguments.length<2){var ut=this.node().__on;if(ut){for(var pt=0,gt=ut.length,mt;pt<gt;++pt)for(ht=0,mt=ut[pt];ht<dt;++ht)if((ft=ct[ht]).type===mt.type&&ft.name===mt.name)return mt.value}return}for(ut=it?onAdd:onRemove,ht=0;ht<dt;++ht)this.each(ut(ct[ht],it,lt));return this}function dispatchEvent(rt,it,lt){var ct=defaultView(rt),ht=ct.CustomEvent;typeof ht=="function"?ht=new ht(it,lt):(ht=ct.document.createEvent("Event"),lt?(ht.initEvent(it,lt.bubbles,lt.cancelable),ht.detail=lt.detail):ht.initEvent(it,!1,!1)),rt.dispatchEvent(ht)}function dispatchConstant(rt,it){return function(){return dispatchEvent(this,rt,it)}}function dispatchFunction(rt,it){return function(){return dispatchEvent(this,rt,it.apply(this,arguments))}}function selection_dispatch(rt,it){return this.each((typeof it=="function"?dispatchFunction:dispatchConstant)(rt,it))}function*selection_iterator(){for(var rt=this._groups,it=0,lt=rt.length;it<lt;++it)for(var ct=rt[it],ht=0,dt=ct.length,ft;ht<dt;++ht)(ft=ct[ht])&&(yield ft)}var root=[null];function Selection$1(rt,it){this._groups=rt,this._parents=it}function selection(){return new Selection$1([[document.documentElement]],root)}function selection_selection(){return this}Selection$1.prototype=selection.prototype={constructor:Selection$1,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};function select(rt){return typeof rt=="string"?new Selection$1([[document.querySelector(rt)]],[document.documentElement]):new Selection$1([[rt]],root)}function define(rt,it,lt){rt.prototype=it.prototype=lt,lt.constructor=rt}function extend$1(rt,it){var lt=Object.create(rt.prototype);for(var ct in it)lt[ct]=it[ct];return lt}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy(rt){return Object.assign(new this.constructor,this,rt)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(rt){var it,lt;return rt=(rt+"").trim().toLowerCase(),(it=reHex.exec(rt))?(lt=it[1].length,it=parseInt(it[1],16),lt===6?rgbn(it):lt===3?new Rgb(it>>8&15|it>>4&240,it>>4&15|it&240,(it&15)<<4|it&15,1):lt===8?rgba(it>>24&255,it>>16&255,it>>8&255,(it&255)/255):lt===4?rgba(it>>12&15|it>>8&240,it>>8&15|it>>4&240,it>>4&15|it&240,((it&15)<<4|it&15)/255):null):(it=reRgbInteger.exec(rt))?new Rgb(it[1],it[2],it[3],1):(it=reRgbPercent.exec(rt))?new Rgb(it[1]*255/100,it[2]*255/100,it[3]*255/100,1):(it=reRgbaInteger.exec(rt))?rgba(it[1],it[2],it[3],it[4]):(it=reRgbaPercent.exec(rt))?rgba(it[1]*255/100,it[2]*255/100,it[3]*255/100,it[4]):(it=reHslPercent.exec(rt))?hsla(it[1],it[2]/100,it[3]/100,1):(it=reHslaPercent.exec(rt))?hsla(it[1],it[2]/100,it[3]/100,it[4]):named.hasOwnProperty(rt)?rgbn(named[rt]):rt==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(rt){return new Rgb(rt>>16&255,rt>>8&255,rt&255,1)}function rgba(rt,it,lt,ct){return ct<=0&&(rt=it=lt=NaN),new Rgb(rt,it,lt,ct)}function rgbConvert(rt){return rt instanceof Color||(rt=color(rt)),rt?(rt=rt.rgb(),new Rgb(rt.r,rt.g,rt.b,rt.opacity)):new Rgb}function rgb(rt,it,lt,ct){return arguments.length===1?rgbConvert(rt):new Rgb(rt,it,lt,ct??1)}function Rgb(rt,it,lt,ct){this.r=+rt,this.g=+it,this.b=+lt,this.opacity=+ct}define(Rgb,rgb,extend$1(Color,{brighter(rt){return rt=rt==null?brighter:Math.pow(brighter,rt),new Rgb(this.r*rt,this.g*rt,this.b*rt,this.opacity)},darker(rt){return rt=rt==null?darker:Math.pow(darker,rt),new Rgb(this.r*rt,this.g*rt,this.b*rt,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const rt=clampa(this.opacity);return`${rt===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${rt===1?")":`, ${rt})`}`}function clampa(rt){return isNaN(rt)?1:Math.max(0,Math.min(1,rt))}function clampi(rt){return Math.max(0,Math.min(255,Math.round(rt)||0))}function hex(rt){return rt=clampi(rt),(rt<16?"0":"")+rt.toString(16)}function hsla(rt,it,lt,ct){return ct<=0?rt=it=lt=NaN:lt<=0||lt>=1?rt=it=NaN:it<=0&&(rt=NaN),new Hsl(rt,it,lt,ct)}function hslConvert(rt){if(rt instanceof Hsl)return new Hsl(rt.h,rt.s,rt.l,rt.opacity);if(rt instanceof Color||(rt=color(rt)),!rt)return new Hsl;if(rt instanceof Hsl)return rt;rt=rt.rgb();var it=rt.r/255,lt=rt.g/255,ct=rt.b/255,ht=Math.min(it,lt,ct),dt=Math.max(it,lt,ct),ft=NaN,ut=dt-ht,pt=(dt+ht)/2;return ut?(it===dt?ft=(lt-ct)/ut+(lt<ct)*6:lt===dt?ft=(ct-it)/ut+2:ft=(it-lt)/ut+4,ut/=pt<.5?dt+ht:2-dt-ht,ft*=60):ut=pt>0&&pt<1?0:ft,new Hsl(ft,ut,pt,rt.opacity)}function hsl(rt,it,lt,ct){return arguments.length===1?hslConvert(rt):new Hsl(rt,it,lt,ct??1)}function Hsl(rt,it,lt,ct){this.h=+rt,this.s=+it,this.l=+lt,this.opacity=+ct}define(Hsl,hsl,extend$1(Color,{brighter(rt){return rt=rt==null?brighter:Math.pow(brighter,rt),new Hsl(this.h,this.s,this.l*rt,this.opacity)},darker(rt){return rt=rt==null?darker:Math.pow(darker,rt),new Hsl(this.h,this.s,this.l*rt,this.opacity)},rgb(){var rt=this.h%360+(this.h<0)*360,it=isNaN(rt)||isNaN(this.s)?0:this.s,lt=this.l,ct=lt+(lt<.5?lt:1-lt)*it,ht=2*lt-ct;return new Rgb(hsl2rgb(rt>=240?rt-240:rt+120,ht,ct),hsl2rgb(rt,ht,ct),hsl2rgb(rt<120?rt+240:rt-120,ht,ct),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const rt=clampa(this.opacity);return`${rt===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${rt===1?")":`, ${rt})`}`}}));function clamph(rt){return rt=(rt||0)%360,rt<0?rt+360:rt}function clampt(rt){return Math.max(0,Math.min(1,rt||0))}function hsl2rgb(rt,it,lt){return(rt<60?it+(lt-it)*rt/60:rt<180?lt:rt<240?it+(lt-it)*(240-rt)/60:it)*255}const constant$1=rt=>()=>rt;function linear(rt,it){return function(lt){return rt+lt*it}}function exponential(rt,it,lt){return rt=Math.pow(rt,lt),it=Math.pow(it,lt)-rt,lt=1/lt,function(ct){return Math.pow(rt+ct*it,lt)}}function hue(rt,it){var lt=it-rt;return lt?linear(rt,lt>180||lt<-180?lt-360*Math.round(lt/360):lt):constant$1(isNaN(rt)?it:rt)}function gamma(rt){return(rt=+rt)==1?nogamma:function(it,lt){return lt-it?exponential(it,lt,rt):constant$1(isNaN(it)?lt:it)}}function nogamma(rt,it){var lt=it-rt;return lt?linear(rt,lt):constant$1(isNaN(rt)?it:rt)}const interpolateRgb=(function rt(it){var lt=gamma(it);function ct(ht,dt){var ft=lt((ht=rgb(ht)).r,(dt=rgb(dt)).r),ut=lt(ht.g,dt.g),pt=lt(ht.b,dt.b),gt=nogamma(ht.opacity,dt.opacity);return function(mt){return ht.r=ft(mt),ht.g=ut(mt),ht.b=pt(mt),ht.opacity=gt(mt),ht+""}}return ct.gamma=rt,ct})(1);function interpolateNumber(rt,it){return rt=+rt,it=+it,function(lt){return rt*(1-lt)+it*lt}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero$2(rt){return function(){return rt}}function one(rt){return function(it){return rt(it)+""}}function interpolateString(rt,it){var lt=reA.lastIndex=reB.lastIndex=0,ct,ht,dt,ft=-1,ut=[],pt=[];for(rt=rt+"",it=it+"";(ct=reA.exec(rt))&&(ht=reB.exec(it));)(dt=ht.index)>lt&&(dt=it.slice(lt,dt),ut[ft]?ut[ft]+=dt:ut[++ft]=dt),(ct=ct[0])===(ht=ht[0])?ut[ft]?ut[ft]+=ht:ut[++ft]=ht:(ut[++ft]=null,pt.push({i:ft,x:interpolateNumber(ct,ht)})),lt=reB.lastIndex;return lt<it.length&&(dt=it.slice(lt),ut[ft]?ut[ft]+=dt:ut[++ft]=dt),ut.length<2?pt[0]?one(pt[0].x):zero$2(it):(it=pt.length,function(gt){for(var mt=0,_t;mt<it;++mt)ut[(_t=pt[mt]).i]=_t.x(gt);return ut.join("")})}var degrees=180/Math.PI,identity={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(rt,it,lt,ct,ht,dt){var ft,ut,pt;return(ft=Math.sqrt(rt*rt+it*it))&&(rt/=ft,it/=ft),(pt=rt*lt+it*ct)&&(lt-=rt*pt,ct-=it*pt),(ut=Math.sqrt(lt*lt+ct*ct))&&(lt/=ut,ct/=ut,pt/=ut),rt*ct<it*lt&&(rt=-rt,it=-it,pt=-pt,ft=-ft),{translateX:ht,translateY:dt,rotate:Math.atan2(it,rt)*degrees,skewX:Math.atan(pt)*degrees,scaleX:ft,scaleY:ut}}var svgNode;function parseCss(rt){const it=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(rt+"");return it.isIdentity?identity:decompose(it.a,it.b,it.c,it.d,it.e,it.f)}function parseSvg(rt){return rt==null||(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",rt),!(rt=svgNode.transform.baseVal.consolidate()))?identity:(rt=rt.matrix,decompose(rt.a,rt.b,rt.c,rt.d,rt.e,rt.f))}function interpolateTransform(rt,it,lt,ct){function ht(gt){return gt.length?gt.pop()+" ":""}function dt(gt,mt,_t,yt,bt,xt){if(gt!==_t||mt!==yt){var wt=bt.push("translate(",null,it,null,lt);xt.push({i:wt-4,x:interpolateNumber(gt,_t)},{i:wt-2,x:interpolateNumber(mt,yt)})}else(_t||yt)&&bt.push("translate("+_t+it+yt+lt)}function ft(gt,mt,_t,yt){gt!==mt?(gt-mt>180?mt+=360:mt-gt>180&&(gt+=360),yt.push({i:_t.push(ht(_t)+"rotate(",null,ct)-2,x:interpolateNumber(gt,mt)})):mt&&_t.push(ht(_t)+"rotate("+mt+ct)}function ut(gt,mt,_t,yt){gt!==mt?yt.push({i:_t.push(ht(_t)+"skewX(",null,ct)-2,x:interpolateNumber(gt,mt)}):mt&&_t.push(ht(_t)+"skewX("+mt+ct)}function pt(gt,mt,_t,yt,bt,xt){if(gt!==_t||mt!==yt){var wt=bt.push(ht(bt)+"scale(",null,",",null,")");xt.push({i:wt-4,x:interpolateNumber(gt,_t)},{i:wt-2,x:interpolateNumber(mt,yt)})}else(_t!==1||yt!==1)&&bt.push(ht(bt)+"scale("+_t+","+yt+")")}return function(gt,mt){var _t=[],yt=[];return gt=rt(gt),mt=rt(mt),dt(gt.translateX,gt.translateY,mt.translateX,mt.translateY,_t,yt),ft(gt.rotate,mt.rotate,_t,yt),ut(gt.skewX,mt.skewX,_t,yt),pt(gt.scaleX,gt.scaleY,mt.scaleX,mt.scaleY,_t,yt),gt=mt=null,function(bt){for(var xt=-1,wt=yt.length,Ct;++xt<wt;)_t[(Ct=yt[xt]).i]=Ct.x(bt);return _t.join("")}}}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")"),frame=0,timeout$1=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance=="object"&&performance.now?performance:Date,setFrame=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(rt){setTimeout(rt,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(rt,it,lt){if(typeof rt!="function")throw new TypeError("callback is not a function");lt=(lt==null?now():+lt)+(it==null?0:+it),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=rt,this._time=lt,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer(rt,it,lt){var ct=new Timer;return ct.restart(rt,it,lt),ct}function timerFlush(){now(),++frame;for(var rt=taskHead,it;rt;)(it=clockNow-rt._time)>=0&&rt._call.call(void 0,it),rt=rt._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout$1=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var rt=clock.now(),it=rt-clockLast;it>pokeDelay&&(clockSkew-=it,clockLast=rt)}function nap(){for(var rt,it=taskHead,lt,ct=1/0;it;)it._call?(ct>it._time&&(ct=it._time),rt=it,it=it._next):(lt=it._next,it._next=null,it=rt?rt._next=lt:taskHead=lt);taskTail=rt,sleep(ct)}function sleep(rt){if(!frame){timeout$1&&(timeout$1=clearTimeout(timeout$1));var it=rt-clockNow;it>24?(rt<1/0&&(timeout$1=setTimeout(wake,rt-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame=1,setFrame(wake))}}function timeout(rt,it,lt){var ct=new Timer;return it=it==null?0:+it,ct.restart(ht=>{ct.stop(),rt(ht+it)},it,lt),ct}var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule(rt,it,lt,ct,ht,dt){var ft=rt.__transition;if(!ft)rt.__transition={};else if(lt in ft)return;create(rt,lt,{name:it,index:ct,group:ht,on:emptyOn,tween:emptyTween,time:dt.time,delay:dt.delay,duration:dt.duration,ease:dt.ease,timer:null,state:CREATED})}function init$2(rt,it){var lt=get(rt,it);if(lt.state>CREATED)throw new Error("too late; already scheduled");return lt}function set$1(rt,it){var lt=get(rt,it);if(lt.state>STARTED)throw new Error("too late; already running");return lt}function get(rt,it){var lt=rt.__transition;if(!lt||!(lt=lt[it]))throw new Error("transition not found");return lt}function create(rt,it,lt){var ct=rt.__transition,ht;ct[it]=lt,lt.timer=timer(dt,0,lt.time);function dt(gt){lt.state=SCHEDULED,lt.timer.restart(ft,lt.delay,lt.time),lt.delay<=gt&&ft(gt-lt.delay)}function ft(gt){var mt,_t,yt,bt;if(lt.state!==SCHEDULED)return pt();for(mt in ct)if(bt=ct[mt],bt.name===lt.name){if(bt.state===STARTED)return timeout(ft);bt.state===RUNNING?(bt.state=ENDED,bt.timer.stop(),bt.on.call("interrupt",rt,rt.__data__,bt.index,bt.group),delete ct[mt]):+mt<it&&(bt.state=ENDED,bt.timer.stop(),bt.on.call("cancel",rt,rt.__data__,bt.index,bt.group),delete ct[mt])}if(timeout(function(){lt.state===STARTED&&(lt.state=RUNNING,lt.timer.restart(ut,lt.delay,lt.time),ut(gt))}),lt.state=STARTING,lt.on.call("start",rt,rt.__data__,lt.index,lt.group),lt.state===STARTING){for(lt.state=STARTED,ht=new Array(yt=lt.tween.length),mt=0,_t=-1;mt<yt;++mt)(bt=lt.tween[mt].value.call(rt,rt.__data__,lt.index,lt.group))&&(ht[++_t]=bt);ht.length=_t+1}}function ut(gt){for(var mt=gt<lt.duration?lt.ease.call(null,gt/lt.duration):(lt.timer.restart(pt),lt.state=ENDING,1),_t=-1,yt=ht.length;++_t<yt;)ht[_t].call(rt,mt);lt.state===ENDING&&(lt.on.call("end",rt,rt.__data__,lt.index,lt.group),pt())}function pt(){lt.state=ENDED,lt.timer.stop(),delete ct[it];for(var gt in ct)return;delete rt.__transition}}function interrupt(rt,it){var lt=rt.__transition,ct,ht,dt=!0,ft;if(lt){it=it==null?null:it+"";for(ft in lt){if((ct=lt[ft]).name!==it){dt=!1;continue}ht=ct.state>STARTING&&ct.state<ENDING,ct.state=ENDED,ct.timer.stop(),ct.on.call(ht?"interrupt":"cancel",rt,rt.__data__,ct.index,ct.group),delete lt[ft]}dt&&delete rt.__transition}}function selection_interrupt(rt){return this.each(function(){interrupt(this,rt)})}function tweenRemove(rt,it){var lt,ct;return function(){var ht=set$1(this,rt),dt=ht.tween;if(dt!==lt){ct=lt=dt;for(var ft=0,ut=ct.length;ft<ut;++ft)if(ct[ft].name===it){ct=ct.slice(),ct.splice(ft,1);break}}ht.tween=ct}}function tweenFunction(rt,it,lt){var ct,ht;if(typeof lt!="function")throw new Error;return function(){var dt=set$1(this,rt),ft=dt.tween;if(ft!==ct){ht=(ct=ft).slice();for(var ut={name:it,value:lt},pt=0,gt=ht.length;pt<gt;++pt)if(ht[pt].name===it){ht[pt]=ut;break}pt===gt&&ht.push(ut)}dt.tween=ht}}function transition_tween(rt,it){var lt=this._id;if(rt+="",arguments.length<2){for(var ct=get(this.node(),lt).tween,ht=0,dt=ct.length,ft;ht<dt;++ht)if((ft=ct[ht]).name===rt)return ft.value;return null}return this.each((it==null?tweenRemove:tweenFunction)(lt,rt,it))}function tweenValue(rt,it,lt){var ct=rt._id;return rt.each(function(){var ht=set$1(this,ct);(ht.value||(ht.value={}))[it]=lt.apply(this,arguments)}),function(ht){return get(ht,ct).value[it]}}function interpolate(rt,it){var lt;return(typeof it=="number"?interpolateNumber:it instanceof color?interpolateRgb:(lt=color(it))?(it=lt,interpolateRgb):interpolateString)(rt,it)}function attrRemove(rt){return function(){this.removeAttribute(rt)}}function attrRemoveNS(rt){return function(){this.removeAttributeNS(rt.space,rt.local)}}function attrConstant(rt,it,lt){var ct,ht=lt+"",dt;return function(){var ft=this.getAttribute(rt);return ft===ht?null:ft===ct?dt:dt=it(ct=ft,lt)}}function attrConstantNS(rt,it,lt){var ct,ht=lt+"",dt;return function(){var ft=this.getAttributeNS(rt.space,rt.local);return ft===ht?null:ft===ct?dt:dt=it(ct=ft,lt)}}function attrFunction(rt,it,lt){var ct,ht,dt;return function(){var ft,ut=lt(this),pt;return ut==null?void this.removeAttribute(rt):(ft=this.getAttribute(rt),pt=ut+"",ft===pt?null:ft===ct&&pt===ht?dt:(ht=pt,dt=it(ct=ft,ut)))}}function attrFunctionNS(rt,it,lt){var ct,ht,dt;return function(){var ft,ut=lt(this),pt;return ut==null?void this.removeAttributeNS(rt.space,rt.local):(ft=this.getAttributeNS(rt.space,rt.local),pt=ut+"",ft===pt?null:ft===ct&&pt===ht?dt:(ht=pt,dt=it(ct=ft,ut)))}}function transition_attr(rt,it){var lt=namespace(rt),ct=lt==="transform"?interpolateTransformSvg:interpolate;return this.attrTween(rt,typeof it=="function"?(lt.local?attrFunctionNS:attrFunction)(lt,ct,tweenValue(this,"attr."+rt,it)):it==null?(lt.local?attrRemoveNS:attrRemove)(lt):(lt.local?attrConstantNS:attrConstant)(lt,ct,it))}function attrInterpolate(rt,it){return function(lt){this.setAttribute(rt,it.call(this,lt))}}function attrInterpolateNS(rt,it){return function(lt){this.setAttributeNS(rt.space,rt.local,it.call(this,lt))}}function attrTweenNS(rt,it){var lt,ct;function ht(){var dt=it.apply(this,arguments);return dt!==ct&&(lt=(ct=dt)&&attrInterpolateNS(rt,dt)),lt}return ht._value=it,ht}function attrTween(rt,it){var lt,ct;function ht(){var dt=it.apply(this,arguments);return dt!==ct&&(lt=(ct=dt)&&attrInterpolate(rt,dt)),lt}return ht._value=it,ht}function transition_attrTween(rt,it){var lt="attr."+rt;if(arguments.length<2)return(lt=this.tween(lt))&&lt._value;if(it==null)return this.tween(lt,null);if(typeof it!="function")throw new Error;var ct=namespace(rt);return this.tween(lt,(ct.local?attrTweenNS:attrTween)(ct,it))}function delayFunction(rt,it){return function(){init$2(this,rt).delay=+it.apply(this,arguments)}}function delayConstant(rt,it){return it=+it,function(){init$2(this,rt).delay=it}}function transition_delay(rt){var it=this._id;return arguments.length?this.each((typeof rt=="function"?delayFunction:delayConstant)(it,rt)):get(this.node(),it).delay}function durationFunction(rt,it){return function(){set$1(this,rt).duration=+it.apply(this,arguments)}}function durationConstant(rt,it){return it=+it,function(){set$1(this,rt).duration=it}}function transition_duration(rt){var it=this._id;return arguments.length?this.each((typeof rt=="function"?durationFunction:durationConstant)(it,rt)):get(this.node(),it).duration}function easeConstant(rt,it){if(typeof it!="function")throw new Error;return function(){set$1(this,rt).ease=it}}function transition_ease(rt){var it=this._id;return arguments.length?this.each(easeConstant(it,rt)):get(this.node(),it).ease}function easeVarying(rt,it){return function(){var lt=it.apply(this,arguments);if(typeof lt!="function")throw new Error;set$1(this,rt).ease=lt}}function transition_easeVarying(rt){if(typeof rt!="function")throw new Error;return this.each(easeVarying(this._id,rt))}function transition_filter(rt){typeof rt!="function"&&(rt=matcher(rt));for(var it=this._groups,lt=it.length,ct=new Array(lt),ht=0;ht<lt;++ht)for(var dt=it[ht],ft=dt.length,ut=ct[ht]=[],pt,gt=0;gt<ft;++gt)(pt=dt[gt])&&rt.call(pt,pt.__data__,gt,dt)&&ut.push(pt);return new Transition(ct,this._parents,this._name,this._id)}function transition_merge(rt){if(rt._id!==this._id)throw new Error;for(var it=this._groups,lt=rt._groups,ct=it.length,ht=lt.length,dt=Math.min(ct,ht),ft=new Array(ct),ut=0;ut<dt;++ut)for(var pt=it[ut],gt=lt[ut],mt=pt.length,_t=ft[ut]=new Array(mt),yt,bt=0;bt<mt;++bt)(yt=pt[bt]||gt[bt])&&(_t[bt]=yt);for(;ut<ct;++ut)ft[ut]=it[ut];return new Transition(ft,this._parents,this._name,this._id)}function start(rt){return(rt+"").trim().split(/^|\s+/).every(function(it){var lt=it.indexOf(".");return lt>=0&&(it=it.slice(0,lt)),!it||it==="start"})}function onFunction(rt,it,lt){var ct,ht,dt=start(it)?init$2:set$1;return function(){var ft=dt(this,rt),ut=ft.on;ut!==ct&&(ht=(ct=ut).copy()).on(it,lt),ft.on=ht}}function transition_on(rt,it){var lt=this._id;return arguments.length<2?get(this.node(),lt).on.on(rt):this.each(onFunction(lt,rt,it))}function removeFunction(rt){return function(){var it=this.parentNode;for(var lt in this.__transition)if(+lt!==rt)return;it&&it.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(rt){var it=this._name,lt=this._id;typeof rt!="function"&&(rt=selector(rt));for(var ct=this._groups,ht=ct.length,dt=new Array(ht),ft=0;ft<ht;++ft)for(var ut=ct[ft],pt=ut.length,gt=dt[ft]=new Array(pt),mt,_t,yt=0;yt<pt;++yt)(mt=ut[yt])&&(_t=rt.call(mt,mt.__data__,yt,ut))&&("__data__"in mt&&(_t.__data__=mt.__data__),gt[yt]=_t,schedule(gt[yt],it,lt,yt,gt,get(mt,lt)));return new Transition(dt,this._parents,it,lt)}function transition_selectAll(rt){var it=this._name,lt=this._id;typeof rt!="function"&&(rt=selectorAll(rt));for(var ct=this._groups,ht=ct.length,dt=[],ft=[],ut=0;ut<ht;++ut)for(var pt=ct[ut],gt=pt.length,mt,_t=0;_t<gt;++_t)if(mt=pt[_t]){for(var yt=rt.call(mt,mt.__data__,_t,pt),bt,xt=get(mt,lt),wt=0,Ct=yt.length;wt<Ct;++wt)(bt=yt[wt])&&schedule(bt,it,lt,wt,yt,xt);dt.push(yt),ft.push(mt)}return new Transition(dt,ft,it,lt)}var Selection=selection.prototype.constructor;function transition_selection(){return new Selection(this._groups,this._parents)}function styleNull(rt,it){var lt,ct,ht;return function(){var dt=styleValue(this,rt),ft=(this.style.removeProperty(rt),styleValue(this,rt));return dt===ft?null:dt===lt&&ft===ct?ht:ht=it(lt=dt,ct=ft)}}function styleRemove(rt){return function(){this.style.removeProperty(rt)}}function styleConstant(rt,it,lt){var ct,ht=lt+"",dt;return function(){var ft=styleValue(this,rt);return ft===ht?null:ft===ct?dt:dt=it(ct=ft,lt)}}function styleFunction(rt,it,lt){var ct,ht,dt;return function(){var ft=styleValue(this,rt),ut=lt(this),pt=ut+"";return ut==null&&(pt=ut=(this.style.removeProperty(rt),styleValue(this,rt))),ft===pt?null:ft===ct&&pt===ht?dt:(ht=pt,dt=it(ct=ft,ut))}}function styleMaybeRemove(rt,it){var lt,ct,ht,dt="style."+it,ft="end."+dt,ut;return function(){var pt=set$1(this,rt),gt=pt.on,mt=pt.value[dt]==null?ut||(ut=styleRemove(it)):void 0;(gt!==lt||ht!==mt)&&(ct=(lt=gt).copy()).on(ft,ht=mt),pt.on=ct}}function transition_style(rt,it,lt){var ct=(rt+="")=="transform"?interpolateTransformCss:interpolate;return it==null?this.styleTween(rt,styleNull(rt,ct)).on("end.style."+rt,styleRemove(rt)):typeof it=="function"?this.styleTween(rt,styleFunction(rt,ct,tweenValue(this,"style."+rt,it))).each(styleMaybeRemove(this._id,rt)):this.styleTween(rt,styleConstant(rt,ct,it),lt).on("end.style."+rt,null)}function styleInterpolate(rt,it,lt){return function(ct){this.style.setProperty(rt,it.call(this,ct),lt)}}function styleTween(rt,it,lt){var ct,ht;function dt(){var ft=it.apply(this,arguments);return ft!==ht&&(ct=(ht=ft)&&styleInterpolate(rt,ft,lt)),ct}return dt._value=it,dt}function transition_styleTween(rt,it,lt){var ct="style."+(rt+="");if(arguments.length<2)return(ct=this.tween(ct))&&ct._value;if(it==null)return this.tween(ct,null);if(typeof it!="function")throw new Error;return this.tween(ct,styleTween(rt,it,lt??""))}function textConstant(rt){return function(){this.textContent=rt}}function textFunction(rt){return function(){var it=rt(this);this.textContent=it??""}}function transition_text(rt){return this.tween("text",typeof rt=="function"?textFunction(tweenValue(this,"text",rt)):textConstant(rt==null?"":rt+""))}function textInterpolate(rt){return function(it){this.textContent=rt.call(this,it)}}function textTween(rt){var it,lt;function ct(){var ht=rt.apply(this,arguments);return ht!==lt&&(it=(lt=ht)&&textInterpolate(ht)),it}return ct._value=rt,ct}function transition_textTween(rt){var it="text";if(arguments.length<1)return(it=this.tween(it))&&it._value;if(rt==null)return this.tween(it,null);if(typeof rt!="function")throw new Error;return this.tween(it,textTween(rt))}function transition_transition(){for(var rt=this._name,it=this._id,lt=newId(),ct=this._groups,ht=ct.length,dt=0;dt<ht;++dt)for(var ft=ct[dt],ut=ft.length,pt,gt=0;gt<ut;++gt)if(pt=ft[gt]){var mt=get(pt,it);schedule(pt,rt,lt,gt,ft,{time:mt.time+mt.delay+mt.duration,delay:0,duration:mt.duration,ease:mt.ease})}return new Transition(ct,this._parents,rt,lt)}function transition_end(){var rt,it,lt=this,ct=lt._id,ht=lt.size();return new Promise(function(dt,ft){var ut={value:ft},pt={value:function(){--ht===0&&dt()}};lt.each(function(){var gt=set$1(this,ct),mt=gt.on;mt!==rt&&(it=(rt=mt).copy(),it._.cancel.push(ut),it._.interrupt.push(ut),it._.end.push(pt)),gt.on=it}),ht===0&&dt()})}var id$1=0;function Transition(rt,it,lt,ct){this._groups=rt,this._parents=it,this._name=lt,this._id=ct}function newId(){return++id$1}var selection_prototype=selection.prototype;Transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,easeVarying:transition_easeVarying,end:transition_end,[Symbol.iterator]:selection_prototype[Symbol.iterator]};function cubicInOut(rt){return((rt*=2)<=1?rt*rt*rt:(rt-=2)*rt*rt+2)/2}var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(rt,it){for(var lt;!(lt=rt.__transition)||!(lt=lt[it]);)if(!(rt=rt.parentNode))throw new Error(`transition ${it} not found`);return lt}function selection_transition(rt){var it,lt;rt instanceof Transition?(it=rt._id,rt=rt._name):(it=newId(),(lt=defaultTiming).time=now(),rt=rt==null?null:rt+"");for(var ct=this._groups,ht=ct.length,dt=0;dt<ht;++dt)for(var ft=ct[dt],ut=ft.length,pt,gt=0;gt<ut;++gt)(pt=ft[gt])&&schedule(pt,rt,it,gt,ft,lt||inherit(pt,it));return new Transition(ct,this._parents,rt,it)}selection.prototype.interrupt=selection_interrupt;selection.prototype.transition=selection_transition;const pi$1=Math.PI,tau$1=2*pi$1,epsilon$1=1e-6,tauEpsilon=tau$1-epsilon$1;function append$1(rt){this._+=rt[0];for(let it=1,lt=rt.length;it<lt;++it)this._+=arguments[it]+rt[it]}function appendRound(rt){let it=Math.floor(rt);if(!(it>=0))throw new Error(`invalid digits: ${rt}`);if(it>15)return append$1;const lt=10**it;return function(ct){this._+=ct[0];for(let ht=1,dt=ct.length;ht<dt;++ht)this._+=Math.round(arguments[ht]*lt)/lt+ct[ht]}}class Path{constructor(it){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=it==null?append$1:appendRound(it)}moveTo(it,lt){this._append`M${this._x0=this._x1=+it},${this._y0=this._y1=+lt}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(it,lt){this._append`L${this._x1=+it},${this._y1=+lt}`}quadraticCurveTo(it,lt,ct,ht){this._append`Q${+it},${+lt},${this._x1=+ct},${this._y1=+ht}`}bezierCurveTo(it,lt,ct,ht,dt,ft){this._append`C${+it},${+lt},${+ct},${+ht},${this._x1=+dt},${this._y1=+ft}`}arcTo(it,lt,ct,ht,dt){if(it=+it,lt=+lt,ct=+ct,ht=+ht,dt=+dt,dt<0)throw new Error(`negative radius: ${dt}`);let ft=this._x1,ut=this._y1,pt=ct-it,gt=ht-lt,mt=ft-it,_t=ut-lt,yt=mt*mt+_t*_t;if(this._x1===null)this._append`M${this._x1=it},${this._y1=lt}`;else if(yt>epsilon$1)if(!(Math.abs(_t*pt-gt*mt)>epsilon$1)||!dt)this._append`L${this._x1=it},${this._y1=lt}`;else{let bt=ct-ft,xt=ht-ut,wt=pt*pt+gt*gt,Ct=bt*bt+xt*xt,St=Math.sqrt(wt),Tt=Math.sqrt(yt),vt=dt*Math.tan((pi$1-Math.acos((wt+yt-Ct)/(2*St*Tt)))/2),kt=vt/Tt,Et=vt/St;Math.abs(kt-1)>epsilon$1&&this._append`L${it+kt*mt},${lt+kt*_t}`,this._append`A${dt},${dt},0,0,${+(_t*bt>mt*xt)},${this._x1=it+Et*pt},${this._y1=lt+Et*gt}`}}arc(it,lt,ct,ht,dt,ft){if(it=+it,lt=+lt,ct=+ct,ft=!!ft,ct<0)throw new Error(`negative radius: ${ct}`);let ut=ct*Math.cos(ht),pt=ct*Math.sin(ht),gt=it+ut,mt=lt+pt,_t=1^ft,yt=ft?ht-dt:dt-ht;this._x1===null?this._append`M${gt},${mt}`:(Math.abs(this._x1-gt)>epsilon$1||Math.abs(this._y1-mt)>epsilon$1)&&this._append`L${gt},${mt}`,ct&&(yt<0&&(yt=yt%tau$1+tau$1),yt>tauEpsilon?this._append`A${ct},${ct},0,1,${_t},${it-ut},${lt-pt}A${ct},${ct},0,1,${_t},${this._x1=gt},${this._y1=mt}`:yt>epsilon$1&&this._append`A${ct},${ct},0,${+(yt>=pi$1)},${_t},${this._x1=it+ct*Math.cos(dt)},${this._y1=lt+ct*Math.sin(dt)}`)}rect(it,lt,ct,ht){this._append`M${this._x0=this._x1=+it},${this._y0=this._y1=+lt}h${ct=+ct}v${+ht}h${-ct}Z`}toString(){return this._}}function constant(rt){return function(){return rt}}const abs$1=Math.abs,atan2=Math.atan2,cos=Math.cos,max=Math.max,min=Math.min,sin=Math.sin,sqrt=Math.sqrt,epsilon=1e-12,pi=Math.PI,halfPi=pi/2,tau=2*pi;function acos(rt){return rt>1?0:rt<-1?pi:Math.acos(rt)}function asin(rt){return rt>=1?halfPi:rt<=-1?-halfPi:Math.asin(rt)}function withPath(rt){let it=3;return rt.digits=function(lt){if(!arguments.length)return it;if(lt==null)it=null;else{const ct=Math.floor(lt);if(!(ct>=0))throw new RangeError(`invalid digits: ${lt}`);it=ct}return rt},()=>new Path(it)}function array(rt){return typeof rt=="object"&&"length"in rt?rt:Array.from(rt)}function Linear(rt){this._context=rt}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(rt,it){switch(rt=+rt,it=+it,this._point){case 0:this._point=1,this._line?this._context.lineTo(rt,it):this._context.moveTo(rt,it);break;case 1:this._point=2;default:this._context.lineTo(rt,it);break}}};function curveLinear(rt){return new Linear(rt)}function x$1(rt){return rt[0]}function y$2(rt){return rt[1]}function line$1(rt,it){var lt=constant(!0),ct=null,ht=curveLinear,dt=null,ft=withPath(ut);rt=typeof rt=="function"?rt:rt===void 0?x$1:constant(rt),it=typeof it=="function"?it:it===void 0?y$2:constant(it);function ut(pt){var gt,mt=(pt=array(pt)).length,_t,yt=!1,bt;for(ct==null&&(dt=ht(bt=ft())),gt=0;gt<=mt;++gt)!(gt<mt&&lt(_t=pt[gt],gt,pt))===yt&&((yt=!yt)?dt.lineStart():dt.lineEnd()),yt&&dt.point(+rt(_t,gt,pt),+it(_t,gt,pt));if(bt)return dt=null,bt+""||null}return ut.x=function(pt){return arguments.length?(rt=typeof pt=="function"?pt:constant(+pt),ut):rt},ut.y=function(pt){return arguments.length?(it=typeof pt=="function"?pt:constant(+pt),ut):it},ut.defined=function(pt){return arguments.length?(lt=typeof pt=="function"?pt:constant(!!pt),ut):lt},ut.curve=function(pt){return arguments.length?(ht=pt,ct!=null&&(dt=ht(ct)),ut):ht},ut.context=function(pt){return arguments.length?(pt==null?ct=dt=null:dt=ht(ct=pt),ut):ct},ut}class Bump{constructor(it,lt){this._context=it,this._x=lt}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(it,lt){switch(it=+it,lt=+lt,this._point){case 0:{this._point=1,this._line?this._context.lineTo(it,lt):this._context.moveTo(it,lt);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+it)/2,this._y0,this._x0,lt,it,lt):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+lt)/2,it,this._y0,it,lt);break}}this._x0=it,this._y0=lt}}function bumpX(rt){return new Bump(rt,!0)}function bumpY(rt){return new Bump(rt,!1)}function noop(){}function point$4(rt,it,lt){rt._context.bezierCurveTo((2*rt._x0+rt._x1)/3,(2*rt._y0+rt._y1)/3,(rt._x0+2*rt._x1)/3,(rt._y0+2*rt._y1)/3,(rt._x0+4*rt._x1+it)/6,(rt._y0+4*rt._y1+lt)/6)}function Basis(rt){this._context=rt}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:point$4(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(rt,it){switch(rt=+rt,it=+it,this._point){case 0:this._point=1,this._line?this._context.lineTo(rt,it):this._context.moveTo(rt,it);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point$4(this,rt,it);break}this._x0=this._x1,this._x1=rt,this._y0=this._y1,this._y1=it}};function curveBasis(rt){return new Basis(rt)}function BasisClosed(rt){this._context=rt}BasisClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(rt,it){switch(rt=+rt,it=+it,this._point){case 0:this._point=1,this._x2=rt,this._y2=it;break;case 1:this._point=2,this._x3=rt,this._y3=it;break;case 2:this._point=3,this._x4=rt,this._y4=it,this._context.moveTo((this._x0+4*this._x1+rt)/6,(this._y0+4*this._y1+it)/6);break;default:point$4(this,rt,it);break}this._x0=this._x1,this._x1=rt,this._y0=this._y1,this._y1=it}};function curveBasisClosed(rt){return new BasisClosed(rt)}function BasisOpen(rt){this._context=rt}BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(rt,it){switch(rt=+rt,it=+it,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var lt=(this._x0+4*this._x1+rt)/6,ct=(this._y0+4*this._y1+it)/6;this._line?this._context.lineTo(lt,ct):this._context.moveTo(lt,ct);break;case 3:this._point=4;default:point$4(this,rt,it);break}this._x0=this._x1,this._x1=rt,this._y0=this._y1,this._y1=it}};function curveBasisOpen(rt){return new BasisOpen(rt)}function Bundle(rt,it){this._basis=new Basis(rt),this._beta=it}Bundle.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var rt=this._x,it=this._y,lt=rt.length-1;if(lt>0)for(var ct=rt[0],ht=it[0],dt=rt[lt]-ct,ft=it[lt]-ht,ut=-1,pt;++ut<=lt;)pt=ut/lt,this._basis.point(this._beta*rt[ut]+(1-this._beta)*(ct+pt*dt),this._beta*it[ut]+(1-this._beta)*(ht+pt*ft));this._x=this._y=null,this._basis.lineEnd()},point:function(rt,it){this._x.push(+rt),this._y.push(+it)}};const curveBundle=(function rt(it){function lt(ct){return it===1?new Basis(ct):new Bundle(ct,it)}return lt.beta=function(ct){return rt(+ct)},lt})(.85);function point$3(rt,it,lt){rt._context.bezierCurveTo(rt._x1+rt._k*(rt._x2-rt._x0),rt._y1+rt._k*(rt._y2-rt._y0),rt._x2+rt._k*(rt._x1-it),rt._y2+rt._k*(rt._y1-lt),rt._x2,rt._y2)}function Cardinal(rt,it){this._context=rt,this._k=(1-it)/6}Cardinal.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:point$3(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(rt,it){switch(rt=+rt,it=+it,this._point){case 0:this._point=1,this._line?this._context.lineTo(rt,it):this._context.moveTo(rt,it);break;case 1:this._point=2,this._x1=rt,this._y1=it;break;case 2:this._point=3;default:point$3(this,rt,it);break}this._x0=this._x1,this._x1=this._x2,this._x2=rt,this._y0=this._y1,this._y1=this._y2,this._y2=it}};const curveCardinal=(function rt(it){function lt(ct){return new Cardinal(ct,it)}return lt.tension=function(ct){return rt(+ct)},lt})(0);function CardinalClosed(rt,it){this._context=rt,this._k=(1-it)/6}CardinalClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(rt,it){switch(rt=+rt,it=+it,this._point){case 0:this._point=1,this._x3=rt,this._y3=it;break;case 1:this._point=2,this._context.moveTo(this._x4=rt,this._y4=it);break;case 2:this._point=3,this._x5=rt,this._y5=it;break;default:point$3(this,rt,it);break}this._x0=this._x1,this._x1=this._x2,this._x2=rt,this._y0=this._y1,this._y1=this._y2,this._y2=it}};const curveCardinalClosed=(function rt(it){function lt(ct){return new CardinalClosed(ct,it)}return lt.tension=function(ct){return rt(+ct)},lt})(0);function CardinalOpen(rt,it){this._context=rt,this._k=(1-it)/6}CardinalOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(rt,it){switch(rt=+rt,it=+it,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$3(this,rt,it);break}this._x0=this._x1,this._x1=this._x2,this._x2=rt,this._y0=this._y1,this._y1=this._y2,this._y2=it}};const curveCardinalOpen=(function rt(it){function lt(ct){return new CardinalOpen(ct,it)}return lt.tension=function(ct){return rt(+ct)},lt})(0);function point$2(rt,it,lt){var ct=rt._x1,ht=rt._y1,dt=rt._x2,ft=rt._y2;if(rt._l01_a>epsilon){var ut=2*rt._l01_2a+3*rt._l01_a*rt._l12_a+rt._l12_2a,pt=3*rt._l01_a*(rt._l01_a+rt._l12_a);ct=(ct*ut-rt._x0*rt._l12_2a+rt._x2*rt._l01_2a)/pt,ht=(ht*ut-rt._y0*rt._l12_2a+rt._y2*rt._l01_2a)/pt}if(rt._l23_a>epsilon){var gt=2*rt._l23_2a+3*rt._l23_a*rt._l12_a+rt._l12_2a,mt=3*rt._l23_a*(rt._l23_a+rt._l12_a);dt=(dt*gt+rt._x1*rt._l23_2a-it*rt._l12_2a)/mt,ft=(ft*gt+rt._y1*rt._l23_2a-lt*rt._l12_2a)/mt}rt._context.bezierCurveTo(ct,ht,dt,ft,rt._x2,rt._y2)}function CatmullRom(rt,it){this._context=rt,this._alpha=it}CatmullRom.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(rt,it){if(rt=+rt,it=+it,this._point){var lt=this._x2-rt,ct=this._y2-it;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(lt*lt+ct*ct,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(rt,it):this._context.moveTo(rt,it);break;case 1:this._point=2;break;case 2:this._point=3;default:point$2(this,rt,it);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=rt,this._y0=this._y1,this._y1=this._y2,this._y2=it}};const curveCatmullRom=(function rt(it){function lt(ct){return it?new CatmullRom(ct,it):new Cardinal(ct,0)}return lt.alpha=function(ct){return rt(+ct)},lt})(.5);function CatmullRomClosed(rt,it){this._context=rt,this._alpha=it}CatmullRomClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(rt,it){if(rt=+rt,it=+it,this._point){var lt=this._x2-rt,ct=this._y2-it;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(lt*lt+ct*ct,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=rt,this._y3=it;break;case 1:this._point=2,this._context.moveTo(this._x4=rt,this._y4=it);break;case 2:this._point=3,this._x5=rt,this._y5=it;break;default:point$2(this,rt,it);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=rt,this._y0=this._y1,this._y1=this._y2,this._y2=it}};const curveCatmullRomClosed=(function rt(it){function lt(ct){return it?new CatmullRomClosed(ct,it):new CardinalClosed(ct,0)}return lt.alpha=function(ct){return rt(+ct)},lt})(.5);function CatmullRomOpen(rt,it){this._context=rt,this._alpha=it}CatmullRomOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(rt,it){if(rt=+rt,it=+it,this._point){var lt=this._x2-rt,ct=this._y2-it;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(lt*lt+ct*ct,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$2(this,rt,it);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=rt,this._y0=this._y1,this._y1=this._y2,this._y2=it}};const curveCatmullRomOpen=(function rt(it){function lt(ct){return it?new CatmullRomOpen(ct,it):new CardinalOpen(ct,0)}return lt.alpha=function(ct){return rt(+ct)},lt})(.5);function LinearClosed(rt){this._context=rt}LinearClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(rt,it){rt=+rt,it=+it,this._point?this._context.lineTo(rt,it):(this._point=1,this._context.moveTo(rt,it))}};function curveLinearClosed(rt){return new LinearClosed(rt)}function sign(rt){return rt<0?-1:1}function slope3(rt,it,lt){var ct=rt._x1-rt._x0,ht=it-rt._x1,dt=(rt._y1-rt._y0)/(ct||ht<0&&-0),ft=(lt-rt._y1)/(ht||ct<0&&-0),ut=(dt*ht+ft*ct)/(ct+ht);return(sign(dt)+sign(ft))*Math.min(Math.abs(dt),Math.abs(ft),.5*Math.abs(ut))||0}function slope2(rt,it){var lt=rt._x1-rt._x0;return lt?(3*(rt._y1-rt._y0)/lt-it)/2:it}function point$1(rt,it,lt){var ct=rt._x0,ht=rt._y0,dt=rt._x1,ft=rt._y1,ut=(dt-ct)/3;rt._context.bezierCurveTo(ct+ut,ht+ut*it,dt-ut,ft-ut*lt,dt,ft)}function MonotoneX(rt){this._context=rt}MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point$1(this,this._t0,slope2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(rt,it){var lt=NaN;if(rt=+rt,it=+it,!(rt===this._x1&&it===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(rt,it):this._context.moveTo(rt,it);break;case 1:this._point=2;break;case 2:this._point=3,point$1(this,slope2(this,lt=slope3(this,rt,it)),lt);break;default:point$1(this,this._t0,lt=slope3(this,rt,it));break}this._x0=this._x1,this._x1=rt,this._y0=this._y1,this._y1=it,this._t0=lt}}};function MonotoneY(rt){this._context=new ReflectContext(rt)}(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(rt,it){MonotoneX.prototype.point.call(this,it,rt)};function ReflectContext(rt){this._context=rt}ReflectContext.prototype={moveTo:function(rt,it){this._context.moveTo(it,rt)},closePath:function(){this._context.closePath()},lineTo:function(rt,it){this._context.lineTo(it,rt)},bezierCurveTo:function(rt,it,lt,ct,ht,dt){this._context.bezierCurveTo(it,rt,ct,lt,dt,ht)}};function monotoneX(rt){return new MonotoneX(rt)}function monotoneY(rt){return new MonotoneY(rt)}function Natural(rt){this._context=rt}Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var rt=this._x,it=this._y,lt=rt.length;if(lt)if(this._line?this._context.lineTo(rt[0],it[0]):this._context.moveTo(rt[0],it[0]),lt===2)this._context.lineTo(rt[1],it[1]);else for(var ct=controlPoints(rt),ht=controlPoints(it),dt=0,ft=1;ft<lt;++dt,++ft)this._context.bezierCurveTo(ct[0][dt],ht[0][dt],ct[1][dt],ht[1][dt],rt[ft],it[ft]);(this._line||this._line!==0&&lt===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(rt,it){this._x.push(+rt),this._y.push(+it)}};function controlPoints(rt){var it,lt=rt.length-1,ct,ht=new Array(lt),dt=new Array(lt),ft=new Array(lt);for(ht[0]=0,dt[0]=2,ft[0]=rt[0]+2*rt[1],it=1;it<lt-1;++it)ht[it]=1,dt[it]=4,ft[it]=4*rt[it]+2*rt[it+1];for(ht[lt-1]=2,dt[lt-1]=7,ft[lt-1]=8*rt[lt-1]+rt[lt],it=1;it<lt;++it)ct=ht[it]/dt[it-1],dt[it]-=ct,ft[it]-=ct*ft[it-1];for(ht[lt-1]=ft[lt-1]/dt[lt-1],it=lt-2;it>=0;--it)ht[it]=(ft[it]-ht[it+1])/dt[it];for(dt[lt-1]=(rt[lt]+ht[lt-1])/2,it=0;it<lt-1;++it)dt[it]=2*rt[it+1]-ht[it+1];return[ht,dt]}function curveNatural(rt){return new Natural(rt)}function Step(rt,it){this._context=rt,this._t=it}Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(rt,it){switch(rt=+rt,it=+it,this._point){case 0:this._point=1,this._line?this._context.lineTo(rt,it):this._context.moveTo(rt,it);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,it),this._context.lineTo(rt,it);else{var lt=this._x*(1-this._t)+rt*this._t;this._context.lineTo(lt,this._y),this._context.lineTo(lt,it)}break}}this._x=rt,this._y=it}};function curveStep(rt){return new Step(rt,.5)}function stepBefore(rt){return new Step(rt,0)}function stepAfter(rt){return new Step(rt,1)}function Transform(rt,it,lt){this.k=rt,this.x=it,this.y=lt}Transform.prototype={constructor:Transform,scale:function(rt){return rt===1?this:new Transform(this.k*rt,this.x,this.y)},translate:function(rt,it){return rt===0&it===0?this:new Transform(this.k,this.x+this.k*rt,this.y+this.k*it)},apply:function(rt){return[rt[0]*this.k+this.x,rt[1]*this.k+this.y]},applyX:function(rt){return rt*this.k+this.x},applyY:function(rt){return rt*this.k+this.y},invert:function(rt){return[(rt[0]-this.x)/this.k,(rt[1]-this.y)/this.k]},invertX:function(rt){return(rt-this.x)/this.k},invertY:function(rt){return(rt-this.y)/this.k},rescaleX:function(rt){return rt.copy().domain(rt.range().map(this.invertX,this).map(rt.invert,rt))},rescaleY:function(rt){return rt.copy().domain(rt.range().map(this.invertY,this).map(rt.invert,rt))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Transform.prototype;var selectSvgElement=__name(rt=>{const{securityLevel:it}=getConfig2();let lt=select("body");if(it==="sandbox"){const dt=select(`#i${rt}`).node()?.contentDocument??document;lt=select(dt.body)}return lt.select(`#${rt}`)},"selectSvgElement");function isNothing(rt){return typeof rt>"u"||rt===null}__name(isNothing,"isNothing");function isObject(rt){return typeof rt=="object"&&rt!==null}__name(isObject,"isObject");function toArray(rt){return Array.isArray(rt)?rt:isNothing(rt)?[]:[rt]}__name(toArray,"toArray");function extend(rt,it){var lt,ct,ht,dt;if(it)for(dt=Object.keys(it),lt=0,ct=dt.length;lt<ct;lt+=1)ht=dt[lt],rt[ht]=it[ht];return rt}__name(extend,"extend");function repeat(rt,it){var lt="",ct;for(ct=0;ct<it;ct+=1)lt+=rt;return lt}__name(repeat,"repeat");function isNegativeZero(rt){return rt===0&&Number.NEGATIVE_INFINITY===1/rt}__name(isNegativeZero,"isNegativeZero");var isNothing_1=isNothing,isObject_1=isObject,toArray_1=toArray,repeat_1=repeat,isNegativeZero_1=isNegativeZero,extend_1=extend,common$1={isNothing:isNothing_1,isObject:isObject_1,toArray:toArray_1,repeat:repeat_1,isNegativeZero:isNegativeZero_1,extend:extend_1};function formatError(rt,it){var lt="",ct=rt.reason||"(unknown reason)";return rt.mark?(rt.mark.name&&(lt+='in "'+rt.mark.name+'" '),lt+="("+(rt.mark.line+1)+":"+(rt.mark.column+1)+")",!it&&rt.mark.snippet&&(lt+=`

`+rt.mark.snippet),ct+" "+lt):ct}__name(formatError,"formatError");function YAMLException$1(rt,it){Error.call(this),this.name="YAMLException",this.reason=rt,this.mark=it,this.message=formatError(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}__name(YAMLException$1,"YAMLException$1");YAMLException$1.prototype=Object.create(Error.prototype);YAMLException$1.prototype.constructor=YAMLException$1;YAMLException$1.prototype.toString=__name(function(it){return this.name+": "+formatError(this,it)},"toString");var exception=YAMLException$1;function getLine(rt,it,lt,ct,ht){var dt="",ft="",ut=Math.floor(ht/2)-1;return ct-it>ut&&(dt=" ... ",it=ct-ut+dt.length),lt-ct>ut&&(ft=" ...",lt=ct+ut-ft.length),{str:dt+rt.slice(it,lt).replace(/\t/g,"â")+ft,pos:ct-it+dt.length}}__name(getLine,"getLine");function padStart(rt,it){return common$1.repeat(" ",it-rt.length)+rt}__name(padStart,"padStart");function makeSnippet(rt,it){if(it=Object.create(it||null),!rt.buffer)return null;it.maxLength||(it.maxLength=79),typeof it.indent!="number"&&(it.indent=1),typeof it.linesBefore!="number"&&(it.linesBefore=3),typeof it.linesAfter!="number"&&(it.linesAfter=2);for(var lt=/\r?\n|\r|\0/g,ct=[0],ht=[],dt,ft=-1;dt=lt.exec(rt.buffer);)ht.push(dt.index),ct.push(dt.index+dt[0].length),rt.position<=dt.index&&ft<0&&(ft=ct.length-2);ft<0&&(ft=ct.length-1);var ut="",pt,gt,mt=Math.min(rt.line+it.linesAfter,ht.length).toString().length,_t=it.maxLength-(it.indent+mt+3);for(pt=1;pt<=it.linesBefore&&!(ft-pt<0);pt++)gt=getLine(rt.buffer,ct[ft-pt],ht[ft-pt],rt.position-(ct[ft]-ct[ft-pt]),_t),ut=common$1.repeat(" ",it.indent)+padStart((rt.line-pt+1).toString(),mt)+" | "+gt.str+`
`+ut;for(gt=getLine(rt.buffer,ct[ft],ht[ft],rt.position,_t),ut+=common$1.repeat(" ",it.indent)+padStart((rt.line+1).toString(),mt)+" | "+gt.str+`
`,ut+=common$1.repeat("-",it.indent+mt+3+gt.pos)+`^
`,pt=1;pt<=it.linesAfter&&!(ft+pt>=ht.length);pt++)gt=getLine(rt.buffer,ct[ft+pt],ht[ft+pt],rt.position-(ct[ft]-ct[ft+pt]),_t),ut+=common$1.repeat(" ",it.indent)+padStart((rt.line+pt+1).toString(),mt)+" | "+gt.str+`
`;return ut.replace(/\n$/,"")}__name(makeSnippet,"makeSnippet");var snippet=makeSnippet,TYPE_CONSTRUCTOR_OPTIONS=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],YAML_NODE_KINDS=["scalar","sequence","mapping"];function compileStyleAliases(rt){var it={};return rt!==null&&Object.keys(rt).forEach(function(lt){rt[lt].forEach(function(ct){it[String(ct)]=lt})}),it}__name(compileStyleAliases,"compileStyleAliases");function Type$1(rt,it){if(it=it||{},Object.keys(it).forEach(function(lt){if(TYPE_CONSTRUCTOR_OPTIONS.indexOf(lt)===-1)throw new exception('Unknown option "'+lt+'" is met in definition of "'+rt+'" YAML type.')}),this.options=it,this.tag=rt,this.kind=it.kind||null,this.resolve=it.resolve||function(){return!0},this.construct=it.construct||function(lt){return lt},this.instanceOf=it.instanceOf||null,this.predicate=it.predicate||null,this.represent=it.represent||null,this.representName=it.representName||null,this.defaultStyle=it.defaultStyle||null,this.multi=it.multi||!1,this.styleAliases=compileStyleAliases(it.styleAliases||null),YAML_NODE_KINDS.indexOf(this.kind)===-1)throw new exception('Unknown kind "'+this.kind+'" is specified for "'+rt+'" YAML type.')}__name(Type$1,"Type$1");var type=Type$1;function compileList(rt,it){var lt=[];return rt[it].forEach(function(ct){var ht=lt.length;lt.forEach(function(dt,ft){dt.tag===ct.tag&&dt.kind===ct.kind&&dt.multi===ct.multi&&(ht=ft)}),lt[ht]=ct}),lt}__name(compileList,"compileList");function compileMap(){var rt={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},it,lt;function ct(ht){ht.multi?(rt.multi[ht.kind].push(ht),rt.multi.fallback.push(ht)):rt[ht.kind][ht.tag]=rt.fallback[ht.tag]=ht}for(__name(ct,"collectType"),it=0,lt=arguments.length;it<lt;it+=1)arguments[it].forEach(ct);return rt}__name(compileMap,"compileMap");function Schema$1(rt){return this.extend(rt)}__name(Schema$1,"Schema$1");Schema$1.prototype.extend=__name(function(it){var lt=[],ct=[];if(it instanceof type)ct.push(it);else if(Array.isArray(it))ct=ct.concat(it);else if(it&&(Array.isArray(it.implicit)||Array.isArray(it.explicit)))it.implicit&&(lt=lt.concat(it.implicit)),it.explicit&&(ct=ct.concat(it.explicit));else throw new exception("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");lt.forEach(function(dt){if(!(dt instanceof type))throw new exception("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(dt.loadKind&&dt.loadKind!=="scalar")throw new exception("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(dt.multi)throw new exception("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),ct.forEach(function(dt){if(!(dt instanceof type))throw new exception("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var ht=Object.create(Schema$1.prototype);return ht.implicit=(this.implicit||[]).concat(lt),ht.explicit=(this.explicit||[]).concat(ct),ht.compiledImplicit=compileList(ht,"implicit"),ht.compiledExplicit=compileList(ht,"explicit"),ht.compiledTypeMap=compileMap(ht.compiledImplicit,ht.compiledExplicit),ht},"extend");var schema=Schema$1,str=new type("tag:yaml.org,2002:str",{kind:"scalar",construct:__name(function(rt){return rt!==null?rt:""},"construct")}),seq=new type("tag:yaml.org,2002:seq",{kind:"sequence",construct:__name(function(rt){return rt!==null?rt:[]},"construct")}),map=new type("tag:yaml.org,2002:map",{kind:"mapping",construct:__name(function(rt){return rt!==null?rt:{}},"construct")}),failsafe=new schema({explicit:[str,seq,map]});function resolveYamlNull(rt){if(rt===null)return!0;var it=rt.length;return it===1&&rt==="~"||it===4&&(rt==="null"||rt==="Null"||rt==="NULL")}__name(resolveYamlNull,"resolveYamlNull");function constructYamlNull(){return null}__name(constructYamlNull,"constructYamlNull");function isNull(rt){return rt===null}__name(isNull,"isNull");var _null=new type("tag:yaml.org,2002:null",{kind:"scalar",resolve:resolveYamlNull,construct:constructYamlNull,predicate:isNull,represent:{canonical:__name(function(){return"~"},"canonical"),lowercase:__name(function(){return"null"},"lowercase"),uppercase:__name(function(){return"NULL"},"uppercase"),camelcase:__name(function(){return"Null"},"camelcase"),empty:__name(function(){return""},"empty")},defaultStyle:"lowercase"});function resolveYamlBoolean(rt){if(rt===null)return!1;var it=rt.length;return it===4&&(rt==="true"||rt==="True"||rt==="TRUE")||it===5&&(rt==="false"||rt==="False"||rt==="FALSE")}__name(resolveYamlBoolean,"resolveYamlBoolean");function constructYamlBoolean(rt){return rt==="true"||rt==="True"||rt==="TRUE"}__name(constructYamlBoolean,"constructYamlBoolean");function isBoolean(rt){return Object.prototype.toString.call(rt)==="[object Boolean]"}__name(isBoolean,"isBoolean");var bool=new type("tag:yaml.org,2002:bool",{kind:"scalar",resolve:resolveYamlBoolean,construct:constructYamlBoolean,predicate:isBoolean,represent:{lowercase:__name(function(rt){return rt?"true":"false"},"lowercase"),uppercase:__name(function(rt){return rt?"TRUE":"FALSE"},"uppercase"),camelcase:__name(function(rt){return rt?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function isHexCode(rt){return 48<=rt&&rt<=57||65<=rt&&rt<=70||97<=rt&&rt<=102}__name(isHexCode,"isHexCode");function isOctCode(rt){return 48<=rt&&rt<=55}__name(isOctCode,"isOctCode");function isDecCode(rt){return 48<=rt&&rt<=57}__name(isDecCode,"isDecCode");function resolveYamlInteger(rt){if(rt===null)return!1;var it=rt.length,lt=0,ct=!1,ht;if(!it)return!1;if(ht=rt[lt],(ht==="-"||ht==="+")&&(ht=rt[++lt]),ht==="0"){if(lt+1===it)return!0;if(ht=rt[++lt],ht==="b"){for(lt++;lt<it;lt++)if(ht=rt[lt],ht!=="_"){if(ht!=="0"&&ht!=="1")return!1;ct=!0}return ct&&ht!=="_"}if(ht==="x"){for(lt++;lt<it;lt++)if(ht=rt[lt],ht!=="_"){if(!isHexCode(rt.charCodeAt(lt)))return!1;ct=!0}return ct&&ht!=="_"}if(ht==="o"){for(lt++;lt<it;lt++)if(ht=rt[lt],ht!=="_"){if(!isOctCode(rt.charCodeAt(lt)))return!1;ct=!0}return ct&&ht!=="_"}}if(ht==="_")return!1;for(;lt<it;lt++)if(ht=rt[lt],ht!=="_"){if(!isDecCode(rt.charCodeAt(lt)))return!1;ct=!0}return!(!ct||ht==="_")}__name(resolveYamlInteger,"resolveYamlInteger");function constructYamlInteger(rt){var it=rt,lt=1,ct;if(it.indexOf("_")!==-1&&(it=it.replace(/_/g,"")),ct=it[0],(ct==="-"||ct==="+")&&(ct==="-"&&(lt=-1),it=it.slice(1),ct=it[0]),it==="0")return 0;if(ct==="0"){if(it[1]==="b")return lt*parseInt(it.slice(2),2);if(it[1]==="x")return lt*parseInt(it.slice(2),16);if(it[1]==="o")return lt*parseInt(it.slice(2),8)}return lt*parseInt(it,10)}__name(constructYamlInteger,"constructYamlInteger");function isInteger(rt){return Object.prototype.toString.call(rt)==="[object Number]"&&rt%1===0&&!common$1.isNegativeZero(rt)}__name(isInteger,"isInteger");var int=new type("tag:yaml.org,2002:int",{kind:"scalar",resolve:resolveYamlInteger,construct:constructYamlInteger,predicate:isInteger,represent:{binary:__name(function(rt){return rt>=0?"0b"+rt.toString(2):"-0b"+rt.toString(2).slice(1)},"binary"),octal:__name(function(rt){return rt>=0?"0o"+rt.toString(8):"-0o"+rt.toString(8).slice(1)},"octal"),decimal:__name(function(rt){return rt.toString(10)},"decimal"),hexadecimal:__name(function(rt){return rt>=0?"0x"+rt.toString(16).toUpperCase():"-0x"+rt.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),YAML_FLOAT_PATTERN=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function resolveYamlFloat(rt){return!(rt===null||!YAML_FLOAT_PATTERN.test(rt)||rt[rt.length-1]==="_")}__name(resolveYamlFloat,"resolveYamlFloat");function constructYamlFloat(rt){var it,lt;return it=rt.replace(/_/g,"").toLowerCase(),lt=it[0]==="-"?-1:1,"+-".indexOf(it[0])>=0&&(it=it.slice(1)),it===".inf"?lt===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:it===".nan"?NaN:lt*parseFloat(it,10)}__name(constructYamlFloat,"constructYamlFloat");var SCIENTIFIC_WITHOUT_DOT=/^[-+]?[0-9]+e/;function representYamlFloat(rt,it){var lt;if(isNaN(rt))switch(it){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===rt)switch(it){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===rt)switch(it){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(common$1.isNegativeZero(rt))return"-0.0";return lt=rt.toString(10),SCIENTIFIC_WITHOUT_DOT.test(lt)?lt.replace("e",".e"):lt}__name(representYamlFloat,"representYamlFloat");function isFloat(rt){return Object.prototype.toString.call(rt)==="[object Number]"&&(rt%1!==0||common$1.isNegativeZero(rt))}__name(isFloat,"isFloat");var float=new type("tag:yaml.org,2002:float",{kind:"scalar",resolve:resolveYamlFloat,construct:constructYamlFloat,predicate:isFloat,represent:representYamlFloat,defaultStyle:"lowercase"}),json=failsafe.extend({implicit:[_null,bool,int,float]}),core=json,YAML_DATE_REGEXP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),YAML_TIMESTAMP_REGEXP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function resolveYamlTimestamp(rt){return rt===null?!1:YAML_DATE_REGEXP.exec(rt)!==null||YAML_TIMESTAMP_REGEXP.exec(rt)!==null}__name(resolveYamlTimestamp,"resolveYamlTimestamp");function constructYamlTimestamp(rt){var it,lt,ct,ht,dt,ft,ut,pt=0,gt=null,mt,_t,yt;if(it=YAML_DATE_REGEXP.exec(rt),it===null&&(it=YAML_TIMESTAMP_REGEXP.exec(rt)),it===null)throw new Error("Date resolve error");if(lt=+it[1],ct=+it[2]-1,ht=+it[3],!it[4])return new Date(Date.UTC(lt,ct,ht));if(dt=+it[4],ft=+it[5],ut=+it[6],it[7]){for(pt=it[7].slice(0,3);pt.length<3;)pt+="0";pt=+pt}return it[9]&&(mt=+it[10],_t=+(it[11]||0),gt=(mt*60+_t)*6e4,it[9]==="-"&&(gt=-gt)),yt=new Date(Date.UTC(lt,ct,ht,dt,ft,ut,pt)),gt&&yt.setTime(yt.getTime()-gt),yt}__name(constructYamlTimestamp,"constructYamlTimestamp");function representYamlTimestamp(rt){return rt.toISOString()}__name(representYamlTimestamp,"representYamlTimestamp");var timestamp=new type("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:resolveYamlTimestamp,construct:constructYamlTimestamp,instanceOf:Date,represent:representYamlTimestamp});function resolveYamlMerge(rt){return rt==="<<"||rt===null}__name(resolveYamlMerge,"resolveYamlMerge");var merge=new type("tag:yaml.org,2002:merge",{kind:"scalar",resolve:resolveYamlMerge}),BASE64_MAP=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function resolveYamlBinary(rt){if(rt===null)return!1;var it,lt,ct=0,ht=rt.length,dt=BASE64_MAP;for(lt=0;lt<ht;lt++)if(it=dt.indexOf(rt.charAt(lt)),!(it>64)){if(it<0)return!1;ct+=6}return ct%8===0}__name(resolveYamlBinary,"resolveYamlBinary");function constructYamlBinary(rt){var it,lt,ct=rt.replace(/[\r\n=]/g,""),ht=ct.length,dt=BASE64_MAP,ft=0,ut=[];for(it=0;it<ht;it++)it%4===0&&it&&(ut.push(ft>>16&255),ut.push(ft>>8&255),ut.push(ft&255)),ft=ft<<6|dt.indexOf(ct.charAt(it));return lt=ht%4*6,lt===0?(ut.push(ft>>16&255),ut.push(ft>>8&255),ut.push(ft&255)):lt===18?(ut.push(ft>>10&255),ut.push(ft>>2&255)):lt===12&&ut.push(ft>>4&255),new Uint8Array(ut)}__name(constructYamlBinary,"constructYamlBinary");function representYamlBinary(rt){var it="",lt=0,ct,ht,dt=rt.length,ft=BASE64_MAP;for(ct=0;ct<dt;ct++)ct%3===0&&ct&&(it+=ft[lt>>18&63],it+=ft[lt>>12&63],it+=ft[lt>>6&63],it+=ft[lt&63]),lt=(lt<<8)+rt[ct];return ht=dt%3,ht===0?(it+=ft[lt>>18&63],it+=ft[lt>>12&63],it+=ft[lt>>6&63],it+=ft[lt&63]):ht===2?(it+=ft[lt>>10&63],it+=ft[lt>>4&63],it+=ft[lt<<2&63],it+=ft[64]):ht===1&&(it+=ft[lt>>2&63],it+=ft[lt<<4&63],it+=ft[64],it+=ft[64]),it}__name(representYamlBinary,"representYamlBinary");function isBinary(rt){return Object.prototype.toString.call(rt)==="[object Uint8Array]"}__name(isBinary,"isBinary");var binary=new type("tag:yaml.org,2002:binary",{kind:"scalar",resolve:resolveYamlBinary,construct:constructYamlBinary,predicate:isBinary,represent:representYamlBinary}),_hasOwnProperty$3=Object.prototype.hasOwnProperty,_toString$2=Object.prototype.toString;function resolveYamlOmap(rt){if(rt===null)return!0;var it=[],lt,ct,ht,dt,ft,ut=rt;for(lt=0,ct=ut.length;lt<ct;lt+=1){if(ht=ut[lt],ft=!1,_toString$2.call(ht)!=="[object Object]")return!1;for(dt in ht)if(_hasOwnProperty$3.call(ht,dt))if(!ft)ft=!0;else return!1;if(!ft)return!1;if(it.indexOf(dt)===-1)it.push(dt);else return!1}return!0}__name(resolveYamlOmap,"resolveYamlOmap");function constructYamlOmap(rt){return rt!==null?rt:[]}__name(constructYamlOmap,"constructYamlOmap");var omap=new type("tag:yaml.org,2002:omap",{kind:"sequence",resolve:resolveYamlOmap,construct:constructYamlOmap}),_toString$1=Object.prototype.toString;function resolveYamlPairs(rt){if(rt===null)return!0;var it,lt,ct,ht,dt,ft=rt;for(dt=new Array(ft.length),it=0,lt=ft.length;it<lt;it+=1){if(ct=ft[it],_toString$1.call(ct)!=="[object Object]"||(ht=Object.keys(ct),ht.length!==1))return!1;dt[it]=[ht[0],ct[ht[0]]]}return!0}__name(resolveYamlPairs,"resolveYamlPairs");function constructYamlPairs(rt){if(rt===null)return[];var it,lt,ct,ht,dt,ft=rt;for(dt=new Array(ft.length),it=0,lt=ft.length;it<lt;it+=1)ct=ft[it],ht=Object.keys(ct),dt[it]=[ht[0],ct[ht[0]]];return dt}__name(constructYamlPairs,"constructYamlPairs");var pairs=new type("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:resolveYamlPairs,construct:constructYamlPairs}),_hasOwnProperty$2=Object.prototype.hasOwnProperty;function resolveYamlSet(rt){if(rt===null)return!0;var it,lt=rt;for(it in lt)if(_hasOwnProperty$2.call(lt,it)&&lt[it]!==null)return!1;return!0}__name(resolveYamlSet,"resolveYamlSet");function constructYamlSet(rt){return rt!==null?rt:{}}__name(constructYamlSet,"constructYamlSet");var set=new type("tag:yaml.org,2002:set",{kind:"mapping",resolve:resolveYamlSet,construct:constructYamlSet}),_default=core.extend({implicit:[timestamp,merge],explicit:[binary,omap,pairs,set]}),_hasOwnProperty$1=Object.prototype.hasOwnProperty,CONTEXT_FLOW_IN=1,CONTEXT_FLOW_OUT=2,CONTEXT_BLOCK_IN=3,CONTEXT_BLOCK_OUT=4,CHOMPING_CLIP=1,CHOMPING_STRIP=2,CHOMPING_KEEP=3,PATTERN_NON_PRINTABLE=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,PATTERN_NON_ASCII_LINE_BREAKS=/[\x85\u2028\u2029]/,PATTERN_FLOW_INDICATORS=/[,\[\]\{\}]/,PATTERN_TAG_HANDLE=/^(?:!|!!|![a-z\-]+!)$/i,PATTERN_TAG_URI=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function _class(rt){return Object.prototype.toString.call(rt)}__name(_class,"_class");function is_EOL(rt){return rt===10||rt===13}__name(is_EOL,"is_EOL");function is_WHITE_SPACE(rt){return rt===9||rt===32}__name(is_WHITE_SPACE,"is_WHITE_SPACE");function is_WS_OR_EOL(rt){return rt===9||rt===32||rt===10||rt===13}__name(is_WS_OR_EOL,"is_WS_OR_EOL");function is_FLOW_INDICATOR(rt){return rt===44||rt===91||rt===93||rt===123||rt===125}__name(is_FLOW_INDICATOR,"is_FLOW_INDICATOR");function fromHexCode(rt){var it;return 48<=rt&&rt<=57?rt-48:(it=rt|32,97<=it&&it<=102?it-97+10:-1)}__name(fromHexCode,"fromHexCode");function escapedHexLen(rt){return rt===120?2:rt===117?4:rt===85?8:0}__name(escapedHexLen,"escapedHexLen");function fromDecimalCode(rt){return 48<=rt&&rt<=57?rt-48:-1}__name(fromDecimalCode,"fromDecimalCode");function simpleEscapeSequence(rt){return rt===48?"\0":rt===97?"\x07":rt===98?"\b":rt===116||rt===9?"	":rt===110?`
`:rt===118?"\v":rt===102?"\f":rt===114?"\r":rt===101?"\x1B":rt===32?" ":rt===34?'"':rt===47?"/":rt===92?"\\":rt===78?"Â":rt===95?"Â ":rt===76?"\u2028":rt===80?"\u2029":""}__name(simpleEscapeSequence,"simpleEscapeSequence");function charFromCodepoint(rt){return rt<=65535?String.fromCharCode(rt):String.fromCharCode((rt-65536>>10)+55296,(rt-65536&1023)+56320)}__name(charFromCodepoint,"charFromCodepoint");var simpleEscapeCheck=new Array(256),simpleEscapeMap=new Array(256);for(i$1=0;i$1<256;i$1++)simpleEscapeCheck[i$1]=simpleEscapeSequence(i$1)?1:0,simpleEscapeMap[i$1]=simpleEscapeSequence(i$1);var i$1;function State$1(rt,it){this.input=rt,this.filename=it.filename||null,this.schema=it.schema||_default,this.onWarning=it.onWarning||null,this.legacy=it.legacy||!1,this.json=it.json||!1,this.listener=it.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=rt.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}__name(State$1,"State$1");function generateError(rt,it){var lt={name:rt.filename,buffer:rt.input.slice(0,-1),position:rt.position,line:rt.line,column:rt.position-rt.lineStart};return lt.snippet=snippet(lt),new exception(it,lt)}__name(generateError,"generateError");function throwError(rt,it){throw generateError(rt,it)}__name(throwError,"throwError");function throwWarning(rt,it){rt.onWarning&&rt.onWarning.call(null,generateError(rt,it))}__name(throwWarning,"throwWarning");var directiveHandlers={YAML:__name(function(it,lt,ct){var ht,dt,ft;it.version!==null&&throwError(it,"duplication of %YAML directive"),ct.length!==1&&throwError(it,"YAML directive accepts exactly one argument"),ht=/^([0-9]+)\.([0-9]+)$/.exec(ct[0]),ht===null&&throwError(it,"ill-formed argument of the YAML directive"),dt=parseInt(ht[1],10),ft=parseInt(ht[2],10),dt!==1&&throwError(it,"unacceptable YAML version of the document"),it.version=ct[0],it.checkLineBreaks=ft<2,ft!==1&&ft!==2&&throwWarning(it,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:__name(function(it,lt,ct){var ht,dt;ct.length!==2&&throwError(it,"TAG directive accepts exactly two arguments"),ht=ct[0],dt=ct[1],PATTERN_TAG_HANDLE.test(ht)||throwError(it,"ill-formed tag handle (first argument) of the TAG directive"),_hasOwnProperty$1.call(it.tagMap,ht)&&throwError(it,'there is a previously declared suffix for "'+ht+'" tag handle'),PATTERN_TAG_URI.test(dt)||throwError(it,"ill-formed tag prefix (second argument) of the TAG directive");try{dt=decodeURIComponent(dt)}catch{throwError(it,"tag prefix is malformed: "+dt)}it.tagMap[ht]=dt},"handleTagDirective")};function captureSegment(rt,it,lt,ct){var ht,dt,ft,ut;if(it<lt){if(ut=rt.input.slice(it,lt),ct)for(ht=0,dt=ut.length;ht<dt;ht+=1)ft=ut.charCodeAt(ht),ft===9||32<=ft&&ft<=1114111||throwError(rt,"expected valid JSON character");else PATTERN_NON_PRINTABLE.test(ut)&&throwError(rt,"the stream contains non-printable characters");rt.result+=ut}}__name(captureSegment,"captureSegment");function mergeMappings(rt,it,lt,ct){var ht,dt,ft,ut;for(common$1.isObject(lt)||throwError(rt,"cannot merge mappings; the provided source object is unacceptable"),ht=Object.keys(lt),ft=0,ut=ht.length;ft<ut;ft+=1)dt=ht[ft],_hasOwnProperty$1.call(it,dt)||(it[dt]=lt[dt],ct[dt]=!0)}__name(mergeMappings,"mergeMappings");function storeMappingPair(rt,it,lt,ct,ht,dt,ft,ut,pt){var gt,mt;if(Array.isArray(ht))for(ht=Array.prototype.slice.call(ht),gt=0,mt=ht.length;gt<mt;gt+=1)Array.isArray(ht[gt])&&throwError(rt,"nested arrays are not supported inside keys"),typeof ht=="object"&&_class(ht[gt])==="[object Object]"&&(ht[gt]="[object Object]");if(typeof ht=="object"&&_class(ht)==="[object Object]"&&(ht="[object Object]"),ht=String(ht),it===null&&(it={}),ct==="tag:yaml.org,2002:merge")if(Array.isArray(dt))for(gt=0,mt=dt.length;gt<mt;gt+=1)mergeMappings(rt,it,dt[gt],lt);else mergeMappings(rt,it,dt,lt);else!rt.json&&!_hasOwnProperty$1.call(lt,ht)&&_hasOwnProperty$1.call(it,ht)&&(rt.line=ft||rt.line,rt.lineStart=ut||rt.lineStart,rt.position=pt||rt.position,throwError(rt,"duplicated mapping key")),ht==="__proto__"?Object.defineProperty(it,ht,{configurable:!0,enumerable:!0,writable:!0,value:dt}):it[ht]=dt,delete lt[ht];return it}__name(storeMappingPair,"storeMappingPair");function readLineBreak(rt){var it;it=rt.input.charCodeAt(rt.position),it===10?rt.position++:it===13?(rt.position++,rt.input.charCodeAt(rt.position)===10&&rt.position++):throwError(rt,"a line break is expected"),rt.line+=1,rt.lineStart=rt.position,rt.firstTabInLine=-1}__name(readLineBreak,"readLineBreak");function skipSeparationSpace(rt,it,lt){for(var ct=0,ht=rt.input.charCodeAt(rt.position);ht!==0;){for(;is_WHITE_SPACE(ht);)ht===9&&rt.firstTabInLine===-1&&(rt.firstTabInLine=rt.position),ht=rt.input.charCodeAt(++rt.position);if(it&&ht===35)do ht=rt.input.charCodeAt(++rt.position);while(ht!==10&&ht!==13&&ht!==0);if(is_EOL(ht))for(readLineBreak(rt),ht=rt.input.charCodeAt(rt.position),ct++,rt.lineIndent=0;ht===32;)rt.lineIndent++,ht=rt.input.charCodeAt(++rt.position);else break}return lt!==-1&&ct!==0&&rt.lineIndent<lt&&throwWarning(rt,"deficient indentation"),ct}__name(skipSeparationSpace,"skipSeparationSpace");function testDocumentSeparator(rt){var it=rt.position,lt;return lt=rt.input.charCodeAt(it),!!((lt===45||lt===46)&&lt===rt.input.charCodeAt(it+1)&&lt===rt.input.charCodeAt(it+2)&&(it+=3,lt=rt.input.charCodeAt(it),lt===0||is_WS_OR_EOL(lt)))}__name(testDocumentSeparator,"testDocumentSeparator");function writeFoldedLines(rt,it){it===1?rt.result+=" ":it>1&&(rt.result+=common$1.repeat(`
`,it-1))}__name(writeFoldedLines,"writeFoldedLines");function readPlainScalar(rt,it,lt){var ct,ht,dt,ft,ut,pt,gt,mt,_t=rt.kind,yt=rt.result,bt;if(bt=rt.input.charCodeAt(rt.position),is_WS_OR_EOL(bt)||is_FLOW_INDICATOR(bt)||bt===35||bt===38||bt===42||bt===33||bt===124||bt===62||bt===39||bt===34||bt===37||bt===64||bt===96||(bt===63||bt===45)&&(ht=rt.input.charCodeAt(rt.position+1),is_WS_OR_EOL(ht)||lt&&is_FLOW_INDICATOR(ht)))return!1;for(rt.kind="scalar",rt.result="",dt=ft=rt.position,ut=!1;bt!==0;){if(bt===58){if(ht=rt.input.charCodeAt(rt.position+1),is_WS_OR_EOL(ht)||lt&&is_FLOW_INDICATOR(ht))break}else if(bt===35){if(ct=rt.input.charCodeAt(rt.position-1),is_WS_OR_EOL(ct))break}else{if(rt.position===rt.lineStart&&testDocumentSeparator(rt)||lt&&is_FLOW_INDICATOR(bt))break;if(is_EOL(bt))if(pt=rt.line,gt=rt.lineStart,mt=rt.lineIndent,skipSeparationSpace(rt,!1,-1),rt.lineIndent>=it){ut=!0,bt=rt.input.charCodeAt(rt.position);continue}else{rt.position=ft,rt.line=pt,rt.lineStart=gt,rt.lineIndent=mt;break}}ut&&(captureSegment(rt,dt,ft,!1),writeFoldedLines(rt,rt.line-pt),dt=ft=rt.position,ut=!1),is_WHITE_SPACE(bt)||(ft=rt.position+1),bt=rt.input.charCodeAt(++rt.position)}return captureSegment(rt,dt,ft,!1),rt.result?!0:(rt.kind=_t,rt.result=yt,!1)}__name(readPlainScalar,"readPlainScalar");function readSingleQuotedScalar(rt,it){var lt,ct,ht;if(lt=rt.input.charCodeAt(rt.position),lt!==39)return!1;for(rt.kind="scalar",rt.result="",rt.position++,ct=ht=rt.position;(lt=rt.input.charCodeAt(rt.position))!==0;)if(lt===39)if(captureSegment(rt,ct,rt.position,!0),lt=rt.input.charCodeAt(++rt.position),lt===39)ct=rt.position,rt.position++,ht=rt.position;else return!0;else is_EOL(lt)?(captureSegment(rt,ct,ht,!0),writeFoldedLines(rt,skipSeparationSpace(rt,!1,it)),ct=ht=rt.position):rt.position===rt.lineStart&&testDocumentSeparator(rt)?throwError(rt,"unexpected end of the document within a single quoted scalar"):(rt.position++,ht=rt.position);throwError(rt,"unexpected end of the stream within a single quoted scalar")}__name(readSingleQuotedScalar,"readSingleQuotedScalar");function readDoubleQuotedScalar(rt,it){var lt,ct,ht,dt,ft,ut;if(ut=rt.input.charCodeAt(rt.position),ut!==34)return!1;for(rt.kind="scalar",rt.result="",rt.position++,lt=ct=rt.position;(ut=rt.input.charCodeAt(rt.position))!==0;){if(ut===34)return captureSegment(rt,lt,rt.position,!0),rt.position++,!0;if(ut===92){if(captureSegment(rt,lt,rt.position,!0),ut=rt.input.charCodeAt(++rt.position),is_EOL(ut))skipSeparationSpace(rt,!1,it);else if(ut<256&&simpleEscapeCheck[ut])rt.result+=simpleEscapeMap[ut],rt.position++;else if((ft=escapedHexLen(ut))>0){for(ht=ft,dt=0;ht>0;ht--)ut=rt.input.charCodeAt(++rt.position),(ft=fromHexCode(ut))>=0?dt=(dt<<4)+ft:throwError(rt,"expected hexadecimal character");rt.result+=charFromCodepoint(dt),rt.position++}else throwError(rt,"unknown escape sequence");lt=ct=rt.position}else is_EOL(ut)?(captureSegment(rt,lt,ct,!0),writeFoldedLines(rt,skipSeparationSpace(rt,!1,it)),lt=ct=rt.position):rt.position===rt.lineStart&&testDocumentSeparator(rt)?throwError(rt,"unexpected end of the document within a double quoted scalar"):(rt.position++,ct=rt.position)}throwError(rt,"unexpected end of the stream within a double quoted scalar")}__name(readDoubleQuotedScalar,"readDoubleQuotedScalar");function readFlowCollection(rt,it){var lt=!0,ct,ht,dt,ft=rt.tag,ut,pt=rt.anchor,gt,mt,_t,yt,bt,xt=Object.create(null),wt,Ct,St,Tt;if(Tt=rt.input.charCodeAt(rt.position),Tt===91)mt=93,bt=!1,ut=[];else if(Tt===123)mt=125,bt=!0,ut={};else return!1;for(rt.anchor!==null&&(rt.anchorMap[rt.anchor]=ut),Tt=rt.input.charCodeAt(++rt.position);Tt!==0;){if(skipSeparationSpace(rt,!0,it),Tt=rt.input.charCodeAt(rt.position),Tt===mt)return rt.position++,rt.tag=ft,rt.anchor=pt,rt.kind=bt?"mapping":"sequence",rt.result=ut,!0;lt?Tt===44&&throwError(rt,"expected the node content, but found ','"):throwError(rt,"missed comma between flow collection entries"),Ct=wt=St=null,_t=yt=!1,Tt===63&&(gt=rt.input.charCodeAt(rt.position+1),is_WS_OR_EOL(gt)&&(_t=yt=!0,rt.position++,skipSeparationSpace(rt,!0,it))),ct=rt.line,ht=rt.lineStart,dt=rt.position,composeNode(rt,it,CONTEXT_FLOW_IN,!1,!0),Ct=rt.tag,wt=rt.result,skipSeparationSpace(rt,!0,it),Tt=rt.input.charCodeAt(rt.position),(yt||rt.line===ct)&&Tt===58&&(_t=!0,Tt=rt.input.charCodeAt(++rt.position),skipSeparationSpace(rt,!0,it),composeNode(rt,it,CONTEXT_FLOW_IN,!1,!0),St=rt.result),bt?storeMappingPair(rt,ut,xt,Ct,wt,St,ct,ht,dt):_t?ut.push(storeMappingPair(rt,null,xt,Ct,wt,St,ct,ht,dt)):ut.push(wt),skipSeparationSpace(rt,!0,it),Tt=rt.input.charCodeAt(rt.position),Tt===44?(lt=!0,Tt=rt.input.charCodeAt(++rt.position)):lt=!1}throwError(rt,"unexpected end of the stream within a flow collection")}__name(readFlowCollection,"readFlowCollection");function readBlockScalar(rt,it){var lt,ct,ht=CHOMPING_CLIP,dt=!1,ft=!1,ut=it,pt=0,gt=!1,mt,_t;if(_t=rt.input.charCodeAt(rt.position),_t===124)ct=!1;else if(_t===62)ct=!0;else return!1;for(rt.kind="scalar",rt.result="";_t!==0;)if(_t=rt.input.charCodeAt(++rt.position),_t===43||_t===45)CHOMPING_CLIP===ht?ht=_t===43?CHOMPING_KEEP:CHOMPING_STRIP:throwError(rt,"repeat of a chomping mode identifier");else if((mt=fromDecimalCode(_t))>=0)mt===0?throwError(rt,"bad explicit indentation width of a block scalar; it cannot be less than one"):ft?throwError(rt,"repeat of an indentation width identifier"):(ut=it+mt-1,ft=!0);else break;if(is_WHITE_SPACE(_t)){do _t=rt.input.charCodeAt(++rt.position);while(is_WHITE_SPACE(_t));if(_t===35)do _t=rt.input.charCodeAt(++rt.position);while(!is_EOL(_t)&&_t!==0)}for(;_t!==0;){for(readLineBreak(rt),rt.lineIndent=0,_t=rt.input.charCodeAt(rt.position);(!ft||rt.lineIndent<ut)&&_t===32;)rt.lineIndent++,_t=rt.input.charCodeAt(++rt.position);if(!ft&&rt.lineIndent>ut&&(ut=rt.lineIndent),is_EOL(_t)){pt++;continue}if(rt.lineIndent<ut){ht===CHOMPING_KEEP?rt.result+=common$1.repeat(`
`,dt?1+pt:pt):ht===CHOMPING_CLIP&&dt&&(rt.result+=`
`);break}for(ct?is_WHITE_SPACE(_t)?(gt=!0,rt.result+=common$1.repeat(`
`,dt?1+pt:pt)):gt?(gt=!1,rt.result+=common$1.repeat(`
`,pt+1)):pt===0?dt&&(rt.result+=" "):rt.result+=common$1.repeat(`
`,pt):rt.result+=common$1.repeat(`
`,dt?1+pt:pt),dt=!0,ft=!0,pt=0,lt=rt.position;!is_EOL(_t)&&_t!==0;)_t=rt.input.charCodeAt(++rt.position);captureSegment(rt,lt,rt.position,!1)}return!0}__name(readBlockScalar,"readBlockScalar");function readBlockSequence(rt,it){var lt,ct=rt.tag,ht=rt.anchor,dt=[],ft,ut=!1,pt;if(rt.firstTabInLine!==-1)return!1;for(rt.anchor!==null&&(rt.anchorMap[rt.anchor]=dt),pt=rt.input.charCodeAt(rt.position);pt!==0&&(rt.firstTabInLine!==-1&&(rt.position=rt.firstTabInLine,throwError(rt,"tab characters must not be used in indentation")),!(pt!==45||(ft=rt.input.charCodeAt(rt.position+1),!is_WS_OR_EOL(ft))));){if(ut=!0,rt.position++,skipSeparationSpace(rt,!0,-1)&&rt.lineIndent<=it){dt.push(null),pt=rt.input.charCodeAt(rt.position);continue}if(lt=rt.line,composeNode(rt,it,CONTEXT_BLOCK_IN,!1,!0),dt.push(rt.result),skipSeparationSpace(rt,!0,-1),pt=rt.input.charCodeAt(rt.position),(rt.line===lt||rt.lineIndent>it)&&pt!==0)throwError(rt,"bad indentation of a sequence entry");else if(rt.lineIndent<it)break}return ut?(rt.tag=ct,rt.anchor=ht,rt.kind="sequence",rt.result=dt,!0):!1}__name(readBlockSequence,"readBlockSequence");function readBlockMapping(rt,it,lt){var ct,ht,dt,ft,ut,pt,gt=rt.tag,mt=rt.anchor,_t={},yt=Object.create(null),bt=null,xt=null,wt=null,Ct=!1,St=!1,Tt;if(rt.firstTabInLine!==-1)return!1;for(rt.anchor!==null&&(rt.anchorMap[rt.anchor]=_t),Tt=rt.input.charCodeAt(rt.position);Tt!==0;){if(!Ct&&rt.firstTabInLine!==-1&&(rt.position=rt.firstTabInLine,throwError(rt,"tab characters must not be used in indentation")),ct=rt.input.charCodeAt(rt.position+1),dt=rt.line,(Tt===63||Tt===58)&&is_WS_OR_EOL(ct))Tt===63?(Ct&&(storeMappingPair(rt,_t,yt,bt,xt,null,ft,ut,pt),bt=xt=wt=null),St=!0,Ct=!0,ht=!0):Ct?(Ct=!1,ht=!0):throwError(rt,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),rt.position+=1,Tt=ct;else{if(ft=rt.line,ut=rt.lineStart,pt=rt.position,!composeNode(rt,lt,CONTEXT_FLOW_OUT,!1,!0))break;if(rt.line===dt){for(Tt=rt.input.charCodeAt(rt.position);is_WHITE_SPACE(Tt);)Tt=rt.input.charCodeAt(++rt.position);if(Tt===58)Tt=rt.input.charCodeAt(++rt.position),is_WS_OR_EOL(Tt)||throwError(rt,"a whitespace character is expected after the key-value separator within a block mapping"),Ct&&(storeMappingPair(rt,_t,yt,bt,xt,null,ft,ut,pt),bt=xt=wt=null),St=!0,Ct=!1,ht=!1,bt=rt.tag,xt=rt.result;else if(St)throwError(rt,"can not read an implicit mapping pair; a colon is missed");else return rt.tag=gt,rt.anchor=mt,!0}else if(St)throwError(rt,"can not read a block mapping entry; a multiline key may not be an implicit key");else return rt.tag=gt,rt.anchor=mt,!0}if((rt.line===dt||rt.lineIndent>it)&&(Ct&&(ft=rt.line,ut=rt.lineStart,pt=rt.position),composeNode(rt,it,CONTEXT_BLOCK_OUT,!0,ht)&&(Ct?xt=rt.result:wt=rt.result),Ct||(storeMappingPair(rt,_t,yt,bt,xt,wt,ft,ut,pt),bt=xt=wt=null),skipSeparationSpace(rt,!0,-1),Tt=rt.input.charCodeAt(rt.position)),(rt.line===dt||rt.lineIndent>it)&&Tt!==0)throwError(rt,"bad indentation of a mapping entry");else if(rt.lineIndent<it)break}return Ct&&storeMappingPair(rt,_t,yt,bt,xt,null,ft,ut,pt),St&&(rt.tag=gt,rt.anchor=mt,rt.kind="mapping",rt.result=_t),St}__name(readBlockMapping,"readBlockMapping");function readTagProperty(rt){var it,lt=!1,ct=!1,ht,dt,ft;if(ft=rt.input.charCodeAt(rt.position),ft!==33)return!1;if(rt.tag!==null&&throwError(rt,"duplication of a tag property"),ft=rt.input.charCodeAt(++rt.position),ft===60?(lt=!0,ft=rt.input.charCodeAt(++rt.position)):ft===33?(ct=!0,ht="!!",ft=rt.input.charCodeAt(++rt.position)):ht="!",it=rt.position,lt){do ft=rt.input.charCodeAt(++rt.position);while(ft!==0&&ft!==62);rt.position<rt.length?(dt=rt.input.slice(it,rt.position),ft=rt.input.charCodeAt(++rt.position)):throwError(rt,"unexpected end of the stream within a verbatim tag")}else{for(;ft!==0&&!is_WS_OR_EOL(ft);)ft===33&&(ct?throwError(rt,"tag suffix cannot contain exclamation marks"):(ht=rt.input.slice(it-1,rt.position+1),PATTERN_TAG_HANDLE.test(ht)||throwError(rt,"named tag handle cannot contain such characters"),ct=!0,it=rt.position+1)),ft=rt.input.charCodeAt(++rt.position);dt=rt.input.slice(it,rt.position),PATTERN_FLOW_INDICATORS.test(dt)&&throwError(rt,"tag suffix cannot contain flow indicator characters")}dt&&!PATTERN_TAG_URI.test(dt)&&throwError(rt,"tag name cannot contain such characters: "+dt);try{dt=decodeURIComponent(dt)}catch{throwError(rt,"tag name is malformed: "+dt)}return lt?rt.tag=dt:_hasOwnProperty$1.call(rt.tagMap,ht)?rt.tag=rt.tagMap[ht]+dt:ht==="!"?rt.tag="!"+dt:ht==="!!"?rt.tag="tag:yaml.org,2002:"+dt:throwError(rt,'undeclared tag handle "'+ht+'"'),!0}__name(readTagProperty,"readTagProperty");function readAnchorProperty(rt){var it,lt;if(lt=rt.input.charCodeAt(rt.position),lt!==38)return!1;for(rt.anchor!==null&&throwError(rt,"duplication of an anchor property"),lt=rt.input.charCodeAt(++rt.position),it=rt.position;lt!==0&&!is_WS_OR_EOL(lt)&&!is_FLOW_INDICATOR(lt);)lt=rt.input.charCodeAt(++rt.position);return rt.position===it&&throwError(rt,"name of an anchor node must contain at least one character"),rt.anchor=rt.input.slice(it,rt.position),!0}__name(readAnchorProperty,"readAnchorProperty");function readAlias(rt){var it,lt,ct;if(ct=rt.input.charCodeAt(rt.position),ct!==42)return!1;for(ct=rt.input.charCodeAt(++rt.position),it=rt.position;ct!==0&&!is_WS_OR_EOL(ct)&&!is_FLOW_INDICATOR(ct);)ct=rt.input.charCodeAt(++rt.position);return rt.position===it&&throwError(rt,"name of an alias node must contain at least one character"),lt=rt.input.slice(it,rt.position),_hasOwnProperty$1.call(rt.anchorMap,lt)||throwError(rt,'unidentified alias "'+lt+'"'),rt.result=rt.anchorMap[lt],skipSeparationSpace(rt,!0,-1),!0}__name(readAlias,"readAlias");function composeNode(rt,it,lt,ct,ht){var dt,ft,ut,pt=1,gt=!1,mt=!1,_t,yt,bt,xt,wt,Ct;if(rt.listener!==null&&rt.listener("open",rt),rt.tag=null,rt.anchor=null,rt.kind=null,rt.result=null,dt=ft=ut=CONTEXT_BLOCK_OUT===lt||CONTEXT_BLOCK_IN===lt,ct&&skipSeparationSpace(rt,!0,-1)&&(gt=!0,rt.lineIndent>it?pt=1:rt.lineIndent===it?pt=0:rt.lineIndent<it&&(pt=-1)),pt===1)for(;readTagProperty(rt)||readAnchorProperty(rt);)skipSeparationSpace(rt,!0,-1)?(gt=!0,ut=dt,rt.lineIndent>it?pt=1:rt.lineIndent===it?pt=0:rt.lineIndent<it&&(pt=-1)):ut=!1;if(ut&&(ut=gt||ht),(pt===1||CONTEXT_BLOCK_OUT===lt)&&(CONTEXT_FLOW_IN===lt||CONTEXT_FLOW_OUT===lt?wt=it:wt=it+1,Ct=rt.position-rt.lineStart,pt===1?ut&&(readBlockSequence(rt,Ct)||readBlockMapping(rt,Ct,wt))||readFlowCollection(rt,wt)?mt=!0:(ft&&readBlockScalar(rt,wt)||readSingleQuotedScalar(rt,wt)||readDoubleQuotedScalar(rt,wt)?mt=!0:readAlias(rt)?(mt=!0,(rt.tag!==null||rt.anchor!==null)&&throwError(rt,"alias node should not have any properties")):readPlainScalar(rt,wt,CONTEXT_FLOW_IN===lt)&&(mt=!0,rt.tag===null&&(rt.tag="?")),rt.anchor!==null&&(rt.anchorMap[rt.anchor]=rt.result)):pt===0&&(mt=ut&&readBlockSequence(rt,Ct))),rt.tag===null)rt.anchor!==null&&(rt.anchorMap[rt.anchor]=rt.result);else if(rt.tag==="?"){for(rt.result!==null&&rt.kind!=="scalar"&&throwError(rt,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+rt.kind+'"'),_t=0,yt=rt.implicitTypes.length;_t<yt;_t+=1)if(xt=rt.implicitTypes[_t],xt.resolve(rt.result)){rt.result=xt.construct(rt.result),rt.tag=xt.tag,rt.anchor!==null&&(rt.anchorMap[rt.anchor]=rt.result);break}}else if(rt.tag!=="!"){if(_hasOwnProperty$1.call(rt.typeMap[rt.kind||"fallback"],rt.tag))xt=rt.typeMap[rt.kind||"fallback"][rt.tag];else for(xt=null,bt=rt.typeMap.multi[rt.kind||"fallback"],_t=0,yt=bt.length;_t<yt;_t+=1)if(rt.tag.slice(0,bt[_t].tag.length)===bt[_t].tag){xt=bt[_t];break}xt||throwError(rt,"unknown tag !<"+rt.tag+">"),rt.result!==null&&xt.kind!==rt.kind&&throwError(rt,"unacceptable node kind for !<"+rt.tag+'> tag; it should be "'+xt.kind+'", not "'+rt.kind+'"'),xt.resolve(rt.result,rt.tag)?(rt.result=xt.construct(rt.result,rt.tag),rt.anchor!==null&&(rt.anchorMap[rt.anchor]=rt.result)):throwError(rt,"cannot resolve a node with !<"+rt.tag+"> explicit tag")}return rt.listener!==null&&rt.listener("close",rt),rt.tag!==null||rt.anchor!==null||mt}__name(composeNode,"composeNode");function readDocument(rt){var it=rt.position,lt,ct,ht,dt=!1,ft;for(rt.version=null,rt.checkLineBreaks=rt.legacy,rt.tagMap=Object.create(null),rt.anchorMap=Object.create(null);(ft=rt.input.charCodeAt(rt.position))!==0&&(skipSeparationSpace(rt,!0,-1),ft=rt.input.charCodeAt(rt.position),!(rt.lineIndent>0||ft!==37));){for(dt=!0,ft=rt.input.charCodeAt(++rt.position),lt=rt.position;ft!==0&&!is_WS_OR_EOL(ft);)ft=rt.input.charCodeAt(++rt.position);for(ct=rt.input.slice(lt,rt.position),ht=[],ct.length<1&&throwError(rt,"directive name must not be less than one character in length");ft!==0;){for(;is_WHITE_SPACE(ft);)ft=rt.input.charCodeAt(++rt.position);if(ft===35){do ft=rt.input.charCodeAt(++rt.position);while(ft!==0&&!is_EOL(ft));break}if(is_EOL(ft))break;for(lt=rt.position;ft!==0&&!is_WS_OR_EOL(ft);)ft=rt.input.charCodeAt(++rt.position);ht.push(rt.input.slice(lt,rt.position))}ft!==0&&readLineBreak(rt),_hasOwnProperty$1.call(directiveHandlers,ct)?directiveHandlers[ct](rt,ct,ht):throwWarning(rt,'unknown document directive "'+ct+'"')}if(skipSeparationSpace(rt,!0,-1),rt.lineIndent===0&&rt.input.charCodeAt(rt.position)===45&&rt.input.charCodeAt(rt.position+1)===45&&rt.input.charCodeAt(rt.position+2)===45?(rt.position+=3,skipSeparationSpace(rt,!0,-1)):dt&&throwError(rt,"directives end mark is expected"),composeNode(rt,rt.lineIndent-1,CONTEXT_BLOCK_OUT,!1,!0),skipSeparationSpace(rt,!0,-1),rt.checkLineBreaks&&PATTERN_NON_ASCII_LINE_BREAKS.test(rt.input.slice(it,rt.position))&&throwWarning(rt,"non-ASCII line breaks are interpreted as content"),rt.documents.push(rt.result),rt.position===rt.lineStart&&testDocumentSeparator(rt)){rt.input.charCodeAt(rt.position)===46&&(rt.position+=3,skipSeparationSpace(rt,!0,-1));return}if(rt.position<rt.length-1)throwError(rt,"end of the stream or a document separator is expected");else return}__name(readDocument,"readDocument");function loadDocuments(rt,it){rt=String(rt),it=it||{},rt.length!==0&&(rt.charCodeAt(rt.length-1)!==10&&rt.charCodeAt(rt.length-1)!==13&&(rt+=`
`),rt.charCodeAt(0)===65279&&(rt=rt.slice(1)));var lt=new State$1(rt,it),ct=rt.indexOf("\0");for(ct!==-1&&(lt.position=ct,throwError(lt,"null byte is not allowed in input")),lt.input+="\0";lt.input.charCodeAt(lt.position)===32;)lt.lineIndent+=1,lt.position+=1;for(;lt.position<lt.length-1;)readDocument(lt);return lt.documents}__name(loadDocuments,"loadDocuments");function loadAll$1(rt,it,lt){it!==null&&typeof it=="object"&&typeof lt>"u"&&(lt=it,it=null);var ct=loadDocuments(rt,lt);if(typeof it!="function")return ct;for(var ht=0,dt=ct.length;ht<dt;ht+=1)it(ct[ht])}__name(loadAll$1,"loadAll$1");function load$1(rt,it){var lt=loadDocuments(rt,it);if(lt.length!==0){if(lt.length===1)return lt[0];throw new exception("expected a single document in the stream, but found more")}}__name(load$1,"load$1");var load_1=load$1,loader$1={load:load_1},_toString=Object.prototype.toString,_hasOwnProperty=Object.prototype.hasOwnProperty,CHAR_BOM=65279,CHAR_TAB=9,CHAR_LINE_FEED=10,CHAR_CARRIAGE_RETURN=13,CHAR_SPACE=32,CHAR_EXCLAMATION=33,CHAR_DOUBLE_QUOTE=34,CHAR_SHARP=35,CHAR_PERCENT=37,CHAR_AMPERSAND=38,CHAR_SINGLE_QUOTE=39,CHAR_ASTERISK=42,CHAR_COMMA=44,CHAR_MINUS=45,CHAR_COLON=58,CHAR_EQUALS=61,CHAR_GREATER_THAN=62,CHAR_QUESTION=63,CHAR_COMMERCIAL_AT=64,CHAR_LEFT_SQUARE_BRACKET=91,CHAR_RIGHT_SQUARE_BRACKET=93,CHAR_GRAVE_ACCENT=96,CHAR_LEFT_CURLY_BRACKET=123,CHAR_VERTICAL_LINE=124,CHAR_RIGHT_CURLY_BRACKET=125,ESCAPE_SEQUENCES={};ESCAPE_SEQUENCES[0]="\\0";ESCAPE_SEQUENCES[7]="\\a";ESCAPE_SEQUENCES[8]="\\b";ESCAPE_SEQUENCES[9]="\\t";ESCAPE_SEQUENCES[10]="\\n";ESCAPE_SEQUENCES[11]="\\v";ESCAPE_SEQUENCES[12]="\\f";ESCAPE_SEQUENCES[13]="\\r";ESCAPE_SEQUENCES[27]="\\e";ESCAPE_SEQUENCES[34]='\\"';ESCAPE_SEQUENCES[92]="\\\\";ESCAPE_SEQUENCES[133]="\\N";ESCAPE_SEQUENCES[160]="\\_";ESCAPE_SEQUENCES[8232]="\\L";ESCAPE_SEQUENCES[8233]="\\P";var DEPRECATED_BOOLEANS_SYNTAX=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],DEPRECATED_BASE60_SYNTAX=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function compileStyleMap(rt,it){var lt,ct,ht,dt,ft,ut,pt;if(it===null)return{};for(lt={},ct=Object.keys(it),ht=0,dt=ct.length;ht<dt;ht+=1)ft=ct[ht],ut=String(it[ft]),ft.slice(0,2)==="!!"&&(ft="tag:yaml.org,2002:"+ft.slice(2)),pt=rt.compiledTypeMap.fallback[ft],pt&&_hasOwnProperty.call(pt.styleAliases,ut)&&(ut=pt.styleAliases[ut]),lt[ft]=ut;return lt}__name(compileStyleMap,"compileStyleMap");function encodeHex(rt){var it,lt,ct;if(it=rt.toString(16).toUpperCase(),rt<=255)lt="x",ct=2;else if(rt<=65535)lt="u",ct=4;else if(rt<=4294967295)lt="U",ct=8;else throw new exception("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+lt+common$1.repeat("0",ct-it.length)+it}__name(encodeHex,"encodeHex");var QUOTING_TYPE_SINGLE=1,QUOTING_TYPE_DOUBLE=2;function State(rt){this.schema=rt.schema||_default,this.indent=Math.max(1,rt.indent||2),this.noArrayIndent=rt.noArrayIndent||!1,this.skipInvalid=rt.skipInvalid||!1,this.flowLevel=common$1.isNothing(rt.flowLevel)?-1:rt.flowLevel,this.styleMap=compileStyleMap(this.schema,rt.styles||null),this.sortKeys=rt.sortKeys||!1,this.lineWidth=rt.lineWidth||80,this.noRefs=rt.noRefs||!1,this.noCompatMode=rt.noCompatMode||!1,this.condenseFlow=rt.condenseFlow||!1,this.quotingType=rt.quotingType==='"'?QUOTING_TYPE_DOUBLE:QUOTING_TYPE_SINGLE,this.forceQuotes=rt.forceQuotes||!1,this.replacer=typeof rt.replacer=="function"?rt.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}__name(State,"State");function indentString(rt,it){for(var lt=common$1.repeat(" ",it),ct=0,ht=-1,dt="",ft,ut=rt.length;ct<ut;)ht=rt.indexOf(`
`,ct),ht===-1?(ft=rt.slice(ct),ct=ut):(ft=rt.slice(ct,ht+1),ct=ht+1),ft.length&&ft!==`
`&&(dt+=lt),dt+=ft;return dt}__name(indentString,"indentString");function generateNextLine(rt,it){return`
`+common$1.repeat(" ",rt.indent*it)}__name(generateNextLine,"generateNextLine");function testImplicitResolving(rt,it){var lt,ct,ht;for(lt=0,ct=rt.implicitTypes.length;lt<ct;lt+=1)if(ht=rt.implicitTypes[lt],ht.resolve(it))return!0;return!1}__name(testImplicitResolving,"testImplicitResolving");function isWhitespace(rt){return rt===CHAR_SPACE||rt===CHAR_TAB}__name(isWhitespace,"isWhitespace");function isPrintable(rt){return 32<=rt&&rt<=126||161<=rt&&rt<=55295&&rt!==8232&&rt!==8233||57344<=rt&&rt<=65533&&rt!==CHAR_BOM||65536<=rt&&rt<=1114111}__name(isPrintable,"isPrintable");function isNsCharOrWhitespace(rt){return isPrintable(rt)&&rt!==CHAR_BOM&&rt!==CHAR_CARRIAGE_RETURN&&rt!==CHAR_LINE_FEED}__name(isNsCharOrWhitespace,"isNsCharOrWhitespace");function isPlainSafe(rt,it,lt){var ct=isNsCharOrWhitespace(rt),ht=ct&&!isWhitespace(rt);return(lt?ct:ct&&rt!==CHAR_COMMA&&rt!==CHAR_LEFT_SQUARE_BRACKET&&rt!==CHAR_RIGHT_SQUARE_BRACKET&&rt!==CHAR_LEFT_CURLY_BRACKET&&rt!==CHAR_RIGHT_CURLY_BRACKET)&&rt!==CHAR_SHARP&&!(it===CHAR_COLON&&!ht)||isNsCharOrWhitespace(it)&&!isWhitespace(it)&&rt===CHAR_SHARP||it===CHAR_COLON&&ht}__name(isPlainSafe,"isPlainSafe");function isPlainSafeFirst(rt){return isPrintable(rt)&&rt!==CHAR_BOM&&!isWhitespace(rt)&&rt!==CHAR_MINUS&&rt!==CHAR_QUESTION&&rt!==CHAR_COLON&&rt!==CHAR_COMMA&&rt!==CHAR_LEFT_SQUARE_BRACKET&&rt!==CHAR_RIGHT_SQUARE_BRACKET&&rt!==CHAR_LEFT_CURLY_BRACKET&&rt!==CHAR_RIGHT_CURLY_BRACKET&&rt!==CHAR_SHARP&&rt!==CHAR_AMPERSAND&&rt!==CHAR_ASTERISK&&rt!==CHAR_EXCLAMATION&&rt!==CHAR_VERTICAL_LINE&&rt!==CHAR_EQUALS&&rt!==CHAR_GREATER_THAN&&rt!==CHAR_SINGLE_QUOTE&&rt!==CHAR_DOUBLE_QUOTE&&rt!==CHAR_PERCENT&&rt!==CHAR_COMMERCIAL_AT&&rt!==CHAR_GRAVE_ACCENT}__name(isPlainSafeFirst,"isPlainSafeFirst");function isPlainSafeLast(rt){return!isWhitespace(rt)&&rt!==CHAR_COLON}__name(isPlainSafeLast,"isPlainSafeLast");function codePointAt(rt,it){var lt=rt.charCodeAt(it),ct;return lt>=55296&&lt<=56319&&it+1<rt.length&&(ct=rt.charCodeAt(it+1),ct>=56320&&ct<=57343)?(lt-55296)*1024+ct-56320+65536:lt}__name(codePointAt,"codePointAt");function needIndentIndicator(rt){var it=/^\n* /;return it.test(rt)}__name(needIndentIndicator,"needIndentIndicator");var STYLE_PLAIN=1,STYLE_SINGLE=2,STYLE_LITERAL=3,STYLE_FOLDED=4,STYLE_DOUBLE=5;function chooseScalarStyle(rt,it,lt,ct,ht,dt,ft,ut){var pt,gt=0,mt=null,_t=!1,yt=!1,bt=ct!==-1,xt=-1,wt=isPlainSafeFirst(codePointAt(rt,0))&&isPlainSafeLast(codePointAt(rt,rt.length-1));if(it||ft)for(pt=0;pt<rt.length;gt>=65536?pt+=2:pt++){if(gt=codePointAt(rt,pt),!isPrintable(gt))return STYLE_DOUBLE;wt=wt&&isPlainSafe(gt,mt,ut),mt=gt}else{for(pt=0;pt<rt.length;gt>=65536?pt+=2:pt++){if(gt=codePointAt(rt,pt),gt===CHAR_LINE_FEED)_t=!0,bt&&(yt=yt||pt-xt-1>ct&&rt[xt+1]!==" ",xt=pt);else if(!isPrintable(gt))return STYLE_DOUBLE;wt=wt&&isPlainSafe(gt,mt,ut),mt=gt}yt=yt||bt&&pt-xt-1>ct&&rt[xt+1]!==" "}return!_t&&!yt?wt&&!ft&&!ht(rt)?STYLE_PLAIN:dt===QUOTING_TYPE_DOUBLE?STYLE_DOUBLE:STYLE_SINGLE:lt>9&&needIndentIndicator(rt)?STYLE_DOUBLE:ft?dt===QUOTING_TYPE_DOUBLE?STYLE_DOUBLE:STYLE_SINGLE:yt?STYLE_FOLDED:STYLE_LITERAL}__name(chooseScalarStyle,"chooseScalarStyle");function writeScalar(rt,it,lt,ct,ht){rt.dump=(function(){if(it.length===0)return rt.quotingType===QUOTING_TYPE_DOUBLE?'""':"''";if(!rt.noCompatMode&&(DEPRECATED_BOOLEANS_SYNTAX.indexOf(it)!==-1||DEPRECATED_BASE60_SYNTAX.test(it)))return rt.quotingType===QUOTING_TYPE_DOUBLE?'"'+it+'"':"'"+it+"'";var dt=rt.indent*Math.max(1,lt),ft=rt.lineWidth===-1?-1:Math.max(Math.min(rt.lineWidth,40),rt.lineWidth-dt),ut=ct||rt.flowLevel>-1&&lt>=rt.flowLevel;function pt(gt){return testImplicitResolving(rt,gt)}switch(__name(pt,"testAmbiguity"),chooseScalarStyle(it,ut,rt.indent,ft,pt,rt.quotingType,rt.forceQuotes&&!ct,ht)){case STYLE_PLAIN:return it;case STYLE_SINGLE:return"'"+it.replace(/'/g,"''")+"'";case STYLE_LITERAL:return"|"+blockHeader(it,rt.indent)+dropEndingNewline(indentString(it,dt));case STYLE_FOLDED:return">"+blockHeader(it,rt.indent)+dropEndingNewline(indentString(foldString(it,ft),dt));case STYLE_DOUBLE:return'"'+escapeString(it)+'"';default:throw new exception("impossible error: invalid scalar style")}})()}__name(writeScalar,"writeScalar");function blockHeader(rt,it){var lt=needIndentIndicator(rt)?String(it):"",ct=rt[rt.length-1]===`
`,ht=ct&&(rt[rt.length-2]===`
`||rt===`
`),dt=ht?"+":ct?"":"-";return lt+dt+`
`}__name(blockHeader,"blockHeader");function dropEndingNewline(rt){return rt[rt.length-1]===`
`?rt.slice(0,-1):rt}__name(dropEndingNewline,"dropEndingNewline");function foldString(rt,it){for(var lt=/(\n+)([^\n]*)/g,ct=(function(){var gt=rt.indexOf(`
`);return gt=gt!==-1?gt:rt.length,lt.lastIndex=gt,foldLine(rt.slice(0,gt),it)})(),ht=rt[0]===`
`||rt[0]===" ",dt,ft;ft=lt.exec(rt);){var ut=ft[1],pt=ft[2];dt=pt[0]===" ",ct+=ut+(!ht&&!dt&&pt!==""?`
`:"")+foldLine(pt,it),ht=dt}return ct}__name(foldString,"foldString");function foldLine(rt,it){if(rt===""||rt[0]===" ")return rt;for(var lt=/ [^ ]/g,ct,ht=0,dt,ft=0,ut=0,pt="";ct=lt.exec(rt);)ut=ct.index,ut-ht>it&&(dt=ft>ht?ft:ut,pt+=`
`+rt.slice(ht,dt),ht=dt+1),ft=ut;return pt+=`
`,rt.length-ht>it&&ft>ht?pt+=rt.slice(ht,ft)+`
`+rt.slice(ft+1):pt+=rt.slice(ht),pt.slice(1)}__name(foldLine,"foldLine");function escapeString(rt){for(var it="",lt=0,ct,ht=0;ht<rt.length;lt>=65536?ht+=2:ht++)lt=codePointAt(rt,ht),ct=ESCAPE_SEQUENCES[lt],!ct&&isPrintable(lt)?(it+=rt[ht],lt>=65536&&(it+=rt[ht+1])):it+=ct||encodeHex(lt);return it}__name(escapeString,"escapeString");function writeFlowSequence(rt,it,lt){var ct="",ht=rt.tag,dt,ft,ut;for(dt=0,ft=lt.length;dt<ft;dt+=1)ut=lt[dt],rt.replacer&&(ut=rt.replacer.call(lt,String(dt),ut)),(writeNode(rt,it,ut,!1,!1)||typeof ut>"u"&&writeNode(rt,it,null,!1,!1))&&(ct!==""&&(ct+=","+(rt.condenseFlow?"":" ")),ct+=rt.dump);rt.tag=ht,rt.dump="["+ct+"]"}__name(writeFlowSequence,"writeFlowSequence");function writeBlockSequence(rt,it,lt,ct){var ht="",dt=rt.tag,ft,ut,pt;for(ft=0,ut=lt.length;ft<ut;ft+=1)pt=lt[ft],rt.replacer&&(pt=rt.replacer.call(lt,String(ft),pt)),(writeNode(rt,it+1,pt,!0,!0,!1,!0)||typeof pt>"u"&&writeNode(rt,it+1,null,!0,!0,!1,!0))&&((!ct||ht!=="")&&(ht+=generateNextLine(rt,it)),rt.dump&&CHAR_LINE_FEED===rt.dump.charCodeAt(0)?ht+="-":ht+="- ",ht+=rt.dump);rt.tag=dt,rt.dump=ht||"[]"}__name(writeBlockSequence,"writeBlockSequence");function writeFlowMapping(rt,it,lt){var ct="",ht=rt.tag,dt=Object.keys(lt),ft,ut,pt,gt,mt;for(ft=0,ut=dt.length;ft<ut;ft+=1)mt="",ct!==""&&(mt+=", "),rt.condenseFlow&&(mt+='"'),pt=dt[ft],gt=lt[pt],rt.replacer&&(gt=rt.replacer.call(lt,pt,gt)),writeNode(rt,it,pt,!1,!1)&&(rt.dump.length>1024&&(mt+="? "),mt+=rt.dump+(rt.condenseFlow?'"':"")+":"+(rt.condenseFlow?"":" "),writeNode(rt,it,gt,!1,!1)&&(mt+=rt.dump,ct+=mt));rt.tag=ht,rt.dump="{"+ct+"}"}__name(writeFlowMapping,"writeFlowMapping");function writeBlockMapping(rt,it,lt,ct){var ht="",dt=rt.tag,ft=Object.keys(lt),ut,pt,gt,mt,_t,yt;if(rt.sortKeys===!0)ft.sort();else if(typeof rt.sortKeys=="function")ft.sort(rt.sortKeys);else if(rt.sortKeys)throw new exception("sortKeys must be a boolean or a function");for(ut=0,pt=ft.length;ut<pt;ut+=1)yt="",(!ct||ht!=="")&&(yt+=generateNextLine(rt,it)),gt=ft[ut],mt=lt[gt],rt.replacer&&(mt=rt.replacer.call(lt,gt,mt)),writeNode(rt,it+1,gt,!0,!0,!0)&&(_t=rt.tag!==null&&rt.tag!=="?"||rt.dump&&rt.dump.length>1024,_t&&(rt.dump&&CHAR_LINE_FEED===rt.dump.charCodeAt(0)?yt+="?":yt+="? "),yt+=rt.dump,_t&&(yt+=generateNextLine(rt,it)),writeNode(rt,it+1,mt,!0,_t)&&(rt.dump&&CHAR_LINE_FEED===rt.dump.charCodeAt(0)?yt+=":":yt+=": ",yt+=rt.dump,ht+=yt));rt.tag=dt,rt.dump=ht||"{}"}__name(writeBlockMapping,"writeBlockMapping");function detectType(rt,it,lt){var ct,ht,dt,ft,ut,pt;for(ht=lt?rt.explicitTypes:rt.implicitTypes,dt=0,ft=ht.length;dt<ft;dt+=1)if(ut=ht[dt],(ut.instanceOf||ut.predicate)&&(!ut.instanceOf||typeof it=="object"&&it instanceof ut.instanceOf)&&(!ut.predicate||ut.predicate(it))){if(lt?ut.multi&&ut.representName?rt.tag=ut.representName(it):rt.tag=ut.tag:rt.tag="?",ut.represent){if(pt=rt.styleMap[ut.tag]||ut.defaultStyle,_toString.call(ut.represent)==="[object Function]")ct=ut.represent(it,pt);else if(_hasOwnProperty.call(ut.represent,pt))ct=ut.represent[pt](it,pt);else throw new exception("!<"+ut.tag+'> tag resolver accepts not "'+pt+'" style');rt.dump=ct}return!0}return!1}__name(detectType,"detectType");function writeNode(rt,it,lt,ct,ht,dt,ft){rt.tag=null,rt.dump=lt,detectType(rt,lt,!1)||detectType(rt,lt,!0);var ut=_toString.call(rt.dump),pt=ct,gt;ct&&(ct=rt.flowLevel<0||rt.flowLevel>it);var mt=ut==="[object Object]"||ut==="[object Array]",_t,yt;if(mt&&(_t=rt.duplicates.indexOf(lt),yt=_t!==-1),(rt.tag!==null&&rt.tag!=="?"||yt||rt.indent!==2&&it>0)&&(ht=!1),yt&&rt.usedDuplicates[_t])rt.dump="*ref_"+_t;else{if(mt&&yt&&!rt.usedDuplicates[_t]&&(rt.usedDuplicates[_t]=!0),ut==="[object Object]")ct&&Object.keys(rt.dump).length!==0?(writeBlockMapping(rt,it,rt.dump,ht),yt&&(rt.dump="&ref_"+_t+rt.dump)):(writeFlowMapping(rt,it,rt.dump),yt&&(rt.dump="&ref_"+_t+" "+rt.dump));else if(ut==="[object Array]")ct&&rt.dump.length!==0?(rt.noArrayIndent&&!ft&&it>0?writeBlockSequence(rt,it-1,rt.dump,ht):writeBlockSequence(rt,it,rt.dump,ht),yt&&(rt.dump="&ref_"+_t+rt.dump)):(writeFlowSequence(rt,it,rt.dump),yt&&(rt.dump="&ref_"+_t+" "+rt.dump));else if(ut==="[object String]")rt.tag!=="?"&&writeScalar(rt,rt.dump,it,dt,pt);else{if(ut==="[object Undefined]")return!1;if(rt.skipInvalid)return!1;throw new exception("unacceptable kind of an object to dump "+ut)}rt.tag!==null&&rt.tag!=="?"&&(gt=encodeURI(rt.tag[0]==="!"?rt.tag.slice(1):rt.tag).replace(/!/g,"%21"),rt.tag[0]==="!"?gt="!"+gt:gt.slice(0,18)==="tag:yaml.org,2002:"?gt="!!"+gt.slice(18):gt="!<"+gt+">",rt.dump=gt+" "+rt.dump)}return!0}__name(writeNode,"writeNode");function getDuplicateReferences(rt,it){var lt=[],ct=[],ht,dt;for(inspectNode(rt,lt,ct),ht=0,dt=ct.length;ht<dt;ht+=1)it.duplicates.push(lt[ct[ht]]);it.usedDuplicates=new Array(dt)}__name(getDuplicateReferences,"getDuplicateReferences");function inspectNode(rt,it,lt){var ct,ht,dt;if(rt!==null&&typeof rt=="object")if(ht=it.indexOf(rt),ht!==-1)lt.indexOf(ht)===-1&&lt.push(ht);else if(it.push(rt),Array.isArray(rt))for(ht=0,dt=rt.length;ht<dt;ht+=1)inspectNode(rt[ht],it,lt);else for(ct=Object.keys(rt),ht=0,dt=ct.length;ht<dt;ht+=1)inspectNode(rt[ct[ht]],it,lt)}__name(inspectNode,"inspectNode");function dump$1(rt,it){it=it||{};var lt=new State(it);lt.noRefs||getDuplicateReferences(rt,lt);var ct=rt;return lt.replacer&&(ct=lt.replacer.call({"":ct},"",ct)),writeNode(lt,0,ct,!0,!0)?lt.dump+`
`:""}__name(dump$1,"dump$1");function renamed(rt,it){return function(){throw new Error("Function yaml."+rt+" is removed in js-yaml 4. Use yaml."+it+" instead, which is now safe by default.")}}__name(renamed,"renamed");var JSON_SCHEMA=json,load=loader$1.load;/*! Bundled license information:

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/var markerOffsets={aggregation:17.25,extension:17.25,composition:17.25,dependency:6,lollipop:13.5,arrow_point:4},markerOffsets2={arrow_point:9,arrow_cross:12.5,arrow_circle:12.5};function calculateDeltaAndAngle$1(rt,it){if(rt===void 0||it===void 0)return{angle:0,deltaX:0,deltaY:0};rt=pointTransformer(rt),it=pointTransformer(it);const[lt,ct]=[rt.x,rt.y],[ht,dt]=[it.x,it.y],ft=ht-lt,ut=dt-ct;return{angle:Math.atan(ut/ft),deltaX:ft,deltaY:ut}}__name(calculateDeltaAndAngle$1,"calculateDeltaAndAngle");var pointTransformer=__name(rt=>Array.isArray(rt)?{x:rt[0],y:rt[1]}:rt,"pointTransformer"),getLineFunctionsWithOffset=__name(rt=>({x:__name(function(it,lt,ct){let ht=0;const dt=pointTransformer(ct[0]).x<pointTransformer(ct[ct.length-1]).x?"left":"right";if(lt===0&&Object.hasOwn(markerOffsets,rt.arrowTypeStart)){const{angle:bt,deltaX:xt}=calculateDeltaAndAngle$1(ct[0],ct[1]);ht=markerOffsets[rt.arrowTypeStart]*Math.cos(bt)*(xt>=0?1:-1)}else if(lt===ct.length-1&&Object.hasOwn(markerOffsets,rt.arrowTypeEnd)){const{angle:bt,deltaX:xt}=calculateDeltaAndAngle$1(ct[ct.length-1],ct[ct.length-2]);ht=markerOffsets[rt.arrowTypeEnd]*Math.cos(bt)*(xt>=0?1:-1)}const ft=Math.abs(pointTransformer(it).x-pointTransformer(ct[ct.length-1]).x),ut=Math.abs(pointTransformer(it).y-pointTransformer(ct[ct.length-1]).y),pt=Math.abs(pointTransformer(it).x-pointTransformer(ct[0]).x),gt=Math.abs(pointTransformer(it).y-pointTransformer(ct[0]).y),mt=markerOffsets[rt.arrowTypeStart],_t=markerOffsets[rt.arrowTypeEnd],yt=1;if(ft<_t&&ft>0&&ut<_t){let bt=_t+yt-ft;bt*=dt==="right"?-1:1,ht-=bt}if(pt<mt&&pt>0&&gt<mt){let bt=mt+yt-pt;bt*=dt==="right"?-1:1,ht+=bt}return pointTransformer(it).x+ht},"x"),y:__name(function(it,lt,ct){let ht=0;const dt=pointTransformer(ct[0]).y<pointTransformer(ct[ct.length-1]).y?"down":"up";if(lt===0&&Object.hasOwn(markerOffsets,rt.arrowTypeStart)){const{angle:bt,deltaY:xt}=calculateDeltaAndAngle$1(ct[0],ct[1]);ht=markerOffsets[rt.arrowTypeStart]*Math.abs(Math.sin(bt))*(xt>=0?1:-1)}else if(lt===ct.length-1&&Object.hasOwn(markerOffsets,rt.arrowTypeEnd)){const{angle:bt,deltaY:xt}=calculateDeltaAndAngle$1(ct[ct.length-1],ct[ct.length-2]);ht=markerOffsets[rt.arrowTypeEnd]*Math.abs(Math.sin(bt))*(xt>=0?1:-1)}const ft=Math.abs(pointTransformer(it).y-pointTransformer(ct[ct.length-1]).y),ut=Math.abs(pointTransformer(it).x-pointTransformer(ct[ct.length-1]).x),pt=Math.abs(pointTransformer(it).y-pointTransformer(ct[0]).y),gt=Math.abs(pointTransformer(it).x-pointTransformer(ct[0]).x),mt=markerOffsets[rt.arrowTypeStart],_t=markerOffsets[rt.arrowTypeEnd],yt=1;if(ft<_t&&ft>0&&ut<_t){let bt=_t+yt-ft;bt*=dt==="up"?-1:1,ht-=bt}if(pt<mt&&pt>0&&gt<mt){let bt=mt+yt-pt;bt*=dt==="up"?-1:1,ht+=bt}return pointTransformer(it).y+ht},"y")}),"getLineFunctionsWithOffset"),getSubGraphTitleMargins=__name(({flowchart:rt})=>{const it=rt?.subGraphTitleMargin?.top??0,lt=rt?.subGraphTitleMargin?.bottom??0,ct=it+lt;return{subGraphTitleTopMargin:it,subGraphTitleBottomMargin:lt,subGraphTitleTotalMargin:ct}},"getSubGraphTitleMargins"),solidStateFill=__name(rt=>{const{handDrawnSeed:it}=getConfig2();return{fill:rt,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:rt,seed:it}},"solidStateFill"),compileStyles=__name(rt=>{const it=styles2Map([...rt.cssCompiledStyles||[],...rt.cssStyles||[],...rt.labelStyle||[]]);return{stylesMap:it,stylesArray:[...it]}},"compileStyles"),styles2Map=__name(rt=>{const it=new Map;return rt.forEach(lt=>{const[ct,ht]=lt.split(":");it.set(ct.trim(),ht?.trim())}),it},"styles2Map"),isLabelStyle=__name(rt=>rt==="color"||rt==="font-size"||rt==="font-family"||rt==="font-weight"||rt==="font-style"||rt==="text-decoration"||rt==="text-align"||rt==="text-transform"||rt==="line-height"||rt==="letter-spacing"||rt==="word-spacing"||rt==="text-shadow"||rt==="text-overflow"||rt==="white-space"||rt==="word-wrap"||rt==="word-break"||rt==="overflow-wrap"||rt==="hyphens","isLabelStyle"),styles2String=__name(rt=>{const{stylesArray:it}=compileStyles(rt),lt=[],ct=[],ht=[],dt=[];return it.forEach(ft=>{const ut=ft[0];isLabelStyle(ut)?lt.push(ft.join(":")+" !important"):(ct.push(ft.join(":")+" !important"),ut.includes("stroke")&&ht.push(ft.join(":")+" !important"),ut==="fill"&&dt.push(ft.join(":")+" !important"))}),{labelStyles:lt.join(";"),nodeStyles:ct.join(";"),stylesArray:it,borderStyles:ht,backgroundStyles:dt}},"styles2String"),userNodeOverrides=__name((rt,it)=>{const{themeVariables:lt,handDrawnSeed:ct}=getConfig2(),{nodeBorder:ht,mainBkg:dt}=lt,{stylesMap:ft}=compileStyles(rt);return Object.assign({roughness:.7,fill:ft.get("fill")||dt,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:ft.get("stroke")||ht,seed:ct,strokeWidth:ft.get("stroke-width")?.replace("px","")||1.3,fillLineDash:[0,0],strokeLineDash:getStrokeDashArray(ft.get("stroke-dasharray"))},it)},"userNodeOverrides"),getStrokeDashArray=__name(rt=>{if(!rt)return[0,0];const it=rt.trim().split(/\s+/).map(Number);if(it.length===1){const ht=isNaN(it[0])?0:it[0];return[ht,ht]}const lt=isNaN(it[0])?0:it[0],ct=isNaN(it[1])?0:it[1];return[lt,ct]},"getStrokeDashArray"),dist$1={},constants={},hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,Object.defineProperty(constants,"__esModule",{value:!0}),constants.BLANK_URL=constants.relativeFirstCharacters=constants.whitespaceEscapeCharsRegex=constants.urlSchemeRegex=constants.ctrlCharactersRegex=constants.htmlCtrlEntityRegex=constants.htmlEntitiesRegex=constants.invalidProtocolRegex=void 0,constants.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,constants.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,constants.htmlCtrlEntityRegex=/&(newline|tab);/gi,constants.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,constants.urlSchemeRegex=/^.+(:|&colon;)/gim,constants.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g,constants.relativeFirstCharacters=[".","/"],constants.BLANK_URL="about:blank"),constants}var hasRequiredDist$1;function requireDist$1(){if(hasRequiredDist$1)return dist$1;hasRequiredDist$1=1,Object.defineProperty(dist$1,"__esModule",{value:!0}),dist$1.sanitizeUrl=void 0;var rt=requireConstants();function it(ft){return rt.relativeFirstCharacters.indexOf(ft[0])>-1}function lt(ft){var ut=ft.replace(rt.ctrlCharactersRegex,"");return ut.replace(rt.htmlEntitiesRegex,function(pt,gt){return String.fromCharCode(gt)})}function ct(ft){return URL.canParse(ft)}function ht(ft){try{return decodeURIComponent(ft)}catch{return ft}}function dt(ft){if(!ft)return rt.BLANK_URL;var ut,pt=ht(ft.trim());do pt=lt(pt).replace(rt.htmlCtrlEntityRegex,"").replace(rt.ctrlCharactersRegex,"").replace(rt.whitespaceEscapeCharsRegex,"").trim(),pt=ht(pt),ut=pt.match(rt.ctrlCharactersRegex)||pt.match(rt.htmlEntitiesRegex)||pt.match(rt.htmlCtrlEntityRegex)||pt.match(rt.whitespaceEscapeCharsRegex);while(ut&&ut.length>0);var gt=pt;if(!gt)return rt.BLANK_URL;if(it(gt))return gt;var mt=gt.trimStart(),_t=mt.match(rt.urlSchemeRegex);if(!_t)return gt;var yt=_t[0].toLowerCase().trim();if(rt.invalidProtocolRegex.test(yt))return rt.BLANK_URL;var bt=mt.replace(/\\/g,"/");if(yt==="mailto:"||yt.includes("://"))return bt;if(yt==="http:"||yt==="https:"){if(!ct(bt))return rt.BLANK_URL;var xt=new URL(bt);return xt.protocol=xt.protocol.toLowerCase(),xt.hostname=xt.hostname.toLowerCase(),xt.toString()}return bt}return dist$1.sanitizeUrl=dt,dist$1}var distExports$1=requireDist$1(),ZERO_WIDTH_SPACE="â",d3CurveTypes={curveBasis,curveBasisClosed,curveBasisOpen,curveBumpX:bumpX,curveBumpY:bumpY,curveBundle,curveCardinalClosed,curveCardinalOpen,curveCardinal,curveCatmullRomClosed,curveCatmullRomOpen,curveCatmullRom,curveLinear,curveLinearClosed,curveMonotoneX:monotoneX,curveMonotoneY:monotoneY,curveNatural,curveStep,curveStepAfter:stepAfter,curveStepBefore:stepBefore},directiveWithoutOpen=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,detectInit=__name(function(rt,it){const lt=detectDirective(rt,/(?:init\b)|(?:initialize\b)/);let ct={};if(Array.isArray(lt)){const ft=lt.map(ut=>ut.args);sanitizeDirective(ft),ct=assignWithDepth_default(ct,[...ft])}else ct=lt.args;if(!ct)return;let ht=detectType$1(rt,it);const dt="config";return ct[dt]!==void 0&&(ht==="flowchart-v2"&&(ht="flowchart"),ct[ht]=ct[dt],delete ct[dt]),ct},"detectInit"),detectDirective=__name(function(rt,it=null){try{const lt=new RegExp(`[%]{2}(?![{]${directiveWithoutOpen.source})(?=[}][%]{2}).*
`,"ig");rt=rt.trim().replace(lt,"").replace(/'/gm,'"'),log.debug(`Detecting diagram directive${it!==null?" type:"+it:""} based on the text:${rt}`);let ct;const ht=[];for(;(ct=directiveRegex.exec(rt))!==null;)if(ct.index===directiveRegex.lastIndex&&directiveRegex.lastIndex++,ct&&!it||it&&ct[1]?.match(it)||it&&ct[2]?.match(it)){const dt=ct[1]?ct[1]:ct[2],ft=ct[3]?ct[3].trim():ct[4]?JSON.parse(ct[4].trim()):null;ht.push({type:dt,args:ft})}return ht.length===0?{type:rt,args:null}:ht.length===1?ht[0]:ht}catch(lt){return log.error(`ERROR: ${lt.message} - Unable to parse directive type: '${it}' based on the text: '${rt}'`),{type:void 0,args:null}}},"detectDirective"),removeDirectives=__name(function(rt){return rt.replace(directiveRegex,"")},"removeDirectives"),isSubstringInArray=__name(function(rt,it){for(const[lt,ct]of it.entries())if(ct.match(rt))return lt;return-1},"isSubstringInArray");function interpolateToCurve(rt,it){if(!rt)return it;const lt=`curve${rt.charAt(0).toUpperCase()+rt.slice(1)}`;return d3CurveTypes[lt]??it}__name(interpolateToCurve,"interpolateToCurve");function formatUrl(rt,it){const lt=rt.trim();if(lt)return it.securityLevel!=="loose"?distExports$1.sanitizeUrl(lt):lt}__name(formatUrl,"formatUrl");var runFunc=__name((rt,...it)=>{const lt=rt.split("."),ct=lt.length-1,ht=lt[ct];let dt=window;for(let ft=0;ft<ct;ft++)if(dt=dt[lt[ft]],!dt){log.error(`Function name: ${rt} not found in window`);return}dt[ht](...it)},"runFunc");function distance(rt,it){return!rt||!it?0:Math.sqrt(Math.pow(it.x-rt.x,2)+Math.pow(it.y-rt.y,2))}__name(distance,"distance");function traverseEdge(rt){let it,lt=0;rt.forEach(ht=>{lt+=distance(ht,it),it=ht});const ct=lt/2;return calculatePoint(rt,ct)}__name(traverseEdge,"traverseEdge");function calcLabelPosition(rt){return rt.length===1?rt[0]:traverseEdge(rt)}__name(calcLabelPosition,"calcLabelPosition");var roundNumber=__name((rt,it=2)=>{const lt=Math.pow(10,it);return Math.round(rt*lt)/lt},"roundNumber"),calculatePoint=__name((rt,it)=>{let lt,ct=it;for(const ht of rt){if(lt){const dt=distance(ht,lt);if(dt===0)return lt;if(dt<ct)ct-=dt;else{const ft=ct/dt;if(ft<=0)return lt;if(ft>=1)return{x:ht.x,y:ht.y};if(ft>0&&ft<1)return{x:roundNumber((1-ft)*lt.x+ft*ht.x,5),y:roundNumber((1-ft)*lt.y+ft*ht.y,5)}}}lt=ht}throw new Error("Could not find a suitable point for the given distance")},"calculatePoint"),calcCardinalityPosition=__name((rt,it,lt)=>{log.info(`our points ${JSON.stringify(it)}`),it[0]!==lt&&(it=it.reverse());const ht=calculatePoint(it,25),dt=rt?10:5,ft=Math.atan2(it[0].y-ht.y,it[0].x-ht.x),ut={x:0,y:0};return ut.x=Math.sin(ft)*dt+(it[0].x+ht.x)/2,ut.y=-Math.cos(ft)*dt+(it[0].y+ht.y)/2,ut},"calcCardinalityPosition");function calcTerminalLabelPosition(rt,it,lt){const ct=structuredClone(lt);log.info("our points",ct),it!=="start_left"&&it!=="start_right"&&ct.reverse();const ht=25+rt,dt=calculatePoint(ct,ht),ft=10+rt*.5,ut=Math.atan2(ct[0].y-dt.y,ct[0].x-dt.x),pt={x:0,y:0};return it==="start_left"?(pt.x=Math.sin(ut+Math.PI)*ft+(ct[0].x+dt.x)/2,pt.y=-Math.cos(ut+Math.PI)*ft+(ct[0].y+dt.y)/2):it==="end_right"?(pt.x=Math.sin(ut-Math.PI)*ft+(ct[0].x+dt.x)/2-5,pt.y=-Math.cos(ut-Math.PI)*ft+(ct[0].y+dt.y)/2-5):it==="end_left"?(pt.x=Math.sin(ut)*ft+(ct[0].x+dt.x)/2-5,pt.y=-Math.cos(ut)*ft+(ct[0].y+dt.y)/2-5):(pt.x=Math.sin(ut)*ft+(ct[0].x+dt.x)/2,pt.y=-Math.cos(ut)*ft+(ct[0].y+dt.y)/2),pt}__name(calcTerminalLabelPosition,"calcTerminalLabelPosition");function getStylesFromArray(rt){let it="",lt="";for(const ct of rt)ct!==void 0&&(ct.startsWith("color:")||ct.startsWith("text-align:")?lt=lt+ct+";":it=it+ct+";");return{style:it,labelStyle:lt}}__name(getStylesFromArray,"getStylesFromArray");var cnt=0,generateId=__name(()=>(cnt++,"id-"+Math.random().toString(36).substr(2,12)+"-"+cnt),"generateId");function makeRandomHex(rt){let it="";const lt="0123456789abcdef",ct=lt.length;for(let ht=0;ht<rt;ht++)it+=lt.charAt(Math.floor(Math.random()*ct));return it}__name(makeRandomHex,"makeRandomHex");var random=__name(rt=>makeRandomHex(rt.length),"random"),getTextObj=__name(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),drawSimpleText=__name(function(rt,it){const lt=it.text.replace(common_default.lineBreakRegex," "),[,ct]=parseFontSize(it.fontSize),ht=rt.append("text");ht.attr("x",it.x),ht.attr("y",it.y),ht.style("text-anchor",it.anchor),ht.style("font-family",it.fontFamily),ht.style("font-size",ct),ht.style("font-weight",it.fontWeight),ht.attr("fill",it.fill),it.class!==void 0&&ht.attr("class",it.class);const dt=ht.append("tspan");return dt.attr("x",it.x+it.textMargin*2),dt.attr("fill",it.fill),dt.text(lt),ht},"drawSimpleText"),wrapLabel=memoize((rt,it,lt)=>{if(!rt||(lt=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},lt),common_default.lineBreakRegex.test(rt)))return rt;const ct=rt.split(" ").filter(Boolean),ht=[];let dt="";return ct.forEach((ft,ut)=>{const pt=calculateTextWidth(`${ft} `,lt),gt=calculateTextWidth(dt,lt);if(pt>it){const{hyphenatedStrings:yt,remainingWord:bt}=breakString(ft,it,"-",lt);ht.push(dt,...yt),dt=bt}else gt+pt>=it?(ht.push(dt),dt=ft):dt=[dt,ft].filter(Boolean).join(" ");ut+1===ct.length&&ht.push(dt)}),ht.filter(ft=>ft!=="").join(lt.joinWith)},(rt,it,lt)=>`${rt}${it}${lt.fontSize}${lt.fontWeight}${lt.fontFamily}${lt.joinWith}`),breakString=memoize((rt,it,lt="-",ct)=>{ct=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},ct);const ht=[...rt],dt=[];let ft="";return ht.forEach((ut,pt)=>{const gt=`${ft}${ut}`;if(calculateTextWidth(gt,ct)>=it){const _t=pt+1,yt=ht.length===_t,bt=`${gt}${lt}`;dt.push(yt?gt:bt),ft=""}else ft=gt}),{hyphenatedStrings:dt,remainingWord:ft}},(rt,it,lt="-",ct)=>`${rt}${it}${lt}${ct.fontSize}${ct.fontWeight}${ct.fontFamily}`);function calculateTextHeight(rt,it){return calculateTextDimensions(rt,it).height}__name(calculateTextHeight,"calculateTextHeight");function calculateTextWidth(rt,it){return calculateTextDimensions(rt,it).width}__name(calculateTextWidth,"calculateTextWidth");var calculateTextDimensions=memoize((rt,it)=>{const{fontSize:lt=12,fontFamily:ct="Arial",fontWeight:ht=400}=it;if(!rt)return{width:0,height:0};const[,dt]=parseFontSize(lt),ft=["sans-serif",ct],ut=rt.split(common_default.lineBreakRegex),pt=[],gt=select("body");if(!gt.remove)return{width:0,height:0,lineHeight:0};const mt=gt.append("svg");for(const yt of ft){let bt=0;const xt={width:0,height:0,lineHeight:0};for(const wt of ut){const Ct=getTextObj();Ct.text=wt||ZERO_WIDTH_SPACE;const St=drawSimpleText(mt,Ct).style("font-size",dt).style("font-weight",ht).style("font-family",yt),Tt=(St._groups||St)[0][0].getBBox();if(Tt.width===0&&Tt.height===0)throw new Error("svg element not in render tree");xt.width=Math.round(Math.max(xt.width,Tt.width)),bt=Math.round(Tt.height),xt.height+=bt,xt.lineHeight=Math.round(Math.max(xt.lineHeight,bt))}pt.push(xt)}mt.remove();const _t=isNaN(pt[1].height)||isNaN(pt[1].width)||isNaN(pt[1].lineHeight)||pt[0].height>pt[1].height&&pt[0].width>pt[1].width&&pt[0].lineHeight>pt[1].lineHeight?0:1;return pt[_t]},(rt,it)=>`${rt}${it.fontSize}${it.fontWeight}${it.fontFamily}`),vr,InitIDGenerator=(vr=class{constructor(it=!1,lt){this.count=0,this.count=lt?lt.length:0,this.next=it?()=>this.count++:()=>Date.now()}},__name(vr,"InitIDGenerator"),vr),decoder,entityDecode=__name(function(rt){return decoder=decoder||document.createElement("div"),rt=escape(rt).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),decoder.innerHTML=rt,unescape(decoder.textContent)},"entityDecode");function isDetailedError(rt){return"str"in rt}__name(isDetailedError,"isDetailedError");var insertTitle=__name((rt,it,lt,ct)=>{if(!ct)return;const ht=rt.node()?.getBBox();ht&&rt.append("text").text(ct).attr("text-anchor","middle").attr("x",ht.x+ht.width/2).attr("y",-lt).attr("class",it)},"insertTitle"),parseFontSize=__name(rt=>{if(typeof rt=="number")return[rt,rt+"px"];const it=parseInt(rt??"",10);return Number.isNaN(it)?[void 0,void 0]:rt===String(it)?[it,rt+"px"]:[it,rt]},"parseFontSize");function cleanAndMerge(rt,it){return merge$1({},rt,it)}__name(cleanAndMerge,"cleanAndMerge");var utils_default={assignWithDepth:assignWithDepth_default,wrapLabel,calculateTextHeight,calculateTextWidth,calculateTextDimensions,cleanAndMerge,detectInit,detectDirective,isSubstringInArray,interpolateToCurve,calcLabelPosition,calcCardinalityPosition,calcTerminalLabelPosition,formatUrl,getStylesFromArray,generateId,random,runFunc,entityDecode,insertTitle,isLabelCoordinateInPath,parseFontSize,InitIDGenerator},encodeEntities=__name(function(rt){let it=rt;return it=it.replace(/style.*:\S*#.*;/g,function(lt){return lt.substring(0,lt.length-1)}),it=it.replace(/classDef.*:\S*#.*;/g,function(lt){return lt.substring(0,lt.length-1)}),it=it.replace(/#\w+;/g,function(lt){const ct=lt.substring(1,lt.length-1);return/^\+?\d+$/.test(ct)?"ï¬Â°Â°"+ct+"Â¶Ã":"ï¬Â°"+ct+"Â¶Ã"}),it},"encodeEntities"),decodeEntities=__name(function(rt){return rt.replace(/ï¬Â°Â°/g,"&#").replace(/ï¬Â°/g,"&").replace(/Â¶Ã/g,";")},"decodeEntities"),getEdgeId=__name((rt,it,{counter:lt=0,prefix:ct,suffix:ht},dt)=>dt||`${ct?`${ct}_`:""}${rt}_${it}_${lt}${ht?`_${ht}`:""}`,"getEdgeId");function handleUndefinedAttr(rt){return rt??null}__name(handleUndefinedAttr,"handleUndefinedAttr");function isLabelCoordinateInPath(rt,it){const lt=Math.round(rt.x),ct=Math.round(rt.y),ht=it.replace(/(\d+\.\d+)/g,dt=>Math.round(parseFloat(dt)).toString());return ht.includes(lt.toString())||ht.includes(ct.toString())}__name(isLabelCoordinateInPath,"isLabelCoordinateInPath");const defaultIconDimensions=Object.freeze({left:0,top:0,width:16,height:16}),defaultIconTransformations=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),defaultIconProps=Object.freeze({...defaultIconDimensions,...defaultIconTransformations}),defaultExtendedIconProps=Object.freeze({...defaultIconProps,body:"",hidden:!1}),defaultIconSizeCustomisations=Object.freeze({width:null,height:null}),defaultIconCustomisations=Object.freeze({...defaultIconSizeCustomisations,...defaultIconTransformations}),stringToIcon=(rt,it,lt,ct="")=>{const ht=rt.split(":");if(rt.slice(0,1)==="@"){if(ht.length<2||ht.length>3)return null;ct=ht.shift().slice(1)}if(ht.length>3||!ht.length)return null;if(ht.length>1){const ut=ht.pop(),pt=ht.pop(),gt={provider:ht.length>0?ht[0]:ct,prefix:pt,name:ut};return validateIconName(gt)?gt:null}const dt=ht[0],ft=dt.split("-");if(ft.length>1){const ut={provider:ct,prefix:ft.shift(),name:ft.join("-")};return validateIconName(ut)?ut:null}if(lt&&ct===""){const ut={provider:ct,prefix:"",name:dt};return validateIconName(ut,lt)?ut:null}return null},validateIconName=(rt,it)=>rt?!!((it&&rt.prefix===""||rt.prefix)&&rt.name):!1;function mergeIconTransformations(rt,it){const lt={};!rt.hFlip!=!it.hFlip&&(lt.hFlip=!0),!rt.vFlip!=!it.vFlip&&(lt.vFlip=!0);const ct=((rt.rotate||0)+(it.rotate||0))%4;return ct&&(lt.rotate=ct),lt}function mergeIconData(rt,it){const lt=mergeIconTransformations(rt,it);for(const ct in defaultExtendedIconProps)ct in defaultIconTransformations?ct in rt&&!(ct in lt)&&(lt[ct]=defaultIconTransformations[ct]):ct in it?lt[ct]=it[ct]:ct in rt&&(lt[ct]=rt[ct]);return lt}function getIconsTree(rt,it){const lt=rt.icons,ct=rt.aliases||Object.create(null),ht=Object.create(null);function dt(ft){if(lt[ft])return ht[ft]=[];if(!(ft in ht)){ht[ft]=null;const ut=ct[ft]&&ct[ft].parent,pt=ut&&dt(ut);pt&&(ht[ft]=[ut].concat(pt))}return ht[ft]}return(it||Object.keys(lt).concat(Object.keys(ct))).forEach(dt),ht}function internalGetIconData(rt,it,lt){const ct=rt.icons,ht=rt.aliases||Object.create(null);let dt={};function ft(ut){dt=mergeIconData(ct[ut]||ht[ut],dt)}return ft(it),lt.forEach(ft),mergeIconData(rt,dt)}function getIconData(rt,it){if(rt.icons[it])return internalGetIconData(rt,it,[]);const lt=getIconsTree(rt,[it])[it];return lt?internalGetIconData(rt,it,lt):null}const unitsSplit=/(-?[0-9.]*[0-9]+[0-9.]*)/g,unitsTest=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function calculateSize(rt,it,lt){if(it===1)return rt;if(lt=lt||100,typeof rt=="number")return Math.ceil(rt*it*lt)/lt;if(typeof rt!="string")return rt;const ct=rt.split(unitsSplit);if(ct===null||!ct.length)return rt;const ht=[];let dt=ct.shift(),ft=unitsTest.test(dt);for(;;){if(ft){const ut=parseFloat(dt);isNaN(ut)?ht.push(dt):ht.push(Math.ceil(ut*it*lt)/lt)}else ht.push(dt);if(dt=ct.shift(),dt===void 0)return ht.join("");ft=!ft}}function splitSVGDefs(rt,it="defs"){let lt="";const ct=rt.indexOf("<"+it);for(;ct>=0;){const ht=rt.indexOf(">",ct),dt=rt.indexOf("</"+it);if(ht===-1||dt===-1)break;const ft=rt.indexOf(">",dt);if(ft===-1)break;lt+=rt.slice(ht+1,dt).trim(),rt=rt.slice(0,ct).trim()+rt.slice(ft+1)}return{defs:lt,content:rt}}function mergeDefsAndContent(rt,it){return rt?"<defs>"+rt+"</defs>"+it:it}function wrapSVGContent(rt,it,lt){const ct=splitSVGDefs(rt);return mergeDefsAndContent(ct.defs,it+ct.content+lt)}const isUnsetKeyword=rt=>rt==="unset"||rt==="undefined"||rt==="none";function iconToSVG(rt,it){const lt={...defaultIconProps,...rt},ct={...defaultIconCustomisations,...it},ht={left:lt.left,top:lt.top,width:lt.width,height:lt.height};let dt=lt.body;[lt,ct].forEach(wt=>{const Ct=[],St=wt.hFlip,Tt=wt.vFlip;let vt=wt.rotate;St?Tt?vt+=2:(Ct.push("translate("+(ht.width+ht.left).toString()+" "+(0-ht.top).toString()+")"),Ct.push("scale(-1 1)"),ht.top=ht.left=0):Tt&&(Ct.push("translate("+(0-ht.left).toString()+" "+(ht.height+ht.top).toString()+")"),Ct.push("scale(1 -1)"),ht.top=ht.left=0);let kt;switch(vt<0&&(vt-=Math.floor(vt/4)*4),vt=vt%4,vt){case 1:kt=ht.height/2+ht.top,Ct.unshift("rotate(90 "+kt.toString()+" "+kt.toString()+")");break;case 2:Ct.unshift("rotate(180 "+(ht.width/2+ht.left).toString()+" "+(ht.height/2+ht.top).toString()+")");break;case 3:kt=ht.width/2+ht.left,Ct.unshift("rotate(-90 "+kt.toString()+" "+kt.toString()+")");break}vt%2===1&&(ht.left!==ht.top&&(kt=ht.left,ht.left=ht.top,ht.top=kt),ht.width!==ht.height&&(kt=ht.width,ht.width=ht.height,ht.height=kt)),Ct.length&&(dt=wrapSVGContent(dt,'<g transform="'+Ct.join(" ")+'">',"</g>"))});const ft=ct.width,ut=ct.height,pt=ht.width,gt=ht.height;let mt,_t;ft===null?(_t=ut===null?"1em":ut==="auto"?gt:ut,mt=calculateSize(_t,pt/gt)):(mt=ft==="auto"?pt:ft,_t=ut===null?calculateSize(mt,gt/pt):ut==="auto"?gt:ut);const yt={},bt=(wt,Ct)=>{isUnsetKeyword(Ct)||(yt[wt]=Ct.toString())};bt("width",mt),bt("height",_t);const xt=[ht.left,ht.top,pt,gt];return yt.viewBox=xt.join(" "),{attributes:yt,viewBox:xt,body:dt}}const regex=/\sid="(\S+)"/g,randomPrefix="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let counter=0;function replaceIDs(rt,it=randomPrefix){const lt=[];let ct;for(;ct=regex.exec(rt);)lt.push(ct[1]);if(!lt.length)return rt;const ht="suffix"+(Math.random()*16777216|Date.now()).toString(16);return lt.forEach(dt=>{const ft=typeof it=="function"?it(dt):it+(counter++).toString(),ut=dt.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");rt=rt.replace(new RegExp('([#;"])('+ut+')([")]|\\.[a-z])',"g"),"$1"+ft+ht+"$3")}),rt=rt.replace(new RegExp(ht,"g"),""),rt}function iconToHTML(rt,it){let lt=rt.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const ct in it)lt+=" "+ct+'="'+it[ct]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+lt+">"+rt+"</svg>"}function L$1(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var O$1=L$1();function G$1(rt){O$1=rt}var E$1={exec:()=>null};function h$1(rt,it=""){let lt=typeof rt=="string"?rt:rt.source,ct={replace:(ht,dt)=>{let ft=typeof dt=="string"?dt:dt.source;return ft=ft.replace(m$1.caret,"$1"),lt=lt.replace(ht,ft),ct},getRegex:()=>new RegExp(lt,it)};return ct}var m$1={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:rt=>new RegExp(`^( {0,3}${rt})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:rt=>new RegExp(`^ {0,${Math.min(3,rt-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:rt=>new RegExp(`^ {0,${Math.min(3,rt-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:rt=>new RegExp(`^ {0,${Math.min(3,rt-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:rt=>new RegExp(`^ {0,${Math.min(3,rt-1)}}#`),htmlBeginRegex:rt=>new RegExp(`^ {0,${Math.min(3,rt-1)}}<(?:[a-z].*>|!--)`,"i")},xe=/^(?:[ \t]*(?:\n|$))+/,be=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,Re=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,C$1=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Oe=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,j$1=/(?:[*+-]|\d{1,9}[.)])/,se=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,ie=h$1(se).replace(/bull/g,j$1).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Te=h$1(se).replace(/bull/g,j$1).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),F$1=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,we=/^[^\n]+/,Q$1=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,ye=h$1(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Q$1).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Pe=h$1(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,j$1).getRegex(),v$1="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",U$1=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Se=h$1("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",U$1).replace("tag",v$1).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),oe=h$1(F$1).replace("hr",C$1).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",v$1).getRegex(),$e=h$1(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",oe).getRegex(),K$1={blockquote:$e,code:be,def:ye,fences:Re,heading:Oe,hr:C$1,html:Se,lheading:ie,list:Pe,newline:xe,paragraph:oe,table:E$1,text:we},re=h$1("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",C$1).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",v$1).getRegex(),_e={...K$1,lheading:Te,table:re,paragraph:h$1(F$1).replace("hr",C$1).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",re).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",v$1).getRegex()},Le={...K$1,html:h$1(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",U$1).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:E$1,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:h$1(F$1).replace("hr",C$1).replace("heading",` *#{1,6} *[^
]`).replace("lheading",ie).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Me=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,ze=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,ae=/^( {2,}|\\)\n(?!\s*$)/,Ae=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,D$1=/[\p{P}\p{S}]/u,W$1=/[\s\p{P}\p{S}]/u,le=/[^\s\p{P}\p{S}]/u,Ee=h$1(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,W$1).getRegex(),ue=/(?!~)[\p{P}\p{S}]/u,Ce=/(?!~)[\s\p{P}\p{S}]/u,Ie=/(?:[^\s\p{P}\p{S}]|~)/u,Be=/\[[^\[\]]*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)|`[^`]*?`|<(?! )[^<>]*?>/g,pe=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,qe=h$1(pe,"u").replace(/punct/g,D$1).getRegex(),ve=h$1(pe,"u").replace(/punct/g,ue).getRegex(),ce="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",De=h$1(ce,"gu").replace(/notPunctSpace/g,le).replace(/punctSpace/g,W$1).replace(/punct/g,D$1).getRegex(),He=h$1(ce,"gu").replace(/notPunctSpace/g,Ie).replace(/punctSpace/g,Ce).replace(/punct/g,ue).getRegex(),Ze=h$1("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,le).replace(/punctSpace/g,W$1).replace(/punct/g,D$1).getRegex(),Ge=h$1(/\\(punct)/,"gu").replace(/punct/g,D$1).getRegex(),Ne=h$1(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),je=h$1(U$1).replace("(?:-->|$)","-->").getRegex(),Fe=h$1("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",je).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),q$1=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`[^`]*`|[^\[\]\\`])*?/,Qe=h$1(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",q$1).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),he=h$1(/^!?\[(label)\]\[(ref)\]/).replace("label",q$1).replace("ref",Q$1).getRegex(),de=h$1(/^!?\[(ref)\](?:\[\])?/).replace("ref",Q$1).getRegex(),Ue=h$1("reflink|nolink(?!\\()","g").replace("reflink",he).replace("nolink",de).getRegex(),X$1={_backpedal:E$1,anyPunctuation:Ge,autolink:Ne,blockSkip:Be,br:ae,code:ze,del:E$1,emStrongLDelim:qe,emStrongRDelimAst:De,emStrongRDelimUnd:Ze,escape:Me,link:Qe,nolink:de,punctuation:Ee,reflink:he,reflinkSearch:Ue,tag:Fe,text:Ae,url:E$1},Ke={...X$1,link:h$1(/^!?\[(label)\]\((.*?)\)/).replace("label",q$1).getRegex(),reflink:h$1(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",q$1).getRegex()},N$1={...X$1,emStrongRDelimAst:He,emStrongLDelim:ve,url:h$1(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},We={...N$1,br:h$1(ae).replace("{2,}","*").getRegex(),text:h$1(N$1.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},I$1={normal:K$1,gfm:_e,pedantic:Le},M$1={normal:X$1,gfm:N$1,breaks:We,pedantic:Ke},Xe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ke=rt=>Xe[rt];function w$1(rt,it){if(it){if(m$1.escapeTest.test(rt))return rt.replace(m$1.escapeReplace,ke)}else if(m$1.escapeTestNoEncode.test(rt))return rt.replace(m$1.escapeReplaceNoEncode,ke);return rt}function J$1(rt){try{rt=encodeURI(rt).replace(m$1.percentDecode,"%")}catch{return null}return rt}function V$1(rt,it){let lt=rt.replace(m$1.findPipe,(dt,ft,ut)=>{let pt=!1,gt=ft;for(;--gt>=0&&ut[gt]==="\\";)pt=!pt;return pt?"|":" |"}),ct=lt.split(m$1.splitPipe),ht=0;if(ct[0].trim()||ct.shift(),ct.length>0&&!ct.at(-1)?.trim()&&ct.pop(),it)if(ct.length>it)ct.splice(it);else for(;ct.length<it;)ct.push("");for(;ht<ct.length;ht++)ct[ht]=ct[ht].trim().replace(m$1.slashPipe,"|");return ct}function z$1(rt,it,lt){let ct=rt.length;if(ct===0)return"";let ht=0;for(;ht<ct&&rt.charAt(ct-ht-1)===it;)ht++;return rt.slice(0,ct-ht)}function ge(rt,it){if(rt.indexOf(it[1])===-1)return-1;let lt=0;for(let ct=0;ct<rt.length;ct++)if(rt[ct]==="\\")ct++;else if(rt[ct]===it[0])lt++;else if(rt[ct]===it[1]&&(lt--,lt<0))return ct;return lt>0?-2:-1}function fe(rt,it,lt,ct,ht){let dt=it.href,ft=it.title||null,ut=rt[1].replace(ht.other.outputLinkReplace,"$1");ct.state.inLink=!0;let pt={type:rt[0].charAt(0)==="!"?"image":"link",raw:lt,href:dt,title:ft,text:ut,tokens:ct.inlineTokens(ut)};return ct.state.inLink=!1,pt}function Je(rt,it,lt){let ct=rt.match(lt.other.indentCodeCompensation);if(ct===null)return it;let ht=ct[1];return it.split(`
`).map(dt=>{let ft=dt.match(lt.other.beginningSpace);if(ft===null)return dt;let[ut]=ft;return ut.length>=ht.length?dt.slice(ht.length):dt}).join(`
`)}var y$1=class{options;rules;lexer;constructor(it){this.options=it||O$1}space(it){let lt=this.rules.block.newline.exec(it);if(lt&&lt[0].length>0)return{type:"space",raw:lt[0]}}code(it){let lt=this.rules.block.code.exec(it);if(lt){let ct=lt[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:lt[0],codeBlockStyle:"indented",text:this.options.pedantic?ct:z$1(ct,`
`)}}}fences(it){let lt=this.rules.block.fences.exec(it);if(lt){let ct=lt[0],ht=Je(ct,lt[3]||"",this.rules);return{type:"code",raw:ct,lang:lt[2]?lt[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):lt[2],text:ht}}}heading(it){let lt=this.rules.block.heading.exec(it);if(lt){let ct=lt[2].trim();if(this.rules.other.endingHash.test(ct)){let ht=z$1(ct,"#");(this.options.pedantic||!ht||this.rules.other.endingSpaceChar.test(ht))&&(ct=ht.trim())}return{type:"heading",raw:lt[0],depth:lt[1].length,text:ct,tokens:this.lexer.inline(ct)}}}hr(it){let lt=this.rules.block.hr.exec(it);if(lt)return{type:"hr",raw:z$1(lt[0],`
`)}}blockquote(it){let lt=this.rules.block.blockquote.exec(it);if(lt){let ct=z$1(lt[0],`
`).split(`
`),ht="",dt="",ft=[];for(;ct.length>0;){let ut=!1,pt=[],gt;for(gt=0;gt<ct.length;gt++)if(this.rules.other.blockquoteStart.test(ct[gt]))pt.push(ct[gt]),ut=!0;else if(!ut)pt.push(ct[gt]);else break;ct=ct.slice(gt);let mt=pt.join(`
`),_t=mt.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");ht=ht?`${ht}
${mt}`:mt,dt=dt?`${dt}
${_t}`:_t;let yt=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(_t,ft,!0),this.lexer.state.top=yt,ct.length===0)break;let bt=ft.at(-1);if(bt?.type==="code")break;if(bt?.type==="blockquote"){let xt=bt,wt=xt.raw+`
`+ct.join(`
`),Ct=this.blockquote(wt);ft[ft.length-1]=Ct,ht=ht.substring(0,ht.length-xt.raw.length)+Ct.raw,dt=dt.substring(0,dt.length-xt.text.length)+Ct.text;break}else if(bt?.type==="list"){let xt=bt,wt=xt.raw+`
`+ct.join(`
`),Ct=this.list(wt);ft[ft.length-1]=Ct,ht=ht.substring(0,ht.length-bt.raw.length)+Ct.raw,dt=dt.substring(0,dt.length-xt.raw.length)+Ct.raw,ct=wt.substring(ft.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:ht,tokens:ft,text:dt}}}list(it){let lt=this.rules.block.list.exec(it);if(lt){let ct=lt[1].trim(),ht=ct.length>1,dt={type:"list",raw:"",ordered:ht,start:ht?+ct.slice(0,-1):"",loose:!1,items:[]};ct=ht?`\\d{1,9}\\${ct.slice(-1)}`:`\\${ct}`,this.options.pedantic&&(ct=ht?ct:"[*+-]");let ft=this.rules.other.listItemRegex(ct),ut=!1;for(;it;){let gt=!1,mt="",_t="";if(!(lt=ft.exec(it))||this.rules.block.hr.test(it))break;mt=lt[0],it=it.substring(mt.length);let yt=lt[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,Tt=>" ".repeat(3*Tt.length)),bt=it.split(`
`,1)[0],xt=!yt.trim(),wt=0;if(this.options.pedantic?(wt=2,_t=yt.trimStart()):xt?wt=lt[1].length+1:(wt=lt[2].search(this.rules.other.nonSpaceChar),wt=wt>4?1:wt,_t=yt.slice(wt),wt+=lt[1].length),xt&&this.rules.other.blankLine.test(bt)&&(mt+=bt+`
`,it=it.substring(bt.length+1),gt=!0),!gt){let Tt=this.rules.other.nextBulletRegex(wt),vt=this.rules.other.hrRegex(wt),kt=this.rules.other.fencesBeginRegex(wt),Et=this.rules.other.headingBeginRegex(wt),Lt=this.rules.other.htmlBeginRegex(wt);for(;it;){let At=it.split(`
`,1)[0],It;if(bt=At,this.options.pedantic?(bt=bt.replace(this.rules.other.listReplaceNesting,"  "),It=bt):It=bt.replace(this.rules.other.tabCharGlobal,"    "),kt.test(bt)||Et.test(bt)||Lt.test(bt)||Tt.test(bt)||vt.test(bt))break;if(It.search(this.rules.other.nonSpaceChar)>=wt||!bt.trim())_t+=`
`+It.slice(wt);else{if(xt||yt.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||kt.test(yt)||Et.test(yt)||vt.test(yt))break;_t+=`
`+bt}!xt&&!bt.trim()&&(xt=!0),mt+=At+`
`,it=it.substring(At.length+1),yt=It.slice(wt)}}dt.loose||(ut?dt.loose=!0:this.rules.other.doubleBlankLine.test(mt)&&(ut=!0));let Ct=null,St;this.options.gfm&&(Ct=this.rules.other.listIsTask.exec(_t),Ct&&(St=Ct[0]!=="[ ] ",_t=_t.replace(this.rules.other.listReplaceTask,""))),dt.items.push({type:"list_item",raw:mt,task:!!Ct,checked:St,loose:!1,text:_t,tokens:[]}),dt.raw+=mt}let pt=dt.items.at(-1);if(pt)pt.raw=pt.raw.trimEnd(),pt.text=pt.text.trimEnd();else return;dt.raw=dt.raw.trimEnd();for(let gt=0;gt<dt.items.length;gt++)if(this.lexer.state.top=!1,dt.items[gt].tokens=this.lexer.blockTokens(dt.items[gt].text,[]),!dt.loose){let mt=dt.items[gt].tokens.filter(yt=>yt.type==="space"),_t=mt.length>0&&mt.some(yt=>this.rules.other.anyLine.test(yt.raw));dt.loose=_t}if(dt.loose)for(let gt=0;gt<dt.items.length;gt++)dt.items[gt].loose=!0;return dt}}html(it){let lt=this.rules.block.html.exec(it);if(lt)return{type:"html",block:!0,raw:lt[0],pre:lt[1]==="pre"||lt[1]==="script"||lt[1]==="style",text:lt[0]}}def(it){let lt=this.rules.block.def.exec(it);if(lt){let ct=lt[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),ht=lt[2]?lt[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",dt=lt[3]?lt[3].substring(1,lt[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):lt[3];return{type:"def",tag:ct,raw:lt[0],href:ht,title:dt}}}table(it){let lt=this.rules.block.table.exec(it);if(!lt||!this.rules.other.tableDelimiter.test(lt[2]))return;let ct=V$1(lt[1]),ht=lt[2].replace(this.rules.other.tableAlignChars,"").split("|"),dt=lt[3]?.trim()?lt[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],ft={type:"table",raw:lt[0],header:[],align:[],rows:[]};if(ct.length===ht.length){for(let ut of ht)this.rules.other.tableAlignRight.test(ut)?ft.align.push("right"):this.rules.other.tableAlignCenter.test(ut)?ft.align.push("center"):this.rules.other.tableAlignLeft.test(ut)?ft.align.push("left"):ft.align.push(null);for(let ut=0;ut<ct.length;ut++)ft.header.push({text:ct[ut],tokens:this.lexer.inline(ct[ut]),header:!0,align:ft.align[ut]});for(let ut of dt)ft.rows.push(V$1(ut,ft.header.length).map((pt,gt)=>({text:pt,tokens:this.lexer.inline(pt),header:!1,align:ft.align[gt]})));return ft}}lheading(it){let lt=this.rules.block.lheading.exec(it);if(lt)return{type:"heading",raw:lt[0],depth:lt[2].charAt(0)==="="?1:2,text:lt[1],tokens:this.lexer.inline(lt[1])}}paragraph(it){let lt=this.rules.block.paragraph.exec(it);if(lt){let ct=lt[1].charAt(lt[1].length-1)===`
`?lt[1].slice(0,-1):lt[1];return{type:"paragraph",raw:lt[0],text:ct,tokens:this.lexer.inline(ct)}}}text(it){let lt=this.rules.block.text.exec(it);if(lt)return{type:"text",raw:lt[0],text:lt[0],tokens:this.lexer.inline(lt[0])}}escape(it){let lt=this.rules.inline.escape.exec(it);if(lt)return{type:"escape",raw:lt[0],text:lt[1]}}tag(it){let lt=this.rules.inline.tag.exec(it);if(lt)return!this.lexer.state.inLink&&this.rules.other.startATag.test(lt[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(lt[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(lt[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(lt[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:lt[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:lt[0]}}link(it){let lt=this.rules.inline.link.exec(it);if(lt){let ct=lt[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(ct)){if(!this.rules.other.endAngleBracket.test(ct))return;let ft=z$1(ct.slice(0,-1),"\\");if((ct.length-ft.length)%2===0)return}else{let ft=ge(lt[2],"()");if(ft===-2)return;if(ft>-1){let ut=(lt[0].indexOf("!")===0?5:4)+lt[1].length+ft;lt[2]=lt[2].substring(0,ft),lt[0]=lt[0].substring(0,ut).trim(),lt[3]=""}}let ht=lt[2],dt="";if(this.options.pedantic){let ft=this.rules.other.pedanticHrefTitle.exec(ht);ft&&(ht=ft[1],dt=ft[3])}else dt=lt[3]?lt[3].slice(1,-1):"";return ht=ht.trim(),this.rules.other.startAngleBracket.test(ht)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(ct)?ht=ht.slice(1):ht=ht.slice(1,-1)),fe(lt,{href:ht&&ht.replace(this.rules.inline.anyPunctuation,"$1"),title:dt&&dt.replace(this.rules.inline.anyPunctuation,"$1")},lt[0],this.lexer,this.rules)}}reflink(it,lt){let ct;if((ct=this.rules.inline.reflink.exec(it))||(ct=this.rules.inline.nolink.exec(it))){let ht=(ct[2]||ct[1]).replace(this.rules.other.multipleSpaceGlobal," "),dt=lt[ht.toLowerCase()];if(!dt){let ft=ct[0].charAt(0);return{type:"text",raw:ft,text:ft}}return fe(ct,dt,ct[0],this.lexer,this.rules)}}emStrong(it,lt,ct=""){let ht=this.rules.inline.emStrongLDelim.exec(it);if(!(!ht||ht[3]&&ct.match(this.rules.other.unicodeAlphaNumeric))&&(!(ht[1]||ht[2])||!ct||this.rules.inline.punctuation.exec(ct))){let dt=[...ht[0]].length-1,ft,ut,pt=dt,gt=0,mt=ht[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(mt.lastIndex=0,lt=lt.slice(-1*it.length+dt);(ht=mt.exec(lt))!=null;){if(ft=ht[1]||ht[2]||ht[3]||ht[4]||ht[5]||ht[6],!ft)continue;if(ut=[...ft].length,ht[3]||ht[4]){pt+=ut;continue}else if((ht[5]||ht[6])&&dt%3&&!((dt+ut)%3)){gt+=ut;continue}if(pt-=ut,pt>0)continue;ut=Math.min(ut,ut+pt+gt);let _t=[...ht[0]][0].length,yt=it.slice(0,dt+ht.index+_t+ut);if(Math.min(dt,ut)%2){let xt=yt.slice(1,-1);return{type:"em",raw:yt,text:xt,tokens:this.lexer.inlineTokens(xt)}}let bt=yt.slice(2,-2);return{type:"strong",raw:yt,text:bt,tokens:this.lexer.inlineTokens(bt)}}}}codespan(it){let lt=this.rules.inline.code.exec(it);if(lt){let ct=lt[2].replace(this.rules.other.newLineCharGlobal," "),ht=this.rules.other.nonSpaceChar.test(ct),dt=this.rules.other.startingSpaceChar.test(ct)&&this.rules.other.endingSpaceChar.test(ct);return ht&&dt&&(ct=ct.substring(1,ct.length-1)),{type:"codespan",raw:lt[0],text:ct}}}br(it){let lt=this.rules.inline.br.exec(it);if(lt)return{type:"br",raw:lt[0]}}del(it){let lt=this.rules.inline.del.exec(it);if(lt)return{type:"del",raw:lt[0],text:lt[2],tokens:this.lexer.inlineTokens(lt[2])}}autolink(it){let lt=this.rules.inline.autolink.exec(it);if(lt){let ct,ht;return lt[2]==="@"?(ct=lt[1],ht="mailto:"+ct):(ct=lt[1],ht=ct),{type:"link",raw:lt[0],text:ct,href:ht,tokens:[{type:"text",raw:ct,text:ct}]}}}url(it){let lt;if(lt=this.rules.inline.url.exec(it)){let ct,ht;if(lt[2]==="@")ct=lt[0],ht="mailto:"+ct;else{let dt;do dt=lt[0],lt[0]=this.rules.inline._backpedal.exec(lt[0])?.[0]??"";while(dt!==lt[0]);ct=lt[0],lt[1]==="www."?ht="http://"+lt[0]:ht=lt[0]}return{type:"link",raw:lt[0],text:ct,href:ht,tokens:[{type:"text",raw:ct,text:ct}]}}}inlineText(it){let lt=this.rules.inline.text.exec(it);if(lt){let ct=this.lexer.state.inRawBlock;return{type:"text",raw:lt[0],text:lt[0],escaped:ct}}}},b$1=class jr{tokens;options;state;tokenizer;inlineQueue;constructor(it){this.tokens=[],this.tokens.links=Object.create(null),this.options=it||O$1,this.options.tokenizer=this.options.tokenizer||new y$1,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let lt={other:m$1,block:I$1.normal,inline:M$1.normal};this.options.pedantic?(lt.block=I$1.pedantic,lt.inline=M$1.pedantic):this.options.gfm&&(lt.block=I$1.gfm,this.options.breaks?lt.inline=M$1.breaks:lt.inline=M$1.gfm),this.tokenizer.rules=lt}static get rules(){return{block:I$1,inline:M$1}}static lex(it,lt){return new jr(lt).lex(it)}static lexInline(it,lt){return new jr(lt).inlineTokens(it)}lex(it){it=it.replace(m$1.carriageReturn,`
`),this.blockTokens(it,this.tokens);for(let lt=0;lt<this.inlineQueue.length;lt++){let ct=this.inlineQueue[lt];this.inlineTokens(ct.src,ct.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(it,lt=[],ct=!1){for(this.options.pedantic&&(it=it.replace(m$1.tabCharGlobal,"    ").replace(m$1.spaceLine,""));it;){let ht;if(this.options.extensions?.block?.some(ft=>(ht=ft.call({lexer:this},it,lt))?(it=it.substring(ht.raw.length),lt.push(ht),!0):!1))continue;if(ht=this.tokenizer.space(it)){it=it.substring(ht.raw.length);let ft=lt.at(-1);ht.raw.length===1&&ft!==void 0?ft.raw+=`
`:lt.push(ht);continue}if(ht=this.tokenizer.code(it)){it=it.substring(ht.raw.length);let ft=lt.at(-1);ft?.type==="paragraph"||ft?.type==="text"?(ft.raw+=(ft.raw.endsWith(`
`)?"":`
`)+ht.raw,ft.text+=`
`+ht.text,this.inlineQueue.at(-1).src=ft.text):lt.push(ht);continue}if(ht=this.tokenizer.fences(it)){it=it.substring(ht.raw.length),lt.push(ht);continue}if(ht=this.tokenizer.heading(it)){it=it.substring(ht.raw.length),lt.push(ht);continue}if(ht=this.tokenizer.hr(it)){it=it.substring(ht.raw.length),lt.push(ht);continue}if(ht=this.tokenizer.blockquote(it)){it=it.substring(ht.raw.length),lt.push(ht);continue}if(ht=this.tokenizer.list(it)){it=it.substring(ht.raw.length),lt.push(ht);continue}if(ht=this.tokenizer.html(it)){it=it.substring(ht.raw.length),lt.push(ht);continue}if(ht=this.tokenizer.def(it)){it=it.substring(ht.raw.length);let ft=lt.at(-1);ft?.type==="paragraph"||ft?.type==="text"?(ft.raw+=(ft.raw.endsWith(`
`)?"":`
`)+ht.raw,ft.text+=`
`+ht.raw,this.inlineQueue.at(-1).src=ft.text):this.tokens.links[ht.tag]||(this.tokens.links[ht.tag]={href:ht.href,title:ht.title},lt.push(ht));continue}if(ht=this.tokenizer.table(it)){it=it.substring(ht.raw.length),lt.push(ht);continue}if(ht=this.tokenizer.lheading(it)){it=it.substring(ht.raw.length),lt.push(ht);continue}let dt=it;if(this.options.extensions?.startBlock){let ft=1/0,ut=it.slice(1),pt;this.options.extensions.startBlock.forEach(gt=>{pt=gt.call({lexer:this},ut),typeof pt=="number"&&pt>=0&&(ft=Math.min(ft,pt))}),ft<1/0&&ft>=0&&(dt=it.substring(0,ft+1))}if(this.state.top&&(ht=this.tokenizer.paragraph(dt))){let ft=lt.at(-1);ct&&ft?.type==="paragraph"?(ft.raw+=(ft.raw.endsWith(`
`)?"":`
`)+ht.raw,ft.text+=`
`+ht.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=ft.text):lt.push(ht),ct=dt.length!==it.length,it=it.substring(ht.raw.length);continue}if(ht=this.tokenizer.text(it)){it=it.substring(ht.raw.length);let ft=lt.at(-1);ft?.type==="text"?(ft.raw+=(ft.raw.endsWith(`
`)?"":`
`)+ht.raw,ft.text+=`
`+ht.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=ft.text):lt.push(ht);continue}if(it){let ft="Infinite loop on byte: "+it.charCodeAt(0);if(this.options.silent){console.error(ft);break}else throw new Error(ft)}}return this.state.top=!0,lt}inline(it,lt=[]){return this.inlineQueue.push({src:it,tokens:lt}),lt}inlineTokens(it,lt=[]){let ct=it,ht=null;if(this.tokens.links){let ut=Object.keys(this.tokens.links);if(ut.length>0)for(;(ht=this.tokenizer.rules.inline.reflinkSearch.exec(ct))!=null;)ut.includes(ht[0].slice(ht[0].lastIndexOf("[")+1,-1))&&(ct=ct.slice(0,ht.index)+"["+"a".repeat(ht[0].length-2)+"]"+ct.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(ht=this.tokenizer.rules.inline.anyPunctuation.exec(ct))!=null;)ct=ct.slice(0,ht.index)+"++"+ct.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(ht=this.tokenizer.rules.inline.blockSkip.exec(ct))!=null;)ct=ct.slice(0,ht.index)+"["+"a".repeat(ht[0].length-2)+"]"+ct.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);ct=this.options.hooks?.emStrongMask?.call({lexer:this},ct)??ct;let dt=!1,ft="";for(;it;){dt||(ft=""),dt=!1;let ut;if(this.options.extensions?.inline?.some(gt=>(ut=gt.call({lexer:this},it,lt))?(it=it.substring(ut.raw.length),lt.push(ut),!0):!1))continue;if(ut=this.tokenizer.escape(it)){it=it.substring(ut.raw.length),lt.push(ut);continue}if(ut=this.tokenizer.tag(it)){it=it.substring(ut.raw.length),lt.push(ut);continue}if(ut=this.tokenizer.link(it)){it=it.substring(ut.raw.length),lt.push(ut);continue}if(ut=this.tokenizer.reflink(it,this.tokens.links)){it=it.substring(ut.raw.length);let gt=lt.at(-1);ut.type==="text"&&gt?.type==="text"?(gt.raw+=ut.raw,gt.text+=ut.text):lt.push(ut);continue}if(ut=this.tokenizer.emStrong(it,ct,ft)){it=it.substring(ut.raw.length),lt.push(ut);continue}if(ut=this.tokenizer.codespan(it)){it=it.substring(ut.raw.length),lt.push(ut);continue}if(ut=this.tokenizer.br(it)){it=it.substring(ut.raw.length),lt.push(ut);continue}if(ut=this.tokenizer.del(it)){it=it.substring(ut.raw.length),lt.push(ut);continue}if(ut=this.tokenizer.autolink(it)){it=it.substring(ut.raw.length),lt.push(ut);continue}if(!this.state.inLink&&(ut=this.tokenizer.url(it))){it=it.substring(ut.raw.length),lt.push(ut);continue}let pt=it;if(this.options.extensions?.startInline){let gt=1/0,mt=it.slice(1),_t;this.options.extensions.startInline.forEach(yt=>{_t=yt.call({lexer:this},mt),typeof _t=="number"&&_t>=0&&(gt=Math.min(gt,_t))}),gt<1/0&&gt>=0&&(pt=it.substring(0,gt+1))}if(ut=this.tokenizer.inlineText(pt)){it=it.substring(ut.raw.length),ut.raw.slice(-1)!=="_"&&(ft=ut.raw.slice(-1)),dt=!0;let gt=lt.at(-1);gt?.type==="text"?(gt.raw+=ut.raw,gt.text+=ut.text):lt.push(ut);continue}if(it){let gt="Infinite loop on byte: "+it.charCodeAt(0);if(this.options.silent){console.error(gt);break}else throw new Error(gt)}}return lt}},P$1=class{options;parser;constructor(it){this.options=it||O$1}space(it){return""}code({text:it,lang:lt,escaped:ct}){let ht=(lt||"").match(m$1.notSpaceStart)?.[0],dt=it.replace(m$1.endingNewline,"")+`
`;return ht?'<pre><code class="language-'+w$1(ht)+'">'+(ct?dt:w$1(dt,!0))+`</code></pre>
`:"<pre><code>"+(ct?dt:w$1(dt,!0))+`</code></pre>
`}blockquote({tokens:it}){return`<blockquote>
${this.parser.parse(it)}</blockquote>
`}html({text:it}){return it}def(it){return""}heading({tokens:it,depth:lt}){return`<h${lt}>${this.parser.parseInline(it)}</h${lt}>
`}hr(it){return`<hr>
`}list(it){let lt=it.ordered,ct=it.start,ht="";for(let ut=0;ut<it.items.length;ut++){let pt=it.items[ut];ht+=this.listitem(pt)}let dt=lt?"ol":"ul",ft=lt&&ct!==1?' start="'+ct+'"':"";return"<"+dt+ft+`>
`+ht+"</"+dt+`>
`}listitem(it){let lt="";if(it.task){let ct=this.checkbox({checked:!!it.checked});it.loose?it.tokens[0]?.type==="paragraph"?(it.tokens[0].text=ct+" "+it.tokens[0].text,it.tokens[0].tokens&&it.tokens[0].tokens.length>0&&it.tokens[0].tokens[0].type==="text"&&(it.tokens[0].tokens[0].text=ct+" "+w$1(it.tokens[0].tokens[0].text),it.tokens[0].tokens[0].escaped=!0)):it.tokens.unshift({type:"text",raw:ct+" ",text:ct+" ",escaped:!0}):lt+=ct+" "}return lt+=this.parser.parse(it.tokens,!!it.loose),`<li>${lt}</li>
`}checkbox({checked:it}){return"<input "+(it?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:it}){return`<p>${this.parser.parseInline(it)}</p>
`}table(it){let lt="",ct="";for(let dt=0;dt<it.header.length;dt++)ct+=this.tablecell(it.header[dt]);lt+=this.tablerow({text:ct});let ht="";for(let dt=0;dt<it.rows.length;dt++){let ft=it.rows[dt];ct="";for(let ut=0;ut<ft.length;ut++)ct+=this.tablecell(ft[ut]);ht+=this.tablerow({text:ct})}return ht&&(ht=`<tbody>${ht}</tbody>`),`<table>
<thead>
`+lt+`</thead>
`+ht+`</table>
`}tablerow({text:it}){return`<tr>
${it}</tr>
`}tablecell(it){let lt=this.parser.parseInline(it.tokens),ct=it.header?"th":"td";return(it.align?`<${ct} align="${it.align}">`:`<${ct}>`)+lt+`</${ct}>
`}strong({tokens:it}){return`<strong>${this.parser.parseInline(it)}</strong>`}em({tokens:it}){return`<em>${this.parser.parseInline(it)}</em>`}codespan({text:it}){return`<code>${w$1(it,!0)}</code>`}br(it){return"<br>"}del({tokens:it}){return`<del>${this.parser.parseInline(it)}</del>`}link({href:it,title:lt,tokens:ct}){let ht=this.parser.parseInline(ct),dt=J$1(it);if(dt===null)return ht;it=dt;let ft='<a href="'+it+'"';return lt&&(ft+=' title="'+w$1(lt)+'"'),ft+=">"+ht+"</a>",ft}image({href:it,title:lt,text:ct,tokens:ht}){ht&&(ct=this.parser.parseInline(ht,this.parser.textRenderer));let dt=J$1(it);if(dt===null)return w$1(ct);it=dt;let ft=`<img src="${it}" alt="${ct}"`;return lt&&(ft+=` title="${w$1(lt)}"`),ft+=">",ft}text(it){return"tokens"in it&&it.tokens?this.parser.parseInline(it.tokens):"escaped"in it&&it.escaped?it.text:w$1(it.text)}},$$1=class{strong({text:it}){return it}em({text:it}){return it}codespan({text:it}){return it}del({text:it}){return it}html({text:it}){return it}text({text:it}){return it}link({text:it}){return""+it}image({text:it}){return""+it}br(){return""}},R$1=class qr{options;renderer;textRenderer;constructor(it){this.options=it||O$1,this.options.renderer=this.options.renderer||new P$1,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new $$1}static parse(it,lt){return new qr(lt).parse(it)}static parseInline(it,lt){return new qr(lt).parseInline(it)}parse(it,lt=!0){let ct="";for(let ht=0;ht<it.length;ht++){let dt=it[ht];if(this.options.extensions?.renderers?.[dt.type]){let ut=dt,pt=this.options.extensions.renderers[ut.type].call({parser:this},ut);if(pt!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(ut.type)){ct+=pt||"";continue}}let ft=dt;switch(ft.type){case"space":{ct+=this.renderer.space(ft);continue}case"hr":{ct+=this.renderer.hr(ft);continue}case"heading":{ct+=this.renderer.heading(ft);continue}case"code":{ct+=this.renderer.code(ft);continue}case"table":{ct+=this.renderer.table(ft);continue}case"blockquote":{ct+=this.renderer.blockquote(ft);continue}case"list":{ct+=this.renderer.list(ft);continue}case"html":{ct+=this.renderer.html(ft);continue}case"def":{ct+=this.renderer.def(ft);continue}case"paragraph":{ct+=this.renderer.paragraph(ft);continue}case"text":{let ut=ft,pt=this.renderer.text(ut);for(;ht+1<it.length&&it[ht+1].type==="text";)ut=it[++ht],pt+=`
`+this.renderer.text(ut);lt?ct+=this.renderer.paragraph({type:"paragraph",raw:pt,text:pt,tokens:[{type:"text",raw:pt,text:pt,escaped:!0}]}):ct+=pt;continue}default:{let ut='Token with "'+ft.type+'" type was not found.';if(this.options.silent)return console.error(ut),"";throw new Error(ut)}}}return ct}parseInline(it,lt=this.renderer){let ct="";for(let ht=0;ht<it.length;ht++){let dt=it[ht];if(this.options.extensions?.renderers?.[dt.type]){let ut=this.options.extensions.renderers[dt.type].call({parser:this},dt);if(ut!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(dt.type)){ct+=ut||"";continue}}let ft=dt;switch(ft.type){case"escape":{ct+=lt.text(ft);break}case"html":{ct+=lt.html(ft);break}case"link":{ct+=lt.link(ft);break}case"image":{ct+=lt.image(ft);break}case"strong":{ct+=lt.strong(ft);break}case"em":{ct+=lt.em(ft);break}case"codespan":{ct+=lt.codespan(ft);break}case"br":{ct+=lt.br(ft);break}case"del":{ct+=lt.del(ft);break}case"text":{ct+=lt.text(ft);break}default:{let ut='Token with "'+ft.type+'" type was not found.';if(this.options.silent)return console.error(ut),"";throw new Error(ut)}}}return ct}},S$1=class{options;block;constructor(it){this.options=it||O$1}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(it){return it}postprocess(it){return it}processAllTokens(it){return it}emStrongMask(it){return it}provideLexer(){return this.block?b$1.lex:b$1.lexInline}provideParser(){return this.block?R$1.parse:R$1.parseInline}},B$1=class{defaults=L$1();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=R$1;Renderer=P$1;TextRenderer=$$1;Lexer=b$1;Tokenizer=y$1;Hooks=S$1;constructor(...it){this.use(...it)}walkTokens(it,lt){let ct=[];for(let ht of it)switch(ct=ct.concat(lt.call(this,ht)),ht.type){case"table":{let dt=ht;for(let ft of dt.header)ct=ct.concat(this.walkTokens(ft.tokens,lt));for(let ft of dt.rows)for(let ut of ft)ct=ct.concat(this.walkTokens(ut.tokens,lt));break}case"list":{let dt=ht;ct=ct.concat(this.walkTokens(dt.items,lt));break}default:{let dt=ht;this.defaults.extensions?.childTokens?.[dt.type]?this.defaults.extensions.childTokens[dt.type].forEach(ft=>{let ut=dt[ft].flat(1/0);ct=ct.concat(this.walkTokens(ut,lt))}):dt.tokens&&(ct=ct.concat(this.walkTokens(dt.tokens,lt)))}}return ct}use(...it){let lt=this.defaults.extensions||{renderers:{},childTokens:{}};return it.forEach(ct=>{let ht={...ct};if(ht.async=this.defaults.async||ht.async||!1,ct.extensions&&(ct.extensions.forEach(dt=>{if(!dt.name)throw new Error("extension name required");if("renderer"in dt){let ft=lt.renderers[dt.name];ft?lt.renderers[dt.name]=function(...ut){let pt=dt.renderer.apply(this,ut);return pt===!1&&(pt=ft.apply(this,ut)),pt}:lt.renderers[dt.name]=dt.renderer}if("tokenizer"in dt){if(!dt.level||dt.level!=="block"&&dt.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let ft=lt[dt.level];ft?ft.unshift(dt.tokenizer):lt[dt.level]=[dt.tokenizer],dt.start&&(dt.level==="block"?lt.startBlock?lt.startBlock.push(dt.start):lt.startBlock=[dt.start]:dt.level==="inline"&&(lt.startInline?lt.startInline.push(dt.start):lt.startInline=[dt.start]))}"childTokens"in dt&&dt.childTokens&&(lt.childTokens[dt.name]=dt.childTokens)}),ht.extensions=lt),ct.renderer){let dt=this.defaults.renderer||new P$1(this.defaults);for(let ft in ct.renderer){if(!(ft in dt))throw new Error(`renderer '${ft}' does not exist`);if(["options","parser"].includes(ft))continue;let ut=ft,pt=ct.renderer[ut],gt=dt[ut];dt[ut]=(...mt)=>{let _t=pt.apply(dt,mt);return _t===!1&&(_t=gt.apply(dt,mt)),_t||""}}ht.renderer=dt}if(ct.tokenizer){let dt=this.defaults.tokenizer||new y$1(this.defaults);for(let ft in ct.tokenizer){if(!(ft in dt))throw new Error(`tokenizer '${ft}' does not exist`);if(["options","rules","lexer"].includes(ft))continue;let ut=ft,pt=ct.tokenizer[ut],gt=dt[ut];dt[ut]=(...mt)=>{let _t=pt.apply(dt,mt);return _t===!1&&(_t=gt.apply(dt,mt)),_t}}ht.tokenizer=dt}if(ct.hooks){let dt=this.defaults.hooks||new S$1;for(let ft in ct.hooks){if(!(ft in dt))throw new Error(`hook '${ft}' does not exist`);if(["options","block"].includes(ft))continue;let ut=ft,pt=ct.hooks[ut],gt=dt[ut];S$1.passThroughHooks.has(ft)?dt[ut]=mt=>{if(this.defaults.async&&S$1.passThroughHooksRespectAsync.has(ft))return Promise.resolve(pt.call(dt,mt)).then(yt=>gt.call(dt,yt));let _t=pt.call(dt,mt);return gt.call(dt,_t)}:dt[ut]=(...mt)=>{let _t=pt.apply(dt,mt);return _t===!1&&(_t=gt.apply(dt,mt)),_t}}ht.hooks=dt}if(ct.walkTokens){let dt=this.defaults.walkTokens,ft=ct.walkTokens;ht.walkTokens=function(ut){let pt=[];return pt.push(ft.call(this,ut)),dt&&(pt=pt.concat(dt.call(this,ut))),pt}}this.defaults={...this.defaults,...ht}}),this}setOptions(it){return this.defaults={...this.defaults,...it},this}lexer(it,lt){return b$1.lex(it,lt??this.defaults)}parser(it,lt){return R$1.parse(it,lt??this.defaults)}parseMarkdown(it){return(lt,ct)=>{let ht={...ct},dt={...this.defaults,...ht},ft=this.onError(!!dt.silent,!!dt.async);if(this.defaults.async===!0&&ht.async===!1)return ft(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof lt>"u"||lt===null)return ft(new Error("marked(): input parameter is undefined or null"));if(typeof lt!="string")return ft(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(lt)+", string expected"));dt.hooks&&(dt.hooks.options=dt,dt.hooks.block=it);let ut=dt.hooks?dt.hooks.provideLexer():it?b$1.lex:b$1.lexInline,pt=dt.hooks?dt.hooks.provideParser():it?R$1.parse:R$1.parseInline;if(dt.async)return Promise.resolve(dt.hooks?dt.hooks.preprocess(lt):lt).then(gt=>ut(gt,dt)).then(gt=>dt.hooks?dt.hooks.processAllTokens(gt):gt).then(gt=>dt.walkTokens?Promise.all(this.walkTokens(gt,dt.walkTokens)).then(()=>gt):gt).then(gt=>pt(gt,dt)).then(gt=>dt.hooks?dt.hooks.postprocess(gt):gt).catch(ft);try{dt.hooks&&(lt=dt.hooks.preprocess(lt));let gt=ut(lt,dt);dt.hooks&&(gt=dt.hooks.processAllTokens(gt)),dt.walkTokens&&this.walkTokens(gt,dt.walkTokens);let mt=pt(gt,dt);return dt.hooks&&(mt=dt.hooks.postprocess(mt)),mt}catch(gt){return ft(gt)}}}onError(it,lt){return ct=>{if(ct.message+=`
Please report this to https://github.com/markedjs/marked.`,it){let ht="<p>An error occurred:</p><pre>"+w$1(ct.message+"",!0)+"</pre>";return lt?Promise.resolve(ht):ht}if(lt)return Promise.reject(ct);throw ct}}},_$1=new B$1;function d$1(rt,it){return _$1.parse(rt,it)}d$1.options=d$1.setOptions=function(rt){return _$1.setOptions(rt),d$1.defaults=_$1.defaults,G$1(d$1.defaults),d$1};d$1.getDefaults=L$1;d$1.defaults=O$1;d$1.use=function(...rt){return _$1.use(...rt),d$1.defaults=_$1.defaults,G$1(d$1.defaults),d$1};d$1.walkTokens=function(rt,it){return _$1.walkTokens(rt,it)};d$1.parseInline=_$1.parseInline;d$1.Parser=R$1;d$1.parser=R$1.parse;d$1.Renderer=P$1;d$1.TextRenderer=$$1;d$1.Lexer=b$1;d$1.lexer=b$1.lex;d$1.Tokenizer=y$1;d$1.Hooks=S$1;d$1.parse=d$1;d$1.options;d$1.setOptions;d$1.use;d$1.walkTokens;d$1.parseInline;R$1.parse;b$1.lex;function dedent(rt){for(var it=[],lt=1;lt<arguments.length;lt++)it[lt-1]=arguments[lt];var ct=Array.from(typeof rt=="string"?[rt]:rt);ct[ct.length-1]=ct[ct.length-1].replace(/\r?\n([\t ]*)$/,"");var ht=ct.reduce(function(ut,pt){var gt=pt.match(/\n([\t ]+|(?!\s).)/g);return gt?ut.concat(gt.map(function(mt){var _t,yt;return(yt=(_t=mt.match(/[\t ]/g))===null||_t===void 0?void 0:_t.length)!==null&&yt!==void 0?yt:0})):ut},[]);if(ht.length){var dt=new RegExp(`
[	 ]{`+Math.min.apply(Math,ht)+"}","g");ct=ct.map(function(ut){return ut.replace(dt,`
`)})}ct[0]=ct[0].replace(/^\r?\n/,"");var ft=ct[0];return it.forEach(function(ut,pt){var gt=ft.match(/(?:^|\n)( *)$/),mt=gt?gt[1]:"",_t=ut;typeof ut=="string"&&ut.includes(`
`)&&(_t=String(ut).split(`
`).map(function(yt,bt){return bt===0?yt:""+mt+yt}).join(`
`)),ft+=_t+ct[pt+1]}),ft}var unknownIcon={body:'<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/><text transform="translate(21.16 64.67)" style="fill: #fff; font-family: ArialMT, Arial; font-size: 67.75px;"><tspan x="0" y="0">?</tspan></text></g>',height:80,width:80},iconsStore=new Map,loaderStore=new Map,registerIconPacks=__name(rt=>{for(const it of rt){if(!it.name)throw new Error('Invalid icon loader. Must have a "name" property with non-empty string value.');if(log.debug("Registering icon pack:",it.name),"loader"in it)loaderStore.set(it.name,it.loader);else if("icons"in it)iconsStore.set(it.name,it.icons);else throw log.error("Invalid icon loader:",it),new Error('Invalid icon loader. Must have either "icons" or "loader" property.')}},"registerIconPacks"),getRegisteredIconData=__name(async(rt,it)=>{const lt=stringToIcon(rt,!0,it!==void 0);if(!lt)throw new Error(`Invalid icon name: ${rt}`);const ct=lt.prefix||it;if(!ct)throw new Error(`Icon name must contain a prefix: ${rt}`);let ht=iconsStore.get(ct);if(!ht){const ft=loaderStore.get(ct);if(!ft)throw new Error(`Icon set not found: ${lt.prefix}`);try{ht={...await ft(),prefix:ct},iconsStore.set(ct,ht)}catch(ut){throw log.error(ut),new Error(`Failed to load icon set: ${lt.prefix}`)}}const dt=getIconData(ht,lt.name);if(!dt)throw new Error(`Icon not found: ${rt}`);return dt},"getRegisteredIconData"),isIconAvailable=__name(async rt=>{try{return await getRegisteredIconData(rt),!0}catch{return!1}},"isIconAvailable"),getIconSVG=__name(async(rt,it,lt)=>{let ct;try{ct=await getRegisteredIconData(rt,it?.fallbackPrefix)}catch(ft){log.error(ft),ct=unknownIcon}const ht=iconToSVG(ct,it),dt=iconToHTML(replaceIDs(ht.body),{...ht.attributes,...lt});return sanitizeText(dt,getConfig())},"getIconSVG");function preprocessMarkdown(rt,{markdownAutoWrap:it}){const ct=rt.replace(/<br\/>/g,`
`).replace(/\n{2,}/g,`
`),ht=dedent(ct);return it===!1?ht.replace(/ /g,"&nbsp;"):ht}__name(preprocessMarkdown,"preprocessMarkdown");function markdownToLines(rt,it={}){const lt=preprocessMarkdown(rt,it),ct=d$1.lexer(lt),ht=[[]];let dt=0;function ft(ut,pt="normal"){ut.type==="text"?ut.text.split(`
`).forEach((mt,_t)=>{_t!==0&&(dt++,ht.push([])),mt.split(" ").forEach(yt=>{yt=yt.replace(/&#39;/g,"'"),yt&&ht[dt].push({content:yt,type:pt})})}):ut.type==="strong"||ut.type==="em"?ut.tokens.forEach(gt=>{ft(gt,ut.type)}):ut.type==="html"&&ht[dt].push({content:ut.text,type:"normal"})}return __name(ft,"processNode"),ct.forEach(ut=>{ut.type==="paragraph"?ut.tokens?.forEach(pt=>{ft(pt)}):ut.type==="html"?ht[dt].push({content:ut.text,type:"normal"}):ht[dt].push({content:ut.raw,type:"normal"})}),ht}__name(markdownToLines,"markdownToLines");function markdownToHTML(rt,{markdownAutoWrap:it}={}){const lt=d$1.lexer(rt);function ct(ht){return ht.type==="text"?it===!1?ht.text.replace(/\n */g,"<br/>").replace(/ /g,"&nbsp;"):ht.text.replace(/\n */g,"<br/>"):ht.type==="strong"?`<strong>${ht.tokens?.map(ct).join("")}</strong>`:ht.type==="em"?`<em>${ht.tokens?.map(ct).join("")}</em>`:ht.type==="paragraph"?`<p>${ht.tokens?.map(ct).join("")}</p>`:ht.type==="space"?"":ht.type==="html"?`${ht.text}`:ht.type==="escape"?ht.text:(log.warn(`Unsupported markdown: ${ht.type}`),ht.raw)}return __name(ct,"output"),lt.map(ct).join("")}__name(markdownToHTML,"markdownToHTML");function splitTextToChars(rt){return Intl.Segmenter?[...new Intl.Segmenter().segment(rt)].map(it=>it.segment):[...rt]}__name(splitTextToChars,"splitTextToChars");function splitWordToFitWidth(rt,it){const lt=splitTextToChars(it.content);return splitWordToFitWidthRecursion(rt,[],lt,it.type)}__name(splitWordToFitWidth,"splitWordToFitWidth");function splitWordToFitWidthRecursion(rt,it,lt,ct){if(lt.length===0)return[{content:it.join(""),type:ct},{content:"",type:ct}];const[ht,...dt]=lt,ft=[...it,ht];return rt([{content:ft.join(""),type:ct}])?splitWordToFitWidthRecursion(rt,ft,dt,ct):(it.length===0&&ht&&(it.push(ht),lt.shift()),[{content:it.join(""),type:ct},{content:lt.join(""),type:ct}])}__name(splitWordToFitWidthRecursion,"splitWordToFitWidthRecursion");function splitLineToFitWidth(rt,it){if(rt.some(({content:lt})=>lt.includes(`
`)))throw new Error("splitLineToFitWidth does not support newlines in the line");return splitLineToFitWidthRecursion(rt,it)}__name(splitLineToFitWidth,"splitLineToFitWidth");function splitLineToFitWidthRecursion(rt,it,lt=[],ct=[]){if(rt.length===0)return ct.length>0&&lt.push(ct),lt.length>0?lt:[];let ht="";rt[0].content===" "&&(ht=" ",rt.shift());const dt=rt.shift()??{content:" ",type:"normal"},ft=[...ct];if(ht!==""&&ft.push({content:ht,type:"normal"}),ft.push(dt),it(ft))return splitLineToFitWidthRecursion(rt,it,lt,ft);if(ct.length>0)lt.push(ct),rt.unshift(dt);else if(dt.content){const[ut,pt]=splitWordToFitWidth(it,dt);lt.push([ut]),pt.content&&rt.unshift(pt)}return splitLineToFitWidthRecursion(rt,it,lt)}__name(splitLineToFitWidthRecursion,"splitLineToFitWidthRecursion");function applyStyle$1(rt,it){it&&rt.attr("style",it)}__name(applyStyle$1,"applyStyle");async function addHtmlSpan(rt,it,lt,ct,ht=!1,dt=getConfig()){const ft=rt.append("foreignObject");ft.attr("width",`${10*lt}px`),ft.attr("height",`${10*lt}px`);const ut=ft.append("xhtml:div"),pt=hasKatex(it.label)?await renderKatexSanitized(it.label.replace(common_default.lineBreakRegex,`
`),dt):sanitizeText(it.label,dt),gt=it.isNode?"nodeLabel":"edgeLabel",mt=ut.append("span");mt.html(pt),applyStyle$1(mt,it.labelStyle),mt.attr("class",`${gt} ${ct}`),applyStyle$1(ut,it.labelStyle),ut.style("display","table-cell"),ut.style("white-space","nowrap"),ut.style("line-height","1.5"),ut.style("max-width",lt+"px"),ut.style("text-align","center"),ut.attr("xmlns","http://www.w3.org/1999/xhtml"),ht&&ut.attr("class","labelBkg");let _t=ut.node().getBoundingClientRect();return _t.width===lt&&(ut.style("display","table"),ut.style("white-space","break-spaces"),ut.style("width",lt+"px"),_t=ut.node().getBoundingClientRect()),ft.node()}__name(addHtmlSpan,"addHtmlSpan");function createTspan(rt,it,lt){return rt.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",it*lt-.1+"em").attr("dy",lt+"em")}__name(createTspan,"createTspan");function computeWidthOfText(rt,it,lt){const ct=rt.append("text"),ht=createTspan(ct,1,it);updateTextContentAndStyles(ht,lt);const dt=ht.node().getComputedTextLength();return ct.remove(),dt}__name(computeWidthOfText,"computeWidthOfText");function computeDimensionOfText(rt,it,lt){const ct=rt.append("text"),ht=createTspan(ct,1,it);updateTextContentAndStyles(ht,[{content:lt,type:"normal"}]);const dt=ht.node()?.getBoundingClientRect();return dt&&ct.remove(),dt}__name(computeDimensionOfText,"computeDimensionOfText");function createFormattedText(rt,it,lt,ct=!1){const dt=it.append("g"),ft=dt.insert("rect").attr("class","background").attr("style","stroke: none"),ut=dt.append("text").attr("y","-10.1");let pt=0;for(const gt of lt){const mt=__name(yt=>computeWidthOfText(dt,1.1,yt)<=rt,"checkWidth"),_t=mt(gt)?[gt]:splitLineToFitWidth(gt,mt);for(const yt of _t){const bt=createTspan(ut,pt,1.1);updateTextContentAndStyles(bt,yt),pt++}}if(ct){const gt=ut.node().getBBox(),mt=2;return ft.attr("x",gt.x-mt).attr("y",gt.y-mt).attr("width",gt.width+2*mt).attr("height",gt.height+2*mt),dt.node()}else return ut.node()}__name(createFormattedText,"createFormattedText");function updateTextContentAndStyles(rt,it){rt.text(""),it.forEach((lt,ct)=>{const ht=rt.append("tspan").attr("font-style",lt.type==="em"?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight",lt.type==="strong"?"bold":"normal");ct===0?ht.text(lt.content):ht.text(" "+lt.content)})}__name(updateTextContentAndStyles,"updateTextContentAndStyles");async function replaceIconSubstring(rt,it={}){const lt=[];rt.replace(/(fa[bklrs]?):fa-([\w-]+)/g,(ht,dt,ft)=>(lt.push((async()=>{const ut=`${dt}:${ft}`;return await isIconAvailable(ut)?await getIconSVG(ut,void 0,{class:"label-icon"}):`<i class='${sanitizeText(ht,it).replace(":"," ")}'></i>`})()),ht));const ct=await Promise.all(lt);return rt.replace(/(fa[bklrs]?):fa-([\w-]+)/g,()=>ct.shift()??"")}__name(replaceIconSubstring,"replaceIconSubstring");var createText=__name(async(rt,it="",{style:lt="",isTitle:ct=!1,classes:ht="",useHtmlLabels:dt=!0,isNode:ft=!0,width:ut=200,addSvgBackground:pt=!1}={},gt)=>{if(log.debug("XYZ createText",it,lt,ct,ht,dt,ft,"addSvgBackground: ",pt),dt){const mt=markdownToHTML(it,gt),_t=await replaceIconSubstring(decodeEntities(mt),gt),yt=it.replace(/\\\\/g,"\\"),bt={isNode:ft,label:hasKatex(it)?yt:_t,labelStyle:lt.replace("fill:","color:")};return await addHtmlSpan(rt,bt,ut,ht,pt,gt)}else{const mt=it.replace(/<br\s*\/?>/g,"<br/>"),_t=markdownToLines(mt.replace("<br>","<br/>"),gt),yt=createFormattedText(ut,rt,_t,it?pt:!1);if(ft){/stroke:/.exec(lt)&&(lt=lt.replace("stroke:","lineColor:"));const bt=lt.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");select(yt).attr("style",bt)}else{const bt=lt.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/background:/g,"fill:");select(yt).select("rect").attr("style",bt.replace(/background:/g,"fill:"));const xt=lt.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");select(yt).select("text").attr("style",xt)}return yt}},"createText");function t(rt,it,lt){if(rt&&rt.length){const[ct,ht]=it,dt=Math.PI/180*lt,ft=Math.cos(dt),ut=Math.sin(dt);for(const pt of rt){const[gt,mt]=pt;pt[0]=(gt-ct)*ft-(mt-ht)*ut+ct,pt[1]=(gt-ct)*ut+(mt-ht)*ft+ht}}}function e(rt,it){return rt[0]===it[0]&&rt[1]===it[1]}function s(rt,it,lt,ct=1){const ht=lt,dt=Math.max(it,.1),ft=rt[0]&&rt[0][0]&&typeof rt[0][0]=="number"?[rt]:rt,ut=[0,0];if(ht)for(const gt of ft)t(gt,ut,ht);const pt=(function(gt,mt,_t){const yt=[];for(const Tt of gt){const vt=[...Tt];e(vt[0],vt[vt.length-1])||vt.push([vt[0][0],vt[0][1]]),vt.length>2&&yt.push(vt)}const bt=[];mt=Math.max(mt,.1);const xt=[];for(const Tt of yt)for(let vt=0;vt<Tt.length-1;vt++){const kt=Tt[vt],Et=Tt[vt+1];if(kt[1]!==Et[1]){const Lt=Math.min(kt[1],Et[1]);xt.push({ymin:Lt,ymax:Math.max(kt[1],Et[1]),x:Lt===kt[1]?kt[0]:Et[0],islope:(Et[0]-kt[0])/(Et[1]-kt[1])})}}if(xt.sort(((Tt,vt)=>Tt.ymin<vt.ymin?-1:Tt.ymin>vt.ymin?1:Tt.x<vt.x?-1:Tt.x>vt.x?1:Tt.ymax===vt.ymax?0:(Tt.ymax-vt.ymax)/Math.abs(Tt.ymax-vt.ymax))),!xt.length)return bt;let wt=[],Ct=xt[0].ymin,St=0;for(;wt.length||xt.length;){if(xt.length){let Tt=-1;for(let vt=0;vt<xt.length&&!(xt[vt].ymin>Ct);vt++)Tt=vt;xt.splice(0,Tt+1).forEach((vt=>{wt.push({s:Ct,edge:vt})}))}if(wt=wt.filter((Tt=>!(Tt.edge.ymax<=Ct))),wt.sort(((Tt,vt)=>Tt.edge.x===vt.edge.x?0:(Tt.edge.x-vt.edge.x)/Math.abs(Tt.edge.x-vt.edge.x))),(_t!==1||St%mt==0)&&wt.length>1)for(let Tt=0;Tt<wt.length;Tt+=2){const vt=Tt+1;if(vt>=wt.length)break;const kt=wt[Tt].edge,Et=wt[vt].edge;bt.push([[Math.round(kt.x),Ct],[Math.round(Et.x),Ct]])}Ct+=_t,wt.forEach((Tt=>{Tt.edge.x=Tt.edge.x+_t*Tt.edge.islope})),St++}return bt})(ft,dt,ct);if(ht){for(const gt of ft)t(gt,ut,-ht);(function(gt,mt,_t){const yt=[];gt.forEach((bt=>yt.push(...bt))),t(yt,mt,_t)})(pt,ut,-ht)}return pt}function n(rt,it){var lt;const ct=it.hachureAngle+90;let ht=it.hachureGap;ht<0&&(ht=4*it.strokeWidth),ht=Math.round(Math.max(ht,.1));let dt=1;return it.roughness>=1&&(((lt=it.randomizer)===null||lt===void 0?void 0:lt.next())||Math.random())>.7&&(dt=ht),s(rt,ht,ct,dt||1)}class o{constructor(it){this.helper=it}fillPolygons(it,lt){return this._fillPolygons(it,lt)}_fillPolygons(it,lt){const ct=n(it,lt);return{type:"fillSketch",ops:this.renderLines(ct,lt)}}renderLines(it,lt){const ct=[];for(const ht of it)ct.push(...this.helper.doubleLineOps(ht[0][0],ht[0][1],ht[1][0],ht[1][1],lt));return ct}}function a(rt){const it=rt[0],lt=rt[1];return Math.sqrt(Math.pow(it[0]-lt[0],2)+Math.pow(it[1]-lt[1],2))}class h extends o{fillPolygons(it,lt){let ct=lt.hachureGap;ct<0&&(ct=4*lt.strokeWidth),ct=Math.max(ct,.1);const ht=n(it,Object.assign({},lt,{hachureGap:ct})),dt=Math.PI/180*lt.hachureAngle,ft=[],ut=.5*ct*Math.cos(dt),pt=.5*ct*Math.sin(dt);for(const[gt,mt]of ht)a([gt,mt])&&ft.push([[gt[0]-ut,gt[1]+pt],[...mt]],[[gt[0]+ut,gt[1]-pt],[...mt]]);return{type:"fillSketch",ops:this.renderLines(ft,lt)}}}class r extends o{fillPolygons(it,lt){const ct=this._fillPolygons(it,lt),ht=Object.assign({},lt,{hachureAngle:lt.hachureAngle+90}),dt=this._fillPolygons(it,ht);return ct.ops=ct.ops.concat(dt.ops),ct}}class i{constructor(it){this.helper=it}fillPolygons(it,lt){const ct=n(it,lt=Object.assign({},lt,{hachureAngle:0}));return this.dotsOnLines(ct,lt)}dotsOnLines(it,lt){const ct=[];let ht=lt.hachureGap;ht<0&&(ht=4*lt.strokeWidth),ht=Math.max(ht,.1);let dt=lt.fillWeight;dt<0&&(dt=lt.strokeWidth/2);const ft=ht/4;for(const ut of it){const pt=a(ut),gt=pt/ht,mt=Math.ceil(gt)-1,_t=pt-mt*ht,yt=(ut[0][0]+ut[1][0])/2-ht/4,bt=Math.min(ut[0][1],ut[1][1]);for(let xt=0;xt<mt;xt++){const wt=bt+_t+xt*ht,Ct=yt-ft+2*Math.random()*ft,St=wt-ft+2*Math.random()*ft,Tt=this.helper.ellipse(Ct,St,dt,dt,lt);ct.push(...Tt.ops)}}return{type:"fillSketch",ops:ct}}}class c{constructor(it){this.helper=it}fillPolygons(it,lt){const ct=n(it,lt);return{type:"fillSketch",ops:this.dashedLine(ct,lt)}}dashedLine(it,lt){const ct=lt.dashOffset<0?lt.hachureGap<0?4*lt.strokeWidth:lt.hachureGap:lt.dashOffset,ht=lt.dashGap<0?lt.hachureGap<0?4*lt.strokeWidth:lt.hachureGap:lt.dashGap,dt=[];return it.forEach((ft=>{const ut=a(ft),pt=Math.floor(ut/(ct+ht)),gt=(ut+ht-pt*(ct+ht))/2;let mt=ft[0],_t=ft[1];mt[0]>_t[0]&&(mt=ft[1],_t=ft[0]);const yt=Math.atan((_t[1]-mt[1])/(_t[0]-mt[0]));for(let bt=0;bt<pt;bt++){const xt=bt*(ct+ht),wt=xt+ct,Ct=[mt[0]+xt*Math.cos(yt)+gt*Math.cos(yt),mt[1]+xt*Math.sin(yt)+gt*Math.sin(yt)],St=[mt[0]+wt*Math.cos(yt)+gt*Math.cos(yt),mt[1]+wt*Math.sin(yt)+gt*Math.sin(yt)];dt.push(...this.helper.doubleLineOps(Ct[0],Ct[1],St[0],St[1],lt))}})),dt}}class l{constructor(it){this.helper=it}fillPolygons(it,lt){const ct=lt.hachureGap<0?4*lt.strokeWidth:lt.hachureGap,ht=lt.zigzagOffset<0?ct:lt.zigzagOffset,dt=n(it,lt=Object.assign({},lt,{hachureGap:ct+ht}));return{type:"fillSketch",ops:this.zigzagLines(dt,ht,lt)}}zigzagLines(it,lt,ct){const ht=[];return it.forEach((dt=>{const ft=a(dt),ut=Math.round(ft/(2*lt));let pt=dt[0],gt=dt[1];pt[0]>gt[0]&&(pt=dt[1],gt=dt[0]);const mt=Math.atan((gt[1]-pt[1])/(gt[0]-pt[0]));for(let _t=0;_t<ut;_t++){const yt=2*_t*lt,bt=2*(_t+1)*lt,xt=Math.sqrt(2*Math.pow(lt,2)),wt=[pt[0]+yt*Math.cos(mt),pt[1]+yt*Math.sin(mt)],Ct=[pt[0]+bt*Math.cos(mt),pt[1]+bt*Math.sin(mt)],St=[wt[0]+xt*Math.cos(mt+Math.PI/4),wt[1]+xt*Math.sin(mt+Math.PI/4)];ht.push(...this.helper.doubleLineOps(wt[0],wt[1],St[0],St[1],ct),...this.helper.doubleLineOps(St[0],St[1],Ct[0],Ct[1],ct))}})),ht}}const u={};class p{constructor(it){this.seed=it}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const f=0,d=1,g=2,M={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function k(rt,it){return rt.type===it}function b(rt){const it=[],lt=(function(ft){const ut=new Array;for(;ft!=="";)if(ft.match(/^([ \t\r\n,]+)/))ft=ft.substr(RegExp.$1.length);else if(ft.match(/^([aAcChHlLmMqQsStTvVzZ])/))ut[ut.length]={type:f,text:RegExp.$1},ft=ft.substr(RegExp.$1.length);else{if(!ft.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];ut[ut.length]={type:d,text:`${parseFloat(RegExp.$1)}`},ft=ft.substr(RegExp.$1.length)}return ut[ut.length]={type:g,text:""},ut})(rt);let ct="BOD",ht=0,dt=lt[ht];for(;!k(dt,g);){let ft=0;const ut=[];if(ct==="BOD"){if(dt.text!=="M"&&dt.text!=="m")return b("M0,0"+rt);ht++,ft=M[dt.text],ct=dt.text}else k(dt,d)?ft=M[ct]:(ht++,ft=M[dt.text],ct=dt.text);if(!(ht+ft<lt.length))throw new Error("Path data ended short");for(let pt=ht;pt<ht+ft;pt++){const gt=lt[pt];if(!k(gt,d))throw new Error("Param not a number: "+ct+","+gt.text);ut[ut.length]=+gt.text}if(typeof M[ct]!="number")throw new Error("Bad segment: "+ct);{const pt={key:ct,data:ut};it.push(pt),ht+=ft,dt=lt[ht],ct==="M"&&(ct="L"),ct==="m"&&(ct="l")}}return it}function y(rt){let it=0,lt=0,ct=0,ht=0;const dt=[];for(const{key:ft,data:ut}of rt)switch(ft){case"M":dt.push({key:"M",data:[...ut]}),[it,lt]=ut,[ct,ht]=ut;break;case"m":it+=ut[0],lt+=ut[1],dt.push({key:"M",data:[it,lt]}),ct=it,ht=lt;break;case"L":dt.push({key:"L",data:[...ut]}),[it,lt]=ut;break;case"l":it+=ut[0],lt+=ut[1],dt.push({key:"L",data:[it,lt]});break;case"C":dt.push({key:"C",data:[...ut]}),it=ut[4],lt=ut[5];break;case"c":{const pt=ut.map(((gt,mt)=>mt%2?gt+lt:gt+it));dt.push({key:"C",data:pt}),it=pt[4],lt=pt[5];break}case"Q":dt.push({key:"Q",data:[...ut]}),it=ut[2],lt=ut[3];break;case"q":{const pt=ut.map(((gt,mt)=>mt%2?gt+lt:gt+it));dt.push({key:"Q",data:pt}),it=pt[2],lt=pt[3];break}case"A":dt.push({key:"A",data:[...ut]}),it=ut[5],lt=ut[6];break;case"a":it+=ut[5],lt+=ut[6],dt.push({key:"A",data:[ut[0],ut[1],ut[2],ut[3],ut[4],it,lt]});break;case"H":dt.push({key:"H",data:[...ut]}),it=ut[0];break;case"h":it+=ut[0],dt.push({key:"H",data:[it]});break;case"V":dt.push({key:"V",data:[...ut]}),lt=ut[0];break;case"v":lt+=ut[0],dt.push({key:"V",data:[lt]});break;case"S":dt.push({key:"S",data:[...ut]}),it=ut[2],lt=ut[3];break;case"s":{const pt=ut.map(((gt,mt)=>mt%2?gt+lt:gt+it));dt.push({key:"S",data:pt}),it=pt[2],lt=pt[3];break}case"T":dt.push({key:"T",data:[...ut]}),it=ut[0],lt=ut[1];break;case"t":it+=ut[0],lt+=ut[1],dt.push({key:"T",data:[it,lt]});break;case"Z":case"z":dt.push({key:"Z",data:[]}),it=ct,lt=ht}return dt}function m(rt){const it=[];let lt="",ct=0,ht=0,dt=0,ft=0,ut=0,pt=0;for(const{key:gt,data:mt}of rt){switch(gt){case"M":it.push({key:"M",data:[...mt]}),[ct,ht]=mt,[dt,ft]=mt;break;case"C":it.push({key:"C",data:[...mt]}),ct=mt[4],ht=mt[5],ut=mt[2],pt=mt[3];break;case"L":it.push({key:"L",data:[...mt]}),[ct,ht]=mt;break;case"H":ct=mt[0],it.push({key:"L",data:[ct,ht]});break;case"V":ht=mt[0],it.push({key:"L",data:[ct,ht]});break;case"S":{let _t=0,yt=0;lt==="C"||lt==="S"?(_t=ct+(ct-ut),yt=ht+(ht-pt)):(_t=ct,yt=ht),it.push({key:"C",data:[_t,yt,...mt]}),ut=mt[0],pt=mt[1],ct=mt[2],ht=mt[3];break}case"T":{const[_t,yt]=mt;let bt=0,xt=0;lt==="Q"||lt==="T"?(bt=ct+(ct-ut),xt=ht+(ht-pt)):(bt=ct,xt=ht);const wt=ct+2*(bt-ct)/3,Ct=ht+2*(xt-ht)/3,St=_t+2*(bt-_t)/3,Tt=yt+2*(xt-yt)/3;it.push({key:"C",data:[wt,Ct,St,Tt,_t,yt]}),ut=bt,pt=xt,ct=_t,ht=yt;break}case"Q":{const[_t,yt,bt,xt]=mt,wt=ct+2*(_t-ct)/3,Ct=ht+2*(yt-ht)/3,St=bt+2*(_t-bt)/3,Tt=xt+2*(yt-xt)/3;it.push({key:"C",data:[wt,Ct,St,Tt,bt,xt]}),ut=_t,pt=yt,ct=bt,ht=xt;break}case"A":{const _t=Math.abs(mt[0]),yt=Math.abs(mt[1]),bt=mt[2],xt=mt[3],wt=mt[4],Ct=mt[5],St=mt[6];_t===0||yt===0?(it.push({key:"C",data:[ct,ht,Ct,St,Ct,St]}),ct=Ct,ht=St):(ct!==Ct||ht!==St)&&(x(ct,ht,Ct,St,_t,yt,bt,xt,wt).forEach((function(Tt){it.push({key:"C",data:Tt})})),ct=Ct,ht=St);break}case"Z":it.push({key:"Z",data:[]}),ct=dt,ht=ft}lt=gt}return it}function w(rt,it,lt){return[rt*Math.cos(lt)-it*Math.sin(lt),rt*Math.sin(lt)+it*Math.cos(lt)]}function x(rt,it,lt,ct,ht,dt,ft,ut,pt,gt){const mt=(_t=ft,Math.PI*_t/180);var _t;let yt=[],bt=0,xt=0,wt=0,Ct=0;if(gt)[bt,xt,wt,Ct]=gt;else{[rt,it]=w(rt,it,-mt),[lt,ct]=w(lt,ct,-mt);const Ht=(rt-lt)/2,Nt=(it-ct)/2;let Ot=Ht*Ht/(ht*ht)+Nt*Nt/(dt*dt);Ot>1&&(Ot=Math.sqrt(Ot),ht*=Ot,dt*=Ot);const Mt=ht*ht,zt=dt*dt,Ft=Mt*zt-Mt*Nt*Nt-zt*Ht*Ht,Wt=Mt*Nt*Nt+zt*Ht*Ht,jt=(ut===pt?-1:1)*Math.sqrt(Math.abs(Ft/Wt));wt=jt*ht*Nt/dt+(rt+lt)/2,Ct=jt*-dt*Ht/ht+(it+ct)/2,bt=Math.asin(parseFloat(((it-Ct)/dt).toFixed(9))),xt=Math.asin(parseFloat(((ct-Ct)/dt).toFixed(9))),rt<wt&&(bt=Math.PI-bt),lt<wt&&(xt=Math.PI-xt),bt<0&&(bt=2*Math.PI+bt),xt<0&&(xt=2*Math.PI+xt),pt&&bt>xt&&(bt-=2*Math.PI),!pt&&xt>bt&&(xt-=2*Math.PI)}let St=xt-bt;if(Math.abs(St)>120*Math.PI/180){const Ht=xt,Nt=lt,Ot=ct;xt=pt&&xt>bt?bt+120*Math.PI/180*1:bt+120*Math.PI/180*-1,yt=x(lt=wt+ht*Math.cos(xt),ct=Ct+dt*Math.sin(xt),Nt,Ot,ht,dt,ft,0,pt,[xt,Ht,wt,Ct])}St=xt-bt;const Tt=Math.cos(bt),vt=Math.sin(bt),kt=Math.cos(xt),Et=Math.sin(xt),Lt=Math.tan(St/4),At=4/3*ht*Lt,It=4/3*dt*Lt,Bt=[rt,it],Dt=[rt+At*vt,it-It*Tt],Rt=[lt+At*Et,ct-It*kt],Pt=[lt,ct];if(Dt[0]=2*Bt[0]-Dt[0],Dt[1]=2*Bt[1]-Dt[1],gt)return[Dt,Rt,Pt].concat(yt);{yt=[Dt,Rt,Pt].concat(yt);const Ht=[];for(let Nt=0;Nt<yt.length;Nt+=3){const Ot=w(yt[Nt][0],yt[Nt][1],mt),Mt=w(yt[Nt+1][0],yt[Nt+1][1],mt),zt=w(yt[Nt+2][0],yt[Nt+2][1],mt);Ht.push([Ot[0],Ot[1],Mt[0],Mt[1],zt[0],zt[1]])}return Ht}}const P={randOffset:function(rt,it){return G(rt,it)},randOffsetWithRange:function(rt,it,lt){return E(rt,it,lt)},ellipse:function(rt,it,lt,ct,ht){const dt=T(lt,ct,ht);return D(rt,it,ht,dt).opset},doubleLineOps:function(rt,it,lt,ct,ht){return $(rt,it,lt,ct,ht,!0)}};function v(rt,it,lt,ct,ht){return{type:"path",ops:$(rt,it,lt,ct,ht)}}function S(rt,it,lt){const ct=(rt||[]).length;if(ct>2){const ht=[];for(let dt=0;dt<ct-1;dt++)ht.push(...$(rt[dt][0],rt[dt][1],rt[dt+1][0],rt[dt+1][1],lt));return it&&ht.push(...$(rt[ct-1][0],rt[ct-1][1],rt[0][0],rt[0][1],lt)),{type:"path",ops:ht}}return ct===2?v(rt[0][0],rt[0][1],rt[1][0],rt[1][1],lt):{type:"path",ops:[]}}function O(rt,it,lt,ct,ht){return(function(dt,ft){return S(dt,!0,ft)})([[rt,it],[rt+lt,it],[rt+lt,it+ct],[rt,it+ct]],ht)}function L(rt,it){if(rt.length){const lt=typeof rt[0][0]=="number"?[rt]:rt,ct=j(lt[0],1*(1+.2*it.roughness),it),ht=it.disableMultiStroke?[]:j(lt[0],1.5*(1+.22*it.roughness),z(it));for(let dt=1;dt<lt.length;dt++){const ft=lt[dt];if(ft.length){const ut=j(ft,1*(1+.2*it.roughness),it),pt=it.disableMultiStroke?[]:j(ft,1.5*(1+.22*it.roughness),z(it));for(const gt of ut)gt.op!=="move"&&ct.push(gt);for(const gt of pt)gt.op!=="move"&&ht.push(gt)}}return{type:"path",ops:ct.concat(ht)}}return{type:"path",ops:[]}}function T(rt,it,lt){const ct=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(rt/2,2)+Math.pow(it/2,2))/2)),ht=Math.ceil(Math.max(lt.curveStepCount,lt.curveStepCount/Math.sqrt(200)*ct)),dt=2*Math.PI/ht;let ft=Math.abs(rt/2),ut=Math.abs(it/2);const pt=1-lt.curveFitting;return ft+=G(ft*pt,lt),ut+=G(ut*pt,lt),{increment:dt,rx:ft,ry:ut}}function D(rt,it,lt,ct){const[ht,dt]=F(ct.increment,rt,it,ct.rx,ct.ry,1,ct.increment*E(.1,E(.4,1,lt),lt),lt);let ft=q(ht,null,lt);if(!lt.disableMultiStroke&&lt.roughness!==0){const[ut]=F(ct.increment,rt,it,ct.rx,ct.ry,1.5,0,lt),pt=q(ut,null,lt);ft=ft.concat(pt)}return{estimatedPoints:dt,opset:{type:"path",ops:ft}}}function A(rt,it,lt,ct,ht,dt,ft,ut,pt){const gt=rt,mt=it;let _t=Math.abs(lt/2),yt=Math.abs(ct/2);_t+=G(.01*_t,pt),yt+=G(.01*yt,pt);let bt=ht,xt=dt;for(;bt<0;)bt+=2*Math.PI,xt+=2*Math.PI;xt-bt>2*Math.PI&&(bt=0,xt=2*Math.PI);const wt=2*Math.PI/pt.curveStepCount,Ct=Math.min(wt/2,(xt-bt)/2),St=V(Ct,gt,mt,_t,yt,bt,xt,1,pt);if(!pt.disableMultiStroke){const Tt=V(Ct,gt,mt,_t,yt,bt,xt,1.5,pt);St.push(...Tt)}return ft&&(ut?St.push(...$(gt,mt,gt+_t*Math.cos(bt),mt+yt*Math.sin(bt),pt),...$(gt,mt,gt+_t*Math.cos(xt),mt+yt*Math.sin(xt),pt)):St.push({op:"lineTo",data:[gt,mt]},{op:"lineTo",data:[gt+_t*Math.cos(bt),mt+yt*Math.sin(bt)]})),{type:"path",ops:St}}function _(rt,it){const lt=m(y(b(rt))),ct=[];let ht=[0,0],dt=[0,0];for(const{key:ft,data:ut}of lt)switch(ft){case"M":dt=[ut[0],ut[1]],ht=[ut[0],ut[1]];break;case"L":ct.push(...$(dt[0],dt[1],ut[0],ut[1],it)),dt=[ut[0],ut[1]];break;case"C":{const[pt,gt,mt,_t,yt,bt]=ut;ct.push(...Z(pt,gt,mt,_t,yt,bt,dt,it)),dt=[yt,bt];break}case"Z":ct.push(...$(dt[0],dt[1],ht[0],ht[1],it)),dt=[ht[0],ht[1]]}return{type:"path",ops:ct}}function I(rt,it){const lt=[];for(const ct of rt)if(ct.length){const ht=it.maxRandomnessOffset||0,dt=ct.length;if(dt>2){lt.push({op:"move",data:[ct[0][0]+G(ht,it),ct[0][1]+G(ht,it)]});for(let ft=1;ft<dt;ft++)lt.push({op:"lineTo",data:[ct[ft][0]+G(ht,it),ct[ft][1]+G(ht,it)]})}}return{type:"fillPath",ops:lt}}function C(rt,it){return(function(lt,ct){let ht=lt.fillStyle||"hachure";if(!u[ht])switch(ht){case"zigzag":u[ht]||(u[ht]=new h(ct));break;case"cross-hatch":u[ht]||(u[ht]=new r(ct));break;case"dots":u[ht]||(u[ht]=new i(ct));break;case"dashed":u[ht]||(u[ht]=new c(ct));break;case"zigzag-line":u[ht]||(u[ht]=new l(ct));break;default:ht="hachure",u[ht]||(u[ht]=new o(ct))}return u[ht]})(it,P).fillPolygons(rt,it)}function z(rt){const it=Object.assign({},rt);return it.randomizer=void 0,rt.seed&&(it.seed=rt.seed+1),it}function W(rt){return rt.randomizer||(rt.randomizer=new p(rt.seed||0)),rt.randomizer.next()}function E(rt,it,lt,ct=1){return lt.roughness*ct*(W(lt)*(it-rt)+rt)}function G(rt,it,lt=1){return E(-rt,rt,it,lt)}function $(rt,it,lt,ct,ht,dt=!1){const ft=dt?ht.disableMultiStrokeFill:ht.disableMultiStroke,ut=R(rt,it,lt,ct,ht,!0,!1);if(ft)return ut;const pt=R(rt,it,lt,ct,ht,!0,!0);return ut.concat(pt)}function R(rt,it,lt,ct,ht,dt,ft){const ut=Math.pow(rt-lt,2)+Math.pow(it-ct,2),pt=Math.sqrt(ut);let gt=1;gt=pt<200?1:pt>500?.4:-.0016668*pt+1.233334;let mt=ht.maxRandomnessOffset||0;mt*mt*100>ut&&(mt=pt/10);const _t=mt/2,yt=.2+.2*W(ht);let bt=ht.bowing*ht.maxRandomnessOffset*(ct-it)/200,xt=ht.bowing*ht.maxRandomnessOffset*(rt-lt)/200;bt=G(bt,ht,gt),xt=G(xt,ht,gt);const wt=[],Ct=()=>G(_t,ht,gt),St=()=>G(mt,ht,gt),Tt=ht.preserveVertices;return ft?wt.push({op:"move",data:[rt+(Tt?0:Ct()),it+(Tt?0:Ct())]}):wt.push({op:"move",data:[rt+(Tt?0:G(mt,ht,gt)),it+(Tt?0:G(mt,ht,gt))]}),ft?wt.push({op:"bcurveTo",data:[bt+rt+(lt-rt)*yt+Ct(),xt+it+(ct-it)*yt+Ct(),bt+rt+2*(lt-rt)*yt+Ct(),xt+it+2*(ct-it)*yt+Ct(),lt+(Tt?0:Ct()),ct+(Tt?0:Ct())]}):wt.push({op:"bcurveTo",data:[bt+rt+(lt-rt)*yt+St(),xt+it+(ct-it)*yt+St(),bt+rt+2*(lt-rt)*yt+St(),xt+it+2*(ct-it)*yt+St(),lt+(Tt?0:St()),ct+(Tt?0:St())]}),wt}function j(rt,it,lt){if(!rt.length)return[];const ct=[];ct.push([rt[0][0]+G(it,lt),rt[0][1]+G(it,lt)]),ct.push([rt[0][0]+G(it,lt),rt[0][1]+G(it,lt)]);for(let ht=1;ht<rt.length;ht++)ct.push([rt[ht][0]+G(it,lt),rt[ht][1]+G(it,lt)]),ht===rt.length-1&&ct.push([rt[ht][0]+G(it,lt),rt[ht][1]+G(it,lt)]);return q(ct,null,lt)}function q(rt,it,lt){const ct=rt.length,ht=[];if(ct>3){const dt=[],ft=1-lt.curveTightness;ht.push({op:"move",data:[rt[1][0],rt[1][1]]});for(let ut=1;ut+2<ct;ut++){const pt=rt[ut];dt[0]=[pt[0],pt[1]],dt[1]=[pt[0]+(ft*rt[ut+1][0]-ft*rt[ut-1][0])/6,pt[1]+(ft*rt[ut+1][1]-ft*rt[ut-1][1])/6],dt[2]=[rt[ut+1][0]+(ft*rt[ut][0]-ft*rt[ut+2][0])/6,rt[ut+1][1]+(ft*rt[ut][1]-ft*rt[ut+2][1])/6],dt[3]=[rt[ut+1][0],rt[ut+1][1]],ht.push({op:"bcurveTo",data:[dt[1][0],dt[1][1],dt[2][0],dt[2][1],dt[3][0],dt[3][1]]})}}else ct===3?(ht.push({op:"move",data:[rt[1][0],rt[1][1]]}),ht.push({op:"bcurveTo",data:[rt[1][0],rt[1][1],rt[2][0],rt[2][1],rt[2][0],rt[2][1]]})):ct===2&&ht.push(...R(rt[0][0],rt[0][1],rt[1][0],rt[1][1],lt,!0,!0));return ht}function F(rt,it,lt,ct,ht,dt,ft,ut){const pt=[],gt=[];if(ut.roughness===0){rt/=4,gt.push([it+ct*Math.cos(-rt),lt+ht*Math.sin(-rt)]);for(let mt=0;mt<=2*Math.PI;mt+=rt){const _t=[it+ct*Math.cos(mt),lt+ht*Math.sin(mt)];pt.push(_t),gt.push(_t)}gt.push([it+ct*Math.cos(0),lt+ht*Math.sin(0)]),gt.push([it+ct*Math.cos(rt),lt+ht*Math.sin(rt)])}else{const mt=G(.5,ut)-Math.PI/2;gt.push([G(dt,ut)+it+.9*ct*Math.cos(mt-rt),G(dt,ut)+lt+.9*ht*Math.sin(mt-rt)]);const _t=2*Math.PI+mt-.01;for(let yt=mt;yt<_t;yt+=rt){const bt=[G(dt,ut)+it+ct*Math.cos(yt),G(dt,ut)+lt+ht*Math.sin(yt)];pt.push(bt),gt.push(bt)}gt.push([G(dt,ut)+it+ct*Math.cos(mt+2*Math.PI+.5*ft),G(dt,ut)+lt+ht*Math.sin(mt+2*Math.PI+.5*ft)]),gt.push([G(dt,ut)+it+.98*ct*Math.cos(mt+ft),G(dt,ut)+lt+.98*ht*Math.sin(mt+ft)]),gt.push([G(dt,ut)+it+.9*ct*Math.cos(mt+.5*ft),G(dt,ut)+lt+.9*ht*Math.sin(mt+.5*ft)])}return[gt,pt]}function V(rt,it,lt,ct,ht,dt,ft,ut,pt){const gt=dt+G(.1,pt),mt=[];mt.push([G(ut,pt)+it+.9*ct*Math.cos(gt-rt),G(ut,pt)+lt+.9*ht*Math.sin(gt-rt)]);for(let _t=gt;_t<=ft;_t+=rt)mt.push([G(ut,pt)+it+ct*Math.cos(_t),G(ut,pt)+lt+ht*Math.sin(_t)]);return mt.push([it+ct*Math.cos(ft),lt+ht*Math.sin(ft)]),mt.push([it+ct*Math.cos(ft),lt+ht*Math.sin(ft)]),q(mt,null,pt)}function Z(rt,it,lt,ct,ht,dt,ft,ut){const pt=[],gt=[ut.maxRandomnessOffset||1,(ut.maxRandomnessOffset||1)+.3];let mt=[0,0];const _t=ut.disableMultiStroke?1:2,yt=ut.preserveVertices;for(let bt=0;bt<_t;bt++)bt===0?pt.push({op:"move",data:[ft[0],ft[1]]}):pt.push({op:"move",data:[ft[0]+(yt?0:G(gt[0],ut)),ft[1]+(yt?0:G(gt[0],ut))]}),mt=yt?[ht,dt]:[ht+G(gt[bt],ut),dt+G(gt[bt],ut)],pt.push({op:"bcurveTo",data:[rt+G(gt[bt],ut),it+G(gt[bt],ut),lt+G(gt[bt],ut),ct+G(gt[bt],ut),mt[0],mt[1]]});return pt}function Q(rt){return[...rt]}function H(rt,it=0){const lt=rt.length;if(lt<3)throw new Error("A curve must have at least three points.");const ct=[];if(lt===3)ct.push(Q(rt[0]),Q(rt[1]),Q(rt[2]),Q(rt[2]));else{const ht=[];ht.push(rt[0],rt[0]);for(let ut=1;ut<rt.length;ut++)ht.push(rt[ut]),ut===rt.length-1&&ht.push(rt[ut]);const dt=[],ft=1-it;ct.push(Q(ht[0]));for(let ut=1;ut+2<ht.length;ut++){const pt=ht[ut];dt[0]=[pt[0],pt[1]],dt[1]=[pt[0]+(ft*ht[ut+1][0]-ft*ht[ut-1][0])/6,pt[1]+(ft*ht[ut+1][1]-ft*ht[ut-1][1])/6],dt[2]=[ht[ut+1][0]+(ft*ht[ut][0]-ft*ht[ut+2][0])/6,ht[ut+1][1]+(ft*ht[ut][1]-ft*ht[ut+2][1])/6],dt[3]=[ht[ut+1][0],ht[ut+1][1]],ct.push(dt[1],dt[2],dt[3])}}return ct}function N(rt,it){return Math.pow(rt[0]-it[0],2)+Math.pow(rt[1]-it[1],2)}function B(rt,it,lt){const ct=N(it,lt);if(ct===0)return N(rt,it);let ht=((rt[0]-it[0])*(lt[0]-it[0])+(rt[1]-it[1])*(lt[1]-it[1]))/ct;return ht=Math.max(0,Math.min(1,ht)),N(rt,J(it,lt,ht))}function J(rt,it,lt){return[rt[0]+(it[0]-rt[0])*lt,rt[1]+(it[1]-rt[1])*lt]}function K(rt,it,lt,ct){const ht=ct||[];if((function(ut,pt){const gt=ut[pt+0],mt=ut[pt+1],_t=ut[pt+2],yt=ut[pt+3];let bt=3*mt[0]-2*gt[0]-yt[0];bt*=bt;let xt=3*mt[1]-2*gt[1]-yt[1];xt*=xt;let wt=3*_t[0]-2*yt[0]-gt[0];wt*=wt;let Ct=3*_t[1]-2*yt[1]-gt[1];return Ct*=Ct,bt<wt&&(bt=wt),xt<Ct&&(xt=Ct),bt+xt})(rt,it)<lt){const ut=rt[it+0];ht.length?(dt=ht[ht.length-1],ft=ut,Math.sqrt(N(dt,ft))>1&&ht.push(ut)):ht.push(ut),ht.push(rt[it+3])}else{const pt=rt[it+0],gt=rt[it+1],mt=rt[it+2],_t=rt[it+3],yt=J(pt,gt,.5),bt=J(gt,mt,.5),xt=J(mt,_t,.5),wt=J(yt,bt,.5),Ct=J(bt,xt,.5),St=J(wt,Ct,.5);K([pt,yt,wt,St],0,lt,ht),K([St,Ct,xt,_t],0,lt,ht)}var dt,ft;return ht}function U(rt,it){return X(rt,0,rt.length,it)}function X(rt,it,lt,ct,ht){const dt=ht||[],ft=rt[it],ut=rt[lt-1];let pt=0,gt=1;for(let mt=it+1;mt<lt-1;++mt){const _t=B(rt[mt],ft,ut);_t>pt&&(pt=_t,gt=mt)}return Math.sqrt(pt)>ct?(X(rt,it,gt+1,ct,dt),X(rt,gt,lt,ct,dt)):(dt.length||dt.push(ft),dt.push(ut)),dt}function Y(rt,it=.15,lt){const ct=[],ht=(rt.length-1)/3;for(let dt=0;dt<ht;dt++)K(rt,3*dt,it,ct);return lt&&lt>0?X(ct,0,ct.length,lt):ct}const tt="none";class et{constructor(it){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=it||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(it){return it?Object.assign({},this.defaultOptions,it):this.defaultOptions}_d(it,lt,ct){return{shape:it,sets:lt||[],options:ct||this.defaultOptions}}line(it,lt,ct,ht,dt){const ft=this._o(dt);return this._d("line",[v(it,lt,ct,ht,ft)],ft)}rectangle(it,lt,ct,ht,dt){const ft=this._o(dt),ut=[],pt=O(it,lt,ct,ht,ft);if(ft.fill){const gt=[[it,lt],[it+ct,lt],[it+ct,lt+ht],[it,lt+ht]];ft.fillStyle==="solid"?ut.push(I([gt],ft)):ut.push(C([gt],ft))}return ft.stroke!==tt&&ut.push(pt),this._d("rectangle",ut,ft)}ellipse(it,lt,ct,ht,dt){const ft=this._o(dt),ut=[],pt=T(ct,ht,ft),gt=D(it,lt,ft,pt);if(ft.fill)if(ft.fillStyle==="solid"){const mt=D(it,lt,ft,pt).opset;mt.type="fillPath",ut.push(mt)}else ut.push(C([gt.estimatedPoints],ft));return ft.stroke!==tt&&ut.push(gt.opset),this._d("ellipse",ut,ft)}circle(it,lt,ct,ht){const dt=this.ellipse(it,lt,ct,ct,ht);return dt.shape="circle",dt}linearPath(it,lt){const ct=this._o(lt);return this._d("linearPath",[S(it,!1,ct)],ct)}arc(it,lt,ct,ht,dt,ft,ut=!1,pt){const gt=this._o(pt),mt=[],_t=A(it,lt,ct,ht,dt,ft,ut,!0,gt);if(ut&&gt.fill)if(gt.fillStyle==="solid"){const yt=Object.assign({},gt);yt.disableMultiStroke=!0;const bt=A(it,lt,ct,ht,dt,ft,!0,!1,yt);bt.type="fillPath",mt.push(bt)}else mt.push((function(yt,bt,xt,wt,Ct,St,Tt){const vt=yt,kt=bt;let Et=Math.abs(xt/2),Lt=Math.abs(wt/2);Et+=G(.01*Et,Tt),Lt+=G(.01*Lt,Tt);let At=Ct,It=St;for(;At<0;)At+=2*Math.PI,It+=2*Math.PI;It-At>2*Math.PI&&(At=0,It=2*Math.PI);const Bt=(It-At)/Tt.curveStepCount,Dt=[];for(let Rt=At;Rt<=It;Rt+=Bt)Dt.push([vt+Et*Math.cos(Rt),kt+Lt*Math.sin(Rt)]);return Dt.push([vt+Et*Math.cos(It),kt+Lt*Math.sin(It)]),Dt.push([vt,kt]),C([Dt],Tt)})(it,lt,ct,ht,dt,ft,gt));return gt.stroke!==tt&&mt.push(_t),this._d("arc",mt,gt)}curve(it,lt){const ct=this._o(lt),ht=[],dt=L(it,ct);if(ct.fill&&ct.fill!==tt)if(ct.fillStyle==="solid"){const ft=L(it,Object.assign(Object.assign({},ct),{disableMultiStroke:!0,roughness:ct.roughness?ct.roughness+ct.fillShapeRoughnessGain:0}));ht.push({type:"fillPath",ops:this._mergedShape(ft.ops)})}else{const ft=[],ut=it;if(ut.length){const pt=typeof ut[0][0]=="number"?[ut]:ut;for(const gt of pt)gt.length<3?ft.push(...gt):gt.length===3?ft.push(...Y(H([gt[0],gt[0],gt[1],gt[2]]),10,(1+ct.roughness)/2)):ft.push(...Y(H(gt),10,(1+ct.roughness)/2))}ft.length&&ht.push(C([ft],ct))}return ct.stroke!==tt&&ht.push(dt),this._d("curve",ht,ct)}polygon(it,lt){const ct=this._o(lt),ht=[],dt=S(it,!0,ct);return ct.fill&&(ct.fillStyle==="solid"?ht.push(I([it],ct)):ht.push(C([it],ct))),ct.stroke!==tt&&ht.push(dt),this._d("polygon",ht,ct)}path(it,lt){const ct=this._o(lt),ht=[];if(!it)return this._d("path",ht,ct);it=(it||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const dt=ct.fill&&ct.fill!=="transparent"&&ct.fill!==tt,ft=ct.stroke!==tt,ut=!!(ct.simplification&&ct.simplification<1),pt=(function(mt,_t,yt){const bt=m(y(b(mt))),xt=[];let wt=[],Ct=[0,0],St=[];const Tt=()=>{St.length>=4&&wt.push(...Y(St,_t)),St=[]},vt=()=>{Tt(),wt.length&&(xt.push(wt),wt=[])};for(const{key:Et,data:Lt}of bt)switch(Et){case"M":vt(),Ct=[Lt[0],Lt[1]],wt.push(Ct);break;case"L":Tt(),wt.push([Lt[0],Lt[1]]);break;case"C":if(!St.length){const At=wt.length?wt[wt.length-1]:Ct;St.push([At[0],At[1]])}St.push([Lt[0],Lt[1]]),St.push([Lt[2],Lt[3]]),St.push([Lt[4],Lt[5]]);break;case"Z":Tt(),wt.push([Ct[0],Ct[1]])}if(vt(),!yt)return xt;const kt=[];for(const Et of xt){const Lt=U(Et,yt);Lt.length&&kt.push(Lt)}return kt})(it,1,ut?4-4*(ct.simplification||1):(1+ct.roughness)/2),gt=_(it,ct);if(dt)if(ct.fillStyle==="solid")if(pt.length===1){const mt=_(it,Object.assign(Object.assign({},ct),{disableMultiStroke:!0,roughness:ct.roughness?ct.roughness+ct.fillShapeRoughnessGain:0}));ht.push({type:"fillPath",ops:this._mergedShape(mt.ops)})}else ht.push(I(pt,ct));else ht.push(C(pt,ct));return ft&&(ut?pt.forEach((mt=>{ht.push(S(mt,!1,ct))})):ht.push(gt)),this._d("path",ht,ct)}opsToPath(it,lt){let ct="";for(const ht of it.ops){const dt=typeof lt=="number"&&lt>=0?ht.data.map((ft=>+ft.toFixed(lt))):ht.data;switch(ht.op){case"move":ct+=`M${dt[0]} ${dt[1]} `;break;case"bcurveTo":ct+=`C${dt[0]} ${dt[1]}, ${dt[2]} ${dt[3]}, ${dt[4]} ${dt[5]} `;break;case"lineTo":ct+=`L${dt[0]} ${dt[1]} `}}return ct.trim()}toPaths(it){const lt=it.sets||[],ct=it.options||this.defaultOptions,ht=[];for(const dt of lt){let ft=null;switch(dt.type){case"path":ft={d:this.opsToPath(dt),stroke:ct.stroke,strokeWidth:ct.strokeWidth,fill:tt};break;case"fillPath":ft={d:this.opsToPath(dt),stroke:tt,strokeWidth:0,fill:ct.fill||tt};break;case"fillSketch":ft=this.fillSketch(dt,ct)}ft&&ht.push(ft)}return ht}fillSketch(it,lt){let ct=lt.fillWeight;return ct<0&&(ct=lt.strokeWidth/2),{d:this.opsToPath(it),stroke:lt.fill||tt,strokeWidth:ct,fill:tt}}_mergedShape(it){return it.filter(((lt,ct)=>ct===0||lt.op!=="move"))}}class st{constructor(it,lt){this.canvas=it,this.ctx=this.canvas.getContext("2d"),this.gen=new et(lt)}draw(it){const lt=it.sets||[],ct=it.options||this.getDefaultOptions(),ht=this.ctx,dt=it.options.fixedDecimalPlaceDigits;for(const ft of lt)switch(ft.type){case"path":ht.save(),ht.strokeStyle=ct.stroke==="none"?"transparent":ct.stroke,ht.lineWidth=ct.strokeWidth,ct.strokeLineDash&&ht.setLineDash(ct.strokeLineDash),ct.strokeLineDashOffset&&(ht.lineDashOffset=ct.strokeLineDashOffset),this._drawToContext(ht,ft,dt),ht.restore();break;case"fillPath":{ht.save(),ht.fillStyle=ct.fill||"";const ut=it.shape==="curve"||it.shape==="polygon"||it.shape==="path"?"evenodd":"nonzero";this._drawToContext(ht,ft,dt,ut),ht.restore();break}case"fillSketch":this.fillSketch(ht,ft,ct)}}fillSketch(it,lt,ct){let ht=ct.fillWeight;ht<0&&(ht=ct.strokeWidth/2),it.save(),ct.fillLineDash&&it.setLineDash(ct.fillLineDash),ct.fillLineDashOffset&&(it.lineDashOffset=ct.fillLineDashOffset),it.strokeStyle=ct.fill||"",it.lineWidth=ht,this._drawToContext(it,lt,ct.fixedDecimalPlaceDigits),it.restore()}_drawToContext(it,lt,ct,ht="nonzero"){it.beginPath();for(const dt of lt.ops){const ft=typeof ct=="number"&&ct>=0?dt.data.map((ut=>+ut.toFixed(ct))):dt.data;switch(dt.op){case"move":it.moveTo(ft[0],ft[1]);break;case"bcurveTo":it.bezierCurveTo(ft[0],ft[1],ft[2],ft[3],ft[4],ft[5]);break;case"lineTo":it.lineTo(ft[0],ft[1])}}lt.type==="fillPath"?it.fill(ht):it.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(it,lt,ct,ht,dt){const ft=this.gen.line(it,lt,ct,ht,dt);return this.draw(ft),ft}rectangle(it,lt,ct,ht,dt){const ft=this.gen.rectangle(it,lt,ct,ht,dt);return this.draw(ft),ft}ellipse(it,lt,ct,ht,dt){const ft=this.gen.ellipse(it,lt,ct,ht,dt);return this.draw(ft),ft}circle(it,lt,ct,ht){const dt=this.gen.circle(it,lt,ct,ht);return this.draw(dt),dt}linearPath(it,lt){const ct=this.gen.linearPath(it,lt);return this.draw(ct),ct}polygon(it,lt){const ct=this.gen.polygon(it,lt);return this.draw(ct),ct}arc(it,lt,ct,ht,dt,ft,ut=!1,pt){const gt=this.gen.arc(it,lt,ct,ht,dt,ft,ut,pt);return this.draw(gt),gt}curve(it,lt){const ct=this.gen.curve(it,lt);return this.draw(ct),ct}path(it,lt){const ct=this.gen.path(it,lt);return this.draw(ct),ct}}const nt="http://www.w3.org/2000/svg";class ot{constructor(it,lt){this.svg=it,this.gen=new et(lt)}draw(it){const lt=it.sets||[],ct=it.options||this.getDefaultOptions(),ht=this.svg.ownerDocument||window.document,dt=ht.createElementNS(nt,"g"),ft=it.options.fixedDecimalPlaceDigits;for(const ut of lt){let pt=null;switch(ut.type){case"path":pt=ht.createElementNS(nt,"path"),pt.setAttribute("d",this.opsToPath(ut,ft)),pt.setAttribute("stroke",ct.stroke),pt.setAttribute("stroke-width",ct.strokeWidth+""),pt.setAttribute("fill","none"),ct.strokeLineDash&&pt.setAttribute("stroke-dasharray",ct.strokeLineDash.join(" ").trim()),ct.strokeLineDashOffset&&pt.setAttribute("stroke-dashoffset",`${ct.strokeLineDashOffset}`);break;case"fillPath":pt=ht.createElementNS(nt,"path"),pt.setAttribute("d",this.opsToPath(ut,ft)),pt.setAttribute("stroke","none"),pt.setAttribute("stroke-width","0"),pt.setAttribute("fill",ct.fill||""),it.shape!=="curve"&&it.shape!=="polygon"||pt.setAttribute("fill-rule","evenodd");break;case"fillSketch":pt=this.fillSketch(ht,ut,ct)}pt&&dt.appendChild(pt)}return dt}fillSketch(it,lt,ct){let ht=ct.fillWeight;ht<0&&(ht=ct.strokeWidth/2);const dt=it.createElementNS(nt,"path");return dt.setAttribute("d",this.opsToPath(lt,ct.fixedDecimalPlaceDigits)),dt.setAttribute("stroke",ct.fill||""),dt.setAttribute("stroke-width",ht+""),dt.setAttribute("fill","none"),ct.fillLineDash&&dt.setAttribute("stroke-dasharray",ct.fillLineDash.join(" ").trim()),ct.fillLineDashOffset&&dt.setAttribute("stroke-dashoffset",`${ct.fillLineDashOffset}`),dt}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(it,lt){return this.gen.opsToPath(it,lt)}line(it,lt,ct,ht,dt){const ft=this.gen.line(it,lt,ct,ht,dt);return this.draw(ft)}rectangle(it,lt,ct,ht,dt){const ft=this.gen.rectangle(it,lt,ct,ht,dt);return this.draw(ft)}ellipse(it,lt,ct,ht,dt){const ft=this.gen.ellipse(it,lt,ct,ht,dt);return this.draw(ft)}circle(it,lt,ct,ht){const dt=this.gen.circle(it,lt,ct,ht);return this.draw(dt)}linearPath(it,lt){const ct=this.gen.linearPath(it,lt);return this.draw(ct)}polygon(it,lt){const ct=this.gen.polygon(it,lt);return this.draw(ct)}arc(it,lt,ct,ht,dt,ft,ut=!1,pt){const gt=this.gen.arc(it,lt,ct,ht,dt,ft,ut,pt);return this.draw(gt)}curve(it,lt){const ct=this.gen.curve(it,lt);return this.draw(ct)}path(it,lt){const ct=this.gen.path(it,lt);return this.draw(ct)}}var at={canvas:(rt,it)=>new st(rt,it),svg:(rt,it)=>new ot(rt,it),generator:rt=>new et(rt),newSeed:()=>et.newSeed()},labelHelper=__name(async(rt,it,lt)=>{let ct;const ht=it.useHtmlLabels||evaluate(getConfig2()?.htmlLabels);lt?ct=lt:ct="node default";const dt=rt.insert("g").attr("class",ct).attr("id",it.domId||it.id),ft=dt.insert("g").attr("class","label").attr("style",handleUndefinedAttr(it.labelStyle));let ut;it.label===void 0?ut="":ut=typeof it.label=="string"?it.label:it.label[0];const pt=await createText(ft,sanitizeText(decodeEntities(ut),getConfig2()),{useHtmlLabels:ht,width:it.width||getConfig2().flowchart?.wrappingWidth,cssClasses:"markdown-node-label",style:it.labelStyle,addSvgBackground:!!it.icon||!!it.img});let gt=pt.getBBox();const mt=(it?.padding??0)/2;if(ht){const _t=pt.children[0],yt=select(pt),bt=_t.getElementsByTagName("img");if(bt){const xt=ut.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...bt].map(wt=>new Promise(Ct=>{function St(){if(wt.style.display="flex",wt.style.flexDirection="column",xt){const Tt=getConfig2().fontSize?getConfig2().fontSize:window.getComputedStyle(document.body).fontSize,vt=5,[kt=defaultConfig_default.fontSize]=parseFontSize(Tt),Et=kt*vt+"px";wt.style.minWidth=Et,wt.style.maxWidth=Et}else wt.style.width="100%";Ct(wt)}__name(St,"setupImage"),setTimeout(()=>{wt.complete&&St()}),wt.addEventListener("error",St),wt.addEventListener("load",St)})))}gt=_t.getBoundingClientRect(),yt.attr("width",gt.width),yt.attr("height",gt.height)}return ht?ft.attr("transform","translate("+-gt.width/2+", "+-gt.height/2+")"):ft.attr("transform","translate(0, "+-gt.height/2+")"),it.centerLabel&&ft.attr("transform","translate("+-gt.width/2+", "+-gt.height/2+")"),ft.insert("rect",":first-child"),{shapeSvg:dt,bbox:gt,halfPadding:mt,label:ft}},"labelHelper"),insertLabel=__name(async(rt,it,lt)=>{const ct=lt.useHtmlLabels||evaluate(getConfig2()?.flowchart?.htmlLabels),ht=rt.insert("g").attr("class","label").attr("style",lt.labelStyle||""),dt=await createText(ht,sanitizeText(decodeEntities(it),getConfig2()),{useHtmlLabels:ct,width:lt.width||getConfig2()?.flowchart?.wrappingWidth,style:lt.labelStyle,addSvgBackground:!!lt.icon||!!lt.img});let ft=dt.getBBox();const ut=lt.padding/2;if(evaluate(getConfig2()?.flowchart?.htmlLabels)){const pt=dt.children[0],gt=select(dt);ft=pt.getBoundingClientRect(),gt.attr("width",ft.width),gt.attr("height",ft.height)}return ct?ht.attr("transform","translate("+-ft.width/2+", "+-ft.height/2+")"):ht.attr("transform","translate(0, "+-ft.height/2+")"),lt.centerLabel&&ht.attr("transform","translate("+-ft.width/2+", "+-ft.height/2+")"),ht.insert("rect",":first-child"),{shapeSvg:rt,bbox:ft,halfPadding:ut,label:ht}},"insertLabel"),updateNodeBounds=__name((rt,it)=>{const lt=it.node().getBBox();rt.width=lt.width,rt.height=lt.height},"updateNodeBounds"),getNodeClasses=__name((rt,it)=>(rt.look==="handDrawn"?"rough-node":"node")+" "+rt.cssClasses+" "+(it||""),"getNodeClasses");function createPathFromPoints(rt){const it=rt.map((lt,ct)=>`${ct===0?"M":"L"}${lt.x},${lt.y}`);return it.push("Z"),it.join(" ")}__name(createPathFromPoints,"createPathFromPoints");function generateFullSineWavePoints(rt,it,lt,ct,ht,dt){const ft=[],pt=lt-rt,gt=ct-it,mt=pt/dt,_t=2*Math.PI/mt,yt=it+gt/2;for(let bt=0;bt<=50;bt++){const xt=bt/50,wt=rt+xt*pt,Ct=yt+ht*Math.sin(_t*(wt-rt));ft.push({x:wt,y:Ct})}return ft}__name(generateFullSineWavePoints,"generateFullSineWavePoints");function generateCirclePoints(rt,it,lt,ct,ht,dt){const ft=[],ut=ht*Math.PI/180,mt=(dt*Math.PI/180-ut)/(ct-1);for(let _t=0;_t<ct;_t++){const yt=ut+_t*mt,bt=rt+lt*Math.cos(yt),xt=it+lt*Math.sin(yt);ft.push({x:-bt,y:-xt})}return ft}__name(generateCirclePoints,"generateCirclePoints");var intersectRect=__name((rt,it)=>{var lt=rt.x,ct=rt.y,ht=it.x-lt,dt=it.y-ct,ft=rt.width/2,ut=rt.height/2,pt,gt;return Math.abs(dt)*ft>Math.abs(ht)*ut?(dt<0&&(ut=-ut),pt=dt===0?0:ut*ht/dt,gt=ut):(ht<0&&(ft=-ft),pt=ft,gt=ht===0?0:ft*dt/ht),{x:lt+pt,y:ct+gt}},"intersectRect"),intersect_rect_default=intersectRect;function applyStyle(rt,it){it&&rt.attr("style",it)}__name(applyStyle,"applyStyle");async function addHtmlLabel(rt){const it=select(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),lt=it.append("xhtml:div"),ct=getConfig2();let ht=rt.label;rt.label&&hasKatex(rt.label)&&(ht=await renderKatexSanitized(rt.label.replace(common_default.lineBreakRegex,`
`),ct));const ft='<span class="'+(rt.isNode?"nodeLabel":"edgeLabel")+'" '+(rt.labelStyle?'style="'+rt.labelStyle+'"':"")+">"+ht+"</span>";return lt.html(sanitizeText(ft,ct)),applyStyle(lt,rt.labelStyle),lt.style("display","inline-block"),lt.style("padding-right","1px"),lt.style("white-space","nowrap"),lt.attr("xmlns","http://www.w3.org/1999/xhtml"),it.node()}__name(addHtmlLabel,"addHtmlLabel");var createLabel=__name(async(rt,it,lt,ct)=>{let ht=rt||"";if(typeof ht=="object"&&(ht=ht[0]),evaluate(getConfig2().flowchart.htmlLabels)){ht=ht.replace(/\\n|\n/g,"<br />"),log.info("vertexText"+ht);const dt={isNode:ct,label:decodeEntities(ht).replace(/fa[blrs]?:fa-[\w-]+/g,ut=>`<i class='${ut.replace(":"," ")}'></i>`),labelStyle:it&&it.replace("fill:","color:")};return await addHtmlLabel(dt)}else{const dt=document.createElementNS("http://www.w3.org/2000/svg","text");dt.setAttribute("style",it.replace("color:","fill:"));let ft=[];typeof ht=="string"?ft=ht.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(ht)?ft=ht:ft=[];for(const ut of ft){const pt=document.createElementNS("http://www.w3.org/2000/svg","tspan");pt.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),pt.setAttribute("dy","1em"),pt.setAttribute("x","0"),lt?pt.setAttribute("class","title-row"):pt.setAttribute("class","row"),pt.textContent=ut.trim(),dt.appendChild(pt)}return dt}},"createLabel"),createLabel_default=createLabel,createRoundedRectPathD=__name((rt,it,lt,ct,ht)=>["M",rt+ht,it,"H",rt+lt-ht,"A",ht,ht,0,0,1,rt+lt,it+ht,"V",it+ct-ht,"A",ht,ht,0,0,1,rt+lt-ht,it+ct,"H",rt+ht,"A",ht,ht,0,0,1,rt,it+ct-ht,"V",it+ht,"A",ht,ht,0,0,1,rt+ht,it,"Z"].join(" "),"createRoundedRectPathD"),rect=__name(async(rt,it)=>{log.info("Creating subgraph rect for ",it.id,it);const lt=getConfig2(),{themeVariables:ct,handDrawnSeed:ht}=lt,{clusterBkg:dt,clusterBorder:ft}=ct,{labelStyles:ut,nodeStyles:pt,borderStyles:gt,backgroundStyles:mt}=styles2String(it),_t=rt.insert("g").attr("class","cluster "+it.cssClasses).attr("id",it.id).attr("data-look",it.look),yt=evaluate(lt.flowchart.htmlLabels),bt=_t.insert("g").attr("class","cluster-label "),xt=await createText(bt,it.label,{style:it.labelStyle,useHtmlLabels:yt,isNode:!0});let wt=xt.getBBox();if(evaluate(lt.flowchart.htmlLabels)){const At=xt.children[0],It=select(xt);wt=At.getBoundingClientRect(),It.attr("width",wt.width),It.attr("height",wt.height)}const Ct=it.width<=wt.width+it.padding?wt.width+it.padding:it.width;it.width<=wt.width+it.padding?it.diff=(Ct-it.width)/2-it.padding:it.diff=-it.padding;const St=it.height,Tt=it.x-Ct/2,vt=it.y-St/2;log.trace("Data ",it,JSON.stringify(it));let kt;if(it.look==="handDrawn"){const At=at.svg(_t),It=userNodeOverrides(it,{roughness:.7,fill:dt,stroke:ft,fillWeight:3,seed:ht}),Bt=At.path(createRoundedRectPathD(Tt,vt,Ct,St,0),It);kt=_t.insert(()=>(log.debug("Rough node insert CXC",Bt),Bt),":first-child"),kt.select("path:nth-child(2)").attr("style",gt.join(";")),kt.select("path").attr("style",mt.join(";").replace("fill","stroke"))}else kt=_t.insert("rect",":first-child"),kt.attr("style",pt).attr("rx",it.rx).attr("ry",it.ry).attr("x",Tt).attr("y",vt).attr("width",Ct).attr("height",St);const{subGraphTitleTopMargin:Et}=getSubGraphTitleMargins(lt);if(bt.attr("transform",`translate(${it.x-wt.width/2}, ${it.y-it.height/2+Et})`),ut){const At=bt.select("span");At&&At.attr("style",ut)}const Lt=kt.node().getBBox();return it.offsetX=0,it.width=Lt.width,it.height=Lt.height,it.offsetY=wt.height-it.padding/2,it.intersect=function(At){return intersect_rect_default(it,At)},{cluster:_t,labelBBox:wt}},"rect"),noteGroup=__name((rt,it)=>{const lt=rt.insert("g").attr("class","note-cluster").attr("id",it.id),ct=lt.insert("rect",":first-child"),ht=0*it.padding,dt=ht/2;ct.attr("rx",it.rx).attr("ry",it.ry).attr("x",it.x-it.width/2-dt).attr("y",it.y-it.height/2-dt).attr("width",it.width+ht).attr("height",it.height+ht).attr("fill","none");const ft=ct.node().getBBox();return it.width=ft.width,it.height=ft.height,it.intersect=function(ut){return intersect_rect_default(it,ut)},{cluster:lt,labelBBox:{width:0,height:0}}},"noteGroup"),roundedWithTitle=__name(async(rt,it)=>{const lt=getConfig2(),{themeVariables:ct,handDrawnSeed:ht}=lt,{altBackground:dt,compositeBackground:ft,compositeTitleBackground:ut,nodeBorder:pt}=ct,gt=rt.insert("g").attr("class",it.cssClasses).attr("id",it.id).attr("data-id",it.id).attr("data-look",it.look),mt=gt.insert("g",":first-child"),_t=gt.insert("g").attr("class","cluster-label");let yt=gt.append("rect");const bt=_t.node().appendChild(await createLabel_default(it.label,it.labelStyle,void 0,!0));let xt=bt.getBBox();if(evaluate(lt.flowchart.htmlLabels)){const Bt=bt.children[0],Dt=select(bt);xt=Bt.getBoundingClientRect(),Dt.attr("width",xt.width),Dt.attr("height",xt.height)}const wt=0*it.padding,Ct=wt/2,St=(it.width<=xt.width+it.padding?xt.width+it.padding:it.width)+wt;it.width<=xt.width+it.padding?it.diff=(St-it.width)/2-it.padding:it.diff=-it.padding;const Tt=it.height+wt,vt=it.height+wt-xt.height-6,kt=it.x-St/2,Et=it.y-Tt/2;it.width=St;const Lt=it.y-it.height/2-Ct+xt.height+2;let At;if(it.look==="handDrawn"){const Bt=it.cssClasses.includes("statediagram-cluster-alt"),Dt=at.svg(gt),Rt=it.rx||it.ry?Dt.path(createRoundedRectPathD(kt,Et,St,Tt,10),{roughness:.7,fill:ut,fillStyle:"solid",stroke:pt,seed:ht}):Dt.rectangle(kt,Et,St,Tt,{seed:ht});At=gt.insert(()=>Rt,":first-child");const Pt=Dt.rectangle(kt,Lt,St,vt,{fill:Bt?dt:ft,fillStyle:Bt?"hachure":"solid",stroke:pt,seed:ht});At=gt.insert(()=>Rt,":first-child"),yt=gt.insert(()=>Pt)}else At=mt.insert("rect",":first-child"),At.attr("class","outer").attr("x",kt).attr("y",Et).attr("width",St).attr("height",Tt).attr("data-look",it.look),yt.attr("class","inner").attr("x",kt).attr("y",Lt).attr("width",St).attr("height",vt);_t.attr("transform",`translate(${it.x-xt.width/2}, ${Et+1-(evaluate(lt.flowchart.htmlLabels)?0:3)})`);const It=At.node().getBBox();return it.height=It.height,it.offsetX=0,it.offsetY=xt.height-it.padding/2,it.labelBBox=xt,it.intersect=function(Bt){return intersect_rect_default(it,Bt)},{cluster:gt,labelBBox:xt}},"roundedWithTitle"),kanbanSection=__name(async(rt,it)=>{log.info("Creating subgraph rect for ",it.id,it);const lt=getConfig2(),{themeVariables:ct,handDrawnSeed:ht}=lt,{clusterBkg:dt,clusterBorder:ft}=ct,{labelStyles:ut,nodeStyles:pt,borderStyles:gt,backgroundStyles:mt}=styles2String(it),_t=rt.insert("g").attr("class","cluster "+it.cssClasses).attr("id",it.id).attr("data-look",it.look),yt=evaluate(lt.flowchart.htmlLabels),bt=_t.insert("g").attr("class","cluster-label "),xt=await createText(bt,it.label,{style:it.labelStyle,useHtmlLabels:yt,isNode:!0,width:it.width});let wt=xt.getBBox();if(evaluate(lt.flowchart.htmlLabels)){const At=xt.children[0],It=select(xt);wt=At.getBoundingClientRect(),It.attr("width",wt.width),It.attr("height",wt.height)}const Ct=it.width<=wt.width+it.padding?wt.width+it.padding:it.width;it.width<=wt.width+it.padding?it.diff=(Ct-it.width)/2-it.padding:it.diff=-it.padding;const St=it.height,Tt=it.x-Ct/2,vt=it.y-St/2;log.trace("Data ",it,JSON.stringify(it));let kt;if(it.look==="handDrawn"){const At=at.svg(_t),It=userNodeOverrides(it,{roughness:.7,fill:dt,stroke:ft,fillWeight:4,seed:ht}),Bt=At.path(createRoundedRectPathD(Tt,vt,Ct,St,it.rx),It);kt=_t.insert(()=>(log.debug("Rough node insert CXC",Bt),Bt),":first-child"),kt.select("path:nth-child(2)").attr("style",gt.join(";")),kt.select("path").attr("style",mt.join(";").replace("fill","stroke"))}else kt=_t.insert("rect",":first-child"),kt.attr("style",pt).attr("rx",it.rx).attr("ry",it.ry).attr("x",Tt).attr("y",vt).attr("width",Ct).attr("height",St);const{subGraphTitleTopMargin:Et}=getSubGraphTitleMargins(lt);if(bt.attr("transform",`translate(${it.x-wt.width/2}, ${it.y-it.height/2+Et})`),ut){const At=bt.select("span");At&&At.attr("style",ut)}const Lt=kt.node().getBBox();return it.offsetX=0,it.width=Lt.width,it.height=Lt.height,it.offsetY=wt.height-it.padding/2,it.intersect=function(At){return intersect_rect_default(it,At)},{cluster:_t,labelBBox:wt}},"kanbanSection"),divider=__name((rt,it)=>{const lt=getConfig2(),{themeVariables:ct,handDrawnSeed:ht}=lt,{nodeBorder:dt}=ct,ft=rt.insert("g").attr("class",it.cssClasses).attr("id",it.id).attr("data-look",it.look),ut=ft.insert("g",":first-child"),pt=0*it.padding,gt=it.width+pt;it.diff=-it.padding;const mt=it.height+pt,_t=it.x-gt/2,yt=it.y-mt/2;it.width=gt;let bt;if(it.look==="handDrawn"){const Ct=at.svg(ft).rectangle(_t,yt,gt,mt,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:dt,seed:ht});bt=ft.insert(()=>Ct,":first-child")}else bt=ut.insert("rect",":first-child"),bt.attr("class","divider").attr("x",_t).attr("y",yt).attr("width",gt).attr("height",mt).attr("data-look",it.look);const xt=bt.node().getBBox();return it.height=xt.height,it.offsetX=0,it.offsetY=0,it.intersect=function(wt){return intersect_rect_default(it,wt)},{cluster:ft,labelBBox:{}}},"divider"),squareRect=rect,shapes={rect,squareRect,roundedWithTitle,noteGroup,divider,kanbanSection},clusterElems=new Map,insertCluster=__name(async(rt,it)=>{const lt=it.shape||"rect",ct=await shapes[lt](rt,it);return clusterElems.set(it.id,ct),ct},"insertCluster"),clear$1=__name(()=>{clusterElems=new Map},"clear");function intersectNode(rt,it){return rt.intersect(it)}__name(intersectNode,"intersectNode");var intersect_node_default=intersectNode;function intersectEllipse(rt,it,lt,ct){var ht=rt.x,dt=rt.y,ft=ht-ct.x,ut=dt-ct.y,pt=Math.sqrt(it*it*ut*ut+lt*lt*ft*ft),gt=Math.abs(it*lt*ft/pt);ct.x<ht&&(gt=-gt);var mt=Math.abs(it*lt*ut/pt);return ct.y<dt&&(mt=-mt),{x:ht+gt,y:dt+mt}}__name(intersectEllipse,"intersectEllipse");var intersect_ellipse_default=intersectEllipse;function intersectCircle(rt,it,lt){return intersect_ellipse_default(rt,it,it,lt)}__name(intersectCircle,"intersectCircle");var intersect_circle_default=intersectCircle;function intersectLine(rt,it,lt,ct){{const ht=it.y-rt.y,dt=rt.x-it.x,ft=it.x*rt.y-rt.x*it.y,ut=ht*lt.x+dt*lt.y+ft,pt=ht*ct.x+dt*ct.y+ft,gt=1e-6;if(ut!==0&&pt!==0&&sameSign(ut,pt))return;const mt=ct.y-lt.y,_t=lt.x-ct.x,yt=ct.x*lt.y-lt.x*ct.y,bt=mt*rt.x+_t*rt.y+yt,xt=mt*it.x+_t*it.y+yt;if(Math.abs(bt)<gt&&Math.abs(xt)<gt&&sameSign(bt,xt))return;const wt=ht*_t-mt*dt;if(wt===0)return;const Ct=Math.abs(wt/2);let St=dt*yt-_t*ft;const Tt=St<0?(St-Ct)/wt:(St+Ct)/wt;St=mt*ft-ht*yt;const vt=St<0?(St-Ct)/wt:(St+Ct)/wt;return{x:Tt,y:vt}}}__name(intersectLine,"intersectLine");function sameSign(rt,it){return rt*it>0}__name(sameSign,"sameSign");var intersect_line_default=intersectLine;function intersectPolygon(rt,it,lt){let ct=rt.x,ht=rt.y,dt=[],ft=Number.POSITIVE_INFINITY,ut=Number.POSITIVE_INFINITY;typeof it.forEach=="function"?it.forEach(function(mt){ft=Math.min(ft,mt.x),ut=Math.min(ut,mt.y)}):(ft=Math.min(ft,it.x),ut=Math.min(ut,it.y));let pt=ct-rt.width/2-ft,gt=ht-rt.height/2-ut;for(let mt=0;mt<it.length;mt++){let _t=it[mt],yt=it[mt<it.length-1?mt+1:0],bt=intersect_line_default(rt,lt,{x:pt+_t.x,y:gt+_t.y},{x:pt+yt.x,y:gt+yt.y});bt&&dt.push(bt)}return dt.length?(dt.length>1&&dt.sort(function(mt,_t){let yt=mt.x-lt.x,bt=mt.y-lt.y,xt=Math.sqrt(yt*yt+bt*bt),wt=_t.x-lt.x,Ct=_t.y-lt.y,St=Math.sqrt(wt*wt+Ct*Ct);return xt<St?-1:xt===St?0:1}),dt[0]):rt}__name(intersectPolygon,"intersectPolygon");var intersect_polygon_default=intersectPolygon,intersect_default={node:intersect_node_default,circle:intersect_circle_default,ellipse:intersect_ellipse_default,polygon:intersect_polygon_default,rect:intersect_rect_default};function anchor(rt,it){const{labelStyles:lt}=styles2String(it);it.labelStyle=lt;const ct=getNodeClasses(it);let ht=ct;ct||(ht="anchor");const dt=rt.insert("g").attr("class",ht).attr("id",it.domId||it.id),ft=1,{cssStyles:ut}=it,pt=at.svg(dt),gt=userNodeOverrides(it,{fill:"black",stroke:"none",fillStyle:"solid"});it.look!=="handDrawn"&&(gt.roughness=0);const mt=pt.circle(0,0,ft*2,gt),_t=dt.insert(()=>mt,":first-child");return _t.attr("class","anchor").attr("style",handleUndefinedAttr(ut)),updateNodeBounds(it,_t),it.intersect=function(yt){return log.info("Circle intersect",it,ft,yt),intersect_default.circle(it,ft,yt)},dt}__name(anchor,"anchor");function generateArcPoints(rt,it,lt,ct,ht,dt,ft){const pt=(rt+lt)/2,gt=(it+ct)/2,mt=Math.atan2(ct-it,lt-rt),_t=(lt-rt)/2,yt=(ct-it)/2,bt=_t/ht,xt=yt/dt,wt=Math.sqrt(bt**2+xt**2);if(wt>1)throw new Error("The given radii are too small to create an arc between the points.");const Ct=Math.sqrt(1-wt**2),St=pt+Ct*dt*Math.sin(mt)*(ft?-1:1),Tt=gt-Ct*ht*Math.cos(mt)*(ft?-1:1),vt=Math.atan2((it-Tt)/dt,(rt-St)/ht);let Et=Math.atan2((ct-Tt)/dt,(lt-St)/ht)-vt;ft&&Et<0&&(Et+=2*Math.PI),!ft&&Et>0&&(Et-=2*Math.PI);const Lt=[];for(let At=0;At<20;At++){const It=At/19,Bt=vt+It*Et,Dt=St+ht*Math.cos(Bt),Rt=Tt+dt*Math.sin(Bt);Lt.push({x:Dt,y:Rt})}return Lt}__name(generateArcPoints,"generateArcPoints");async function bowTieRect(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;const{shapeSvg:ht,bbox:dt}=await labelHelper(rt,it,getNodeClasses(it)),ft=dt.width+it.padding+20,ut=dt.height+it.padding,pt=ut/2,gt=pt/(2.5+ut/50),{cssStyles:mt}=it,_t=[{x:ft/2,y:-ut/2},{x:-ft/2,y:-ut/2},...generateArcPoints(-ft/2,-ut/2,-ft/2,ut/2,gt,pt,!1),{x:ft/2,y:ut/2},...generateArcPoints(ft/2,ut/2,ft/2,-ut/2,gt,pt,!0)],yt=at.svg(ht),bt=userNodeOverrides(it,{});it.look!=="handDrawn"&&(bt.roughness=0,bt.fillStyle="solid");const xt=createPathFromPoints(_t),wt=yt.path(xt,bt),Ct=ht.insert(()=>wt,":first-child");return Ct.attr("class","basic label-container"),mt&&it.look!=="handDrawn"&&Ct.selectAll("path").attr("style",mt),ct&&it.look!=="handDrawn"&&Ct.selectAll("path").attr("style",ct),Ct.attr("transform",`translate(${gt/2}, 0)`),updateNodeBounds(it,Ct),it.intersect=function(St){return intersect_default.polygon(it,_t,St)},ht}__name(bowTieRect,"bowTieRect");function insertPolygonShape(rt,it,lt,ct){return rt.insert("polygon",":first-child").attr("points",ct.map(function(ht){return ht.x+","+ht.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-it/2+","+lt/2+")")}__name(insertPolygonShape,"insertPolygonShape");async function card(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;const{shapeSvg:ht,bbox:dt}=await labelHelper(rt,it,getNodeClasses(it)),ft=dt.height+it.padding,ut=12,pt=dt.width+it.padding+ut,gt=0,mt=pt,_t=-ft,yt=0,bt=[{x:gt+ut,y:_t},{x:mt,y:_t},{x:mt,y:yt},{x:gt,y:yt},{x:gt,y:_t+ut},{x:gt+ut,y:_t}];let xt;const{cssStyles:wt}=it;if(it.look==="handDrawn"){const Ct=at.svg(ht),St=userNodeOverrides(it,{}),Tt=createPathFromPoints(bt),vt=Ct.path(Tt,St);xt=ht.insert(()=>vt,":first-child").attr("transform",`translate(${-pt/2}, ${ft/2})`),wt&&xt.attr("style",wt)}else xt=insertPolygonShape(ht,pt,ft,bt);return ct&&xt.attr("style",ct),updateNodeBounds(it,xt),it.intersect=function(Ct){return intersect_default.polygon(it,bt,Ct)},ht}__name(card,"card");function choice(rt,it){const{nodeStyles:lt}=styles2String(it);it.label="";const ct=rt.insert("g").attr("class",getNodeClasses(it)).attr("id",it.domId??it.id),{cssStyles:ht}=it,dt=Math.max(28,it.width??0),ft=[{x:0,y:dt/2},{x:dt/2,y:0},{x:0,y:-dt/2},{x:-dt/2,y:0}],ut=at.svg(ct),pt=userNodeOverrides(it,{});it.look!=="handDrawn"&&(pt.roughness=0,pt.fillStyle="solid");const gt=createPathFromPoints(ft),mt=ut.path(gt,pt),_t=ct.insert(()=>mt,":first-child");return ht&&it.look!=="handDrawn"&&_t.selectAll("path").attr("style",ht),lt&&it.look!=="handDrawn"&&_t.selectAll("path").attr("style",lt),it.width=28,it.height=28,it.intersect=function(yt){return intersect_default.polygon(it,ft,yt)},ct}__name(choice,"choice");async function circle$1(rt,it,lt){const{labelStyles:ct,nodeStyles:ht}=styles2String(it);it.labelStyle=ct;const{shapeSvg:dt,bbox:ft,halfPadding:ut}=await labelHelper(rt,it,getNodeClasses(it)),pt=lt?.padding??ut,gt=ft.width/2+pt;let mt;const{cssStyles:_t}=it;if(it.look==="handDrawn"){const yt=at.svg(dt),bt=userNodeOverrides(it,{}),xt=yt.circle(0,0,gt*2,bt);mt=dt.insert(()=>xt,":first-child"),mt.attr("class","basic label-container").attr("style",handleUndefinedAttr(_t))}else mt=dt.insert("circle",":first-child").attr("class","basic label-container").attr("style",ht).attr("r",gt).attr("cx",0).attr("cy",0);return updateNodeBounds(it,mt),it.calcIntersect=function(yt,bt){const xt=yt.width/2;return intersect_default.circle(yt,xt,bt)},it.intersect=function(yt){return log.info("Circle intersect",it,gt,yt),intersect_default.circle(it,gt,yt)},dt}__name(circle$1,"circle");function createLine(rt){const it=Math.cos(Math.PI/4),lt=Math.sin(Math.PI/4),ct=rt*2,ht={x:ct/2*it,y:ct/2*lt},dt={x:-(ct/2)*it,y:ct/2*lt},ft={x:-(ct/2)*it,y:-(ct/2)*lt},ut={x:ct/2*it,y:-(ct/2)*lt};return`M ${dt.x},${dt.y} L ${ut.x},${ut.y}
                   M ${ht.x},${ht.y} L ${ft.x},${ft.y}`}__name(createLine,"createLine");function crossedCircle(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt,it.label="";const ht=rt.insert("g").attr("class",getNodeClasses(it)).attr("id",it.domId??it.id),dt=Math.max(30,it?.width??0),{cssStyles:ft}=it,ut=at.svg(ht),pt=userNodeOverrides(it,{});it.look!=="handDrawn"&&(pt.roughness=0,pt.fillStyle="solid");const gt=ut.circle(0,0,dt*2,pt),mt=createLine(dt),_t=ut.path(mt,pt),yt=ht.insert(()=>gt,":first-child");return yt.insert(()=>_t),ft&&it.look!=="handDrawn"&&yt.selectAll("path").attr("style",ft),ct&&it.look!=="handDrawn"&&yt.selectAll("path").attr("style",ct),updateNodeBounds(it,yt),it.intersect=function(bt){return log.info("crossedCircle intersect",it,{radius:dt,point:bt}),intersect_default.circle(it,dt,bt)},ht}__name(crossedCircle,"crossedCircle");function generateCirclePoints2(rt,it,lt,ct=100,ht=0,dt=180){const ft=[],ut=ht*Math.PI/180,mt=(dt*Math.PI/180-ut)/(ct-1);for(let _t=0;_t<ct;_t++){const yt=ut+_t*mt,bt=rt+lt*Math.cos(yt),xt=it+lt*Math.sin(yt);ft.push({x:-bt,y:-xt})}return ft}__name(generateCirclePoints2,"generateCirclePoints");async function curlyBraceLeft(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;const{shapeSvg:ht,bbox:dt,label:ft}=await labelHelper(rt,it,getNodeClasses(it)),ut=dt.width+(it.padding??0),pt=dt.height+(it.padding??0),gt=Math.max(5,pt*.1),{cssStyles:mt}=it,_t=[...generateCirclePoints2(ut/2,-pt/2,gt,30,-90,0),{x:-ut/2-gt,y:gt},...generateCirclePoints2(ut/2+gt*2,-gt,gt,20,-180,-270),...generateCirclePoints2(ut/2+gt*2,gt,gt,20,-90,-180),{x:-ut/2-gt,y:-pt/2},...generateCirclePoints2(ut/2,pt/2,gt,20,0,90)],yt=[{x:ut/2,y:-pt/2-gt},{x:-ut/2,y:-pt/2-gt},...generateCirclePoints2(ut/2,-pt/2,gt,20,-90,0),{x:-ut/2-gt,y:-gt},...generateCirclePoints2(ut/2+ut*.1,-gt,gt,20,-180,-270),...generateCirclePoints2(ut/2+ut*.1,gt,gt,20,-90,-180),{x:-ut/2-gt,y:pt/2},...generateCirclePoints2(ut/2,pt/2,gt,20,0,90),{x:-ut/2,y:pt/2+gt},{x:ut/2,y:pt/2+gt}],bt=at.svg(ht),xt=userNodeOverrides(it,{fill:"none"});it.look!=="handDrawn"&&(xt.roughness=0,xt.fillStyle="solid");const Ct=createPathFromPoints(_t).replace("Z",""),St=bt.path(Ct,xt),Tt=createPathFromPoints(yt),vt=bt.path(Tt,{...xt}),kt=ht.insert("g",":first-child");return kt.insert(()=>vt,":first-child").attr("stroke-opacity",0),kt.insert(()=>St,":first-child"),kt.attr("class","text"),mt&&it.look!=="handDrawn"&&kt.selectAll("path").attr("style",mt),ct&&it.look!=="handDrawn"&&kt.selectAll("path").attr("style",ct),kt.attr("transform",`translate(${gt}, 0)`),ft.attr("transform",`translate(${-ut/2+gt-(dt.x-(dt.left??0))},${-pt/2+(it.padding??0)/2-(dt.y-(dt.top??0))})`),updateNodeBounds(it,kt),it.intersect=function(Et){return intersect_default.polygon(it,yt,Et)},ht}__name(curlyBraceLeft,"curlyBraceLeft");function generateCirclePoints3(rt,it,lt,ct=100,ht=0,dt=180){const ft=[],ut=ht*Math.PI/180,mt=(dt*Math.PI/180-ut)/(ct-1);for(let _t=0;_t<ct;_t++){const yt=ut+_t*mt,bt=rt+lt*Math.cos(yt),xt=it+lt*Math.sin(yt);ft.push({x:bt,y:xt})}return ft}__name(generateCirclePoints3,"generateCirclePoints");async function curlyBraceRight(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;const{shapeSvg:ht,bbox:dt,label:ft}=await labelHelper(rt,it,getNodeClasses(it)),ut=dt.width+(it.padding??0),pt=dt.height+(it.padding??0),gt=Math.max(5,pt*.1),{cssStyles:mt}=it,_t=[...generateCirclePoints3(ut/2,-pt/2,gt,20,-90,0),{x:ut/2+gt,y:-gt},...generateCirclePoints3(ut/2+gt*2,-gt,gt,20,-180,-270),...generateCirclePoints3(ut/2+gt*2,gt,gt,20,-90,-180),{x:ut/2+gt,y:pt/2},...generateCirclePoints3(ut/2,pt/2,gt,20,0,90)],yt=[{x:-ut/2,y:-pt/2-gt},{x:ut/2,y:-pt/2-gt},...generateCirclePoints3(ut/2,-pt/2,gt,20,-90,0),{x:ut/2+gt,y:-gt},...generateCirclePoints3(ut/2+gt*2,-gt,gt,20,-180,-270),...generateCirclePoints3(ut/2+gt*2,gt,gt,20,-90,-180),{x:ut/2+gt,y:pt/2},...generateCirclePoints3(ut/2,pt/2,gt,20,0,90),{x:ut/2,y:pt/2+gt},{x:-ut/2,y:pt/2+gt}],bt=at.svg(ht),xt=userNodeOverrides(it,{fill:"none"});it.look!=="handDrawn"&&(xt.roughness=0,xt.fillStyle="solid");const Ct=createPathFromPoints(_t).replace("Z",""),St=bt.path(Ct,xt),Tt=createPathFromPoints(yt),vt=bt.path(Tt,{...xt}),kt=ht.insert("g",":first-child");return kt.insert(()=>vt,":first-child").attr("stroke-opacity",0),kt.insert(()=>St,":first-child"),kt.attr("class","text"),mt&&it.look!=="handDrawn"&&kt.selectAll("path").attr("style",mt),ct&&it.look!=="handDrawn"&&kt.selectAll("path").attr("style",ct),kt.attr("transform",`translate(${-gt}, 0)`),ft.attr("transform",`translate(${-ut/2+(it.padding??0)/2-(dt.x-(dt.left??0))},${-pt/2+(it.padding??0)/2-(dt.y-(dt.top??0))})`),updateNodeBounds(it,kt),it.intersect=function(Et){return intersect_default.polygon(it,yt,Et)},ht}__name(curlyBraceRight,"curlyBraceRight");function generateCirclePoints4(rt,it,lt,ct=100,ht=0,dt=180){const ft=[],ut=ht*Math.PI/180,mt=(dt*Math.PI/180-ut)/(ct-1);for(let _t=0;_t<ct;_t++){const yt=ut+_t*mt,bt=rt+lt*Math.cos(yt),xt=it+lt*Math.sin(yt);ft.push({x:-bt,y:-xt})}return ft}__name(generateCirclePoints4,"generateCirclePoints");async function curlyBraces(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;const{shapeSvg:ht,bbox:dt,label:ft}=await labelHelper(rt,it,getNodeClasses(it)),ut=dt.width+(it.padding??0),pt=dt.height+(it.padding??0),gt=Math.max(5,pt*.1),{cssStyles:mt}=it,_t=[...generateCirclePoints4(ut/2,-pt/2,gt,30,-90,0),{x:-ut/2-gt,y:gt},...generateCirclePoints4(ut/2+gt*2,-gt,gt,20,-180,-270),...generateCirclePoints4(ut/2+gt*2,gt,gt,20,-90,-180),{x:-ut/2-gt,y:-pt/2},...generateCirclePoints4(ut/2,pt/2,gt,20,0,90)],yt=[...generateCirclePoints4(-ut/2+gt+gt/2,-pt/2,gt,20,-90,-180),{x:ut/2-gt/2,y:gt},...generateCirclePoints4(-ut/2-gt/2,-gt,gt,20,0,90),...generateCirclePoints4(-ut/2-gt/2,gt,gt,20,-90,0),{x:ut/2-gt/2,y:-gt},...generateCirclePoints4(-ut/2+gt+gt/2,pt/2,gt,30,-180,-270)],bt=[{x:ut/2,y:-pt/2-gt},{x:-ut/2,y:-pt/2-gt},...generateCirclePoints4(ut/2,-pt/2,gt,20,-90,0),{x:-ut/2-gt,y:-gt},...generateCirclePoints4(ut/2+gt*2,-gt,gt,20,-180,-270),...generateCirclePoints4(ut/2+gt*2,gt,gt,20,-90,-180),{x:-ut/2-gt,y:pt/2},...generateCirclePoints4(ut/2,pt/2,gt,20,0,90),{x:-ut/2,y:pt/2+gt},{x:ut/2-gt-gt/2,y:pt/2+gt},...generateCirclePoints4(-ut/2+gt+gt/2,-pt/2,gt,20,-90,-180),{x:ut/2-gt/2,y:gt},...generateCirclePoints4(-ut/2-gt/2,-gt,gt,20,0,90),...generateCirclePoints4(-ut/2-gt/2,gt,gt,20,-90,0),{x:ut/2-gt/2,y:-gt},...generateCirclePoints4(-ut/2+gt+gt/2,pt/2,gt,30,-180,-270)],xt=at.svg(ht),wt=userNodeOverrides(it,{fill:"none"});it.look!=="handDrawn"&&(wt.roughness=0,wt.fillStyle="solid");const St=createPathFromPoints(_t).replace("Z",""),Tt=xt.path(St,wt),kt=createPathFromPoints(yt).replace("Z",""),Et=xt.path(kt,wt),Lt=createPathFromPoints(bt),At=xt.path(Lt,{...wt}),It=ht.insert("g",":first-child");return It.insert(()=>At,":first-child").attr("stroke-opacity",0),It.insert(()=>Tt,":first-child"),It.insert(()=>Et,":first-child"),It.attr("class","text"),mt&&it.look!=="handDrawn"&&It.selectAll("path").attr("style",mt),ct&&it.look!=="handDrawn"&&It.selectAll("path").attr("style",ct),It.attr("transform",`translate(${gt-gt/4}, 0)`),ft.attr("transform",`translate(${-ut/2+(it.padding??0)/2-(dt.x-(dt.left??0))},${-pt/2+(it.padding??0)/2-(dt.y-(dt.top??0))})`),updateNodeBounds(it,It),it.intersect=function(Bt){return intersect_default.polygon(it,bt,Bt)},ht}__name(curlyBraces,"curlyBraces");async function curvedTrapezoid(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;const{shapeSvg:ht,bbox:dt}=await labelHelper(rt,it,getNodeClasses(it)),ft=80,ut=20,pt=Math.max(ft,(dt.width+(it.padding??0)*2)*1.25,it?.width??0),gt=Math.max(ut,dt.height+(it.padding??0)*2,it?.height??0),mt=gt/2,{cssStyles:_t}=it,yt=at.svg(ht),bt=userNodeOverrides(it,{});it.look!=="handDrawn"&&(bt.roughness=0,bt.fillStyle="solid");const xt=pt,wt=gt,Ct=xt-mt,St=wt/4,Tt=[{x:Ct,y:0},{x:St,y:0},{x:0,y:wt/2},{x:St,y:wt},{x:Ct,y:wt},...generateCirclePoints(-Ct,-wt/2,mt,50,270,90)],vt=createPathFromPoints(Tt),kt=yt.path(vt,bt),Et=ht.insert(()=>kt,":first-child");return Et.attr("class","basic label-container"),_t&&it.look!=="handDrawn"&&Et.selectChildren("path").attr("style",_t),ct&&it.look!=="handDrawn"&&Et.selectChildren("path").attr("style",ct),Et.attr("transform",`translate(${-pt/2}, ${-gt/2})`),updateNodeBounds(it,Et),it.intersect=function(Lt){return intersect_default.polygon(it,Tt,Lt)},ht}__name(curvedTrapezoid,"curvedTrapezoid");var createCylinderPathD=__name((rt,it,lt,ct,ht,dt)=>[`M${rt},${it+dt}`,`a${ht},${dt} 0,0,0 ${lt},0`,`a${ht},${dt} 0,0,0 ${-lt},0`,`l0,${ct}`,`a${ht},${dt} 0,0,0 ${lt},0`,`l0,${-ct}`].join(" "),"createCylinderPathD"),createOuterCylinderPathD=__name((rt,it,lt,ct,ht,dt)=>[`M${rt},${it+dt}`,`M${rt+lt},${it+dt}`,`a${ht},${dt} 0,0,0 ${-lt},0`,`l0,${ct}`,`a${ht},${dt} 0,0,0 ${lt},0`,`l0,${-ct}`].join(" "),"createOuterCylinderPathD"),createInnerCylinderPathD=__name((rt,it,lt,ct,ht,dt)=>[`M${rt-lt/2},${-ct/2}`,`a${ht},${dt} 0,0,0 ${lt},0`].join(" "),"createInnerCylinderPathD");async function cylinder(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;const{shapeSvg:ht,bbox:dt,label:ft}=await labelHelper(rt,it,getNodeClasses(it)),ut=Math.max(dt.width+it.padding,it.width??0),pt=ut/2,gt=pt/(2.5+ut/50),mt=Math.max(dt.height+gt+it.padding,it.height??0);let _t;const{cssStyles:yt}=it;if(it.look==="handDrawn"){const bt=at.svg(ht),xt=createOuterCylinderPathD(0,0,ut,mt,pt,gt),wt=createInnerCylinderPathD(0,gt,ut,mt,pt,gt),Ct=bt.path(xt,userNodeOverrides(it,{})),St=bt.path(wt,userNodeOverrides(it,{fill:"none"}));_t=ht.insert(()=>St,":first-child"),_t=ht.insert(()=>Ct,":first-child"),_t.attr("class","basic label-container"),yt&&_t.attr("style",yt)}else{const bt=createCylinderPathD(0,0,ut,mt,pt,gt);_t=ht.insert("path",":first-child").attr("d",bt).attr("class","basic label-container").attr("style",handleUndefinedAttr(yt)).attr("style",ct)}return _t.attr("label-offset-y",gt),_t.attr("transform",`translate(${-ut/2}, ${-(mt/2+gt)})`),updateNodeBounds(it,_t),ft.attr("transform",`translate(${-(dt.width/2)-(dt.x-(dt.left??0))}, ${-(dt.height/2)+(it.padding??0)/1.5-(dt.y-(dt.top??0))})`),it.intersect=function(bt){const xt=intersect_default.rect(it,bt),wt=xt.x-(it.x??0);if(pt!=0&&(Math.abs(wt)<(it.width??0)/2||Math.abs(wt)==(it.width??0)/2&&Math.abs(xt.y-(it.y??0))>(it.height??0)/2-gt)){let Ct=gt*gt*(1-wt*wt/(pt*pt));Ct>0&&(Ct=Math.sqrt(Ct)),Ct=gt-Ct,bt.y-(it.y??0)>0&&(Ct=-Ct),xt.y+=Ct}return xt},ht}__name(cylinder,"cylinder");async function dividedRectangle(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;const{shapeSvg:ht,bbox:dt,label:ft}=await labelHelper(rt,it,getNodeClasses(it)),ut=dt.width+it.padding,pt=dt.height+it.padding,gt=pt*.2,mt=-ut/2,_t=-pt/2-gt/2,{cssStyles:yt}=it,bt=at.svg(ht),xt=userNodeOverrides(it,{});it.look!=="handDrawn"&&(xt.roughness=0,xt.fillStyle="solid");const wt=[{x:mt,y:_t+gt},{x:-mt,y:_t+gt},{x:-mt,y:-_t},{x:mt,y:-_t},{x:mt,y:_t},{x:-mt,y:_t},{x:-mt,y:_t+gt}],Ct=bt.polygon(wt.map(Tt=>[Tt.x,Tt.y]),xt),St=ht.insert(()=>Ct,":first-child");return St.attr("class","basic label-container"),yt&&it.look!=="handDrawn"&&St.selectAll("path").attr("style",yt),ct&&it.look!=="handDrawn"&&St.selectAll("path").attr("style",ct),ft.attr("transform",`translate(${mt+(it.padding??0)/2-(dt.x-(dt.left??0))}, ${_t+gt+(it.padding??0)/2-(dt.y-(dt.top??0))})`),updateNodeBounds(it,St),it.intersect=function(Tt){return intersect_default.rect(it,Tt)},ht}__name(dividedRectangle,"dividedRectangle");async function doublecircle(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;const{shapeSvg:ht,bbox:dt,halfPadding:ft}=await labelHelper(rt,it,getNodeClasses(it)),pt=dt.width/2+ft+5,gt=dt.width/2+ft;let mt;const{cssStyles:_t}=it;if(it.look==="handDrawn"){const yt=at.svg(ht),bt=userNodeOverrides(it,{roughness:.2,strokeWidth:2.5}),xt=userNodeOverrides(it,{roughness:.2,strokeWidth:1.5}),wt=yt.circle(0,0,pt*2,bt),Ct=yt.circle(0,0,gt*2,xt);mt=ht.insert("g",":first-child"),mt.attr("class",handleUndefinedAttr(it.cssClasses)).attr("style",handleUndefinedAttr(_t)),mt.node()?.appendChild(wt),mt.node()?.appendChild(Ct)}else{mt=ht.insert("g",":first-child");const yt=mt.insert("circle",":first-child"),bt=mt.insert("circle");mt.attr("class","basic label-container").attr("style",ct),yt.attr("class","outer-circle").attr("style",ct).attr("r",pt).attr("cx",0).attr("cy",0),bt.attr("class","inner-circle").attr("style",ct).attr("r",gt).attr("cx",0).attr("cy",0)}return updateNodeBounds(it,mt),it.intersect=function(yt){return log.info("DoubleCircle intersect",it,pt,yt),intersect_default.circle(it,pt,yt)},ht}__name(doublecircle,"doublecircle");function filledCircle(rt,it,{config:{themeVariables:lt}}){const{labelStyles:ct,nodeStyles:ht}=styles2String(it);it.label="",it.labelStyle=ct;const dt=rt.insert("g").attr("class",getNodeClasses(it)).attr("id",it.domId??it.id),ft=7,{cssStyles:ut}=it,pt=at.svg(dt),{nodeBorder:gt}=lt,mt=userNodeOverrides(it,{fillStyle:"solid"});it.look!=="handDrawn"&&(mt.roughness=0);const _t=pt.circle(0,0,ft*2,mt),yt=dt.insert(()=>_t,":first-child");return yt.selectAll("path").attr("style",`fill: ${gt} !important;`),ut&&ut.length>0&&it.look!=="handDrawn"&&yt.selectAll("path").attr("style",ut),ht&&it.look!=="handDrawn"&&yt.selectAll("path").attr("style",ht),updateNodeBounds(it,yt),it.intersect=function(bt){return log.info("filledCircle intersect",it,{radius:ft,point:bt}),intersect_default.circle(it,ft,bt)},dt}__name(filledCircle,"filledCircle");async function flippedTriangle(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;const{shapeSvg:ht,bbox:dt,label:ft}=await labelHelper(rt,it,getNodeClasses(it)),ut=dt.width+(it.padding??0),pt=ut+dt.height,gt=ut+dt.height,mt=[{x:0,y:-pt},{x:gt,y:-pt},{x:gt/2,y:0}],{cssStyles:_t}=it,yt=at.svg(ht),bt=userNodeOverrides(it,{});it.look!=="handDrawn"&&(bt.roughness=0,bt.fillStyle="solid");const xt=createPathFromPoints(mt),wt=yt.path(xt,bt),Ct=ht.insert(()=>wt,":first-child").attr("transform",`translate(${-pt/2}, ${pt/2})`);return _t&&it.look!=="handDrawn"&&Ct.selectChildren("path").attr("style",_t),ct&&it.look!=="handDrawn"&&Ct.selectChildren("path").attr("style",ct),it.width=ut,it.height=pt,updateNodeBounds(it,Ct),ft.attr("transform",`translate(${-dt.width/2-(dt.x-(dt.left??0))}, ${-pt/2+(it.padding??0)/2+(dt.y-(dt.top??0))})`),it.intersect=function(St){return log.info("Triangle intersect",it,mt,St),intersect_default.polygon(it,mt,St)},ht}__name(flippedTriangle,"flippedTriangle");function forkJoin(rt,it,{dir:lt,config:{state:ct,themeVariables:ht}}){const{nodeStyles:dt}=styles2String(it);it.label="";const ft=rt.insert("g").attr("class",getNodeClasses(it)).attr("id",it.domId??it.id),{cssStyles:ut}=it;let pt=Math.max(70,it?.width??0),gt=Math.max(10,it?.height??0);lt==="LR"&&(pt=Math.max(10,it?.width??0),gt=Math.max(70,it?.height??0));const mt=-1*pt/2,_t=-1*gt/2,yt=at.svg(ft),bt=userNodeOverrides(it,{stroke:ht.lineColor,fill:ht.lineColor});it.look!=="handDrawn"&&(bt.roughness=0,bt.fillStyle="solid");const xt=yt.rectangle(mt,_t,pt,gt,bt),wt=ft.insert(()=>xt,":first-child");ut&&it.look!=="handDrawn"&&wt.selectAll("path").attr("style",ut),dt&&it.look!=="handDrawn"&&wt.selectAll("path").attr("style",dt),updateNodeBounds(it,wt);const Ct=ct?.padding??0;return it.width&&it.height&&(it.width+=Ct/2||0,it.height+=Ct/2||0),it.intersect=function(St){return intersect_default.rect(it,St)},ft}__name(forkJoin,"forkJoin");async function halfRoundedRectangle(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;const ht=80,dt=50,{shapeSvg:ft,bbox:ut}=await labelHelper(rt,it,getNodeClasses(it)),pt=Math.max(ht,ut.width+(it.padding??0)*2,it?.width??0),gt=Math.max(dt,ut.height+(it.padding??0)*2,it?.height??0),mt=gt/2,{cssStyles:_t}=it,yt=at.svg(ft),bt=userNodeOverrides(it,{});it.look!=="handDrawn"&&(bt.roughness=0,bt.fillStyle="solid");const xt=[{x:-pt/2,y:-gt/2},{x:pt/2-mt,y:-gt/2},...generateCirclePoints(-pt/2+mt,0,mt,50,90,270),{x:pt/2-mt,y:gt/2},{x:-pt/2,y:gt/2}],wt=createPathFromPoints(xt),Ct=yt.path(wt,bt),St=ft.insert(()=>Ct,":first-child");return St.attr("class","basic label-container"),_t&&it.look!=="handDrawn"&&St.selectChildren("path").attr("style",_t),ct&&it.look!=="handDrawn"&&St.selectChildren("path").attr("style",ct),updateNodeBounds(it,St),it.intersect=function(Tt){return log.info("Pill intersect",it,{radius:mt,point:Tt}),intersect_default.polygon(it,xt,Tt)},ft}__name(halfRoundedRectangle,"halfRoundedRectangle");async function hexagon(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;const{shapeSvg:ht,bbox:dt}=await labelHelper(rt,it,getNodeClasses(it)),ft=dt.height+(it.padding??0),ut=dt.width+(it.padding??0)*2.5,{cssStyles:pt}=it,gt=at.svg(ht),mt=userNodeOverrides(it,{});it.look!=="handDrawn"&&(mt.roughness=0,mt.fillStyle="solid");let _t=ut/2;const yt=_t/6;_t=_t+yt;const bt=ft/2,xt=bt/2,wt=_t-xt,Ct=[{x:-wt,y:-bt},{x:0,y:-bt},{x:wt,y:-bt},{x:_t,y:0},{x:wt,y:bt},{x:0,y:bt},{x:-wt,y:bt},{x:-_t,y:0}],St=createPathFromPoints(Ct),Tt=gt.path(St,mt),vt=ht.insert(()=>Tt,":first-child");return vt.attr("class","basic label-container"),pt&&it.look!=="handDrawn"&&vt.selectChildren("path").attr("style",pt),ct&&it.look!=="handDrawn"&&vt.selectChildren("path").attr("style",ct),it.width=ut,it.height=ft,updateNodeBounds(it,vt),it.intersect=function(kt){return intersect_default.polygon(it,Ct,kt)},ht}__name(hexagon,"hexagon");async function hourglass(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.label="",it.labelStyle=lt;const{shapeSvg:ht}=await labelHelper(rt,it,getNodeClasses(it)),dt=Math.max(30,it?.width??0),ft=Math.max(30,it?.height??0),{cssStyles:ut}=it,pt=at.svg(ht),gt=userNodeOverrides(it,{});it.look!=="handDrawn"&&(gt.roughness=0,gt.fillStyle="solid");const mt=[{x:0,y:0},{x:dt,y:0},{x:0,y:ft},{x:dt,y:ft}],_t=createPathFromPoints(mt),yt=pt.path(_t,gt),bt=ht.insert(()=>yt,":first-child");return bt.attr("class","basic label-container"),ut&&it.look!=="handDrawn"&&bt.selectChildren("path").attr("style",ut),ct&&it.look!=="handDrawn"&&bt.selectChildren("path").attr("style",ct),bt.attr("transform",`translate(${-dt/2}, ${-ft/2})`),updateNodeBounds(it,bt),it.intersect=function(xt){return log.info("Pill intersect",it,{points:mt}),intersect_default.polygon(it,mt,xt)},ht}__name(hourglass,"hourglass");async function icon(rt,it,{config:{themeVariables:lt,flowchart:ct}}){const{labelStyles:ht}=styles2String(it);it.labelStyle=ht;const dt=it.assetHeight??48,ft=it.assetWidth??48,ut=Math.max(dt,ft),pt=ct?.wrappingWidth;it.width=Math.max(ut,pt??0);const{shapeSvg:gt,bbox:mt,label:_t}=await labelHelper(rt,it,"icon-shape default"),yt=it.pos==="t",bt=ut,xt=ut,{nodeBorder:wt}=lt,{stylesMap:Ct}=compileStyles(it),St=-xt/2,Tt=-bt/2,vt=it.label?8:0,kt=at.svg(gt),Et=userNodeOverrides(it,{stroke:"none",fill:"none"});it.look!=="handDrawn"&&(Et.roughness=0,Et.fillStyle="solid");const Lt=kt.rectangle(St,Tt,xt,bt,Et),At=Math.max(xt,mt.width),It=bt+mt.height+vt,Bt=kt.rectangle(-At/2,-It/2,At,It,{...Et,fill:"transparent",stroke:"none"}),Dt=gt.insert(()=>Lt,":first-child"),Rt=gt.insert(()=>Bt);if(it.icon){const Pt=gt.append("g");Pt.html(`<g>${await getIconSVG(it.icon,{height:ut,width:ut,fallbackPrefix:""})}</g>`);const Ht=Pt.node().getBBox(),Nt=Ht.width,Ot=Ht.height,Mt=Ht.x,zt=Ht.y;Pt.attr("transform",`translate(${-Nt/2-Mt},${yt?mt.height/2+vt/2-Ot/2-zt:-mt.height/2-vt/2-Ot/2-zt})`),Pt.attr("style",`color: ${Ct.get("stroke")??wt};`)}return _t.attr("transform",`translate(${-mt.width/2-(mt.x-(mt.left??0))},${yt?-It/2:It/2-mt.height})`),Dt.attr("transform",`translate(0,${yt?mt.height/2+vt/2:-mt.height/2-vt/2})`),updateNodeBounds(it,Rt),it.intersect=function(Pt){if(log.info("iconSquare intersect",it,Pt),!it.label)return intersect_default.rect(it,Pt);const Ht=it.x??0,Nt=it.y??0,Ot=it.height??0;let Mt=[];return yt?Mt=[{x:Ht-mt.width/2,y:Nt-Ot/2},{x:Ht+mt.width/2,y:Nt-Ot/2},{x:Ht+mt.width/2,y:Nt-Ot/2+mt.height+vt},{x:Ht+xt/2,y:Nt-Ot/2+mt.height+vt},{x:Ht+xt/2,y:Nt+Ot/2},{x:Ht-xt/2,y:Nt+Ot/2},{x:Ht-xt/2,y:Nt-Ot/2+mt.height+vt},{x:Ht-mt.width/2,y:Nt-Ot/2+mt.height+vt}]:Mt=[{x:Ht-xt/2,y:Nt-Ot/2},{x:Ht+xt/2,y:Nt-Ot/2},{x:Ht+xt/2,y:Nt-Ot/2+bt},{x:Ht+mt.width/2,y:Nt-Ot/2+bt},{x:Ht+mt.width/2/2,y:Nt+Ot/2},{x:Ht-mt.width/2,y:Nt+Ot/2},{x:Ht-mt.width/2,y:Nt-Ot/2+bt},{x:Ht-xt/2,y:Nt-Ot/2+bt}],intersect_default.polygon(it,Mt,Pt)},gt}__name(icon,"icon");async function iconCircle(rt,it,{config:{themeVariables:lt,flowchart:ct}}){const{labelStyles:ht}=styles2String(it);it.labelStyle=ht;const dt=it.assetHeight??48,ft=it.assetWidth??48,ut=Math.max(dt,ft),pt=ct?.wrappingWidth;it.width=Math.max(ut,pt??0);const{shapeSvg:gt,bbox:mt,label:_t}=await labelHelper(rt,it,"icon-shape default"),yt=20,bt=it.label?8:0,xt=it.pos==="t",{nodeBorder:wt,mainBkg:Ct}=lt,{stylesMap:St}=compileStyles(it),Tt=at.svg(gt),vt=userNodeOverrides(it,{});it.look!=="handDrawn"&&(vt.roughness=0,vt.fillStyle="solid");const kt=St.get("fill");vt.stroke=kt??Ct;const Et=gt.append("g");it.icon&&Et.html(`<g>${await getIconSVG(it.icon,{height:ut,width:ut,fallbackPrefix:""})}</g>`);const Lt=Et.node().getBBox(),At=Lt.width,It=Lt.height,Bt=Lt.x,Dt=Lt.y,Rt=Math.max(At,It)*Math.SQRT2+yt*2,Pt=Tt.circle(0,0,Rt,vt),Ht=Math.max(Rt,mt.width),Nt=Rt+mt.height+bt,Ot=Tt.rectangle(-Ht/2,-Nt/2,Ht,Nt,{...vt,fill:"transparent",stroke:"none"}),Mt=gt.insert(()=>Pt,":first-child"),zt=gt.insert(()=>Ot);return Et.attr("transform",`translate(${-At/2-Bt},${xt?mt.height/2+bt/2-It/2-Dt:-mt.height/2-bt/2-It/2-Dt})`),Et.attr("style",`color: ${St.get("stroke")??wt};`),_t.attr("transform",`translate(${-mt.width/2-(mt.x-(mt.left??0))},${xt?-Nt/2:Nt/2-mt.height})`),Mt.attr("transform",`translate(0,${xt?mt.height/2+bt/2:-mt.height/2-bt/2})`),updateNodeBounds(it,zt),it.intersect=function(Ft){return log.info("iconSquare intersect",it,Ft),intersect_default.rect(it,Ft)},gt}__name(iconCircle,"iconCircle");async function iconRounded(rt,it,{config:{themeVariables:lt,flowchart:ct}}){const{labelStyles:ht}=styles2String(it);it.labelStyle=ht;const dt=it.assetHeight??48,ft=it.assetWidth??48,ut=Math.max(dt,ft),pt=ct?.wrappingWidth;it.width=Math.max(ut,pt??0);const{shapeSvg:gt,bbox:mt,halfPadding:_t,label:yt}=await labelHelper(rt,it,"icon-shape default"),bt=it.pos==="t",xt=ut+_t*2,wt=ut+_t*2,{nodeBorder:Ct,mainBkg:St}=lt,{stylesMap:Tt}=compileStyles(it),vt=-wt/2,kt=-xt/2,Et=it.label?8:0,Lt=at.svg(gt),At=userNodeOverrides(it,{});it.look!=="handDrawn"&&(At.roughness=0,At.fillStyle="solid");const It=Tt.get("fill");At.stroke=It??St;const Bt=Lt.path(createRoundedRectPathD(vt,kt,wt,xt,5),At),Dt=Math.max(wt,mt.width),Rt=xt+mt.height+Et,Pt=Lt.rectangle(-Dt/2,-Rt/2,Dt,Rt,{...At,fill:"transparent",stroke:"none"}),Ht=gt.insert(()=>Bt,":first-child").attr("class","icon-shape2"),Nt=gt.insert(()=>Pt);if(it.icon){const Ot=gt.append("g");Ot.html(`<g>${await getIconSVG(it.icon,{height:ut,width:ut,fallbackPrefix:""})}</g>`);const Mt=Ot.node().getBBox(),zt=Mt.width,Ft=Mt.height,Wt=Mt.x,jt=Mt.y;Ot.attr("transform",`translate(${-zt/2-Wt},${bt?mt.height/2+Et/2-Ft/2-jt:-mt.height/2-Et/2-Ft/2-jt})`),Ot.attr("style",`color: ${Tt.get("stroke")??Ct};`)}return yt.attr("transform",`translate(${-mt.width/2-(mt.x-(mt.left??0))},${bt?-Rt/2:Rt/2-mt.height})`),Ht.attr("transform",`translate(0,${bt?mt.height/2+Et/2:-mt.height/2-Et/2})`),updateNodeBounds(it,Nt),it.intersect=function(Ot){if(log.info("iconSquare intersect",it,Ot),!it.label)return intersect_default.rect(it,Ot);const Mt=it.x??0,zt=it.y??0,Ft=it.height??0;let Wt=[];return bt?Wt=[{x:Mt-mt.width/2,y:zt-Ft/2},{x:Mt+mt.width/2,y:zt-Ft/2},{x:Mt+mt.width/2,y:zt-Ft/2+mt.height+Et},{x:Mt+wt/2,y:zt-Ft/2+mt.height+Et},{x:Mt+wt/2,y:zt+Ft/2},{x:Mt-wt/2,y:zt+Ft/2},{x:Mt-wt/2,y:zt-Ft/2+mt.height+Et},{x:Mt-mt.width/2,y:zt-Ft/2+mt.height+Et}]:Wt=[{x:Mt-wt/2,y:zt-Ft/2},{x:Mt+wt/2,y:zt-Ft/2},{x:Mt+wt/2,y:zt-Ft/2+xt},{x:Mt+mt.width/2,y:zt-Ft/2+xt},{x:Mt+mt.width/2/2,y:zt+Ft/2},{x:Mt-mt.width/2,y:zt+Ft/2},{x:Mt-mt.width/2,y:zt-Ft/2+xt},{x:Mt-wt/2,y:zt-Ft/2+xt}],intersect_default.polygon(it,Wt,Ot)},gt}__name(iconRounded,"iconRounded");async function iconSquare(rt,it,{config:{themeVariables:lt,flowchart:ct}}){const{labelStyles:ht}=styles2String(it);it.labelStyle=ht;const dt=it.assetHeight??48,ft=it.assetWidth??48,ut=Math.max(dt,ft),pt=ct?.wrappingWidth;it.width=Math.max(ut,pt??0);const{shapeSvg:gt,bbox:mt,halfPadding:_t,label:yt}=await labelHelper(rt,it,"icon-shape default"),bt=it.pos==="t",xt=ut+_t*2,wt=ut+_t*2,{nodeBorder:Ct,mainBkg:St}=lt,{stylesMap:Tt}=compileStyles(it),vt=-wt/2,kt=-xt/2,Et=it.label?8:0,Lt=at.svg(gt),At=userNodeOverrides(it,{});it.look!=="handDrawn"&&(At.roughness=0,At.fillStyle="solid");const It=Tt.get("fill");At.stroke=It??St;const Bt=Lt.path(createRoundedRectPathD(vt,kt,wt,xt,.1),At),Dt=Math.max(wt,mt.width),Rt=xt+mt.height+Et,Pt=Lt.rectangle(-Dt/2,-Rt/2,Dt,Rt,{...At,fill:"transparent",stroke:"none"}),Ht=gt.insert(()=>Bt,":first-child"),Nt=gt.insert(()=>Pt);if(it.icon){const Ot=gt.append("g");Ot.html(`<g>${await getIconSVG(it.icon,{height:ut,width:ut,fallbackPrefix:""})}</g>`);const Mt=Ot.node().getBBox(),zt=Mt.width,Ft=Mt.height,Wt=Mt.x,jt=Mt.y;Ot.attr("transform",`translate(${-zt/2-Wt},${bt?mt.height/2+Et/2-Ft/2-jt:-mt.height/2-Et/2-Ft/2-jt})`),Ot.attr("style",`color: ${Tt.get("stroke")??Ct};`)}return yt.attr("transform",`translate(${-mt.width/2-(mt.x-(mt.left??0))},${bt?-Rt/2:Rt/2-mt.height})`),Ht.attr("transform",`translate(0,${bt?mt.height/2+Et/2:-mt.height/2-Et/2})`),updateNodeBounds(it,Nt),it.intersect=function(Ot){if(log.info("iconSquare intersect",it,Ot),!it.label)return intersect_default.rect(it,Ot);const Mt=it.x??0,zt=it.y??0,Ft=it.height??0;let Wt=[];return bt?Wt=[{x:Mt-mt.width/2,y:zt-Ft/2},{x:Mt+mt.width/2,y:zt-Ft/2},{x:Mt+mt.width/2,y:zt-Ft/2+mt.height+Et},{x:Mt+wt/2,y:zt-Ft/2+mt.height+Et},{x:Mt+wt/2,y:zt+Ft/2},{x:Mt-wt/2,y:zt+Ft/2},{x:Mt-wt/2,y:zt-Ft/2+mt.height+Et},{x:Mt-mt.width/2,y:zt-Ft/2+mt.height+Et}]:Wt=[{x:Mt-wt/2,y:zt-Ft/2},{x:Mt+wt/2,y:zt-Ft/2},{x:Mt+wt/2,y:zt-Ft/2+xt},{x:Mt+mt.width/2,y:zt-Ft/2+xt},{x:Mt+mt.width/2/2,y:zt+Ft/2},{x:Mt-mt.width/2,y:zt+Ft/2},{x:Mt-mt.width/2,y:zt-Ft/2+xt},{x:Mt-wt/2,y:zt-Ft/2+xt}],intersect_default.polygon(it,Wt,Ot)},gt}__name(iconSquare,"iconSquare");async function imageSquare(rt,it,{config:{flowchart:lt}}){const ct=new Image;ct.src=it?.img??"",await ct.decode();const ht=Number(ct.naturalWidth.toString().replace("px","")),dt=Number(ct.naturalHeight.toString().replace("px",""));it.imageAspectRatio=ht/dt;const{labelStyles:ft}=styles2String(it);it.labelStyle=ft;const ut=lt?.wrappingWidth;it.defaultWidth=lt?.wrappingWidth;const pt=Math.max(it.label?ut??0:0,it?.assetWidth??ht),gt=it.constraint==="on"&&it?.assetHeight?it.assetHeight*it.imageAspectRatio:pt,mt=it.constraint==="on"?gt/it.imageAspectRatio:it?.assetHeight??dt;it.width=Math.max(gt,ut??0);const{shapeSvg:_t,bbox:yt,label:bt}=await labelHelper(rt,it,"image-shape default"),xt=it.pos==="t",wt=-gt/2,Ct=-mt/2,St=it.label?8:0,Tt=at.svg(_t),vt=userNodeOverrides(it,{});it.look!=="handDrawn"&&(vt.roughness=0,vt.fillStyle="solid");const kt=Tt.rectangle(wt,Ct,gt,mt,vt),Et=Math.max(gt,yt.width),Lt=mt+yt.height+St,At=Tt.rectangle(-Et/2,-Lt/2,Et,Lt,{...vt,fill:"none",stroke:"none"}),It=_t.insert(()=>kt,":first-child"),Bt=_t.insert(()=>At);if(it.img){const Dt=_t.append("image");Dt.attr("href",it.img),Dt.attr("width",gt),Dt.attr("height",mt),Dt.attr("preserveAspectRatio","none"),Dt.attr("transform",`translate(${-gt/2},${xt?Lt/2-mt:-Lt/2})`)}return bt.attr("transform",`translate(${-yt.width/2-(yt.x-(yt.left??0))},${xt?-mt/2-yt.height/2-St/2:mt/2-yt.height/2+St/2})`),It.attr("transform",`translate(0,${xt?yt.height/2+St/2:-yt.height/2-St/2})`),updateNodeBounds(it,Bt),it.intersect=function(Dt){if(log.info("iconSquare intersect",it,Dt),!it.label)return intersect_default.rect(it,Dt);const Rt=it.x??0,Pt=it.y??0,Ht=it.height??0;let Nt=[];return xt?Nt=[{x:Rt-yt.width/2,y:Pt-Ht/2},{x:Rt+yt.width/2,y:Pt-Ht/2},{x:Rt+yt.width/2,y:Pt-Ht/2+yt.height+St},{x:Rt+gt/2,y:Pt-Ht/2+yt.height+St},{x:Rt+gt/2,y:Pt+Ht/2},{x:Rt-gt/2,y:Pt+Ht/2},{x:Rt-gt/2,y:Pt-Ht/2+yt.height+St},{x:Rt-yt.width/2,y:Pt-Ht/2+yt.height+St}]:Nt=[{x:Rt-gt/2,y:Pt-Ht/2},{x:Rt+gt/2,y:Pt-Ht/2},{x:Rt+gt/2,y:Pt-Ht/2+mt},{x:Rt+yt.width/2,y:Pt-Ht/2+mt},{x:Rt+yt.width/2/2,y:Pt+Ht/2},{x:Rt-yt.width/2,y:Pt+Ht/2},{x:Rt-yt.width/2,y:Pt-Ht/2+mt},{x:Rt-gt/2,y:Pt-Ht/2+mt}],intersect_default.polygon(it,Nt,Dt)},_t}__name(imageSquare,"imageSquare");async function inv_trapezoid(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;const{shapeSvg:ht,bbox:dt}=await labelHelper(rt,it,getNodeClasses(it)),ft=Math.max(dt.width+(it.padding??0)*2,it?.width??0),ut=Math.max(dt.height+(it.padding??0)*2,it?.height??0),pt=[{x:0,y:0},{x:ft,y:0},{x:ft+3*ut/6,y:-ut},{x:-3*ut/6,y:-ut}];let gt;const{cssStyles:mt}=it;if(it.look==="handDrawn"){const _t=at.svg(ht),yt=userNodeOverrides(it,{}),bt=createPathFromPoints(pt),xt=_t.path(bt,yt);gt=ht.insert(()=>xt,":first-child").attr("transform",`translate(${-ft/2}, ${ut/2})`),mt&&gt.attr("style",mt)}else gt=insertPolygonShape(ht,ft,ut,pt);return ct&&gt.attr("style",ct),it.width=ft,it.height=ut,updateNodeBounds(it,gt),it.intersect=function(_t){return intersect_default.polygon(it,pt,_t)},ht}__name(inv_trapezoid,"inv_trapezoid");async function drawRect(rt,it,lt){const{labelStyles:ct,nodeStyles:ht}=styles2String(it);it.labelStyle=ct;const{shapeSvg:dt,bbox:ft}=await labelHelper(rt,it,getNodeClasses(it)),ut=Math.max(ft.width+lt.labelPaddingX*2,it?.width||0),pt=Math.max(ft.height+lt.labelPaddingY*2,it?.height||0),gt=-ut/2,mt=-pt/2;let _t,{rx:yt,ry:bt}=it;const{cssStyles:xt}=it;if(lt?.rx&&lt.ry&&(yt=lt.rx,bt=lt.ry),it.look==="handDrawn"){const wt=at.svg(dt),Ct=userNodeOverrides(it,{}),St=yt||bt?wt.path(createRoundedRectPathD(gt,mt,ut,pt,yt||0),Ct):wt.rectangle(gt,mt,ut,pt,Ct);_t=dt.insert(()=>St,":first-child"),_t.attr("class","basic label-container").attr("style",handleUndefinedAttr(xt))}else _t=dt.insert("rect",":first-child"),_t.attr("class","basic label-container").attr("style",ht).attr("rx",handleUndefinedAttr(yt)).attr("ry",handleUndefinedAttr(bt)).attr("x",gt).attr("y",mt).attr("width",ut).attr("height",pt);return updateNodeBounds(it,_t),it.calcIntersect=function(wt,Ct){return intersect_default.rect(wt,Ct)},it.intersect=function(wt){return intersect_default.rect(it,wt)},dt}__name(drawRect,"drawRect");async function labelRect(rt,it){const{shapeSvg:lt,bbox:ct,label:ht}=await labelHelper(rt,it,"label"),dt=lt.insert("rect",":first-child");return dt.attr("width",.1).attr("height",.1),lt.attr("class","label edgeLabel"),ht.attr("transform",`translate(${-(ct.width/2)-(ct.x-(ct.left??0))}, ${-(ct.height/2)-(ct.y-(ct.top??0))})`),updateNodeBounds(it,dt),it.intersect=function(pt){return intersect_default.rect(it,pt)},lt}__name(labelRect,"labelRect");async function lean_left(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;const{shapeSvg:ht,bbox:dt}=await labelHelper(rt,it,getNodeClasses(it)),ft=Math.max(dt.width+(it.padding??0),it?.width??0),ut=Math.max(dt.height+(it.padding??0),it?.height??0),pt=[{x:0,y:0},{x:ft+3*ut/6,y:0},{x:ft,y:-ut},{x:-(3*ut)/6,y:-ut}];let gt;const{cssStyles:mt}=it;if(it.look==="handDrawn"){const _t=at.svg(ht),yt=userNodeOverrides(it,{}),bt=createPathFromPoints(pt),xt=_t.path(bt,yt);gt=ht.insert(()=>xt,":first-child").attr("transform",`translate(${-ft/2}, ${ut/2})`),mt&&gt.attr("style",mt)}else gt=insertPolygonShape(ht,ft,ut,pt);return ct&&gt.attr("style",ct),it.width=ft,it.height=ut,updateNodeBounds(it,gt),it.intersect=function(_t){return intersect_default.polygon(it,pt,_t)},ht}__name(lean_left,"lean_left");async function lean_right(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;const{shapeSvg:ht,bbox:dt}=await labelHelper(rt,it,getNodeClasses(it)),ft=Math.max(dt.width+(it.padding??0),it?.width??0),ut=Math.max(dt.height+(it.padding??0),it?.height??0),pt=[{x:-3*ut/6,y:0},{x:ft,y:0},{x:ft+3*ut/6,y:-ut},{x:0,y:-ut}];let gt;const{cssStyles:mt}=it;if(it.look==="handDrawn"){const _t=at.svg(ht),yt=userNodeOverrides(it,{}),bt=createPathFromPoints(pt),xt=_t.path(bt,yt);gt=ht.insert(()=>xt,":first-child").attr("transform",`translate(${-ft/2}, ${ut/2})`),mt&&gt.attr("style",mt)}else gt=insertPolygonShape(ht,ft,ut,pt);return ct&&gt.attr("style",ct),it.width=ft,it.height=ut,updateNodeBounds(it,gt),it.intersect=function(_t){return intersect_default.polygon(it,pt,_t)},ht}__name(lean_right,"lean_right");function lightningBolt(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.label="",it.labelStyle=lt;const ht=rt.insert("g").attr("class",getNodeClasses(it)).attr("id",it.domId??it.id),{cssStyles:dt}=it,ft=Math.max(35,it?.width??0),ut=Math.max(35,it?.height??0),pt=7,gt=[{x:ft,y:0},{x:0,y:ut+pt/2},{x:ft-2*pt,y:ut+pt/2},{x:0,y:2*ut},{x:ft,y:ut-pt/2},{x:2*pt,y:ut-pt/2}],mt=at.svg(ht),_t=userNodeOverrides(it,{});it.look!=="handDrawn"&&(_t.roughness=0,_t.fillStyle="solid");const yt=createPathFromPoints(gt),bt=mt.path(yt,_t),xt=ht.insert(()=>bt,":first-child");return dt&&it.look!=="handDrawn"&&xt.selectAll("path").attr("style",dt),ct&&it.look!=="handDrawn"&&xt.selectAll("path").attr("style",ct),xt.attr("transform",`translate(-${ft/2},${-ut})`),updateNodeBounds(it,xt),it.intersect=function(wt){return log.info("lightningBolt intersect",it,wt),intersect_default.polygon(it,gt,wt)},ht}__name(lightningBolt,"lightningBolt");var createCylinderPathD2=__name((rt,it,lt,ct,ht,dt,ft)=>[`M${rt},${it+dt}`,`a${ht},${dt} 0,0,0 ${lt},0`,`a${ht},${dt} 0,0,0 ${-lt},0`,`l0,${ct}`,`a${ht},${dt} 0,0,0 ${lt},0`,`l0,${-ct}`,`M${rt},${it+dt+ft}`,`a${ht},${dt} 0,0,0 ${lt},0`].join(" "),"createCylinderPathD"),createOuterCylinderPathD2=__name((rt,it,lt,ct,ht,dt,ft)=>[`M${rt},${it+dt}`,`M${rt+lt},${it+dt}`,`a${ht},${dt} 0,0,0 ${-lt},0`,`l0,${ct}`,`a${ht},${dt} 0,0,0 ${lt},0`,`l0,${-ct}`,`M${rt},${it+dt+ft}`,`a${ht},${dt} 0,0,0 ${lt},0`].join(" "),"createOuterCylinderPathD"),createInnerCylinderPathD2=__name((rt,it,lt,ct,ht,dt)=>[`M${rt-lt/2},${-ct/2}`,`a${ht},${dt} 0,0,0 ${lt},0`].join(" "),"createInnerCylinderPathD");async function linedCylinder(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;const{shapeSvg:ht,bbox:dt,label:ft}=await labelHelper(rt,it,getNodeClasses(it)),ut=Math.max(dt.width+(it.padding??0),it.width??0),pt=ut/2,gt=pt/(2.5+ut/50),mt=Math.max(dt.height+gt+(it.padding??0),it.height??0),_t=mt*.1;let yt;const{cssStyles:bt}=it;if(it.look==="handDrawn"){const xt=at.svg(ht),wt=createOuterCylinderPathD2(0,0,ut,mt,pt,gt,_t),Ct=createInnerCylinderPathD2(0,gt,ut,mt,pt,gt),St=userNodeOverrides(it,{}),Tt=xt.path(wt,St),vt=xt.path(Ct,St);ht.insert(()=>vt,":first-child").attr("class","line"),yt=ht.insert(()=>Tt,":first-child"),yt.attr("class","basic label-container"),bt&&yt.attr("style",bt)}else{const xt=createCylinderPathD2(0,0,ut,mt,pt,gt,_t);yt=ht.insert("path",":first-child").attr("d",xt).attr("class","basic label-container").attr("style",handleUndefinedAttr(bt)).attr("style",ct)}return yt.attr("label-offset-y",gt),yt.attr("transform",`translate(${-ut/2}, ${-(mt/2+gt)})`),updateNodeBounds(it,yt),ft.attr("transform",`translate(${-(dt.width/2)-(dt.x-(dt.left??0))}, ${-(dt.height/2)+gt-(dt.y-(dt.top??0))})`),it.intersect=function(xt){const wt=intersect_default.rect(it,xt),Ct=wt.x-(it.x??0);if(pt!=0&&(Math.abs(Ct)<(it.width??0)/2||Math.abs(Ct)==(it.width??0)/2&&Math.abs(wt.y-(it.y??0))>(it.height??0)/2-gt)){let St=gt*gt*(1-Ct*Ct/(pt*pt));St>0&&(St=Math.sqrt(St)),St=gt-St,xt.y-(it.y??0)>0&&(St=-St),wt.y+=St}return wt},ht}__name(linedCylinder,"linedCylinder");async function linedWaveEdgedRect(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;const{shapeSvg:ht,bbox:dt,label:ft}=await labelHelper(rt,it,getNodeClasses(it)),ut=Math.max(dt.width+(it.padding??0)*2,it?.width??0),pt=Math.max(dt.height+(it.padding??0)*2,it?.height??0),gt=pt/4,mt=pt+gt,{cssStyles:_t}=it,yt=at.svg(ht),bt=userNodeOverrides(it,{});it.look!=="handDrawn"&&(bt.roughness=0,bt.fillStyle="solid");const xt=[{x:-ut/2-ut/2*.1,y:-mt/2},{x:-ut/2-ut/2*.1,y:mt/2},...generateFullSineWavePoints(-ut/2-ut/2*.1,mt/2,ut/2+ut/2*.1,mt/2,gt,.8),{x:ut/2+ut/2*.1,y:-mt/2},{x:-ut/2-ut/2*.1,y:-mt/2},{x:-ut/2,y:-mt/2},{x:-ut/2,y:mt/2*1.1},{x:-ut/2,y:-mt/2}],wt=yt.polygon(xt.map(St=>[St.x,St.y]),bt),Ct=ht.insert(()=>wt,":first-child");return Ct.attr("class","basic label-container"),_t&&it.look!=="handDrawn"&&Ct.selectAll("path").attr("style",_t),ct&&it.look!=="handDrawn"&&Ct.selectAll("path").attr("style",ct),Ct.attr("transform",`translate(0,${-gt/2})`),ft.attr("transform",`translate(${-ut/2+(it.padding??0)+ut/2*.1/2-(dt.x-(dt.left??0))},${-pt/2+(it.padding??0)-gt/2-(dt.y-(dt.top??0))})`),updateNodeBounds(it,Ct),it.intersect=function(St){return intersect_default.polygon(it,xt,St)},ht}__name(linedWaveEdgedRect,"linedWaveEdgedRect");async function multiRect(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;const{shapeSvg:ht,bbox:dt,label:ft}=await labelHelper(rt,it,getNodeClasses(it)),ut=Math.max(dt.width+(it.padding??0)*2,it?.width??0),pt=Math.max(dt.height+(it.padding??0)*2,it?.height??0),gt=5,mt=-ut/2,_t=-pt/2,{cssStyles:yt}=it,bt=at.svg(ht),xt=userNodeOverrides(it,{}),wt=[{x:mt-gt,y:_t+gt},{x:mt-gt,y:_t+pt+gt},{x:mt+ut-gt,y:_t+pt+gt},{x:mt+ut-gt,y:_t+pt},{x:mt+ut,y:_t+pt},{x:mt+ut,y:_t+pt-gt},{x:mt+ut+gt,y:_t+pt-gt},{x:mt+ut+gt,y:_t-gt},{x:mt+gt,y:_t-gt},{x:mt+gt,y:_t},{x:mt,y:_t},{x:mt,y:_t+gt}],Ct=[{x:mt,y:_t+gt},{x:mt+ut-gt,y:_t+gt},{x:mt+ut-gt,y:_t+pt},{x:mt+ut,y:_t+pt},{x:mt+ut,y:_t},{x:mt,y:_t}];it.look!=="handDrawn"&&(xt.roughness=0,xt.fillStyle="solid");const St=createPathFromPoints(wt),Tt=bt.path(St,xt),vt=createPathFromPoints(Ct),kt=bt.path(vt,{...xt,fill:"none"}),Et=ht.insert(()=>kt,":first-child");return Et.insert(()=>Tt,":first-child"),Et.attr("class","basic label-container"),yt&&it.look!=="handDrawn"&&Et.selectAll("path").attr("style",yt),ct&&it.look!=="handDrawn"&&Et.selectAll("path").attr("style",ct),ft.attr("transform",`translate(${-(dt.width/2)-gt-(dt.x-(dt.left??0))}, ${-(dt.height/2)+gt-(dt.y-(dt.top??0))})`),updateNodeBounds(it,Et),it.intersect=function(Lt){return intersect_default.polygon(it,wt,Lt)},ht}__name(multiRect,"multiRect");async function multiWaveEdgedRectangle(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;const{shapeSvg:ht,bbox:dt,label:ft}=await labelHelper(rt,it,getNodeClasses(it)),ut=Math.max(dt.width+(it.padding??0)*2,it?.width??0),pt=Math.max(dt.height+(it.padding??0)*2,it?.height??0),gt=pt/4,mt=pt+gt,_t=-ut/2,yt=-mt/2,bt=5,{cssStyles:xt}=it,wt=generateFullSineWavePoints(_t-bt,yt+mt+bt,_t+ut-bt,yt+mt+bt,gt,.8),Ct=wt?.[wt.length-1],St=[{x:_t-bt,y:yt+bt},{x:_t-bt,y:yt+mt+bt},...wt,{x:_t+ut-bt,y:Ct.y-bt},{x:_t+ut,y:Ct.y-bt},{x:_t+ut,y:Ct.y-2*bt},{x:_t+ut+bt,y:Ct.y-2*bt},{x:_t+ut+bt,y:yt-bt},{x:_t+bt,y:yt-bt},{x:_t+bt,y:yt},{x:_t,y:yt},{x:_t,y:yt+bt}],Tt=[{x:_t,y:yt+bt},{x:_t+ut-bt,y:yt+bt},{x:_t+ut-bt,y:Ct.y-bt},{x:_t+ut,y:Ct.y-bt},{x:_t+ut,y:yt},{x:_t,y:yt}],vt=at.svg(ht),kt=userNodeOverrides(it,{});it.look!=="handDrawn"&&(kt.roughness=0,kt.fillStyle="solid");const Et=createPathFromPoints(St),Lt=vt.path(Et,kt),At=createPathFromPoints(Tt),It=vt.path(At,kt),Bt=ht.insert(()=>Lt,":first-child");return Bt.insert(()=>It),Bt.attr("class","basic label-container"),xt&&it.look!=="handDrawn"&&Bt.selectAll("path").attr("style",xt),ct&&it.look!=="handDrawn"&&Bt.selectAll("path").attr("style",ct),Bt.attr("transform",`translate(0,${-gt/2})`),ft.attr("transform",`translate(${-(dt.width/2)-bt-(dt.x-(dt.left??0))}, ${-(dt.height/2)+bt-gt/2-(dt.y-(dt.top??0))})`),updateNodeBounds(it,Bt),it.intersect=function(Dt){return intersect_default.polygon(it,St,Dt)},ht}__name(multiWaveEdgedRectangle,"multiWaveEdgedRectangle");async function note(rt,it,{config:{themeVariables:lt}}){const{labelStyles:ct,nodeStyles:ht}=styles2String(it);it.labelStyle=ct,it.useHtmlLabels||getConfig().flowchart?.htmlLabels!==!1||(it.centerLabel=!0);const{shapeSvg:ft,bbox:ut,label:pt}=await labelHelper(rt,it,getNodeClasses(it)),gt=Math.max(ut.width+(it.padding??0)*2,it?.width??0),mt=Math.max(ut.height+(it.padding??0)*2,it?.height??0),_t=-gt/2,yt=-mt/2,{cssStyles:bt}=it,xt=at.svg(ft),wt=userNodeOverrides(it,{fill:lt.noteBkgColor,stroke:lt.noteBorderColor});it.look!=="handDrawn"&&(wt.roughness=0,wt.fillStyle="solid");const Ct=xt.rectangle(_t,yt,gt,mt,wt),St=ft.insert(()=>Ct,":first-child");return St.attr("class","basic label-container"),bt&&it.look!=="handDrawn"&&St.selectAll("path").attr("style",bt),ht&&it.look!=="handDrawn"&&St.selectAll("path").attr("style",ht),pt.attr("transform",`translate(${-ut.width/2-(ut.x-(ut.left??0))}, ${-(ut.height/2)-(ut.y-(ut.top??0))})`),updateNodeBounds(it,St),it.intersect=function(Tt){return intersect_default.rect(it,Tt)},ft}__name(note,"note");var createDecisionBoxPathD=__name((rt,it,lt)=>[`M${rt+lt/2},${it}`,`L${rt+lt},${it-lt/2}`,`L${rt+lt/2},${it-lt}`,`L${rt},${it-lt/2}`,"Z"].join(" "),"createDecisionBoxPathD");async function question(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;const{shapeSvg:ht,bbox:dt}=await labelHelper(rt,it,getNodeClasses(it)),ft=dt.width+it.padding,ut=dt.height+it.padding,pt=ft+ut,gt=.5,mt=[{x:pt/2,y:0},{x:pt,y:-pt/2},{x:pt/2,y:-pt},{x:0,y:-pt/2}];let _t;const{cssStyles:yt}=it;if(it.look==="handDrawn"){const bt=at.svg(ht),xt=userNodeOverrides(it,{}),wt=createDecisionBoxPathD(0,0,pt),Ct=bt.path(wt,xt);_t=ht.insert(()=>Ct,":first-child").attr("transform",`translate(${-pt/2+gt}, ${pt/2})`),yt&&_t.attr("style",yt)}else _t=insertPolygonShape(ht,pt,pt,mt),_t.attr("transform",`translate(${-pt/2+gt}, ${pt/2})`);return ct&&_t.attr("style",ct),updateNodeBounds(it,_t),it.calcIntersect=function(bt,xt){const wt=bt.width,Ct=[{x:wt/2,y:0},{x:wt,y:-wt/2},{x:wt/2,y:-wt},{x:0,y:-wt/2}],St=intersect_default.polygon(bt,Ct,xt);return{x:St.x-.5,y:St.y-.5}},it.intersect=function(bt){return this.calcIntersect(it,bt)},ht}__name(question,"question");async function rect_left_inv_arrow(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;const{shapeSvg:ht,bbox:dt,label:ft}=await labelHelper(rt,it,getNodeClasses(it)),ut=Math.max(dt.width+(it.padding??0),it?.width??0),pt=Math.max(dt.height+(it.padding??0),it?.height??0),gt=-ut/2,mt=-pt/2,_t=mt/2,yt=[{x:gt+_t,y:mt},{x:gt,y:0},{x:gt+_t,y:-mt},{x:-gt,y:-mt},{x:-gt,y:mt}],{cssStyles:bt}=it,xt=at.svg(ht),wt=userNodeOverrides(it,{});it.look!=="handDrawn"&&(wt.roughness=0,wt.fillStyle="solid");const Ct=createPathFromPoints(yt),St=xt.path(Ct,wt),Tt=ht.insert(()=>St,":first-child");return Tt.attr("class","basic label-container"),bt&&it.look!=="handDrawn"&&Tt.selectAll("path").attr("style",bt),ct&&it.look!=="handDrawn"&&Tt.selectAll("path").attr("style",ct),Tt.attr("transform",`translate(${-_t/2},0)`),ft.attr("transform",`translate(${-_t/2-dt.width/2-(dt.x-(dt.left??0))}, ${-(dt.height/2)-(dt.y-(dt.top??0))})`),updateNodeBounds(it,Tt),it.intersect=function(vt){return intersect_default.polygon(it,yt,vt)},ht}__name(rect_left_inv_arrow,"rect_left_inv_arrow");async function rectWithTitle(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;let ht;it.cssClasses?ht="node "+it.cssClasses:ht="node default";const dt=rt.insert("g").attr("class",ht).attr("id",it.domId||it.id),ft=dt.insert("g"),ut=dt.insert("g").attr("class","label").attr("style",ct),pt=it.description,gt=it.label,mt=ut.node().appendChild(await createLabel_default(gt,it.labelStyle,!0,!0));let _t={width:0,height:0};if(evaluate(getConfig2()?.flowchart?.htmlLabels)){const It=mt.children[0],Bt=select(mt);_t=It.getBoundingClientRect(),Bt.attr("width",_t.width),Bt.attr("height",_t.height)}log.info("Text 2",pt);const yt=pt||[],bt=mt.getBBox(),xt=ut.node().appendChild(await createLabel_default(yt.join?yt.join("<br/>"):yt,it.labelStyle,!0,!0)),wt=xt.children[0],Ct=select(xt);_t=wt.getBoundingClientRect(),Ct.attr("width",_t.width),Ct.attr("height",_t.height);const St=(it.padding||0)/2;select(xt).attr("transform","translate( "+(_t.width>bt.width?0:(bt.width-_t.width)/2)+", "+(bt.height+St+5)+")"),select(mt).attr("transform","translate( "+(_t.width<bt.width?0:-(bt.width-_t.width)/2)+", 0)"),_t=ut.node().getBBox(),ut.attr("transform","translate("+-_t.width/2+", "+(-_t.height/2-St+3)+")");const Tt=_t.width+(it.padding||0),vt=_t.height+(it.padding||0),kt=-_t.width/2-St,Et=-_t.height/2-St;let Lt,At;if(it.look==="handDrawn"){const It=at.svg(dt),Bt=userNodeOverrides(it,{}),Dt=It.path(createRoundedRectPathD(kt,Et,Tt,vt,it.rx||0),Bt),Rt=It.line(-_t.width/2-St,-_t.height/2-St+bt.height+St,_t.width/2+St,-_t.height/2-St+bt.height+St,Bt);At=dt.insert(()=>(log.debug("Rough node insert CXC",Dt),Rt),":first-child"),Lt=dt.insert(()=>(log.debug("Rough node insert CXC",Dt),Dt),":first-child")}else Lt=ft.insert("rect",":first-child"),At=ft.insert("line"),Lt.attr("class","outer title-state").attr("style",ct).attr("x",-_t.width/2-St).attr("y",-_t.height/2-St).attr("width",_t.width+(it.padding||0)).attr("height",_t.height+(it.padding||0)),At.attr("class","divider").attr("x1",-_t.width/2-St).attr("x2",_t.width/2+St).attr("y1",-_t.height/2-St+bt.height+St).attr("y2",-_t.height/2-St+bt.height+St);return updateNodeBounds(it,Lt),it.intersect=function(It){return intersect_default.rect(it,It)},dt}__name(rectWithTitle,"rectWithTitle");function generateArcPoints2(rt,it,lt,ct,ht,dt,ft){const pt=(rt+lt)/2,gt=(it+ct)/2,mt=Math.atan2(ct-it,lt-rt),_t=(lt-rt)/2,yt=(ct-it)/2,bt=_t/ht,xt=yt/dt,wt=Math.sqrt(bt**2+xt**2);if(wt>1)throw new Error("The given radii are too small to create an arc between the points.");const Ct=Math.sqrt(1-wt**2),St=pt+Ct*dt*Math.sin(mt)*(ft?-1:1),Tt=gt-Ct*ht*Math.cos(mt)*(ft?-1:1),vt=Math.atan2((it-Tt)/dt,(rt-St)/ht);let Et=Math.atan2((ct-Tt)/dt,(lt-St)/ht)-vt;ft&&Et<0&&(Et+=2*Math.PI),!ft&&Et>0&&(Et-=2*Math.PI);const Lt=[];for(let At=0;At<20;At++){const It=At/19,Bt=vt+It*Et,Dt=St+ht*Math.cos(Bt),Rt=Tt+dt*Math.sin(Bt);Lt.push({x:Dt,y:Rt})}return Lt}__name(generateArcPoints2,"generateArcPoints");async function roundedRect(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;const{shapeSvg:ht,bbox:dt}=await labelHelper(rt,it,getNodeClasses(it)),ft=it?.padding??0,ut=it?.padding??0,pt=(it?.width?it?.width:dt.width)+ft*2,gt=(it?.height?it?.height:dt.height)+ut*2,mt=it.radius||5,_t=it.taper||5,{cssStyles:yt}=it,bt=at.svg(ht),xt=userNodeOverrides(it,{});it.stroke&&(xt.stroke=it.stroke),it.look!=="handDrawn"&&(xt.roughness=0,xt.fillStyle="solid");const wt=[{x:-pt/2+_t,y:-gt/2},{x:pt/2-_t,y:-gt/2},...generateArcPoints2(pt/2-_t,-gt/2,pt/2,-gt/2+_t,mt,mt,!0),{x:pt/2,y:-gt/2+_t},{x:pt/2,y:gt/2-_t},...generateArcPoints2(pt/2,gt/2-_t,pt/2-_t,gt/2,mt,mt,!0),{x:pt/2-_t,y:gt/2},{x:-pt/2+_t,y:gt/2},...generateArcPoints2(-pt/2+_t,gt/2,-pt/2,gt/2-_t,mt,mt,!0),{x:-pt/2,y:gt/2-_t},{x:-pt/2,y:-gt/2+_t},...generateArcPoints2(-pt/2,-gt/2+_t,-pt/2+_t,-gt/2,mt,mt,!0)],Ct=createPathFromPoints(wt),St=bt.path(Ct,xt),Tt=ht.insert(()=>St,":first-child");return Tt.attr("class","basic label-container outer-path"),yt&&it.look!=="handDrawn"&&Tt.selectChildren("path").attr("style",yt),ct&&it.look!=="handDrawn"&&Tt.selectChildren("path").attr("style",ct),updateNodeBounds(it,Tt),it.intersect=function(vt){return intersect_default.polygon(it,wt,vt)},ht}__name(roundedRect,"roundedRect");async function shadedProcess(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;const{shapeSvg:ht,bbox:dt,label:ft}=await labelHelper(rt,it,getNodeClasses(it)),ut=it?.padding??0,pt=Math.max(dt.width+(it.padding??0)*2,it?.width??0),gt=Math.max(dt.height+(it.padding??0)*2,it?.height??0),mt=-dt.width/2-ut,_t=-dt.height/2-ut,{cssStyles:yt}=it,bt=at.svg(ht),xt=userNodeOverrides(it,{});it.look!=="handDrawn"&&(xt.roughness=0,xt.fillStyle="solid");const wt=[{x:mt,y:_t},{x:mt+pt+8,y:_t},{x:mt+pt+8,y:_t+gt},{x:mt-8,y:_t+gt},{x:mt-8,y:_t},{x:mt,y:_t},{x:mt,y:_t+gt}],Ct=bt.polygon(wt.map(Tt=>[Tt.x,Tt.y]),xt),St=ht.insert(()=>Ct,":first-child");return St.attr("class","basic label-container").attr("style",handleUndefinedAttr(yt)),ct&&it.look!=="handDrawn"&&St.selectAll("path").attr("style",ct),yt&&it.look!=="handDrawn"&&St.selectAll("path").attr("style",ct),ft.attr("transform",`translate(${-pt/2+4+(it.padding??0)-(dt.x-(dt.left??0))},${-gt/2+(it.padding??0)-(dt.y-(dt.top??0))})`),updateNodeBounds(it,St),it.intersect=function(Tt){return intersect_default.rect(it,Tt)},ht}__name(shadedProcess,"shadedProcess");async function slopedRect(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;const{shapeSvg:ht,bbox:dt,label:ft}=await labelHelper(rt,it,getNodeClasses(it)),ut=Math.max(dt.width+(it.padding??0)*2,it?.width??0),pt=Math.max(dt.height+(it.padding??0)*2,it?.height??0),gt=-ut/2,mt=-pt/2,{cssStyles:_t}=it,yt=at.svg(ht),bt=userNodeOverrides(it,{});it.look!=="handDrawn"&&(bt.roughness=0,bt.fillStyle="solid");const xt=[{x:gt,y:mt},{x:gt,y:mt+pt},{x:gt+ut,y:mt+pt},{x:gt+ut,y:mt-pt/2}],wt=createPathFromPoints(xt),Ct=yt.path(wt,bt),St=ht.insert(()=>Ct,":first-child");return St.attr("class","basic label-container"),_t&&it.look!=="handDrawn"&&St.selectChildren("path").attr("style",_t),ct&&it.look!=="handDrawn"&&St.selectChildren("path").attr("style",ct),St.attr("transform",`translate(0, ${pt/4})`),ft.attr("transform",`translate(${-ut/2+(it.padding??0)-(dt.x-(dt.left??0))}, ${-pt/4+(it.padding??0)-(dt.y-(dt.top??0))})`),updateNodeBounds(it,St),it.intersect=function(Tt){return intersect_default.polygon(it,xt,Tt)},ht}__name(slopedRect,"slopedRect");async function squareRect2(rt,it){const lt={rx:0,ry:0,labelPaddingX:it.labelPaddingX??(it?.padding||0)*2,labelPaddingY:(it?.padding||0)*1};return drawRect(rt,it,lt)}__name(squareRect2,"squareRect");async function stadium(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;const{shapeSvg:ht,bbox:dt}=await labelHelper(rt,it,getNodeClasses(it)),ft=dt.height+it.padding,ut=dt.width+ft/4+it.padding,pt=ft/2,{cssStyles:gt}=it,mt=at.svg(ht),_t=userNodeOverrides(it,{});it.look!=="handDrawn"&&(_t.roughness=0,_t.fillStyle="solid");const yt=[{x:-ut/2+pt,y:-ft/2},{x:ut/2-pt,y:-ft/2},...generateCirclePoints(-ut/2+pt,0,pt,50,90,270),{x:ut/2-pt,y:ft/2},...generateCirclePoints(ut/2-pt,0,pt,50,270,450)],bt=createPathFromPoints(yt),xt=mt.path(bt,_t),wt=ht.insert(()=>xt,":first-child");return wt.attr("class","basic label-container outer-path"),gt&&it.look!=="handDrawn"&&wt.selectChildren("path").attr("style",gt),ct&&it.look!=="handDrawn"&&wt.selectChildren("path").attr("style",ct),updateNodeBounds(it,wt),it.intersect=function(Ct){return intersect_default.polygon(it,yt,Ct)},ht}__name(stadium,"stadium");async function state(rt,it){return drawRect(rt,it,{rx:5,ry:5})}__name(state,"state");function stateEnd(rt,it,{config:{themeVariables:lt}}){const{labelStyles:ct,nodeStyles:ht}=styles2String(it);it.labelStyle=ct;const{cssStyles:dt}=it,{lineColor:ft,stateBorder:ut,nodeBorder:pt}=lt,gt=rt.insert("g").attr("class","node default").attr("id",it.domId||it.id),mt=at.svg(gt),_t=userNodeOverrides(it,{});it.look!=="handDrawn"&&(_t.roughness=0,_t.fillStyle="solid");const yt=mt.circle(0,0,14,{..._t,stroke:ft,strokeWidth:2}),bt=ut??pt,xt=mt.circle(0,0,5,{..._t,fill:bt,stroke:bt,strokeWidth:2,fillStyle:"solid"}),wt=gt.insert(()=>yt,":first-child");return wt.insert(()=>xt),dt&&wt.selectAll("path").attr("style",dt),ht&&wt.selectAll("path").attr("style",ht),updateNodeBounds(it,wt),it.intersect=function(Ct){return intersect_default.circle(it,7,Ct)},gt}__name(stateEnd,"stateEnd");function stateStart(rt,it,{config:{themeVariables:lt}}){const{lineColor:ct}=lt,ht=rt.insert("g").attr("class","node default").attr("id",it.domId||it.id);let dt;if(it.look==="handDrawn"){const ut=at.svg(ht).circle(0,0,14,solidStateFill(ct));dt=ht.insert(()=>ut),dt.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else dt=ht.insert("circle",":first-child"),dt.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return updateNodeBounds(it,dt),it.intersect=function(ft){return intersect_default.circle(it,7,ft)},ht}__name(stateStart,"stateStart");async function subroutine(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;const{shapeSvg:ht,bbox:dt}=await labelHelper(rt,it,getNodeClasses(it)),ft=(it?.padding||0)/2,ut=dt.width+it.padding,pt=dt.height+it.padding,gt=-dt.width/2-ft,mt=-dt.height/2-ft,_t=[{x:0,y:0},{x:ut,y:0},{x:ut,y:-pt},{x:0,y:-pt},{x:0,y:0},{x:-8,y:0},{x:ut+8,y:0},{x:ut+8,y:-pt},{x:-8,y:-pt},{x:-8,y:0}];if(it.look==="handDrawn"){const yt=at.svg(ht),bt=userNodeOverrides(it,{}),xt=yt.rectangle(gt-8,mt,ut+16,pt,bt),wt=yt.line(gt,mt,gt,mt+pt,bt),Ct=yt.line(gt+ut,mt,gt+ut,mt+pt,bt);ht.insert(()=>wt,":first-child"),ht.insert(()=>Ct,":first-child");const St=ht.insert(()=>xt,":first-child"),{cssStyles:Tt}=it;St.attr("class","basic label-container").attr("style",handleUndefinedAttr(Tt)),updateNodeBounds(it,St)}else{const yt=insertPolygonShape(ht,ut,pt,_t);ct&&yt.attr("style",ct),updateNodeBounds(it,yt)}return it.intersect=function(yt){return intersect_default.polygon(it,_t,yt)},ht}__name(subroutine,"subroutine");async function taggedRect(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;const{shapeSvg:ht,bbox:dt}=await labelHelper(rt,it,getNodeClasses(it)),ft=Math.max(dt.width+(it.padding??0)*2,it?.width??0),ut=Math.max(dt.height+(it.padding??0)*2,it?.height??0),pt=-ft/2,gt=-ut/2,mt=.2*ut,_t=.2*ut,{cssStyles:yt}=it,bt=at.svg(ht),xt=userNodeOverrides(it,{}),wt=[{x:pt-mt/2,y:gt},{x:pt+ft+mt/2,y:gt},{x:pt+ft+mt/2,y:gt+ut},{x:pt-mt/2,y:gt+ut}],Ct=[{x:pt+ft-mt/2,y:gt+ut},{x:pt+ft+mt/2,y:gt+ut},{x:pt+ft+mt/2,y:gt+ut-_t}];it.look!=="handDrawn"&&(xt.roughness=0,xt.fillStyle="solid");const St=createPathFromPoints(wt),Tt=bt.path(St,xt),vt=createPathFromPoints(Ct),kt=bt.path(vt,{...xt,fillStyle:"solid"}),Et=ht.insert(()=>kt,":first-child");return Et.insert(()=>Tt,":first-child"),Et.attr("class","basic label-container"),yt&&it.look!=="handDrawn"&&Et.selectAll("path").attr("style",yt),ct&&it.look!=="handDrawn"&&Et.selectAll("path").attr("style",ct),updateNodeBounds(it,Et),it.intersect=function(Lt){return intersect_default.polygon(it,wt,Lt)},ht}__name(taggedRect,"taggedRect");async function taggedWaveEdgedRectangle(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;const{shapeSvg:ht,bbox:dt,label:ft}=await labelHelper(rt,it,getNodeClasses(it)),ut=Math.max(dt.width+(it.padding??0)*2,it?.width??0),pt=Math.max(dt.height+(it.padding??0)*2,it?.height??0),gt=pt/4,mt=.2*ut,_t=.2*pt,yt=pt+gt,{cssStyles:bt}=it,xt=at.svg(ht),wt=userNodeOverrides(it,{});it.look!=="handDrawn"&&(wt.roughness=0,wt.fillStyle="solid");const Ct=[{x:-ut/2-ut/2*.1,y:yt/2},...generateFullSineWavePoints(-ut/2-ut/2*.1,yt/2,ut/2+ut/2*.1,yt/2,gt,.8),{x:ut/2+ut/2*.1,y:-yt/2},{x:-ut/2-ut/2*.1,y:-yt/2}],St=-ut/2+ut/2*.1,Tt=-yt/2-_t*.4,vt=[{x:St+ut-mt,y:(Tt+pt)*1.4},{x:St+ut,y:Tt+pt-_t},{x:St+ut,y:(Tt+pt)*.9},...generateFullSineWavePoints(St+ut,(Tt+pt)*1.3,St+ut-mt,(Tt+pt)*1.5,-pt*.03,.5)],kt=createPathFromPoints(Ct),Et=xt.path(kt,wt),Lt=createPathFromPoints(vt),At=xt.path(Lt,{...wt,fillStyle:"solid"}),It=ht.insert(()=>At,":first-child");return It.insert(()=>Et,":first-child"),It.attr("class","basic label-container"),bt&&it.look!=="handDrawn"&&It.selectAll("path").attr("style",bt),ct&&it.look!=="handDrawn"&&It.selectAll("path").attr("style",ct),It.attr("transform",`translate(0,${-gt/2})`),ft.attr("transform",`translate(${-ut/2+(it.padding??0)-(dt.x-(dt.left??0))},${-pt/2+(it.padding??0)-gt/2-(dt.y-(dt.top??0))})`),updateNodeBounds(it,It),it.intersect=function(Bt){return intersect_default.polygon(it,Ct,Bt)},ht}__name(taggedWaveEdgedRectangle,"taggedWaveEdgedRectangle");async function text(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;const{shapeSvg:ht,bbox:dt}=await labelHelper(rt,it,getNodeClasses(it)),ft=Math.max(dt.width+it.padding,it?.width||0),ut=Math.max(dt.height+it.padding,it?.height||0),pt=-ft/2,gt=-ut/2,mt=ht.insert("rect",":first-child");return mt.attr("class","text").attr("style",ct).attr("rx",0).attr("ry",0).attr("x",pt).attr("y",gt).attr("width",ft).attr("height",ut),updateNodeBounds(it,mt),it.intersect=function(_t){return intersect_default.rect(it,_t)},ht}__name(text,"text");var createCylinderPathD3=__name((rt,it,lt,ct,ht,dt)=>`M${rt},${it}
    a${ht},${dt} 0,0,1 0,${-ct}
    l${lt},0
    a${ht},${dt} 0,0,1 0,${ct}
    M${lt},${-ct}
    a${ht},${dt} 0,0,0 0,${ct}
    l${-lt},0`,"createCylinderPathD"),createOuterCylinderPathD3=__name((rt,it,lt,ct,ht,dt)=>[`M${rt},${it}`,`M${rt+lt},${it}`,`a${ht},${dt} 0,0,0 0,${-ct}`,`l${-lt},0`,`a${ht},${dt} 0,0,0 0,${ct}`,`l${lt},0`].join(" "),"createOuterCylinderPathD"),createInnerCylinderPathD3=__name((rt,it,lt,ct,ht,dt)=>[`M${rt+lt/2},${-ct/2}`,`a${ht},${dt} 0,0,0 0,${ct}`].join(" "),"createInnerCylinderPathD");async function tiltedCylinder(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;const{shapeSvg:ht,bbox:dt,label:ft,halfPadding:ut}=await labelHelper(rt,it,getNodeClasses(it)),pt=it.look==="neo"?ut*2:ut,gt=dt.height+pt,mt=gt/2,_t=mt/(2.5+gt/50),yt=dt.width+_t+pt,{cssStyles:bt}=it;let xt;if(it.look==="handDrawn"){const wt=at.svg(ht),Ct=createOuterCylinderPathD3(0,0,yt,gt,_t,mt),St=createInnerCylinderPathD3(0,0,yt,gt,_t,mt),Tt=wt.path(Ct,userNodeOverrides(it,{})),vt=wt.path(St,userNodeOverrides(it,{fill:"none"}));xt=ht.insert(()=>vt,":first-child"),xt=ht.insert(()=>Tt,":first-child"),xt.attr("class","basic label-container"),bt&&xt.attr("style",bt)}else{const wt=createCylinderPathD3(0,0,yt,gt,_t,mt);xt=ht.insert("path",":first-child").attr("d",wt).attr("class","basic label-container").attr("style",handleUndefinedAttr(bt)).attr("style",ct),xt.attr("class","basic label-container"),bt&&xt.selectAll("path").attr("style",bt),ct&&xt.selectAll("path").attr("style",ct)}return xt.attr("label-offset-x",_t),xt.attr("transform",`translate(${-yt/2}, ${gt/2} )`),ft.attr("transform",`translate(${-(dt.width/2)-_t-(dt.x-(dt.left??0))}, ${-(dt.height/2)-(dt.y-(dt.top??0))})`),updateNodeBounds(it,xt),it.intersect=function(wt){const Ct=intersect_default.rect(it,wt),St=Ct.y-(it.y??0);if(mt!=0&&(Math.abs(St)<(it.height??0)/2||Math.abs(St)==(it.height??0)/2&&Math.abs(Ct.x-(it.x??0))>(it.width??0)/2-_t)){let Tt=_t*_t*(1-St*St/(mt*mt));Tt!=0&&(Tt=Math.sqrt(Math.abs(Tt))),Tt=_t-Tt,wt.x-(it.x??0)>0&&(Tt=-Tt),Ct.x+=Tt}return Ct},ht}__name(tiltedCylinder,"tiltedCylinder");async function trapezoid(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;const{shapeSvg:ht,bbox:dt}=await labelHelper(rt,it,getNodeClasses(it)),ft=dt.width+it.padding,ut=dt.height+it.padding,pt=[{x:-3*ut/6,y:0},{x:ft+3*ut/6,y:0},{x:ft,y:-ut},{x:0,y:-ut}];let gt;const{cssStyles:mt}=it;if(it.look==="handDrawn"){const _t=at.svg(ht),yt=userNodeOverrides(it,{}),bt=createPathFromPoints(pt),xt=_t.path(bt,yt);gt=ht.insert(()=>xt,":first-child").attr("transform",`translate(${-ft/2}, ${ut/2})`),mt&&gt.attr("style",mt)}else gt=insertPolygonShape(ht,ft,ut,pt);return ct&&gt.attr("style",ct),it.width=ft,it.height=ut,updateNodeBounds(it,gt),it.intersect=function(_t){return intersect_default.polygon(it,pt,_t)},ht}__name(trapezoid,"trapezoid");async function trapezoidalPentagon(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;const{shapeSvg:ht,bbox:dt}=await labelHelper(rt,it,getNodeClasses(it)),ft=60,ut=20,pt=Math.max(ft,dt.width+(it.padding??0)*2,it?.width??0),gt=Math.max(ut,dt.height+(it.padding??0)*2,it?.height??0),{cssStyles:mt}=it,_t=at.svg(ht),yt=userNodeOverrides(it,{});it.look!=="handDrawn"&&(yt.roughness=0,yt.fillStyle="solid");const bt=[{x:-pt/2*.8,y:-gt/2},{x:pt/2*.8,y:-gt/2},{x:pt/2,y:-gt/2*.6},{x:pt/2,y:gt/2},{x:-pt/2,y:gt/2},{x:-pt/2,y:-gt/2*.6}],xt=createPathFromPoints(bt),wt=_t.path(xt,yt),Ct=ht.insert(()=>wt,":first-child");return Ct.attr("class","basic label-container"),mt&&it.look!=="handDrawn"&&Ct.selectChildren("path").attr("style",mt),ct&&it.look!=="handDrawn"&&Ct.selectChildren("path").attr("style",ct),updateNodeBounds(it,Ct),it.intersect=function(St){return intersect_default.polygon(it,bt,St)},ht}__name(trapezoidalPentagon,"trapezoidalPentagon");async function triangle(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;const{shapeSvg:ht,bbox:dt,label:ft}=await labelHelper(rt,it,getNodeClasses(it)),ut=evaluate(getConfig2().flowchart?.htmlLabels),pt=dt.width+(it.padding??0),gt=pt+dt.height,mt=pt+dt.height,_t=[{x:0,y:0},{x:mt,y:0},{x:mt/2,y:-gt}],{cssStyles:yt}=it,bt=at.svg(ht),xt=userNodeOverrides(it,{});it.look!=="handDrawn"&&(xt.roughness=0,xt.fillStyle="solid");const wt=createPathFromPoints(_t),Ct=bt.path(wt,xt),St=ht.insert(()=>Ct,":first-child").attr("transform",`translate(${-gt/2}, ${gt/2})`);return yt&&it.look!=="handDrawn"&&St.selectChildren("path").attr("style",yt),ct&&it.look!=="handDrawn"&&St.selectChildren("path").attr("style",ct),it.width=pt,it.height=gt,updateNodeBounds(it,St),ft.attr("transform",`translate(${-dt.width/2-(dt.x-(dt.left??0))}, ${gt/2-(dt.height+(it.padding??0)/(ut?2:1)-(dt.y-(dt.top??0)))})`),it.intersect=function(Tt){return log.info("Triangle intersect",it,_t,Tt),intersect_default.polygon(it,_t,Tt)},ht}__name(triangle,"triangle");async function waveEdgedRectangle(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;const{shapeSvg:ht,bbox:dt,label:ft}=await labelHelper(rt,it,getNodeClasses(it)),ut=Math.max(dt.width+(it.padding??0)*2,it?.width??0),pt=Math.max(dt.height+(it.padding??0)*2,it?.height??0),gt=pt/8,mt=pt+gt,{cssStyles:_t}=it,bt=70-ut,xt=bt>0?bt/2:0,wt=at.svg(ht),Ct=userNodeOverrides(it,{});it.look!=="handDrawn"&&(Ct.roughness=0,Ct.fillStyle="solid");const St=[{x:-ut/2-xt,y:mt/2},...generateFullSineWavePoints(-ut/2-xt,mt/2,ut/2+xt,mt/2,gt,.8),{x:ut/2+xt,y:-mt/2},{x:-ut/2-xt,y:-mt/2}],Tt=createPathFromPoints(St),vt=wt.path(Tt,Ct),kt=ht.insert(()=>vt,":first-child");return kt.attr("class","basic label-container"),_t&&it.look!=="handDrawn"&&kt.selectAll("path").attr("style",_t),ct&&it.look!=="handDrawn"&&kt.selectAll("path").attr("style",ct),kt.attr("transform",`translate(0,${-gt/2})`),ft.attr("transform",`translate(${-ut/2+(it.padding??0)-(dt.x-(dt.left??0))},${-pt/2+(it.padding??0)-gt-(dt.y-(dt.top??0))})`),updateNodeBounds(it,kt),it.intersect=function(Et){return intersect_default.polygon(it,St,Et)},ht}__name(waveEdgedRectangle,"waveEdgedRectangle");async function waveRectangle(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;const{shapeSvg:ht,bbox:dt}=await labelHelper(rt,it,getNodeClasses(it)),ft=100,ut=50,pt=Math.max(dt.width+(it.padding??0)*2,it?.width??0),gt=Math.max(dt.height+(it.padding??0)*2,it?.height??0),mt=pt/gt;let _t=pt,yt=gt;_t>yt*mt?yt=_t/mt:_t=yt*mt,_t=Math.max(_t,ft),yt=Math.max(yt,ut);const bt=Math.min(yt*.2,yt/4),xt=yt+bt*2,{cssStyles:wt}=it,Ct=at.svg(ht),St=userNodeOverrides(it,{});it.look!=="handDrawn"&&(St.roughness=0,St.fillStyle="solid");const Tt=[{x:-_t/2,y:xt/2},...generateFullSineWavePoints(-_t/2,xt/2,_t/2,xt/2,bt,1),{x:_t/2,y:-xt/2},...generateFullSineWavePoints(_t/2,-xt/2,-_t/2,-xt/2,bt,-1)],vt=createPathFromPoints(Tt),kt=Ct.path(vt,St),Et=ht.insert(()=>kt,":first-child");return Et.attr("class","basic label-container"),wt&&it.look!=="handDrawn"&&Et.selectAll("path").attr("style",wt),ct&&it.look!=="handDrawn"&&Et.selectAll("path").attr("style",ct),updateNodeBounds(it,Et),it.intersect=function(Lt){return intersect_default.polygon(it,Tt,Lt)},ht}__name(waveRectangle,"waveRectangle");async function windowPane(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;const{shapeSvg:ht,bbox:dt,label:ft}=await labelHelper(rt,it,getNodeClasses(it)),ut=Math.max(dt.width+(it.padding??0)*2,it?.width??0),pt=Math.max(dt.height+(it.padding??0)*2,it?.height??0),gt=5,mt=-ut/2,_t=-pt/2,{cssStyles:yt}=it,bt=at.svg(ht),xt=userNodeOverrides(it,{}),wt=[{x:mt-gt,y:_t-gt},{x:mt-gt,y:_t+pt},{x:mt+ut,y:_t+pt},{x:mt+ut,y:_t-gt}],Ct=`M${mt-gt},${_t-gt} L${mt+ut},${_t-gt} L${mt+ut},${_t+pt} L${mt-gt},${_t+pt} L${mt-gt},${_t-gt}
                M${mt-gt},${_t} L${mt+ut},${_t}
                M${mt},${_t-gt} L${mt},${_t+pt}`;it.look!=="handDrawn"&&(xt.roughness=0,xt.fillStyle="solid");const St=bt.path(Ct,xt),Tt=ht.insert(()=>St,":first-child");return Tt.attr("transform",`translate(${gt/2}, ${gt/2})`),Tt.attr("class","basic label-container"),yt&&it.look!=="handDrawn"&&Tt.selectAll("path").attr("style",yt),ct&&it.look!=="handDrawn"&&Tt.selectAll("path").attr("style",ct),ft.attr("transform",`translate(${-(dt.width/2)+gt/2-(dt.x-(dt.left??0))}, ${-(dt.height/2)+gt/2-(dt.y-(dt.top??0))})`),updateNodeBounds(it,Tt),it.intersect=function(vt){return intersect_default.polygon(it,wt,vt)},ht}__name(windowPane,"windowPane");async function erBox(rt,it){const lt=it;if(lt.alias&&(it.label=lt.alias),it.look==="handDrawn"){const{themeVariables:Zt}=getConfig(),{background:qt}=Zt,Kt={...it,id:it.id+"-background",look:"default",cssStyles:["stroke: none",`fill: ${qt}`]};await erBox(rt,Kt)}const ct=getConfig();it.useHtmlLabels=ct.htmlLabels;let ht=ct.er?.diagramPadding??10,dt=ct.er?.entityPadding??6;const{cssStyles:ft}=it,{labelStyles:ut,nodeStyles:pt}=styles2String(it);if(lt.attributes.length===0&&it.label){const Zt={rx:0,ry:0,labelPaddingX:ht,labelPaddingY:ht*1.5};calculateTextWidth(it.label,ct)+Zt.labelPaddingX*2<ct.er.minEntityWidth&&(it.width=ct.er.minEntityWidth);const qt=await drawRect(rt,it,Zt);if(!evaluate(ct.htmlLabels)){const Kt=qt.select("text"),Xt=Kt.node()?.getBBox();Kt.attr("transform",`translate(${-Xt.width/2}, 0)`)}return qt}ct.htmlLabels||(ht*=1.25,dt*=1.25);let gt=getNodeClasses(it);gt||(gt="node default");const mt=rt.insert("g").attr("class",gt).attr("id",it.domId||it.id),_t=await addText(mt,it.label??"",ct,0,0,["name"],ut);_t.height+=dt;let yt=0;const bt=[],xt=[];let wt=0,Ct=0,St=0,Tt=0,vt=!0,kt=!0;for(const Zt of lt.attributes){const qt=await addText(mt,Zt.type,ct,0,yt,["attribute-type"],ut);wt=Math.max(wt,qt.width+ht);const Kt=await addText(mt,Zt.name,ct,0,yt,["attribute-name"],ut);Ct=Math.max(Ct,Kt.width+ht);const Xt=await addText(mt,Zt.keys.join(),ct,0,yt,["attribute-keys"],ut);St=Math.max(St,Xt.width+ht);const te=await addText(mt,Zt.comment,ct,0,yt,["attribute-comment"],ut);Tt=Math.max(Tt,te.width+ht);const ee=Math.max(qt.height,Kt.height,Xt.height,te.height)+dt;xt.push({yOffset:yt,rowHeight:ee}),yt+=ee}let Et=4;St<=ht&&(vt=!1,St=0,Et--),Tt<=ht&&(kt=!1,Tt=0,Et--);const Lt=mt.node().getBBox();if(_t.width+ht*2-(wt+Ct+St+Tt)>0){const Zt=_t.width+ht*2-(wt+Ct+St+Tt);wt+=Zt/Et,Ct+=Zt/Et,St>0&&(St+=Zt/Et),Tt>0&&(Tt+=Zt/Et)}const At=wt+Ct+St+Tt,It=at.svg(mt),Bt=userNodeOverrides(it,{});it.look!=="handDrawn"&&(Bt.roughness=0,Bt.fillStyle="solid");let Dt=0;xt.length>0&&(Dt=xt.reduce((Zt,qt)=>Zt+(qt?.rowHeight??0),0));const Rt=Math.max(Lt.width+ht*2,it?.width||0,At),Pt=Math.max((Dt??0)+_t.height,it?.height||0),Ht=-Rt/2,Nt=-Pt/2;mt.selectAll("g:not(:first-child)").each((Zt,qt,Kt)=>{const Xt=select(Kt[qt]),te=Xt.attr("transform");let ee=0,ir=0;if(te){const Jt=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(te);Jt&&(ee=parseFloat(Jt[1]),ir=parseFloat(Jt[2]),Xt.attr("class").includes("attribute-name")?ee+=wt:Xt.attr("class").includes("attribute-keys")?ee+=wt+Ct:Xt.attr("class").includes("attribute-comment")&&(ee+=wt+Ct+St))}Xt.attr("transform",`translate(${Ht+ht/2+ee}, ${ir+Nt+_t.height+dt/2})`)}),mt.select(".name").attr("transform","translate("+-_t.width/2+", "+(Nt+dt/2)+")");const Ot=It.rectangle(Ht,Nt,Rt,Pt,Bt),Mt=mt.insert(()=>Ot,":first-child").attr("style",ft.join("")),{themeVariables:zt}=getConfig(),{rowEven:Ft,rowOdd:Wt,nodeBorder:jt}=zt;bt.push(0);for(const[Zt,qt]of xt.entries()){const Xt=(Zt+1)%2===0&&qt.yOffset!==0,te=It.rectangle(Ht,_t.height+Nt+qt?.yOffset,Rt,qt?.rowHeight,{...Bt,fill:Xt?Ft:Wt,stroke:jt});mt.insert(()=>te,"g.label").attr("style",ft.join("")).attr("class",`row-rect-${Xt?"even":"odd"}`)}let Yt=It.line(Ht,_t.height+Nt,Rt+Ht,_t.height+Nt,Bt);mt.insert(()=>Yt).attr("class","divider"),Yt=It.line(wt+Ht,_t.height+Nt,wt+Ht,Pt+Nt,Bt),mt.insert(()=>Yt).attr("class","divider"),vt&&(Yt=It.line(wt+Ct+Ht,_t.height+Nt,wt+Ct+Ht,Pt+Nt,Bt),mt.insert(()=>Yt).attr("class","divider")),kt&&(Yt=It.line(wt+Ct+St+Ht,_t.height+Nt,wt+Ct+St+Ht,Pt+Nt,Bt),mt.insert(()=>Yt).attr("class","divider"));for(const Zt of bt)Yt=It.line(Ht,_t.height+Nt+Zt,Rt+Ht,_t.height+Nt+Zt,Bt),mt.insert(()=>Yt).attr("class","divider");if(updateNodeBounds(it,Mt),pt&&it.look!=="handDrawn"){const qt=pt.split(";")?.filter(Kt=>Kt.includes("stroke"))?.map(Kt=>`${Kt}`).join("; ");mt.selectAll("path").attr("style",qt??""),mt.selectAll(".row-rect-even path").attr("style",pt)}return it.intersect=function(Zt){return intersect_default.rect(it,Zt)},mt}__name(erBox,"erBox");async function addText(rt,it,lt,ct=0,ht=0,dt=[],ft=""){const ut=rt.insert("g").attr("class",`label ${dt.join(" ")}`).attr("transform",`translate(${ct}, ${ht})`).attr("style",ft);it!==parseGenericTypes(it)&&(it=parseGenericTypes(it),it=it.replaceAll("<","&lt;").replaceAll(">","&gt;"));const pt=ut.node().appendChild(await createText(ut,it,{width:calculateTextWidth(it,lt)+100,style:ft,useHtmlLabels:lt.htmlLabels},lt));if(it.includes("&lt;")||it.includes("&gt;")){let mt=pt.children[0];for(mt.textContent=mt.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">");mt.childNodes[0];)mt=mt.childNodes[0],mt.textContent=mt.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">")}let gt=pt.getBBox();if(evaluate(lt.htmlLabels)){const mt=pt.children[0];mt.style.textAlign="start";const _t=select(pt);gt=mt.getBoundingClientRect(),_t.attr("width",gt.width),_t.attr("height",gt.height)}return gt}__name(addText,"addText");async function textHelper(rt,it,lt,ct,ht=lt.class.padding??12){const dt=ct?0:3,ft=rt.insert("g").attr("class",getNodeClasses(it)).attr("id",it.domId||it.id);let ut=null,pt=null,gt=null,mt=null,_t=0,yt=0,bt=0;if(ut=ft.insert("g").attr("class","annotation-group text"),it.annotations.length>0){const Tt=it.annotations[0];await addText2(ut,{text:`Â«${Tt}Â»`},0),_t=ut.node().getBBox().height}pt=ft.insert("g").attr("class","label-group text"),await addText2(pt,it,0,["font-weight: bolder"]);const xt=pt.node().getBBox();yt=xt.height,gt=ft.insert("g").attr("class","members-group text");let wt=0;for(const Tt of it.members){const vt=await addText2(gt,Tt,wt,[Tt.parseClassifier()]);wt+=vt+dt}bt=gt.node().getBBox().height,bt<=0&&(bt=ht/2),mt=ft.insert("g").attr("class","methods-group text");let Ct=0;for(const Tt of it.methods){const vt=await addText2(mt,Tt,Ct,[Tt.parseClassifier()]);Ct+=vt+dt}let St=ft.node().getBBox();if(ut!==null){const Tt=ut.node().getBBox();ut.attr("transform",`translate(${-Tt.width/2})`)}return pt.attr("transform",`translate(${-xt.width/2}, ${_t})`),St=ft.node().getBBox(),gt.attr("transform",`translate(0, ${_t+yt+ht*2})`),St=ft.node().getBBox(),mt.attr("transform",`translate(0, ${_t+yt+(bt?bt+ht*4:ht*2)})`),St=ft.node().getBBox(),{shapeSvg:ft,bbox:St}}__name(textHelper,"textHelper");async function addText2(rt,it,lt,ct=[]){const ht=rt.insert("g").attr("class","label").attr("style",ct.join("; ")),dt=getConfig();let ft="useHtmlLabels"in it?it.useHtmlLabels:evaluate(dt.htmlLabels)??!0,ut="";"text"in it?ut=it.text:ut=it.label,!ft&&ut.startsWith("\\")&&(ut=ut.substring(1)),hasKatex(ut)&&(ft=!0);const pt=await createText(ht,sanitizeText3(decodeEntities(ut)),{width:calculateTextWidth(ut,dt)+50,classes:"markdown-node-label",useHtmlLabels:ft},dt);let gt,mt=1;if(ft){const _t=pt.children[0],yt=select(pt);mt=_t.innerHTML.split("<br>").length,_t.innerHTML.includes("</math>")&&(mt+=_t.innerHTML.split("<mrow>").length-1);const bt=_t.getElementsByTagName("img");if(bt){const xt=ut.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...bt].map(wt=>new Promise(Ct=>{function St(){if(wt.style.display="flex",wt.style.flexDirection="column",xt){const Tt=dt.fontSize?.toString()??window.getComputedStyle(document.body).fontSize,kt=parseInt(Tt,10)*5+"px";wt.style.minWidth=kt,wt.style.maxWidth=kt}else wt.style.width="100%";Ct(wt)}__name(St,"setupImage"),setTimeout(()=>{wt.complete&&St()}),wt.addEventListener("error",St),wt.addEventListener("load",St)})))}gt=_t.getBoundingClientRect(),yt.attr("width",gt.width),yt.attr("height",gt.height)}else{ct.includes("font-weight: bolder")&&select(pt).selectAll("tspan").attr("font-weight",""),mt=pt.children.length;const _t=pt.children[0];(pt.textContent===""||pt.textContent.includes("&gt"))&&(_t.textContent=ut[0]+ut.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim(),ut[1]===" "&&(_t.textContent=_t.textContent[0]+" "+_t.textContent.substring(1))),_t.textContent==="undefined"&&(_t.textContent=""),gt=pt.getBBox()}return ht.attr("transform","translate(0,"+(-gt.height/(2*mt)+lt)+")"),gt.height}__name(addText2,"addText");async function classBox(rt,it){const lt=getConfig2(),ct=lt.class.padding??12,ht=ct,dt=it.useHtmlLabels??evaluate(lt.htmlLabels)??!0,ft=it;ft.annotations=ft.annotations??[],ft.members=ft.members??[],ft.methods=ft.methods??[];const{shapeSvg:ut,bbox:pt}=await textHelper(rt,it,lt,dt,ht),{labelStyles:gt,nodeStyles:mt}=styles2String(it);it.labelStyle=gt,it.cssStyles=ft.styles||"";const _t=ft.styles?.join(";")||mt||"";it.cssStyles||(it.cssStyles=_t.replaceAll("!important","").split(";"));const yt=ft.members.length===0&&ft.methods.length===0&&!lt.class?.hideEmptyMembersBox,bt=at.svg(ut),xt=userNodeOverrides(it,{});it.look!=="handDrawn"&&(xt.roughness=0,xt.fillStyle="solid");const wt=pt.width;let Ct=pt.height;ft.members.length===0&&ft.methods.length===0?Ct+=ht:ft.members.length>0&&ft.methods.length===0&&(Ct+=ht*2);const St=-wt/2,Tt=-Ct/2,vt=bt.rectangle(St-ct,Tt-ct-(yt?ct:ft.members.length===0&&ft.methods.length===0?-ct/2:0),wt+2*ct,Ct+2*ct+(yt?ct*2:ft.members.length===0&&ft.methods.length===0?-ct:0),xt),kt=ut.insert(()=>vt,":first-child");kt.attr("class","basic label-container");const Et=kt.node().getBBox();ut.selectAll(".text").each((Bt,Dt,Rt)=>{const Pt=select(Rt[Dt]),Ht=Pt.attr("transform");let Nt=0;if(Ht){const Ft=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(Ht);Ft&&(Nt=parseFloat(Ft[2]))}let Ot=Nt+Tt+ct-(yt?ct:ft.members.length===0&&ft.methods.length===0?-ct/2:0);dt||(Ot-=4);let Mt=St;(Pt.attr("class").includes("label-group")||Pt.attr("class").includes("annotation-group"))&&(Mt=-Pt.node()?.getBBox().width/2||0,ut.selectAll("text").each(function(zt,Ft,Wt){window.getComputedStyle(Wt[Ft]).textAnchor==="middle"&&(Mt=0)})),Pt.attr("transform",`translate(${Mt}, ${Ot})`)});const Lt=ut.select(".annotation-group").node().getBBox().height-(yt?ct/2:0)||0,At=ut.select(".label-group").node().getBBox().height-(yt?ct/2:0)||0,It=ut.select(".members-group").node().getBBox().height-(yt?ct/2:0)||0;if(ft.members.length>0||ft.methods.length>0||yt){const Bt=bt.line(Et.x,Lt+At+Tt+ct,Et.x+Et.width,Lt+At+Tt+ct,xt);ut.insert(()=>Bt).attr("class","divider").attr("style",_t)}if(yt||ft.members.length>0||ft.methods.length>0){const Bt=bt.line(Et.x,Lt+At+It+Tt+ht*2+ct,Et.x+Et.width,Lt+At+It+Tt+ct+ht*2,xt);ut.insert(()=>Bt).attr("class","divider").attr("style",_t)}if(ft.look!=="handDrawn"&&ut.selectAll("path").attr("style",_t),kt.select(":nth-child(2)").attr("style",_t),ut.selectAll(".divider").select("path").attr("style",_t),it.labelStyle?ut.selectAll("span").attr("style",it.labelStyle):ut.selectAll("span").attr("style",_t),!dt){const Bt=RegExp(/color\s*:\s*([^;]*)/),Dt=Bt.exec(_t);if(Dt){const Rt=Dt[0].replace("color","fill");ut.selectAll("tspan").attr("style",Rt)}else if(gt){const Rt=Bt.exec(gt);if(Rt){const Pt=Rt[0].replace("color","fill");ut.selectAll("tspan").attr("style",Pt)}}}return updateNodeBounds(it,kt),it.intersect=function(Bt){return intersect_default.rect(it,Bt)},ut}__name(classBox,"classBox");async function requirementBox(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;const ht=it,dt=it,ft=20,ut=20,pt="verifyMethod"in it,gt=getNodeClasses(it),mt=rt.insert("g").attr("class",gt).attr("id",it.domId??it.id);let _t;pt?_t=await addText3(mt,`&lt;&lt;${ht.type}&gt;&gt;`,0,it.labelStyle):_t=await addText3(mt,"&lt;&lt;Element&gt;&gt;",0,it.labelStyle);let yt=_t;const bt=await addText3(mt,ht.name,yt,it.labelStyle+"; font-weight: bold;");if(yt+=bt+ut,pt){const Lt=await addText3(mt,`${ht.requirementId?`ID: ${ht.requirementId}`:""}`,yt,it.labelStyle);yt+=Lt;const At=await addText3(mt,`${ht.text?`Text: ${ht.text}`:""}`,yt,it.labelStyle);yt+=At;const It=await addText3(mt,`${ht.risk?`Risk: ${ht.risk}`:""}`,yt,it.labelStyle);yt+=It,await addText3(mt,`${ht.verifyMethod?`Verification: ${ht.verifyMethod}`:""}`,yt,it.labelStyle)}else{const Lt=await addText3(mt,`${dt.type?`Type: ${dt.type}`:""}`,yt,it.labelStyle);yt+=Lt,await addText3(mt,`${dt.docRef?`Doc Ref: ${dt.docRef}`:""}`,yt,it.labelStyle)}const xt=(mt.node()?.getBBox().width??200)+ft,wt=(mt.node()?.getBBox().height??200)+ft,Ct=-xt/2,St=-wt/2,Tt=at.svg(mt),vt=userNodeOverrides(it,{});it.look!=="handDrawn"&&(vt.roughness=0,vt.fillStyle="solid");const kt=Tt.rectangle(Ct,St,xt,wt,vt),Et=mt.insert(()=>kt,":first-child");if(Et.attr("class","basic label-container").attr("style",ct),mt.selectAll(".label").each((Lt,At,It)=>{const Bt=select(It[At]),Dt=Bt.attr("transform");let Rt=0,Pt=0;if(Dt){const Mt=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(Dt);Mt&&(Rt=parseFloat(Mt[1]),Pt=parseFloat(Mt[2]))}const Ht=Pt-wt/2;let Nt=Ct+ft/2;(At===0||At===1)&&(Nt=Rt),Bt.attr("transform",`translate(${Nt}, ${Ht+ft})`)}),yt>_t+bt+ut){const Lt=Tt.line(Ct,St+_t+bt+ut,Ct+xt,St+_t+bt+ut,vt);mt.insert(()=>Lt).attr("style",ct)}return updateNodeBounds(it,Et),it.intersect=function(Lt){return intersect_default.rect(it,Lt)},mt}__name(requirementBox,"requirementBox");async function addText3(rt,it,lt,ct=""){if(it==="")return 0;const ht=rt.insert("g").attr("class","label").attr("style",ct),dt=getConfig2(),ft=dt.htmlLabels??!0,ut=await createText(ht,sanitizeText3(decodeEntities(it)),{width:calculateTextWidth(it,dt)+50,classes:"markdown-node-label",useHtmlLabels:ft,style:ct},dt);let pt;if(ft){const gt=ut.children[0],mt=select(ut);pt=gt.getBoundingClientRect(),mt.attr("width",pt.width),mt.attr("height",pt.height)}else{const gt=ut.children[0];for(const mt of gt.children)mt.textContent=mt.textContent.replaceAll("&gt;",">").replaceAll("&lt;","<"),ct&&mt.setAttribute("style",ct);pt=ut.getBBox(),pt.height+=6}return ht.attr("transform",`translate(${-pt.width/2},${-pt.height/2+lt})`),pt.height}__name(addText3,"addText");var colorFromPriority=__name(rt=>{switch(rt){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");async function kanbanItem(rt,it,{config:lt}){const{labelStyles:ct,nodeStyles:ht}=styles2String(it);it.labelStyle=ct||"";const dt=10,ft=it.width;it.width=(it.width??200)-10;const{shapeSvg:ut,bbox:pt,label:gt}=await labelHelper(rt,it,getNodeClasses(it)),mt=it.padding||10;let _t="",yt;"ticket"in it&&it.ticket&&lt?.kanban?.ticketBaseUrl&&(_t=lt?.kanban?.ticketBaseUrl.replace("#TICKET#",it.ticket),yt=ut.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",_t).attr("target","_blank"));const bt={useHtmlLabels:it.useHtmlLabels,labelStyle:it.labelStyle||"",width:it.width,img:it.img,padding:it.padding||8,centerLabel:!1};let xt,wt;yt?{label:xt,bbox:wt}=await insertLabel(yt,"ticket"in it&&it.ticket||"",bt):{label:xt,bbox:wt}=await insertLabel(ut,"ticket"in it&&it.ticket||"",bt);const{label:Ct,bbox:St}=await insertLabel(ut,"assigned"in it&&it.assigned||"",bt);it.width=ft;const Tt=10,vt=it?.width||0,kt=Math.max(wt.height,St.height)/2,Et=Math.max(pt.height+Tt*2,it?.height||0)+kt,Lt=-vt/2,At=-Et/2;gt.attr("transform","translate("+(mt-vt/2)+", "+(-kt-pt.height/2)+")"),xt.attr("transform","translate("+(mt-vt/2)+", "+(-kt+pt.height/2)+")"),Ct.attr("transform","translate("+(mt+vt/2-St.width-2*dt)+", "+(-kt+pt.height/2)+")");let It;const{rx:Bt,ry:Dt}=it,{cssStyles:Rt}=it;if(it.look==="handDrawn"){const Pt=at.svg(ut),Ht=userNodeOverrides(it,{}),Nt=Bt||Dt?Pt.path(createRoundedRectPathD(Lt,At,vt,Et,Bt||0),Ht):Pt.rectangle(Lt,At,vt,Et,Ht);It=ut.insert(()=>Nt,":first-child"),It.attr("class","basic label-container").attr("style",Rt||null)}else{It=ut.insert("rect",":first-child"),It.attr("class","basic label-container __APA__").attr("style",ht).attr("rx",Bt??5).attr("ry",Dt??5).attr("x",Lt).attr("y",At).attr("width",vt).attr("height",Et);const Pt="priority"in it&&it.priority;if(Pt){const Ht=ut.append("line"),Nt=Lt+2,Ot=At+Math.floor((Bt??0)/2),Mt=At+Et-Math.floor((Bt??0)/2);Ht.attr("x1",Nt).attr("y1",Ot).attr("x2",Nt).attr("y2",Mt).attr("stroke-width","4").attr("stroke",colorFromPriority(Pt))}}return updateNodeBounds(it,It),it.height=Et,it.intersect=function(Pt){return intersect_default.rect(it,Pt)},ut}__name(kanbanItem,"kanbanItem");async function bang(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;const{shapeSvg:ht,bbox:dt,halfPadding:ft,label:ut}=await labelHelper(rt,it,getNodeClasses(it)),pt=dt.width+10*ft,gt=dt.height+8*ft,mt=.15*pt,{cssStyles:_t}=it,yt=dt.width+20,bt=dt.height+20,xt=Math.max(pt,yt),wt=Math.max(gt,bt);ut.attr("transform",`translate(${-dt.width/2}, ${-dt.height/2})`);let Ct;const St=`M0 0 
    a${mt},${mt} 1 0,0 ${xt*.25},${-1*wt*.1}
    a${mt},${mt} 1 0,0 ${xt*.25},0
    a${mt},${mt} 1 0,0 ${xt*.25},0
    a${mt},${mt} 1 0,0 ${xt*.25},${wt*.1}

    a${mt},${mt} 1 0,0 ${xt*.15},${wt*.33}
    a${mt*.8},${mt*.8} 1 0,0 0,${wt*.34}
    a${mt},${mt} 1 0,0 ${-1*xt*.15},${wt*.33}

    a${mt},${mt} 1 0,0 ${-1*xt*.25},${wt*.15}
    a${mt},${mt} 1 0,0 ${-1*xt*.25},0
    a${mt},${mt} 1 0,0 ${-1*xt*.25},0
    a${mt},${mt} 1 0,0 ${-1*xt*.25},${-1*wt*.15}

    a${mt},${mt} 1 0,0 ${-1*xt*.1},${-1*wt*.33}
    a${mt*.8},${mt*.8} 1 0,0 0,${-1*wt*.34}
    a${mt},${mt} 1 0,0 ${xt*.1},${-1*wt*.33}
  H0 V0 Z`;if(it.look==="handDrawn"){const Tt=at.svg(ht),vt=userNodeOverrides(it,{}),kt=Tt.path(St,vt);Ct=ht.insert(()=>kt,":first-child"),Ct.attr("class","basic label-container").attr("style",handleUndefinedAttr(_t))}else Ct=ht.insert("path",":first-child").attr("class","basic label-container").attr("style",ct).attr("d",St);return Ct.attr("transform",`translate(${-xt/2}, ${-wt/2})`),updateNodeBounds(it,Ct),it.calcIntersect=function(Tt,vt){return intersect_default.rect(Tt,vt)},it.intersect=function(Tt){return log.info("Bang intersect",it,Tt),intersect_default.rect(it,Tt)},ht}__name(bang,"bang");async function cloud(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;const{shapeSvg:ht,bbox:dt,halfPadding:ft,label:ut}=await labelHelper(rt,it,getNodeClasses(it)),pt=dt.width+2*ft,gt=dt.height+2*ft,mt=.15*pt,_t=.25*pt,yt=.35*pt,bt=.2*pt,{cssStyles:xt}=it;let wt;const Ct=`M0 0 
    a${mt},${mt} 0 0,1 ${pt*.25},${-1*pt*.1}
    a${yt},${yt} 1 0,1 ${pt*.4},${-1*pt*.1}
    a${_t},${_t} 1 0,1 ${pt*.35},${pt*.2}

    a${mt},${mt} 1 0,1 ${pt*.15},${gt*.35}
    a${bt},${bt} 1 0,1 ${-1*pt*.15},${gt*.65}

    a${_t},${mt} 1 0,1 ${-1*pt*.25},${pt*.15}
    a${yt},${yt} 1 0,1 ${-1*pt*.5},0
    a${mt},${mt} 1 0,1 ${-1*pt*.25},${-1*pt*.15}

    a${mt},${mt} 1 0,1 ${-1*pt*.1},${-1*gt*.35}
    a${bt},${bt} 1 0,1 ${pt*.1},${-1*gt*.65}
  H0 V0 Z`;if(it.look==="handDrawn"){const St=at.svg(ht),Tt=userNodeOverrides(it,{}),vt=St.path(Ct,Tt);wt=ht.insert(()=>vt,":first-child"),wt.attr("class","basic label-container").attr("style",handleUndefinedAttr(xt))}else wt=ht.insert("path",":first-child").attr("class","basic label-container").attr("style",ct).attr("d",Ct);return ut.attr("transform",`translate(${-dt.width/2}, ${-dt.height/2})`),wt.attr("transform",`translate(${-pt/2}, ${-gt/2})`),updateNodeBounds(it,wt),it.calcIntersect=function(St,Tt){return intersect_default.rect(St,Tt)},it.intersect=function(St){return log.info("Cloud intersect",it,St),intersect_default.rect(it,St)},ht}__name(cloud,"cloud");async function defaultMindmapNode(rt,it){const{labelStyles:lt,nodeStyles:ct}=styles2String(it);it.labelStyle=lt;const{shapeSvg:ht,bbox:dt,halfPadding:ft,label:ut}=await labelHelper(rt,it,getNodeClasses(it)),pt=dt.width+8*ft,gt=dt.height+2*ft,mt=5,_t=`
    M${-pt/2} ${gt/2-mt}
    v${-gt+2*mt}
    q0,-${mt} ${mt},-${mt}
    h${pt-2*mt}
    q${mt},0 ${mt},${mt}
    v${gt-2*mt}
    q0,${mt} -${mt},${mt}
    h${-pt+2*mt}
    q-${mt},0 -${mt},-${mt}
    Z
  `,yt=ht.append("path").attr("id","node-"+it.id).attr("class","node-bkg node-"+it.type).attr("style",ct).attr("d",_t);return ht.append("line").attr("class","node-line-").attr("x1",-pt/2).attr("y1",gt/2).attr("x2",pt/2).attr("y2",gt/2),ut.attr("transform",`translate(${-dt.width/2}, ${-dt.height/2})`),ht.append(()=>ut.node()),updateNodeBounds(it,yt),it.calcIntersect=function(bt,xt){return intersect_default.rect(bt,xt)},it.intersect=function(bt){return intersect_default.rect(it,bt)},ht}__name(defaultMindmapNode,"defaultMindmapNode");async function mindmapCircle(rt,it){const lt={padding:it.padding??0};return circle$1(rt,it,lt)}__name(mindmapCircle,"mindmapCircle");var shapesDefs=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:squareRect2},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:roundedRect},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:stadium},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:subroutine},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:cylinder},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:circle$1},{semanticName:"Bang",name:"Bang",shortName:"bang",description:"Bang",aliases:["bang"],handler:bang},{semanticName:"Cloud",name:"Cloud",shortName:"cloud",description:"cloud",aliases:["cloud"],handler:cloud},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:question},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:hexagon},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:lean_right},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:lean_left},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:trapezoid},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:inv_trapezoid},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:doublecircle},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:text},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:card},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:shadedProcess},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:stateStart},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:stateEnd},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:forkJoin},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:hourglass},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:curlyBraceLeft},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:curlyBraceRight},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:curlyBraces},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:lightningBolt},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:waveEdgedRectangle},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:halfRoundedRectangle},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:tiltedCylinder},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:linedCylinder},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:curvedTrapezoid},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:dividedRectangle},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:triangle},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:windowPane},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:filledCircle},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:trapezoidalPentagon},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:flippedTriangle},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:slopedRect},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:multiWaveEdgedRectangle},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:multiRect},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:bowTieRect},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:crossedCircle},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:taggedWaveEdgedRectangle},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:taggedRect},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:waveRectangle},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:rect_left_inv_arrow},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:linedWaveEdgedRect}],generateShapeMap=__name(()=>{const it=[...Object.entries({state,choice,note,rectWithTitle,labelRect,iconSquare,iconCircle,icon,iconRounded,imageSquare,anchor,kanbanItem,mindmapCircle,defaultMindmapNode,classBox,erBox,requirementBox}),...shapesDefs.flatMap(lt=>[lt.shortName,..."aliases"in lt?lt.aliases:[],..."internalAliases"in lt?lt.internalAliases:[]].map(ht=>[ht,lt.handler]))];return Object.fromEntries(it)},"generateShapeMap"),shapes2=generateShapeMap();function isValidShape(rt){return rt in shapes2}__name(isValidShape,"isValidShape");var nodeElems=new Map;async function insertNode(rt,it,lt){let ct,ht;it.shape==="rect"&&(it.rx&&it.ry?it.shape="roundedRect":it.shape="squareRect");const dt=it.shape?shapes2[it.shape]:void 0;if(!dt)throw new Error(`No such shape: ${it.shape}. Please check your syntax.`);if(it.link){let ft;lt.config.securityLevel==="sandbox"?ft="_top":it.linkTarget&&(ft=it.linkTarget||"_blank"),ct=rt.insert("svg:a").attr("xlink:href",it.link).attr("target",ft??null),ht=await dt(ct,it,lt)}else ht=await dt(rt,it,lt),ct=ht;return it.tooltip&&ht.attr("title",it.tooltip),nodeElems.set(it.id,ct),it.haveCallback&&ct.attr("class",ct.attr("class")+" clickable"),ct}__name(insertNode,"insertNode");var setNodeElem=__name((rt,it)=>{nodeElems.set(it.id,rt)},"setNodeElem"),clear2=__name(()=>{nodeElems.clear()},"clear"),positionNode=__name(rt=>{const it=nodeElems.get(rt.id);log.trace("Transforming node",rt.diff,rt,"translate("+(rt.x-rt.width/2-5)+", "+rt.width/2+")");const lt=8,ct=rt.diff||0;return rt.clusterNode?it.attr("transform","translate("+(rt.x+ct-rt.width/2)+", "+(rt.y-rt.height/2-lt)+")"):it.attr("transform","translate("+rt.x+", "+rt.y+")"),ct},"positionNode"),addEdgeMarkers=__name((rt,it,lt,ct,ht,dt)=>{it.arrowTypeStart&&addEdgeMarker(rt,"start",it.arrowTypeStart,lt,ct,ht,dt),it.arrowTypeEnd&&addEdgeMarker(rt,"end",it.arrowTypeEnd,lt,ct,ht,dt)},"addEdgeMarkers"),arrowTypesMap={arrow_cross:{type:"cross",fill:!1},arrow_point:{type:"point",fill:!0},arrow_barb:{type:"barb",fill:!0},arrow_circle:{type:"circle",fill:!1},aggregation:{type:"aggregation",fill:!1},extension:{type:"extension",fill:!1},composition:{type:"composition",fill:!0},dependency:{type:"dependency",fill:!0},lollipop:{type:"lollipop",fill:!1},only_one:{type:"onlyOne",fill:!1},zero_or_one:{type:"zeroOrOne",fill:!1},one_or_more:{type:"oneOrMore",fill:!1},zero_or_more:{type:"zeroOrMore",fill:!1},requirement_arrow:{type:"requirement_arrow",fill:!1},requirement_contains:{type:"requirement_contains",fill:!1}},addEdgeMarker=__name((rt,it,lt,ct,ht,dt,ft)=>{const ut=arrowTypesMap[lt];if(!ut){log.warn(`Unknown arrow type: ${lt}`);return}const pt=ut.type,mt=`${ht}_${dt}-${pt}${it==="start"?"Start":"End"}`;if(ft&&ft.trim()!==""){const _t=ft.replace(/[^\dA-Za-z]/g,"_"),yt=`${mt}_${_t}`;if(!document.getElementById(yt)){const bt=document.getElementById(mt);if(bt){const xt=bt.cloneNode(!0);xt.id=yt,xt.querySelectorAll("path, circle, line").forEach(Ct=>{Ct.setAttribute("stroke",ft),ut.fill&&Ct.setAttribute("fill",ft)}),bt.parentNode?.appendChild(xt)}}rt.attr(`marker-${it}`,`url(${ct}#${yt})`)}else rt.attr(`marker-${it}`,`url(${ct}#${mt})`)},"addEdgeMarker"),edgeLabels=new Map,terminalLabels=new Map,clear=__name(()=>{edgeLabels.clear(),terminalLabels.clear()},"clear"),getLabelStyles=__name(rt=>rt?rt.reduce((lt,ct)=>lt+";"+ct,""):"","getLabelStyles"),insertEdgeLabel=__name(async(rt,it)=>{let lt=evaluate(getConfig2().flowchart.htmlLabels);const{labelStyles:ct}=styles2String(it);it.labelStyle=ct;const ht=await createText(rt,it.label,{style:it.labelStyle,useHtmlLabels:lt,addSvgBackground:!0,isNode:!1});log.info("abc82",it,it.labelType);const dt=rt.insert("g").attr("class","edgeLabel"),ft=dt.insert("g").attr("class","label").attr("data-id",it.id);ft.node().appendChild(ht);let ut=ht.getBBox();if(lt){const gt=ht.children[0],mt=select(ht);ut=gt.getBoundingClientRect(),mt.attr("width",ut.width),mt.attr("height",ut.height)}ft.attr("transform","translate("+-ut.width/2+", "+-ut.height/2+")"),edgeLabels.set(it.id,dt),it.width=ut.width,it.height=ut.height;let pt;if(it.startLabelLeft){const gt=await createLabel_default(it.startLabelLeft,getLabelStyles(it.labelStyle)),mt=rt.insert("g").attr("class","edgeTerminals"),_t=mt.insert("g").attr("class","inner");pt=_t.node().appendChild(gt);const yt=gt.getBBox();_t.attr("transform","translate("+-yt.width/2+", "+-yt.height/2+")"),terminalLabels.get(it.id)||terminalLabels.set(it.id,{}),terminalLabels.get(it.id).startLeft=mt,setTerminalWidth(pt,it.startLabelLeft)}if(it.startLabelRight){const gt=await createLabel_default(it.startLabelRight,getLabelStyles(it.labelStyle)),mt=rt.insert("g").attr("class","edgeTerminals"),_t=mt.insert("g").attr("class","inner");pt=mt.node().appendChild(gt),_t.node().appendChild(gt);const yt=gt.getBBox();_t.attr("transform","translate("+-yt.width/2+", "+-yt.height/2+")"),terminalLabels.get(it.id)||terminalLabels.set(it.id,{}),terminalLabels.get(it.id).startRight=mt,setTerminalWidth(pt,it.startLabelRight)}if(it.endLabelLeft){const gt=await createLabel_default(it.endLabelLeft,getLabelStyles(it.labelStyle)),mt=rt.insert("g").attr("class","edgeTerminals"),_t=mt.insert("g").attr("class","inner");pt=_t.node().appendChild(gt);const yt=gt.getBBox();_t.attr("transform","translate("+-yt.width/2+", "+-yt.height/2+")"),mt.node().appendChild(gt),terminalLabels.get(it.id)||terminalLabels.set(it.id,{}),terminalLabels.get(it.id).endLeft=mt,setTerminalWidth(pt,it.endLabelLeft)}if(it.endLabelRight){const gt=await createLabel_default(it.endLabelRight,getLabelStyles(it.labelStyle)),mt=rt.insert("g").attr("class","edgeTerminals"),_t=mt.insert("g").attr("class","inner");pt=_t.node().appendChild(gt);const yt=gt.getBBox();_t.attr("transform","translate("+-yt.width/2+", "+-yt.height/2+")"),mt.node().appendChild(gt),terminalLabels.get(it.id)||terminalLabels.set(it.id,{}),terminalLabels.get(it.id).endRight=mt,setTerminalWidth(pt,it.endLabelRight)}return ht},"insertEdgeLabel");function setTerminalWidth(rt,it){getConfig2().flowchart.htmlLabels&&rt&&(rt.style.width=it.length*9+"px",rt.style.height="12px")}__name(setTerminalWidth,"setTerminalWidth");var positionEdgeLabel=__name((rt,it)=>{log.debug("Moving label abc88 ",rt.id,rt.label,edgeLabels.get(rt.id),it);let lt=it.updatedPath?it.updatedPath:it.originalPath;const ct=getConfig2(),{subGraphTitleTotalMargin:ht}=getSubGraphTitleMargins(ct);if(rt.label){const dt=edgeLabels.get(rt.id);let ft=rt.x,ut=rt.y;if(lt){const pt=utils_default.calcLabelPosition(lt);log.debug("Moving label "+rt.label+" from (",ft,",",ut,") to (",pt.x,",",pt.y,") abc88"),it.updatedPath&&(ft=pt.x,ut=pt.y)}dt.attr("transform",`translate(${ft}, ${ut+ht/2})`)}if(rt.startLabelLeft){const dt=terminalLabels.get(rt.id).startLeft;let ft=rt.x,ut=rt.y;if(lt){const pt=utils_default.calcTerminalLabelPosition(rt.arrowTypeStart?10:0,"start_left",lt);ft=pt.x,ut=pt.y}dt.attr("transform",`translate(${ft}, ${ut})`)}if(rt.startLabelRight){const dt=terminalLabels.get(rt.id).startRight;let ft=rt.x,ut=rt.y;if(lt){const pt=utils_default.calcTerminalLabelPosition(rt.arrowTypeStart?10:0,"start_right",lt);ft=pt.x,ut=pt.y}dt.attr("transform",`translate(${ft}, ${ut})`)}if(rt.endLabelLeft){const dt=terminalLabels.get(rt.id).endLeft;let ft=rt.x,ut=rt.y;if(lt){const pt=utils_default.calcTerminalLabelPosition(rt.arrowTypeEnd?10:0,"end_left",lt);ft=pt.x,ut=pt.y}dt.attr("transform",`translate(${ft}, ${ut})`)}if(rt.endLabelRight){const dt=terminalLabels.get(rt.id).endRight;let ft=rt.x,ut=rt.y;if(lt){const pt=utils_default.calcTerminalLabelPosition(rt.arrowTypeEnd?10:0,"end_right",lt);ft=pt.x,ut=pt.y}dt.attr("transform",`translate(${ft}, ${ut})`)}},"positionEdgeLabel"),outsideNode=__name((rt,it)=>{const lt=rt.x,ct=rt.y,ht=Math.abs(it.x-lt),dt=Math.abs(it.y-ct),ft=rt.width/2,ut=rt.height/2;return ht>=ft||dt>=ut},"outsideNode"),intersection=__name((rt,it,lt)=>{log.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(it)}
  insidePoint : ${JSON.stringify(lt)}
  node        : x:${rt.x} y:${rt.y} w:${rt.width} h:${rt.height}`);const ct=rt.x,ht=rt.y,dt=Math.abs(ct-lt.x),ft=rt.width/2;let ut=lt.x<it.x?ft-dt:ft+dt;const pt=rt.height/2,gt=Math.abs(it.y-lt.y),mt=Math.abs(it.x-lt.x);if(Math.abs(ht-it.y)*ft>Math.abs(ct-it.x)*pt){let _t=lt.y<it.y?it.y-pt-ht:ht-pt-it.y;ut=mt*_t/gt;const yt={x:lt.x<it.x?lt.x+ut:lt.x-mt+ut,y:lt.y<it.y?lt.y+gt-_t:lt.y-gt+_t};return ut===0&&(yt.x=it.x,yt.y=it.y),mt===0&&(yt.x=it.x),gt===0&&(yt.y=it.y),log.debug(`abc89 top/bottom calc, Q ${gt}, q ${_t}, R ${mt}, r ${ut}`,yt),yt}else{lt.x<it.x?ut=it.x-ft-ct:ut=ct-ft-it.x;let _t=gt*ut/mt,yt=lt.x<it.x?lt.x+mt-ut:lt.x-mt+ut,bt=lt.y<it.y?lt.y+_t:lt.y-_t;return log.debug(`sides calc abc89, Q ${gt}, q ${_t}, R ${mt}, r ${ut}`,{_x:yt,_y:bt}),ut===0&&(yt=it.x,bt=it.y),mt===0&&(yt=it.x),gt===0&&(bt=it.y),{x:yt,y:bt}}},"intersection"),cutPathAtIntersect=__name((rt,it)=>{log.warn("abc88 cutPathAtIntersect",rt,it);let lt=[],ct=rt[0],ht=!1;return rt.forEach(dt=>{if(log.info("abc88 checking point",dt,it),!outsideNode(it,dt)&&!ht){const ft=intersection(it,ct,dt);log.debug("abc88 inside",dt,ct,ft),log.debug("abc88 intersection",ft,it);let ut=!1;lt.forEach(pt=>{ut=ut||pt.x===ft.x&&pt.y===ft.y}),lt.some(pt=>pt.x===ft.x&&pt.y===ft.y)?log.warn("abc88 no intersect",ft,lt):lt.push(ft),ht=!0}else log.warn("abc88 outside",dt,ct),ct=dt,ht||lt.push(dt)}),log.debug("returning points",lt),lt},"cutPathAtIntersect");function extractCornerPoints(rt){const it=[],lt=[];for(let ct=1;ct<rt.length-1;ct++){const ht=rt[ct-1],dt=rt[ct],ft=rt[ct+1];(ht.x===dt.x&&dt.y===ft.y&&Math.abs(dt.x-ft.x)>5&&Math.abs(dt.y-ht.y)>5||ht.y===dt.y&&dt.x===ft.x&&Math.abs(dt.x-ht.x)>5&&Math.abs(dt.y-ft.y)>5)&&(it.push(dt),lt.push(ct))}return{cornerPoints:it,cornerPointPositions:lt}}__name(extractCornerPoints,"extractCornerPoints");var findAdjacentPoint=__name(function(rt,it,lt){const ct=it.x-rt.x,ht=it.y-rt.y,dt=Math.sqrt(ct*ct+ht*ht),ft=lt/dt;return{x:it.x-ft*ct,y:it.y-ft*ht}},"findAdjacentPoint"),fixCorners=__name(function(rt){const{cornerPointPositions:it}=extractCornerPoints(rt),lt=[];for(let ct=0;ct<rt.length;ct++)if(it.includes(ct)){const ht=rt[ct-1],dt=rt[ct+1],ft=rt[ct],ut=findAdjacentPoint(ht,ft,5),pt=findAdjacentPoint(dt,ft,5),gt=pt.x-ut.x,mt=pt.y-ut.y;lt.push(ut);const _t=Math.sqrt(2)*2;let yt={x:ft.x,y:ft.y};if(Math.abs(dt.x-ht.x)>10&&Math.abs(dt.y-ht.y)>=10){log.debug("Corner point fixing",Math.abs(dt.x-ht.x),Math.abs(dt.y-ht.y));const bt=5;ft.x===ut.x?yt={x:gt<0?ut.x-bt+_t:ut.x+bt-_t,y:mt<0?ut.y-_t:ut.y+_t}:yt={x:gt<0?ut.x-_t:ut.x+_t,y:mt<0?ut.y-bt+_t:ut.y+bt-_t}}else log.debug("Corner point skipping fixing",Math.abs(dt.x-ht.x),Math.abs(dt.y-ht.y));lt.push(yt,pt)}else lt.push(rt[ct]);return lt},"fixCorners"),generateDashArray=__name((rt,it,lt)=>{const ct=rt-it-lt,ht=2,dt=2,ft=ht+dt,ut=Math.floor(ct/ft),pt=Array(ut).fill(`${ht} ${dt}`).join(" ");return`0 ${it} ${pt} ${lt}`},"generateDashArray"),insertEdge=__name(function(rt,it,lt,ct,ht,dt,ft,ut=!1){const{handDrawnSeed:pt}=getConfig2();let gt=it.points,mt=!1;const _t=ht;var yt=dt;const bt=[];for(const Nt in it.cssCompiledStyles)isLabelStyle(Nt)||bt.push(it.cssCompiledStyles[Nt]);log.debug("UIO intersect check",it.points,yt.x,_t.x),yt.intersect&&_t.intersect&&!ut&&(gt=gt.slice(1,it.points.length-1),gt.unshift(_t.intersect(gt[0])),log.debug("Last point UIO",it.start,"-->",it.end,gt[gt.length-1],yt,yt.intersect(gt[gt.length-1])),gt.push(yt.intersect(gt[gt.length-1])));const xt=btoa(JSON.stringify(gt));it.toCluster&&(log.info("to cluster abc88",lt.get(it.toCluster)),gt=cutPathAtIntersect(it.points,lt.get(it.toCluster).node),mt=!0),it.fromCluster&&(log.debug("from cluster abc88",lt.get(it.fromCluster),JSON.stringify(gt,null,2)),gt=cutPathAtIntersect(gt.reverse(),lt.get(it.fromCluster).node).reverse(),mt=!0);let wt=gt.filter(Nt=>!Number.isNaN(Nt.y));wt=fixCorners(wt);let Ct=curveBasis;switch(Ct=curveLinear,it.curve){case"linear":Ct=curveLinear;break;case"basis":Ct=curveBasis;break;case"cardinal":Ct=curveCardinal;break;case"bumpX":Ct=bumpX;break;case"bumpY":Ct=bumpY;break;case"catmullRom":Ct=curveCatmullRom;break;case"monotoneX":Ct=monotoneX;break;case"monotoneY":Ct=monotoneY;break;case"natural":Ct=curveNatural;break;case"step":Ct=curveStep;break;case"stepAfter":Ct=stepAfter;break;case"stepBefore":Ct=stepBefore;break;default:Ct=curveBasis}const{x:St,y:Tt}=getLineFunctionsWithOffset(it),vt=line$1().x(St).y(Tt).curve(Ct);let kt;switch(it.thickness){case"normal":kt="edge-thickness-normal";break;case"thick":kt="edge-thickness-thick";break;case"invisible":kt="edge-thickness-invisible";break;default:kt="edge-thickness-normal"}switch(it.pattern){case"solid":kt+=" edge-pattern-solid";break;case"dotted":kt+=" edge-pattern-dotted";break;case"dashed":kt+=" edge-pattern-dashed";break;default:kt+=" edge-pattern-solid"}let Et,Lt=it.curve==="rounded"?generateRoundedPath(applyMarkerOffsetsToPoints(wt,it),5):vt(wt);const At=Array.isArray(it.style)?it.style:[it.style];let It=At.find(Nt=>Nt?.startsWith("stroke:")),Bt=!1;if(it.look==="handDrawn"){const Nt=at.svg(rt);Object.assign([],wt);const Ot=Nt.path(Lt,{roughness:.3,seed:pt});kt+=" transition",Et=select(Ot).select("path").attr("id",it.id).attr("class"," "+kt+(it.classes?" "+it.classes:"")).attr("style",At?At.reduce((zt,Ft)=>zt+";"+Ft,""):"");let Mt=Et.attr("d");Et.attr("d",Mt),rt.node().appendChild(Et.node())}else{const Nt=bt.join(";"),Ot=At?At.reduce((Zt,qt)=>Zt+qt+";",""):"";let Mt="";it.animate&&(Mt=" edge-animation-fast"),it.animation&&(Mt=" edge-animation-"+it.animation);const zt=(Nt?Nt+";"+Ot+";":Ot)+";"+(At?At.reduce((Zt,qt)=>Zt+";"+qt,""):"");Et=rt.append("path").attr("d",Lt).attr("id",it.id).attr("class"," "+kt+(it.classes?" "+it.classes:"")+(Mt??"")).attr("style",zt),It=zt.match(/stroke:([^;]+)/)?.[1],Bt=it.animate===!0||!!it.animation||Nt.includes("animation");const Ft=Et.node(),Wt=typeof Ft.getTotalLength=="function"?Ft.getTotalLength():0,jt=markerOffsets2[it.arrowTypeStart]||0,Yt=markerOffsets2[it.arrowTypeEnd]||0;if(it.look==="neo"&&!Bt){const qt=`stroke-dasharray: ${it.pattern==="dotted"||it.pattern==="dashed"?generateDashArray(Wt,jt,Yt):`0 ${jt} ${Wt-jt-Yt} ${Yt}`}; stroke-dashoffset: 0;`;Et.attr("style",qt+Et.attr("style"))}}Et.attr("data-edge",!0),Et.attr("data-et","edge"),Et.attr("data-id",it.id),Et.attr("data-points",xt),it.showPoints&&wt.forEach(Nt=>{rt.append("circle").style("stroke","red").style("fill","red").attr("r",1).attr("cx",Nt.x).attr("cy",Nt.y)});let Dt="";(getConfig2().flowchart.arrowMarkerAbsolute||getConfig2().state.arrowMarkerAbsolute)&&(Dt=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,Dt=Dt.replace(/\(/g,"\\(").replace(/\)/g,"\\)")),log.info("arrowTypeStart",it.arrowTypeStart),log.info("arrowTypeEnd",it.arrowTypeEnd),addEdgeMarkers(Et,it,Dt,ft,ct,It);const Rt=Math.floor(gt.length/2),Pt=gt[Rt];utils_default.isLabelCoordinateInPath(Pt,Et.attr("d"))||(mt=!0);let Ht={};return mt&&(Ht.updatedPath=gt),Ht.originalPath=it.points,Ht},"insertEdge");function generateRoundedPath(rt,it){if(rt.length<2)return"";let lt="";const ct=rt.length,ht=1e-5;for(let dt=0;dt<ct;dt++){const ft=rt[dt],ut=rt[dt-1],pt=rt[dt+1];if(dt===0)lt+=`M${ft.x},${ft.y}`;else if(dt===ct-1)lt+=`L${ft.x},${ft.y}`;else{const gt=ft.x-ut.x,mt=ft.y-ut.y,_t=pt.x-ft.x,yt=pt.y-ft.y,bt=Math.hypot(gt,mt),xt=Math.hypot(_t,yt);if(bt<ht||xt<ht){lt+=`L${ft.x},${ft.y}`;continue}const wt=gt/bt,Ct=mt/bt,St=_t/xt,Tt=yt/xt,vt=wt*St+Ct*Tt,kt=Math.max(-1,Math.min(1,vt)),Et=Math.acos(kt);if(Et<ht||Math.abs(Math.PI-Et)<ht){lt+=`L${ft.x},${ft.y}`;continue}const Lt=Math.min(it/Math.sin(Et/2),bt/2,xt/2),At=ft.x-wt*Lt,It=ft.y-Ct*Lt,Bt=ft.x+St*Lt,Dt=ft.y+Tt*Lt;lt+=`L${At},${It}`,lt+=`Q${ft.x},${ft.y} ${Bt},${Dt}`}}return lt}__name(generateRoundedPath,"generateRoundedPath");function calculateDeltaAndAngle(rt,it){if(!rt||!it)return{angle:0,deltaX:0,deltaY:0};const lt=it.x-rt.x,ct=it.y-rt.y;return{angle:Math.atan2(ct,lt),deltaX:lt,deltaY:ct}}__name(calculateDeltaAndAngle,"calculateDeltaAndAngle");function applyMarkerOffsetsToPoints(rt,it){const lt=rt.map(ht=>({...ht}));if(rt.length>=2&&markerOffsets[it.arrowTypeStart]){const ht=markerOffsets[it.arrowTypeStart],dt=rt[0],ft=rt[1],{angle:ut}=calculateDeltaAndAngle(dt,ft),pt=ht*Math.cos(ut),gt=ht*Math.sin(ut);lt[0].x=dt.x+pt,lt[0].y=dt.y+gt}const ct=rt.length;if(ct>=2&&markerOffsets[it.arrowTypeEnd]){const ht=markerOffsets[it.arrowTypeEnd],dt=rt[ct-1],ft=rt[ct-2],{angle:ut}=calculateDeltaAndAngle(ft,dt),pt=ht*Math.cos(ut),gt=ht*Math.sin(ut);lt[ct-1].x=dt.x-pt,lt[ct-1].y=dt.y-gt}return lt}__name(applyMarkerOffsetsToPoints,"applyMarkerOffsetsToPoints");var insertMarkers=__name((rt,it,lt,ct)=>{it.forEach(ht=>{markers[ht](rt,lt,ct)})},"insertMarkers"),extension=__name((rt,it,lt)=>{log.trace("Making markers for ",lt),rt.append("defs").append("marker").attr("id",lt+"_"+it+"-extensionStart").attr("class","marker extension "+it).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),rt.append("defs").append("marker").attr("id",lt+"_"+it+"-extensionEnd").attr("class","marker extension "+it).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),composition=__name((rt,it,lt)=>{rt.append("defs").append("marker").attr("id",lt+"_"+it+"-compositionStart").attr("class","marker composition "+it).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),rt.append("defs").append("marker").attr("id",lt+"_"+it+"-compositionEnd").attr("class","marker composition "+it).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),aggregation=__name((rt,it,lt)=>{rt.append("defs").append("marker").attr("id",lt+"_"+it+"-aggregationStart").attr("class","marker aggregation "+it).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),rt.append("defs").append("marker").attr("id",lt+"_"+it+"-aggregationEnd").attr("class","marker aggregation "+it).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),dependency=__name((rt,it,lt)=>{rt.append("defs").append("marker").attr("id",lt+"_"+it+"-dependencyStart").attr("class","marker dependency "+it).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),rt.append("defs").append("marker").attr("id",lt+"_"+it+"-dependencyEnd").attr("class","marker dependency "+it).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),lollipop=__name((rt,it,lt)=>{rt.append("defs").append("marker").attr("id",lt+"_"+it+"-lollipopStart").attr("class","marker lollipop "+it).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),rt.append("defs").append("marker").attr("id",lt+"_"+it+"-lollipopEnd").attr("class","marker lollipop "+it).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),point=__name((rt,it,lt)=>{rt.append("marker").attr("id",lt+"_"+it+"-pointEnd").attr("class","marker "+it).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),rt.append("marker").attr("id",lt+"_"+it+"-pointStart").attr("class","marker "+it).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),circle=__name((rt,it,lt)=>{rt.append("marker").attr("id",lt+"_"+it+"-circleEnd").attr("class","marker "+it).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),rt.append("marker").attr("id",lt+"_"+it+"-circleStart").attr("class","marker "+it).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),cross=__name((rt,it,lt)=>{rt.append("marker").attr("id",lt+"_"+it+"-crossEnd").attr("class","marker cross "+it).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),rt.append("marker").attr("id",lt+"_"+it+"-crossStart").attr("class","marker cross "+it).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),barb=__name((rt,it,lt)=>{rt.append("defs").append("marker").attr("id",lt+"_"+it+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),only_one=__name((rt,it,lt)=>{rt.append("defs").append("marker").attr("id",lt+"_"+it+"-onlyOneStart").attr("class","marker onlyOne "+it).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M9,0 L9,18 M15,0 L15,18"),rt.append("defs").append("marker").attr("id",lt+"_"+it+"-onlyOneEnd").attr("class","marker onlyOne "+it).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M3,0 L3,18 M9,0 L9,18")},"only_one"),zero_or_one=__name((rt,it,lt)=>{const ct=rt.append("defs").append("marker").attr("id",lt+"_"+it+"-zeroOrOneStart").attr("class","marker zeroOrOne "+it).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");ct.append("circle").attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),ct.append("path").attr("d","M9,0 L9,18");const ht=rt.append("defs").append("marker").attr("id",lt+"_"+it+"-zeroOrOneEnd").attr("class","marker zeroOrOne "+it).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");ht.append("circle").attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),ht.append("path").attr("d","M21,0 L21,18")},"zero_or_one"),one_or_more=__name((rt,it,lt)=>{rt.append("defs").append("marker").attr("id",lt+"_"+it+"-oneOrMoreStart").attr("class","marker oneOrMore "+it).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),rt.append("defs").append("marker").attr("id",lt+"_"+it+"-oneOrMoreEnd").attr("class","marker oneOrMore "+it).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18")},"one_or_more"),zero_or_more=__name((rt,it,lt)=>{const ct=rt.append("defs").append("marker").attr("id",lt+"_"+it+"-zeroOrMoreStart").attr("class","marker zeroOrMore "+it).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");ct.append("circle").attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),ct.append("path").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18");const ht=rt.append("defs").append("marker").attr("id",lt+"_"+it+"-zeroOrMoreEnd").attr("class","marker zeroOrMore "+it).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");ht.append("circle").attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),ht.append("path").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},"zero_or_more"),requirement_arrow=__name((rt,it,lt)=>{rt.append("defs").append("marker").attr("id",lt+"_"+it+"-requirement_arrowEnd").attr("refX",20).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("path").attr("d",`M0,0
      L20,10
      M20,10
      L0,20`)},"requirement_arrow"),requirement_contains=__name((rt,it,lt)=>{const ct=rt.append("defs").append("marker").attr("id",lt+"_"+it+"-requirement_containsStart").attr("refX",0).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("g");ct.append("circle").attr("cx",10).attr("cy",10).attr("r",9).attr("fill","none"),ct.append("line").attr("x1",1).attr("x2",19).attr("y1",10).attr("y2",10),ct.append("line").attr("y1",1).attr("y2",19).attr("x1",10).attr("x2",10)},"requirement_contains"),markers={extension,composition,aggregation,dependency,lollipop,point,circle,cross,barb,only_one,zero_or_one,one_or_more,zero_or_more,requirement_arrow,requirement_contains},markers_default=insertMarkers,internalHelpers={common:common_default,getConfig,insertCluster,insertEdge,insertEdgeLabel,insertMarkers:markers_default,insertNode,interpolateToCurve,labelHelper,log,positionEdgeLabel},layoutAlgorithms={},registerLayoutLoaders=__name(rt=>{for(const it of rt)layoutAlgorithms[it.name]=it},"registerLayoutLoaders"),registerDefaultLayoutLoaders=__name(()=>{registerLayoutLoaders([{name:"dagre",loader:__name(async()=>await __vitePreload(()=>import("./D0hkvT88.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url),"loader")},{name:"cose-bilkent",loader:__name(async()=>await __vitePreload(()=>import("./CQl_Xrnc.js"),__vite__mapDeps([8,9]),import.meta.url),"loader")}])},"registerDefaultLayoutLoaders");registerDefaultLayoutLoaders();var render$2=__name(async(rt,it)=>{if(!(rt.layoutAlgorithm in layoutAlgorithms))throw new Error(`Unknown layout algorithm: ${rt.layoutAlgorithm}`);const lt=layoutAlgorithms[rt.layoutAlgorithm];return(await lt.loader()).render(rt,it,internalHelpers,{algorithm:lt.algorithm})},"render"),getRegisteredLayoutAlgorithm=__name((rt="",{fallback:it="dagre"}={})=>{if(rt in layoutAlgorithms)return rt;if(it in layoutAlgorithms)return log.warn(`Layout algorithm ${rt} is not registered. Using ${it} as fallback.`),it;throw new Error(`Both layout algorithms ${rt} and ${it} are not registered.`)},"getRegisteredLayoutAlgorithm"),COMMENT$1="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",NAMESPACE="@namespace",KEYFRAMES="@keyframes",LAYER="@layer",abs=Math.abs,from=String.fromCharCode;function trim(rt){return rt.trim()}function replace(rt,it,lt){return rt.replace(it,lt)}function indexof(rt,it,lt){return rt.indexOf(it,lt)}function charat(rt,it){return rt.charCodeAt(it)|0}function substr(rt,it,lt){return rt.slice(it,lt)}function strlen(rt){return rt.length}function sizeof(rt){return rt.length}function append(rt,it){return it.push(rt),rt}var line=1,column=1,length=0,position=0,character=0,characters="";function node(rt,it,lt,ct,ht,dt,ft,ut){return{value:rt,root:it,parent:lt,type:ct,props:ht,children:dt,line,column,length:ft,return:"",siblings:ut}}function char(){return character}function prev(){return character=position>0?charat(characters,--position):0,column--,character===10&&(column=1,line--),character}function next(){return character=position<length?charat(characters,position++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position)}function caret(){return position}function slice(rt,it){return substr(characters,rt,it)}function token(rt){switch(rt){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(rt){return line=column=1,length=strlen(characters=rt),position=0,[]}function dealloc(rt){return characters="",rt}function delimit(rt){return trim(slice(position-1,delimiter(rt===91?rt+2:rt===40?rt+1:rt)))}function whitespace(rt){for(;(character=peek())&&character<33;)next();return token(rt)>2||token(character)>3?"":" "}function escaping(rt,it){for(;--it&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice(rt,caret()+(it<6&&peek()==32&&next()==32))}function delimiter(rt){for(;next();)switch(character){case rt:return position;case 34:case 39:rt!==34&&rt!==39&&delimiter(character);break;case 40:rt===41&&delimiter(rt);break;case 92:next();break}return position}function commenter(rt,it){for(;next()&&rt+character!==57;)if(rt+character===84&&peek()===47)break;return"/*"+slice(it,position-1)+"*"+from(rt===47?rt:next())}function identifier(rt){for(;!token(peek());)next();return slice(rt,position)}function compile(rt){return dealloc(parse$2("",null,null,null,[""],rt=alloc(rt),0,[0],rt))}function parse$2(rt,it,lt,ct,ht,dt,ft,ut,pt){for(var gt=0,mt=0,_t=ft,yt=0,bt=0,xt=0,wt=1,Ct=1,St=1,Tt=0,vt="",kt=ht,Et=dt,Lt=ct,At=vt;Ct;)switch(xt=Tt,Tt=next()){case 40:if(xt!=108&&charat(At,_t-1)==58){indexof(At+=replace(delimit(Tt),"&","&\f"),"&\f",abs(gt?ut[gt-1]:0))!=-1&&(St=-1);break}case 34:case 39:case 91:At+=delimit(Tt);break;case 9:case 10:case 13:case 32:At+=whitespace(xt);break;case 92:At+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),it,lt,pt),pt),(token(xt||1)==5||token(peek()||1)==5)&&strlen(At)&&substr(At,-1,void 0)!==" "&&(At+=" ");break;default:At+="/"}break;case 123*wt:ut[gt++]=strlen(At)*St;case 125*wt:case 59:case 0:switch(Tt){case 0:case 125:Ct=0;case 59+mt:St==-1&&(At=replace(At,/\f/g,"")),bt>0&&(strlen(At)-_t||wt===0&&xt===47)&&append(bt>32?declaration(At+";",ct,lt,_t-1,pt):declaration(replace(At," ","")+";",ct,lt,_t-2,pt),pt);break;case 59:At+=";";default:if(append(Lt=ruleset(At,it,lt,gt,mt,ht,ut,vt,kt=[],Et=[],_t,dt),dt),Tt===123)if(mt===0)parse$2(At,it,Lt,Lt,kt,dt,_t,ut,Et);else{switch(yt){case 99:if(charat(At,3)===110)break;case 108:if(charat(At,2)===97)break;default:mt=0;case 100:case 109:case 115:}mt?parse$2(rt,Lt,Lt,ct&&append(ruleset(rt,Lt,Lt,0,0,ht,ut,vt,ht,kt=[],_t,Et),Et),ht,Et,_t,ut,ct?kt:Et):parse$2(At,Lt,Lt,Lt,[""],Et,0,ut,Et)}}gt=mt=bt=0,wt=St=1,vt=At="",_t=ft;break;case 58:_t=1+strlen(At),bt=xt;default:if(wt<1){if(Tt==123)--wt;else if(Tt==125&&wt++==0&&prev()==125)continue}switch(At+=from(Tt),Tt*wt){case 38:St=mt>0?1:(At+="\f",-1);break;case 44:ut[gt++]=(strlen(At)-1)*St,St=1;break;case 64:peek()===45&&(At+=delimit(next())),yt=peek(),mt=_t=strlen(vt=At+=identifier(caret())),Tt++;break;case 45:xt===45&&strlen(At)==2&&(wt=0)}}return dt}function ruleset(rt,it,lt,ct,ht,dt,ft,ut,pt,gt,mt,_t){for(var yt=ht-1,bt=ht===0?dt:[""],xt=sizeof(bt),wt=0,Ct=0,St=0;wt<ct;++wt)for(var Tt=0,vt=substr(rt,yt+1,yt=abs(Ct=ft[wt])),kt=rt;Tt<xt;++Tt)(kt=trim(Ct>0?bt[Tt]+" "+vt:replace(vt,/&\f/g,bt[Tt])))&&(pt[St++]=kt);return node(rt,it,lt,ht===0?RULESET:ut,pt,gt,mt,_t)}function comment(rt,it,lt,ct){return node(rt,it,lt,COMMENT$1,from(char()),substr(rt,2,-2),0,ct)}function declaration(rt,it,lt,ct,ht){return node(rt,it,lt,DECLARATION,substr(rt,0,ct),substr(rt,ct+1,-1),ct,ht)}function serialize$1(rt,it){for(var lt="",ct=0;ct<rt.length;ct++)lt+=it(rt[ct],ct,rt,it)||"";return lt}function stringify(rt,it,lt,ct){switch(rt.type){case LAYER:if(rt.children.length)break;case IMPORT:case NAMESPACE:case DECLARATION:return rt.return=rt.return||rt.value;case COMMENT$1:return"";case KEYFRAMES:return rt.return=rt.value+"{"+serialize$1(rt.children,ct)+"}";case RULESET:if(!strlen(rt.value=rt.props.join(",")))return""}return strlen(lt=serialize$1(rt.children,ct))?rt.return=rt.value+"{"+lt+"}":""}var id="c4",detector=__name(rt=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(rt),"detector"),loader=__name(async()=>{const{diagram:rt}=await __vitePreload(async()=>{const{diagram:it}=await import("./CehMLrIh.js");return{diagram:it}},__vite__mapDeps([10,11]),import.meta.url);return{id,diagram:rt}},"loader"),plugin={id,detector,loader},c4Detector_default=plugin,id2="flowchart",detector2=__name((rt,it)=>it?.flowchart?.defaultRenderer==="dagre-wrapper"||it?.flowchart?.defaultRenderer==="elk"?!1:/^\s*graph/.test(rt),"detector"),loader2=__name(async()=>{const{diagram:rt}=await __vitePreload(async()=>{const{diagram:it}=await import("./bIJYs0n4.js");return{diagram:it}},__vite__mapDeps([12,13,14,15,16]),import.meta.url);return{id:id2,diagram:rt}},"loader"),plugin2={id:id2,detector:detector2,loader:loader2},flowDetector_default=plugin2,id3="flowchart-v2",detector3=__name((rt,it)=>it?.flowchart?.defaultRenderer==="dagre-d3"?!1:(it?.flowchart?.defaultRenderer==="elk"&&(it.layout="elk"),/^\s*graph/.test(rt)&&it?.flowchart?.defaultRenderer==="dagre-wrapper"?!0:/^\s*flowchart/.test(rt)),"detector"),loader3=__name(async()=>{const{diagram:rt}=await __vitePreload(async()=>{const{diagram:it}=await import("./bIJYs0n4.js");return{diagram:it}},__vite__mapDeps([12,13,14,15,16]),import.meta.url);return{id:id3,diagram:rt}},"loader"),plugin3={id:id3,detector:detector3,loader:loader3},flowDetector_v2_default=plugin3,id4="er",detector4=__name(rt=>/^\s*erDiagram/.test(rt),"detector"),loader4=__name(async()=>{const{diagram:rt}=await __vitePreload(async()=>{const{diagram:it}=await import("./DLg1LVVK.js");return{diagram:it}},__vite__mapDeps([17,14,15,16]),import.meta.url);return{id:id4,diagram:rt}},"loader"),plugin4={id:id4,detector:detector4,loader:loader4},erDetector_default=plugin4,id5="gitGraph",detector5=__name(rt=>/^\s*gitGraph/.test(rt),"detector"),loader5=__name(async()=>{const{diagram:rt}=await __vitePreload(async()=>{const{diagram:it}=await import("./kAF4D_-6.js");return{diagram:it}},__vite__mapDeps([18,19,20,21,22,23,24,2,3,5,7]),import.meta.url);return{id:id5,diagram:rt}},"loader"),plugin5={id:id5,detector:detector5,loader:loader5},gitGraphDetector_default=plugin5,id6="gantt",detector6=__name(rt=>/^\s*gantt/.test(rt),"detector"),loader6=__name(async()=>{const{diagram:rt}=await __vitePreload(async()=>{const{diagram:it}=await import("./FNP3IL09.js");return{diagram:it}},__vite__mapDeps([25,26,27,28]),import.meta.url);return{id:id6,diagram:rt}},"loader"),plugin6={id:id6,detector:detector6,loader:loader6},ganttDetector_default=plugin6,id7="info",detector7=__name(rt=>/^\s*info/.test(rt),"detector"),loader7=__name(async()=>{const{diagram:rt}=await __vitePreload(async()=>{const{diagram:it}=await import("./sSjuhqhB.js");return{diagram:it}},__vite__mapDeps([29,21,22,23,24,2,3,5,7]),import.meta.url);return{id:id7,diagram:rt}},"loader"),info={id:id7,detector:detector7,loader:loader7},id8="pie",detector8=__name(rt=>/^\s*pie/.test(rt),"detector"),loader8=__name(async()=>{const{diagram:rt}=await __vitePreload(async()=>{const{diagram:it}=await import("./0LmpuJJB.js");return{diagram:it}},__vite__mapDeps([30,19,21,22,23,24,2,3,5,7,31,32,27]),import.meta.url);return{id:id8,diagram:rt}},"loader"),pie={id:id8,detector:detector8,loader:loader8},id9="quadrantChart",detector9=__name(rt=>/^\s*quadrantChart/.test(rt),"detector"),loader9=__name(async()=>{const{diagram:rt}=await __vitePreload(async()=>{const{diagram:it}=await import("./CQ8ZScYV.js");return{diagram:it}},__vite__mapDeps([33,26,27,28]),import.meta.url);return{id:id9,diagram:rt}},"loader"),plugin7={id:id9,detector:detector9,loader:loader9},quadrantDetector_default=plugin7,id10="xychart",detector10=__name(rt=>/^\s*xychart(-beta)?/.test(rt),"detector"),loader10=__name(async()=>{const{diagram:rt}=await __vitePreload(async()=>{const{diagram:it}=await import("./CZkqOa_T.js");return{diagram:it}},__vite__mapDeps([34,27,32,26,28]),import.meta.url);return{id:id10,diagram:rt}},"loader"),plugin8={id:id10,detector:detector10,loader:loader10},xychartDetector_default=plugin8,id11="requirement",detector11=__name(rt=>/^\s*requirement(Diagram)?/.test(rt),"detector"),loader11=__name(async()=>{const{diagram:rt}=await __vitePreload(async()=>{const{diagram:it}=await import("./BZDUc91_.js");return{diagram:it}},__vite__mapDeps([35,14,15]),import.meta.url);return{id:id11,diagram:rt}},"loader"),plugin9={id:id11,detector:detector11,loader:loader11},requirementDetector_default=plugin9,id12="sequence",detector12=__name(rt=>/^\s*sequenceDiagram/.test(rt),"detector"),loader12=__name(async()=>{const{diagram:rt}=await __vitePreload(async()=>{const{diagram:it}=await import("./DmU-xdSl.js");return{diagram:it}},__vite__mapDeps([36,11,20]),import.meta.url);return{id:id12,diagram:rt}},"loader"),plugin10={id:id12,detector:detector12,loader:loader12},sequenceDetector_default=plugin10,id13="class",detector13=__name((rt,it)=>it?.class?.defaultRenderer==="dagre-wrapper"?!1:/^\s*classDiagram/.test(rt),"detector"),loader13=__name(async()=>{const{diagram:rt}=await __vitePreload(async()=>{const{diagram:it}=await import("./DliYsLmx.js");return{diagram:it}},__vite__mapDeps([37,38,13,14,15]),import.meta.url);return{id:id13,diagram:rt}},"loader"),plugin11={id:id13,detector:detector13,loader:loader13},classDetector_default=plugin11,id14="classDiagram",detector14=__name((rt,it)=>/^\s*classDiagram/.test(rt)&&it?.class?.defaultRenderer==="dagre-wrapper"?!0:/^\s*classDiagram-v2/.test(rt),"detector"),loader14=__name(async()=>{const{diagram:rt}=await __vitePreload(async()=>{const{diagram:it}=await import("./KXwaX8V4.js");return{diagram:it}},__vite__mapDeps([39,38,13,14,15]),import.meta.url);return{id:id14,diagram:rt}},"loader"),plugin12={id:id14,detector:detector14,loader:loader14},classDetector_V2_default=plugin12,id15="state",detector15=__name((rt,it)=>it?.state?.defaultRenderer==="dagre-wrapper"?!1:/^\s*stateDiagram/.test(rt),"detector"),loader15=__name(async()=>{const{diagram:rt}=await __vitePreload(async()=>{const{diagram:it}=await import("./BIxA3e_b.js");return{diagram:it}},__vite__mapDeps([40,41,14,15,1,2,3,4,5,6]),import.meta.url);return{id:id15,diagram:rt}},"loader"),plugin13={id:id15,detector:detector15,loader:loader15},stateDetector_default=plugin13,id16="stateDiagram",detector16=__name((rt,it)=>!!(/^\s*stateDiagram-v2/.test(rt)||/^\s*stateDiagram/.test(rt)&&it?.state?.defaultRenderer==="dagre-wrapper"),"detector"),loader16=__name(async()=>{const{diagram:rt}=await __vitePreload(async()=>{const{diagram:it}=await import("./BcGH05_P.js");return{diagram:it}},__vite__mapDeps([42,41,14,15]),import.meta.url);return{id:id16,diagram:rt}},"loader"),plugin14={id:id16,detector:detector16,loader:loader16},stateDetector_V2_default=plugin14,id17="journey",detector17=__name(rt=>/^\s*journey/.test(rt),"detector"),loader17=__name(async()=>{const{diagram:rt}=await __vitePreload(async()=>{const{diagram:it}=await import("./U9lrJi0d.js");return{diagram:it}},__vite__mapDeps([43,11,13,31]),import.meta.url);return{id:id17,diagram:rt}},"loader"),plugin15={id:id17,detector:detector17,loader:loader17},journeyDetector_default=plugin15,draw=__name((rt,it,lt)=>{log.debug(`rendering svg for syntax error
`);const ct=selectSvgElement(it),ht=ct.append("g");ct.attr("viewBox","0 0 2412 512"),configureSvgSize(ct,100,512,!0),ht.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),ht.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),ht.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),ht.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),ht.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),ht.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),ht.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),ht.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${lt}`)},"draw"),renderer={draw},errorRenderer_default=renderer,diagram={db:{},renderer,parser:{parse:__name(()=>{},"parse")}},errorDiagram_default=diagram,id18="flowchart-elk",detector18=__name((rt,it={})=>/^\s*flowchart-elk/.test(rt)||/^\s*(flowchart|graph)/.test(rt)&&it?.flowchart?.defaultRenderer==="elk"?(it.layout="elk",!0):!1,"detector"),loader18=__name(async()=>{const{diagram:rt}=await __vitePreload(async()=>{const{diagram:it}=await import("./bIJYs0n4.js");return{diagram:it}},__vite__mapDeps([12,13,14,15,16]),import.meta.url);return{id:id18,diagram:rt}},"loader"),plugin16={id:id18,detector:detector18,loader:loader18},detector_default=plugin16,id19="timeline",detector19=__name(rt=>/^\s*timeline/.test(rt),"detector"),loader19=__name(async()=>{const{diagram:rt}=await __vitePreload(async()=>{const{diagram:it}=await import("./lLhvsyh2.js");return{diagram:it}},__vite__mapDeps([44,31]),import.meta.url);return{id:id19,diagram:rt}},"loader"),plugin17={id:id19,detector:detector19,loader:loader19},detector_default2=plugin17,id20="mindmap",detector20=__name(rt=>/^\s*mindmap/.test(rt),"detector"),loader20=__name(async()=>{const{diagram:rt}=await __vitePreload(async()=>{const{diagram:it}=await import("./-OG4lyqv.js");return{diagram:it}},__vite__mapDeps([45,14,15]),import.meta.url);return{id:id20,diagram:rt}},"loader"),plugin18={id:id20,detector:detector20,loader:loader20},detector_default3=plugin18,id21="kanban",detector21=__name(rt=>/^\s*kanban/.test(rt),"detector"),loader21=__name(async()=>{const{diagram:rt}=await __vitePreload(async()=>{const{diagram:it}=await import("./CnQiAC7J.js");return{diagram:it}},__vite__mapDeps([46,13]),import.meta.url);return{id:id21,diagram:rt}},"loader"),plugin19={id:id21,detector:detector21,loader:loader21},detector_default4=plugin19,id22="sankey",detector22=__name(rt=>/^\s*sankey(-beta)?/.test(rt),"detector"),loader22=__name(async()=>{const{diagram:rt}=await __vitePreload(async()=>{const{diagram:it}=await import("./B-kR6ifo.js");return{diagram:it}},__vite__mapDeps([47,32,27]),import.meta.url);return{id:id22,diagram:rt}},"loader"),plugin20={id:id22,detector:detector22,loader:loader22},sankeyDetector_default=plugin20,id23="packet",detector23=__name(rt=>/^\s*packet(-beta)?/.test(rt),"detector"),loader23=__name(async()=>{const{diagram:rt}=await __vitePreload(async()=>{const{diagram:it}=await import("./u78r0Sxy.js");return{diagram:it}},__vite__mapDeps([48,19,21,22,23,24,2,3,5,7]),import.meta.url);return{id:id23,diagram:rt}},"loader"),packet={id:id23,detector:detector23,loader:loader23},id24="radar",detector24=__name(rt=>/^\s*radar-beta/.test(rt),"detector"),loader24=__name(async()=>{const{diagram:rt}=await __vitePreload(async()=>{const{diagram:it}=await import("./C65Lm6-m.js");return{diagram:it}},__vite__mapDeps([49,19,21,22,23,24,2,3,5,7]),import.meta.url);return{id:id24,diagram:rt}},"loader"),radar={id:id24,detector:detector24,loader:loader24},id25="block",detector25=__name(rt=>/^\s*block(-beta)?/.test(rt),"detector"),loader25=__name(async()=>{const{diagram:rt}=await __vitePreload(async()=>{const{diagram:it}=await import("./GgaeWRGF.js");return{diagram:it}},__vite__mapDeps([50,13,7,2,3,1,16]),import.meta.url);return{id:id25,diagram:rt}},"loader"),plugin21={id:id25,detector:detector25,loader:loader25},blockDetector_default=plugin21,id26="architecture",detector26=__name(rt=>/^\s*architecture/.test(rt),"detector"),loader26=__name(async()=>{const{diagram:rt}=await __vitePreload(async()=>{const{diagram:it}=await import("./DQkBcXs3.js");return{diagram:it}},__vite__mapDeps([51,19,21,22,23,24,2,3,5,7,9]),import.meta.url);return{id:id26,diagram:rt}},"loader"),architecture={id:id26,detector:detector26,loader:loader26},architectureDetector_default=architecture,id27="treemap",detector27=__name(rt=>/^\s*treemap/.test(rt),"detector"),loader27=__name(async()=>{const{diagram:rt}=await __vitePreload(async()=>{const{diagram:it}=await import("./Ch7qpXGQ.js");return{diagram:it}},__vite__mapDeps([52,15,19,21,22,23,24,2,3,5,7,28,32,27]),import.meta.url);return{id:id27,diagram:rt}},"loader"),treemap={id:id27,detector:detector27,loader:loader27},hasLoadedDiagrams=!1,addDiagrams=__name(()=>{hasLoadedDiagrams||(hasLoadedDiagrams=!0,registerDiagram("error",errorDiagram_default,rt=>rt.toLowerCase().trim()==="error"),registerDiagram("---",{db:{clear:__name(()=>{},"clear")},styles:{},renderer:{draw:__name(()=>{},"draw")},parser:{parse:__name(()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")},"parse")},init:__name(()=>null,"init")},rt=>rt.toLowerCase().trimStart().startsWith("---")),registerLazyLoadedDiagrams(detector_default,detector_default3,architectureDetector_default),registerLazyLoadedDiagrams(c4Detector_default,detector_default4,classDetector_V2_default,classDetector_default,erDetector_default,ganttDetector_default,info,pie,requirementDetector_default,sequenceDetector_default,flowDetector_v2_default,flowDetector_default,detector_default2,gitGraphDetector_default,stateDetector_V2_default,stateDetector_default,journeyDetector_default,quadrantDetector_default,sankeyDetector_default,packet,xychartDetector_default,blockDetector_default,radar,treemap))},"addDiagrams"),loadRegisteredDiagrams=__name(async()=>{log.debug("Loading registered diagrams");const it=(await Promise.allSettled(Object.entries(detectors).map(async([lt,{detector:ct,loader:ht}])=>{if(ht)try{getDiagram(lt)}catch{try{const{diagram:dt,id:ft}=await ht();registerDiagram(ft,dt,ct)}catch(dt){throw log.error(`Failed to load external diagram with key ${lt}. Removing from detectors.`),delete detectors[lt],dt}}}))).filter(lt=>lt.status==="rejected");if(it.length>0){log.error(`Failed to load ${it.length} external diagrams`);for(const lt of it)log.error(lt);throw new Error(`Failed to load ${it.length} external diagrams`)}},"loadRegisteredDiagrams"),SVG_ROLE="graphics-document document";function setA11yDiagramInfo(rt,it){rt.attr("role",SVG_ROLE),it!==""&&rt.attr("aria-roledescription",it)}__name(setA11yDiagramInfo,"setA11yDiagramInfo");function addSVGa11yTitleDescription(rt,it,lt,ct){if(rt.insert!==void 0){if(lt){const ht=`chart-desc-${ct}`;rt.attr("aria-describedby",ht),rt.insert("desc",":first-child").attr("id",ht).text(lt)}if(it){const ht=`chart-title-${ct}`;rt.attr("aria-labelledby",ht),rt.insert("title",":first-child").attr("id",ht).text(it)}}}__name(addSVGa11yTitleDescription,"addSVGa11yTitleDescription");var dr,Diagram=(dr=class{constructor(it,lt,ct,ht,dt){this.type=it,this.text=lt,this.db=ct,this.parser=ht,this.renderer=dt}static async fromText(it,lt={}){const ct=getConfig(),ht=detectType$1(it,ct);it=encodeEntities(it)+`
`;try{getDiagram(ht)}catch{const gt=getDiagramLoader(ht);if(!gt)throw new UnknownDiagramError(`Diagram ${ht} not found.`);const{id:mt,diagram:_t}=await gt();registerDiagram(mt,_t)}const{db:dt,parser:ft,renderer:ut,init:pt}=getDiagram(ht);return ft.parser&&(ft.parser.yy=dt),dt.clear?.(),pt?.(ct),lt.title&&dt.setDiagramTitle?.(lt.title),await ft.parse(it),new dr(ht,it,dt,ft,ut)}async render(it,lt){await this.renderer.draw(this.text,it,lt,this)}getParser(){return this.parser}getType(){return this.type}},__name(dr,"Diagram"),dr),interactionFunctions=[],attachFunctions=__name(()=>{interactionFunctions.forEach(rt=>{rt()}),interactionFunctions=[]},"attachFunctions"),cleanupComments=__name(rt=>rt.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart(),"cleanupComments");function extractFrontMatter(rt){const it=rt.match(frontMatterRegex);if(!it)return{text:rt,metadata:{}};let lt=load(it[1],{schema:JSON_SCHEMA})??{};lt=typeof lt=="object"&&!Array.isArray(lt)?lt:{};const ct={};return lt.displayMode&&(ct.displayMode=lt.displayMode.toString()),lt.title&&(ct.title=lt.title.toString()),lt.config&&(ct.config=lt.config),{text:rt.slice(it[0].length),metadata:ct}}__name(extractFrontMatter,"extractFrontMatter");var cleanupText=__name(rt=>rt.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(it,lt,ct)=>"<"+lt+ct.replace(/="([^"]*)"/g,"='$1'")+">"),"cleanupText"),processFrontmatter=__name(rt=>{const{text:it,metadata:lt}=extractFrontMatter(rt),{displayMode:ct,title:ht,config:dt={}}=lt;return ct&&(dt.gantt||(dt.gantt={}),dt.gantt.displayMode=ct),{title:ht,config:dt,text:it}},"processFrontmatter"),processDirectives=__name(rt=>{const it=utils_default.detectInit(rt)??{},lt=utils_default.detectDirective(rt,"wrap");return Array.isArray(lt)?it.wrap=lt.some(({type:ct})=>ct==="wrap"):lt?.type==="wrap"&&(it.wrap=!0),{text:removeDirectives(rt),directive:it}},"processDirectives");function preprocessDiagram(rt){const it=cleanupText(rt),lt=processFrontmatter(it),ct=processDirectives(lt.text),ht=cleanAndMerge(lt.config,ct.directive);return rt=cleanupComments(ct.text),{code:rt,title:lt.title,config:ht}}__name(preprocessDiagram,"preprocessDiagram");function toBase64(rt){const it=new TextEncoder().encode(rt),lt=Array.from(it,ct=>String.fromCodePoint(ct)).join("");return btoa(lt)}__name(toBase64,"toBase64");var MAX_TEXTLENGTH=5e4,MAX_TEXTLENGTH_EXCEEDED_MSG="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",SECURITY_LVL_SANDBOX="sandbox",SECURITY_LVL_LOOSE="loose",XMLNS_SVG_STD="http://www.w3.org/2000/svg",XMLNS_XLINK_STD="http://www.w3.org/1999/xlink",XMLNS_XHTML_STD="http://www.w3.org/1999/xhtml",IFRAME_WIDTH="100%",IFRAME_HEIGHT="100%",IFRAME_STYLES="border:0;margin:0;",IFRAME_BODY_STYLE="margin:0",IFRAME_SANDBOX_OPTS="allow-top-navigation-by-user-activation allow-popups",IFRAME_NOT_SUPPORTED_MSG='The "iframe" tag is not supported by your browser.',DOMPURIFY_TAGS=["foreignobject"],DOMPURIFY_ATTR=["dominant-baseline"];function processAndSetConfigs(rt){const it=preprocessDiagram(rt);return reset(),addDirective(it.config??{}),it}__name(processAndSetConfigs,"processAndSetConfigs");async function parse$1(rt,it){addDiagrams();try{const{code:lt,config:ct}=processAndSetConfigs(rt);return{diagramType:(await getDiagramFromText(lt)).type,config:ct}}catch(lt){if(it?.suppressErrors)return!1;throw lt}}__name(parse$1,"parse");var cssImportantStyles=__name((rt,it,lt=[])=>`
.${rt} ${it} { ${lt.join(" !important; ")} !important; }`,"cssImportantStyles"),createCssStyles=__name((rt,it=new Map)=>{let lt="";if(rt.themeCSS!==void 0&&(lt+=`
${rt.themeCSS}`),rt.fontFamily!==void 0&&(lt+=`
:root { --mermaid-font-family: ${rt.fontFamily}}`),rt.altFontFamily!==void 0&&(lt+=`
:root { --mermaid-alt-font-family: ${rt.altFontFamily}}`),it instanceof Map){const ft=rt.htmlLabels??rt.flowchart?.htmlLabels?["> *","span"]:["rect","polygon","ellipse","circle","path"];it.forEach(ut=>{isEmpty(ut.styles)||ft.forEach(pt=>{lt+=cssImportantStyles(ut.id,pt,ut.styles)}),isEmpty(ut.textStyles)||(lt+=cssImportantStyles(ut.id,"tspan",(ut?.textStyles||[]).map(pt=>pt.replace("color","fill"))))})}return lt},"createCssStyles"),createUserStyles=__name((rt,it,lt,ct)=>{const ht=createCssStyles(rt,lt),dt=styles_default(it,ht,rt.themeVariables);return serialize$1(compile(`${ct}{${dt}}`),stringify)},"createUserStyles"),cleanUpSvgCode=__name((rt="",it,lt)=>{let ct=rt;return!lt&&!it&&(ct=ct.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),ct=decodeEntities(ct),ct=ct.replace(/<br>/g,"<br/>"),ct},"cleanUpSvgCode"),putIntoIFrame=__name((rt="",it)=>{const lt=it?.viewBox?.baseVal?.height?it.viewBox.baseVal.height+"px":IFRAME_HEIGHT,ct=toBase64(`<body style="${IFRAME_BODY_STYLE}">${rt}</body>`);return`<iframe style="width:${IFRAME_WIDTH};height:${lt};${IFRAME_STYLES}" src="data:text/html;charset=UTF-8;base64,${ct}" sandbox="${IFRAME_SANDBOX_OPTS}">
  ${IFRAME_NOT_SUPPORTED_MSG}
</iframe>`},"putIntoIFrame"),appendDivSvgG=__name((rt,it,lt,ct,ht)=>{const dt=rt.append("div");dt.attr("id",lt),ct&&dt.attr("style",ct);const ft=dt.append("svg").attr("id",it).attr("width","100%").attr("xmlns",XMLNS_SVG_STD);return ht&&ft.attr("xmlns:xlink",ht),ft.append("g"),rt},"appendDivSvgG");function sandboxedIframe(rt,it){return rt.append("iframe").attr("id",it).attr("style","width: 100%; height: 100%;").attr("sandbox","")}__name(sandboxedIframe,"sandboxedIframe");var removeExistingElements=__name((rt,it,lt,ct)=>{rt.getElementById(it)?.remove(),rt.getElementById(lt)?.remove(),rt.getElementById(ct)?.remove()},"removeExistingElements"),render$1=__name(async function(rt,it,lt){addDiagrams();const ct=processAndSetConfigs(it);it=ct.code;const ht=getConfig();log.debug(ht),it.length>(ht?.maxTextSize??MAX_TEXTLENGTH)&&(it=MAX_TEXTLENGTH_EXCEEDED_MSG);const dt="#"+rt,ft="i"+rt,ut="#"+ft,pt="d"+rt,gt="#"+pt,mt=__name(()=>{const Ht=select(yt?ut:gt).node();Ht&&"remove"in Ht&&Ht.remove()},"removeTempElements");let _t=select("body");const yt=ht.securityLevel===SECURITY_LVL_SANDBOX,bt=ht.securityLevel===SECURITY_LVL_LOOSE,xt=ht.fontFamily;if(lt!==void 0){if(lt&&(lt.innerHTML=""),yt){const Pt=sandboxedIframe(select(lt),ft);_t=select(Pt.nodes()[0].contentDocument.body),_t.node().style.margin=0}else _t=select(lt);appendDivSvgG(_t,rt,pt,`font-family: ${xt}`,XMLNS_XLINK_STD)}else{if(removeExistingElements(document,rt,pt,ft),yt){const Pt=sandboxedIframe(select("body"),ft);_t=select(Pt.nodes()[0].contentDocument.body),_t.node().style.margin=0}else _t=select("body");appendDivSvgG(_t,rt,pt)}let wt,Ct;try{wt=await Diagram.fromText(it,{title:ct.title})}catch(Pt){if(ht.suppressErrorRendering)throw mt(),Pt;wt=await Diagram.fromText("error"),Ct=Pt}const St=_t.select(gt).node(),Tt=wt.type,vt=St.firstChild,kt=vt.firstChild,Et=wt.renderer.getClasses?.(it,wt),Lt=createUserStyles(ht,Tt,Et,dt),At=document.createElement("style");At.innerHTML=Lt,vt.insertBefore(At,kt);try{await wt.renderer.draw(it,rt,package_default.version,wt)}catch(Pt){throw ht.suppressErrorRendering?mt():errorRenderer_default.draw(it,rt,package_default.version),Pt}const It=_t.select(`${gt} svg`),Bt=wt.db.getAccTitle?.(),Dt=wt.db.getAccDescription?.();addA11yInfo(Tt,It,Bt,Dt),_t.select(`[id="${rt}"]`).selectAll("foreignobject > *").attr("xmlns",XMLNS_XHTML_STD);let Rt=_t.select(gt).node().innerHTML;if(log.debug("config.arrowMarkerAbsolute",ht.arrowMarkerAbsolute),Rt=cleanUpSvgCode(Rt,yt,evaluate(ht.arrowMarkerAbsolute)),yt){const Pt=_t.select(gt+" svg").node();Rt=putIntoIFrame(Rt,Pt)}else bt||(Rt=purify.sanitize(Rt,{ADD_TAGS:DOMPURIFY_TAGS,ADD_ATTR:DOMPURIFY_ATTR,HTML_INTEGRATION_POINTS:{foreignobject:!0}}));if(attachFunctions(),Ct)throw Ct;return mt(),{diagramType:Tt,svg:Rt,bindFunctions:wt.db.bindFunctions}},"render");function initialize(rt={}){const it=assignWithDepth_default({},rt);it?.fontFamily&&!it.themeVariables?.fontFamily&&(it.themeVariables||(it.themeVariables={}),it.themeVariables.fontFamily=it.fontFamily),saveConfigFromInitialize(it),it?.theme&&it.theme in themes_default?it.themeVariables=themes_default[it.theme].getThemeVariables(it.themeVariables):it&&(it.themeVariables=themes_default.default.getThemeVariables(it.themeVariables));const lt=typeof it=="object"?setSiteConfig(it):getSiteConfig();setLogLevel(lt.logLevel),addDiagrams()}__name(initialize,"initialize");var getDiagramFromText=__name((rt,it={})=>{const{code:lt}=preprocessDiagram(rt);return Diagram.fromText(lt,it)},"getDiagramFromText");function addA11yInfo(rt,it,lt,ct){setA11yDiagramInfo(it,rt),addSVGa11yTitleDescription(it,lt,ct,it.attr("id"))}__name(addA11yInfo,"addA11yInfo");var mermaidAPI=Object.freeze({render:render$1,parse:parse$1,getDiagramFromText,initialize,getConfig,setConfig,getSiteConfig,updateSiteConfig,reset:__name(()=>{reset()},"reset"),globalReset:__name(()=>{reset(defaultConfig)},"globalReset"),defaultConfig});setLogLevel(getConfig().logLevel);reset(getConfig());var handleError=__name((rt,it,lt)=>{log.warn(rt),isDetailedError(rt)?(lt&&lt(rt.str,rt.hash),it.push({...rt,message:rt.str,error:rt})):(lt&&lt(rt),rt instanceof Error&&it.push({str:rt.message,message:rt.message,hash:rt.name,error:rt}))},"handleError"),run=__name(async function(rt={querySelector:".mermaid"}){try{await runThrowsErrors(rt)}catch(it){if(isDetailedError(it)&&log.error(it.str),mermaid.parseError&&mermaid.parseError(it),!rt.suppressErrors)throw log.error("Use the suppressErrors option to suppress these errors"),it}},"run"),runThrowsErrors=__name(async function({postRenderCallback:rt,querySelector:it,nodes:lt}={querySelector:".mermaid"}){const ct=mermaidAPI.getConfig();log.debug(`${rt?"":"No "}Callback function found`);let ht;if(lt)ht=lt;else if(it)ht=document.querySelectorAll(it);else throw new Error("Nodes and querySelector are both undefined");log.debug(`Found ${ht.length} diagrams`),ct?.startOnLoad!==void 0&&(log.debug("Start On Load: "+ct?.startOnLoad),mermaidAPI.updateSiteConfig({startOnLoad:ct?.startOnLoad}));const dt=new utils_default.InitIDGenerator(ct.deterministicIds,ct.deterministicIDSeed);let ft;const ut=[];for(const pt of Array.from(ht)){if(log.info("Rendering diagram: "+pt.id),pt.getAttribute("data-processed"))continue;pt.setAttribute("data-processed","true");const gt=`mermaid-${dt.next()}`;ft=pt.innerHTML,ft=dedent(utils_default.entityDecode(ft)).trim().replace(/<br\s*\/?>/gi,"<br/>");const mt=utils_default.detectInit(ft);mt&&log.debug("Detected early reinit: ",mt);try{const{svg:_t,bindFunctions:yt}=await render2(gt,ft,pt);pt.innerHTML=_t,rt&&await rt(gt),yt&&yt(pt)}catch(_t){handleError(_t,ut,mermaid.parseError)}}if(ut.length>0)throw ut[0]},"runThrowsErrors"),initialize2=__name(function(rt){mermaidAPI.initialize(rt)},"initialize"),init$1=__name(async function(rt,it,lt){log.warn("mermaid.init is deprecated. Please use run instead."),rt&&initialize2(rt);const ct={postRenderCallback:lt,querySelector:".mermaid"};typeof it=="string"?ct.querySelector=it:it&&(it instanceof HTMLElement?ct.nodes=[it]:ct.nodes=it),await run(ct)},"init"),registerExternalDiagrams=__name(async(rt,{lazyLoad:it=!0}={})=>{addDiagrams(),registerLazyLoadedDiagrams(...rt),it===!1&&await loadRegisteredDiagrams()},"registerExternalDiagrams"),contentLoaded=__name(function(){if(mermaid.startOnLoad){const{startOnLoad:rt}=mermaidAPI.getConfig();rt&&mermaid.run().catch(it=>log.error("Mermaid failed to initialize",it))}},"contentLoaded");typeof document<"u"&&window.addEventListener("load",contentLoaded,!1);var setParseErrorHandler=__name(function(rt){mermaid.parseError=rt},"setParseErrorHandler"),executionQueue=[],executionQueueRunning=!1,executeQueue=__name(async()=>{if(!executionQueueRunning){for(executionQueueRunning=!0;executionQueue.length>0;){const rt=executionQueue.shift();if(rt)try{await rt()}catch(it){log.error("Error executing queue",it)}}executionQueueRunning=!1}},"executeQueue"),parse2=__name(async(rt,it)=>new Promise((lt,ct)=>{const ht=__name(()=>new Promise((dt,ft)=>{mermaidAPI.parse(rt,it).then(ut=>{dt(ut),lt(ut)},ut=>{log.error("Error parsing",ut),mermaid.parseError?.(ut),ft(ut),ct(ut)})}),"performCall");executionQueue.push(ht),executeQueue().catch(ct)}),"parse"),render2=__name((rt,it,lt)=>new Promise((ct,ht)=>{const dt=__name(()=>new Promise((ft,ut)=>{mermaidAPI.render(rt,it,lt).then(pt=>{ft(pt),ct(pt)},pt=>{log.error("Error parsing",pt),mermaid.parseError?.(pt),ut(pt),ht(pt)})}),"performCall");executionQueue.push(dt),executeQueue().catch(ht)}),"render"),getRegisteredDiagramsMetadata=__name(()=>Object.keys(detectors).map(rt=>({id:rt})),"getRegisteredDiagramsMetadata"),mermaid={startOnLoad:!0,mermaidAPI,parse:parse2,render:render2,init:init$1,run,registerExternalDiagrams,registerLayoutLoaders,initialize:initialize2,parseError:void 0,contentLoaded,setParseErrorHandler,detectType:detectType$1,registerIconPacks,getRegisteredDiagramsMetadata},mermaid_default=mermaid;/*! Check if previously processed *//*!
 * Wait for document loaded before starting the execution
 */mermaid_default.registerLayoutLoaders([...layouts_default$1,...layouts_default]);const init=mermaid_default.registerExternalDiagrams([detector_default$1]),render=async(rt,it,lt)=>(await init,mermaid_default.initialize(rt),await mermaid_default.render(lt,it)),parse=async rt=>await mermaid_default.parse(rt),standardizeDiagramType=rt=>{switch(rt){case"class":case"classDiagram":return"classDiagram";case"graph":case"flowchart":case"flowchart-elk":case"flowchart-v2":return"flowchart";default:return rt}},isValidDiagram=rt=>!!(rt.name&&rt.examples&&rt.examples.length>0),getSampleDiagrams=()=>{const rt=diagramData.filter(lt=>isValidDiagram(lt)).map(({examples:lt,...ct})=>({...ct,example:lt?.filter(({isDefault:ht})=>ht)[0]})),it={};for(const lt of rt)it[lt.name.replace(/ (Diagram|Chart|Graph)/,"")]=lt.example.code;return it};var bundle={},hasRequiredBundle;function requireBundle(){return hasRequiredBundle||(hasRequiredBundle=1,(function(exports){(()=>{var __webpack_modules__={607:(module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0});var serializer_1=__webpack_require__(810),deserializer_1=__webpack_require__(496),Module;typeof process<"u"&&process.release&&process.release.name==="node"&&(Module=eval("require")("module"));var ESSerializer=(function(){function rt(){}return rt.throwErrorIfInNonNodeEnvironment=function(){if(!Module)throw new Error("Cannot intercept require in non-Node environment.")},rt.interceptRequire=function(){this.isRequireIntercepted||(this.isRequireIntercepted=!0,this.throwErrorIfInNonNodeEnvironment(),rt.originRequire=Module.prototype.require,Module.prototype.require=function(){var it=rt.originRequire.apply(this,arguments),lt=it.name;return rt.requiredClasses[lt]||(rt.requiredClasses[lt]=it),it})},rt.stopInterceptRequire=function(){this.throwErrorIfInNonNodeEnvironment(),Module.prototype.require=rt.originRequire,this.isRequireIntercepted=!1},rt.isInterceptingRequire=function(){return this.isRequireIntercepted},rt.getRequiredClasses=function(){return this.requiredClasses},rt.clearRequiredClasses=function(){this.requiredClasses={}},rt.registerClass=function(it){this.registeredClasses.push(it)},rt.registerClasses=function(it){this.registeredClasses=this.registeredClasses.concat(it)},rt.clearRegisteredClasses=function(){this.registeredClasses=[]},rt.serialize=function(it,lt){return lt===void 0&&(lt={}),JSON.stringify(serializer_1.getSerializeValueWithClassName(it,lt))},rt.deserialize=function(it,lt,ct){return lt===void 0&&(lt=[]),ct===void 0&&(ct={}),deserializer_1.deserializeFromParsedObj(JSON.parse(it),Object.values(this.requiredClasses).concat(this.registeredClasses).concat(lt),ct)},rt.originRequire=null,rt.isRequireIntercepted=!1,rt.requiredClasses={},rt.registeredClasses=[],rt})();module.exports=ESSerializer},917:function(rt,it){var lt=this&&this.__spreadArrays||function(){for(var zt=0,Ft=0,Wt=arguments.length;Ft<Wt;Ft++)zt+=arguments[Ft].length;var jt=Array(zt),Yt=0;for(Ft=0;Ft<Wt;Ft++)for(var Zt=arguments[Ft],qt=0,Kt=Zt.length;qt<Kt;qt++,Yt++)jt[Yt]=Zt[qt];return jt};Object.defineProperty(it,"__esModule",{value:!0}),it.TO_STRING_FIELD=it.TIMESTAMP_FIELD=it.OPTIONS_FIELD=it.CLASS_NAME_FIELD=it.BOOLEAN_FIELD=it.ARRAY_FIELD=it.BUILTIN_TYPE_UNDEFINED=it.BUILTIN_TYPE_NOT_FINITE=it.BUILTIN_TYPE_BIG_INT=it.BUILTIN_CLASS_AGGREGATE_ERROR=it.BUILTIN_CLASS_URI_ERROR=it.BUILTIN_CLASS_TYPE_ERROR=it.BUILTIN_CLASS_SYNTAX_ERROR=it.BUILTIN_CLASS_REFERENCE_ERROR=it.BUILTIN_CLASS_RANGE_ERROR=it.BUILTIN_CLASS_EVAL_ERROR=it.BUILTIN_CLASS_ERROR=it.BUILTIN_CLASS_STRING=it.BUILTIN_CLASS_SET=it.BUILTIN_CLASS_REGEXP=it.BUILTIN_CLASS_INTL_RELATIVETIMEFORMAT=it.BUILTIN_CLASS_INTL_PLURALRULES=it.BUILTIN_CLASS_INTL_NUMBERFORMAT=it.BUILTIN_CLASS_INTL_LOCALE=it.BUILTIN_CLASS_INTL_LISTFORMAT=it.BUILTIN_CLASS_INTL_DATETIMEFORMAT=it.BUILTIN_CLASS_INTL_COLLATOR=it.BUILTIN_CLASS_DATE=it.BUILTIN_CLASS_DATAVIEW=it.BUILTIN_CLASS_BOOLEAN=it.BUILTIN_CLASS_SHAREDARRAYBUFFER=it.BUILTIN_CLASS_ARRAYBUFFER=it.BUILTIN_CLASS_BIGUINT64ARRAY=it.BUILTIN_CLASS_BIGINT64ARRAY=it.BUILTIN_CLASS_FLOAT64ARRAY=it.BUILTIN_CLASS_FLOAT32ARRAY=it.BUILTIN_CLASS_UINT32ARRAY=it.BUILTIN_CLASS_INT32ARRAY=it.BUILTIN_CLASS_UINT16ARRAY=it.BUILTIN_CLASS_INT16ARRAY=it.BUILTIN_CLASS_UINT8CLAMPEDARRAY=it.BUILTIN_CLASS_UINT8ARRAY=it.BUILTIN_CLASS_INT8ARRAY=it.CLASSNAMES_WHOSE_ENUMERABLE_PROPERTIES_SHOULD_BE_IGNORED=it.ALL_BUILTIN_INTLS=it.ALL_BUILTIN_ERRORS=it.ALL_BUILTIN_ARRAYS=it.ESSERIALIZER_NULL=void 0,it.ESSERIALIZER_NULL="__ESSERIALIZER_NULL__",it.ARRAY_FIELD="ess_arr",it.BOOLEAN_FIELD="ess_bool",it.CLASS_NAME_FIELD="ess_cn",it.OPTIONS_FIELD="ess_opt",it.TIMESTAMP_FIELD="ess_ts",it.TO_STRING_FIELD="ess_str";var ct="Int8Array";it.BUILTIN_CLASS_INT8ARRAY=ct;var ht="Uint8Array";it.BUILTIN_CLASS_UINT8ARRAY=ht;var dt="Uint8ClampedArray";it.BUILTIN_CLASS_UINT8CLAMPEDARRAY=dt;var ft="Int16Array";it.BUILTIN_CLASS_INT16ARRAY=ft;var ut="Uint16Array";it.BUILTIN_CLASS_UINT16ARRAY=ut;var pt="Int32Array";it.BUILTIN_CLASS_INT32ARRAY=pt;var gt="Uint32Array";it.BUILTIN_CLASS_UINT32ARRAY=gt;var mt="Float32Array";it.BUILTIN_CLASS_FLOAT32ARRAY=mt;var _t="Float64Array";it.BUILTIN_CLASS_FLOAT64ARRAY=_t;var yt="BigInt64Array";it.BUILTIN_CLASS_BIGINT64ARRAY=yt;var bt="BigUint64Array";it.BUILTIN_CLASS_BIGUINT64ARRAY=bt,it.BUILTIN_CLASS_ARRAYBUFFER="ArrayBuffer",it.BUILTIN_CLASS_SHAREDARRAYBUFFER="SharedArrayBuffer",it.BUILTIN_CLASS_BOOLEAN="Boolean",it.BUILTIN_CLASS_DATAVIEW="DataView",it.BUILTIN_CLASS_DATE="Date";var xt="Collator";it.BUILTIN_CLASS_INTL_COLLATOR=xt;var wt="DateTimeFormat";it.BUILTIN_CLASS_INTL_DATETIMEFORMAT=wt;var Ct="ListFormat";it.BUILTIN_CLASS_INTL_LISTFORMAT=Ct,it.BUILTIN_CLASS_INTL_LOCALE="Locale";var St="NumberFormat";it.BUILTIN_CLASS_INTL_NUMBERFORMAT=St;var Tt="PluralRules";it.BUILTIN_CLASS_INTL_PLURALRULES=Tt;var vt="RelativeTimeFormat";it.BUILTIN_CLASS_INTL_RELATIVETIMEFORMAT=vt,it.BUILTIN_CLASS_REGEXP="RegExp",it.BUILTIN_CLASS_SET="Set";var kt="String";it.BUILTIN_CLASS_STRING=kt;var Et="Error";it.BUILTIN_CLASS_ERROR=Et;var Lt="EvalError";it.BUILTIN_CLASS_EVAL_ERROR=Lt;var At="RangeError";it.BUILTIN_CLASS_RANGE_ERROR=At;var It="ReferenceError";it.BUILTIN_CLASS_REFERENCE_ERROR=It;var Bt="SyntaxError";it.BUILTIN_CLASS_SYNTAX_ERROR=Bt;var Dt="TypeError";it.BUILTIN_CLASS_TYPE_ERROR=Dt;var Rt="URIError";it.BUILTIN_CLASS_URI_ERROR=Rt;var Pt="AggregateError";it.BUILTIN_CLASS_AGGREGATE_ERROR=Pt,it.BUILTIN_TYPE_BIG_INT="BI",it.BUILTIN_TYPE_NOT_FINITE="NF",it.BUILTIN_TYPE_UNDEFINED="UD";var Ht=[ct,ht,dt,ft,ut,pt,gt,mt,_t,yt,bt];it.ALL_BUILTIN_ARRAYS=Ht;var Nt=[Et,Lt,At,It,Bt,Dt,Rt,Pt];it.ALL_BUILTIN_ERRORS=Nt;var Ot=[xt,wt,Ct,St,Tt,vt];it.ALL_BUILTIN_INTLS=Ot;var Mt=lt([kt],Ht);it.CLASSNAMES_WHOSE_ENUMERABLE_PROPERTIES_SHOULD_BE_IGNORED=Mt},496:function(rt,it,lt){var ct=this&&this.__spreadArrays||function(){for(var St=0,Tt=0,vt=arguments.length;Tt<vt;Tt++)St+=arguments[Tt].length;var kt=Array(St),Et=0;for(Tt=0;Tt<vt;Tt++)for(var Lt=arguments[Tt],At=0,It=Lt.length;At<It;At++,Et++)kt[Et]=Lt[At];return kt};Object.defineProperty(it,"__esModule",{value:!0}),it.getParentClassName=it.getClassMappingFromClassArray=it.deserializeFromParsedObjWithClassMapping=it.deserializeFromParsedObj=void 0;var ht=lt(821),dt=lt(917),ft=/^\s*class\s+/;function ut(St,Tt,vt){if(vt===void 0&&(vt={}),ht.notObject(St))return St;if(Array.isArray(St))return pt(St,Tt);var kt=St[dt.CLASS_NAME_FIELD],Et=(function(It,Bt,Dt){switch(It){case dt.BUILTIN_CLASS_INT8ARRAY:return gt(Bt[dt.ARRAY_FIELD],Int8Array);case dt.BUILTIN_CLASS_UINT8ARRAY:return gt(Bt[dt.ARRAY_FIELD],Uint8Array);case dt.BUILTIN_CLASS_UINT8CLAMPEDARRAY:return gt(Bt[dt.ARRAY_FIELD],Uint8ClampedArray);case dt.BUILTIN_CLASS_INT16ARRAY:return gt(Bt[dt.ARRAY_FIELD],Int16Array);case dt.BUILTIN_CLASS_UINT16ARRAY:return gt(Bt[dt.ARRAY_FIELD],Uint16Array);case dt.BUILTIN_CLASS_INT32ARRAY:return gt(Bt[dt.ARRAY_FIELD],Int32Array);case dt.BUILTIN_CLASS_UINT32ARRAY:return gt(Bt[dt.ARRAY_FIELD],Uint32Array);case dt.BUILTIN_CLASS_FLOAT32ARRAY:return gt(Bt[dt.ARRAY_FIELD],Float32Array);case dt.BUILTIN_CLASS_FLOAT64ARRAY:return gt(Bt[dt.ARRAY_FIELD],Float64Array);case dt.BUILTIN_CLASS_BIGINT64ARRAY:return mt(Bt[dt.ARRAY_FIELD],BigInt64Array);case dt.BUILTIN_CLASS_BIGUINT64ARRAY:return mt(Bt[dt.ARRAY_FIELD],BigUint64Array);case dt.BUILTIN_TYPE_BIG_INT:return _t(Bt[dt.TO_STRING_FIELD]);case dt.BUILTIN_TYPE_UNDEFINED:return;case dt.BUILTIN_TYPE_NOT_FINITE:return ht.getValueFromToStringResult(Bt[dt.TO_STRING_FIELD]);case dt.BUILTIN_CLASS_ARRAYBUFFER:return Rt=Bt[dt.ARRAY_FIELD],new Uint8Array(Rt).buffer;case dt.BUILTIN_CLASS_SHAREDARRAYBUFFER:return(function(Pt){var Ht=new SharedArrayBuffer(Pt.length),Nt=new Uint8Array(Ht);return Pt.forEach((function(Ot,Mt){Nt[Mt]=Ot})),Ht})(Bt[dt.ARRAY_FIELD]);case dt.BUILTIN_CLASS_BOOLEAN:return(function(Pt){return new Boolean(Pt[dt.BOOLEAN_FIELD])})(Bt);case dt.BUILTIN_CLASS_DATAVIEW:return(function(Pt){return new DataView(new Uint8Array(Pt).buffer)})(Bt[dt.ARRAY_FIELD]);case dt.BUILTIN_CLASS_DATE:return(function(Pt){return typeof Pt[dt.TIMESTAMP_FIELD]=="number"?new Date(Pt[dt.TIMESTAMP_FIELD]):null})(Bt);case dt.BUILTIN_CLASS_INTL_COLLATOR:return yt(Bt,Intl.Collator);case dt.BUILTIN_CLASS_INTL_DATETIMEFORMAT:return yt(Bt,Intl.DateTimeFormat);case dt.BUILTIN_CLASS_INTL_LISTFORMAT:return yt(Bt,Intl.ListFormat);case dt.BUILTIN_CLASS_INTL_LOCALE:return new Intl.Locale(Bt[dt.TO_STRING_FIELD]);case dt.BUILTIN_CLASS_INTL_NUMBERFORMAT:return yt(Bt,Intl.NumberFormat);case dt.BUILTIN_CLASS_INTL_PLURALRULES:return yt(Bt,Intl.PluralRules);case dt.BUILTIN_CLASS_INTL_RELATIVETIMEFORMAT:return yt(Bt,Intl.RelativeTimeFormat);case dt.BUILTIN_CLASS_REGEXP:return(function(Pt){var Ht=Pt[dt.TO_STRING_FIELD],Nt=Ht.lastIndexOf("/");return new RegExp(Ht.substring(1,Nt),Ht.substring(Nt+1))})(Bt);case dt.BUILTIN_CLASS_SET:return(function(Pt,Ht){return new Set(pt(Pt[dt.ARRAY_FIELD],Ht))})(Bt,Dt);case dt.BUILTIN_CLASS_STRING:return(function(Pt){return new String(Pt[dt.TO_STRING_FIELD])})(Bt);case dt.BUILTIN_CLASS_ERROR:return bt(Bt,Error);case dt.BUILTIN_CLASS_EVAL_ERROR:return bt(Bt,EvalError);case dt.BUILTIN_CLASS_RANGE_ERROR:return bt(Bt,RangeError);case dt.BUILTIN_CLASS_REFERENCE_ERROR:return bt(Bt,ReferenceError);case dt.BUILTIN_CLASS_SYNTAX_ERROR:return bt(Bt,SyntaxError);case dt.BUILTIN_CLASS_TYPE_ERROR:return bt(Bt,TypeError);case dt.BUILTIN_CLASS_URI_ERROR:return bt(Bt,URIError);case dt.BUILTIN_CLASS_AGGREGATE_ERROR:return bt(Bt,AggregateError);default:return dt.ESSERIALIZER_NULL}var Rt})(kt,St,Tt);if(Et!==dt.ESSERIALIZER_NULL)return Et;if(kt&&!Tt[kt])throw new Error("Class "+kt+" not found");var Lt=[];vt.fieldsForConstructorParameters&&(Lt=vt.fieldsForConstructorParameters.map((function(It){return It in St?St[It]:{}})));var At=(function(It,Bt){if(!It)return{};for(var Dt,Rt=Math.max(It.length-Bt.length,0),Pt=[{},0,"",null],Ht=Pt.shift();!Dt&&Ht!==void 0;)Dt=xt(It,Bt.concat(Array.from(Array(Rt),(function(){return Ht})))),Ht=Rt===0?void 0:Pt.shift();return Dt||(Dt={},Object.setPrototypeOf(Dt,It?It.prototype:Object.prototype)),Dt})(Tt[kt],Lt);return(function(It,Bt,Dt,Rt){for(var Pt in Bt){var Ht=Bt[Pt];if(!Rt.ignoreProperties||!Rt.ignoreProperties.includes(Pt))if(Rt.rawProperties&&Rt.rawProperties.includes(Pt))It[Pt]=JSON.stringify(Ht);else{var Nt=Object.getOwnPropertyDescriptor(It,Pt);Ot=Ht,Mt=Nt,Pt===dt.CLASS_NAME_FIELD||Mt&&(typeof Mt.set=="function"||Mt.writable===!1&&typeof Ot!="object")||(Nt&&Nt.writable===!1&&typeof Ht=="object"?wt(It[Pt],Ht,Dt):It[Pt]=ut(Ht,Dt))}}var Ot,Mt;return It})(At,St,Tt,vt)}function pt(St,Tt){return St.map((function(vt){return ut(vt,Tt)}))}function gt(St,Tt){return new Tt(St)}function mt(St,Tt){return new Tt(St.map((function(vt){return _t(vt[dt.TO_STRING_FIELD])})))}function _t(St){return BigInt(St)}function yt(St,Tt){var vt=St[dt.OPTIONS_FIELD],kt=vt.locale;return delete vt.locale,new Tt(kt,vt)}function bt(St,Tt){var vt;return delete(vt=St.message?new Tt(St.message):new Tt).stack,St.name&&(vt.name=St.name),St.stack&&(vt.stack=St.stack),Tt===AggregateError&&(vt.errors=ut(St.errors,{})),vt}function xt(St,Tt){var vt;try{if(ft.test(St.toString()))vt=new(St.bind.apply(St,ct([void 0],Tt)));else{var kt=St.prototype.constructor;kt.name==="Object"&&(kt=St),vt=Object.create(kt.prototype),kt.call(vt,Tt)}}catch{vt=null}return vt}function wt(St,Tt,vt){for(var kt in Tt){var Et=Object.getOwnPropertyDescriptor(St,kt);Et&&Et.writable!==!0&&typeof Et.set!="function"||(St[kt]=ut(Tt[kt],vt))}}function Ct(St){St===void 0&&(St=[]);var Tt={};return St.forEach((function(vt){if(ht.isClass(vt)){var kt=vt.name,Et=Tt[kt];Et&&Et!==vt&&console.warn("WARNING: Found class definition with the same name: "+kt),Tt[kt]=vt}})),Tt}it.deserializeFromParsedObj=function(St,Tt,vt){return ut(St,Ct(Tt),vt)},it.deserializeFromParsedObjWithClassMapping=ut,it.getClassMappingFromClassArray=Ct,it.getParentClassName=function(St){return St.prototype.__proto__.constructor.name}},821:(rt,it)=>{Object.defineProperty(it,"__esModule",{value:!0}),it.isClass=it.notObject=it.getValueFromToStringResult=void 0,it.notObject=function(lt){return lt===null||typeof lt!="object"},it.getValueFromToStringResult=function(lt){switch(lt){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN;default:return null}},it.isClass=function(lt){if((function(ct){return[Date].indexOf(ct)>=0})(lt))return!0;try{Reflect.construct(String,[],lt)}catch{return!1}return!0}},810:(rt,it,lt)=>{Object.defineProperty(it,"__esModule",{value:!0}),it.getSerializeValueWithClassName=void 0;var ct=lt(917),ht=lt(821);function dt(ut,pt){pt===void 0&&(pt={});var gt=(function(yt){var bt,xt,wt;return yt===void 0?((bt={})[ct.CLASS_NAME_FIELD]=ct.BUILTIN_TYPE_UNDEFINED,bt):typeof yt!="number"||isFinite(yt)?typeof yt=="bigint"?((wt={})[ct.CLASS_NAME_FIELD]=ct.BUILTIN_TYPE_BIG_INT,wt[ct.TO_STRING_FIELD]=yt.toString(),wt):ht.notObject(yt)?yt:ct.ESSERIALIZER_NULL:((xt={})[ct.CLASS_NAME_FIELD]=ct.BUILTIN_TYPE_NOT_FINITE,xt[ct.TO_STRING_FIELD]=yt.toString(),xt)})(ut);if(gt!==ct.ESSERIALIZER_NULL)return gt;if(Array.isArray(ut))return ft(ut);var mt={};if(!(function(yt){var bt=yt.__proto__.constructor.name;return ct.CLASSNAMES_WHOSE_ENUMERABLE_PROPERTIES_SHOULD_BE_IGNORED.includes(bt)})(ut)){if(pt.ignoreProperties&&pt.ignoreProperties.forEach((function(yt){delete ut[yt]})),pt.interceptProperties)for(var _t in pt.interceptProperties)ut[_t]=pt.interceptProperties[_t].call(ut,ut[_t]);(function(yt,bt){for(var xt in yt)typeof yt[xt]!="function"&&(bt[xt]=dt(yt[xt]))})(ut,mt)}return(function(yt,bt){var xt=yt.__proto__.constructor.name;return xt==="Object"&&(xt=yt.constructor.name),xt!=="Object"&&(bt[ct.CLASS_NAME_FIELD]=xt,xt===ct.BUILTIN_CLASS_ARRAYBUFFER||xt===ct.BUILTIN_CLASS_SHAREDARRAYBUFFER?bt[ct.ARRAY_FIELD]=ft(Array.from(new Uint8Array(yt))):xt===ct.BUILTIN_CLASS_BOOLEAN?bt[ct.BOOLEAN_FIELD]=yt.valueOf():xt===ct.BUILTIN_CLASS_DATAVIEW?bt[ct.ARRAY_FIELD]=ft(Array.from(new Uint8Array(yt.buffer))):xt===ct.BUILTIN_CLASS_DATE?bt[ct.TIMESTAMP_FIELD]=yt.getTime():xt===ct.BUILTIN_CLASS_INTL_LOCALE||xt===ct.BUILTIN_CLASS_REGEXP?bt[ct.TO_STRING_FIELD]=yt.toString():xt===ct.BUILTIN_CLASS_SET?bt[ct.ARRAY_FIELD]=ft(Array.from(yt)):xt===ct.BUILTIN_CLASS_STRING?bt[ct.TO_STRING_FIELD]=yt.toString():ct.ALL_BUILTIN_ARRAYS.includes(xt)?bt[ct.ARRAY_FIELD]=ft(Array.from(yt)):ct.ALL_BUILTIN_ERRORS.includes(xt)?(function(wt,Ct,St){wt.name!=="Error"&&(Ct.name=wt.name),wt.message&&(Ct.message=wt.message),wt.stack&&(Ct.stack=wt.stack),St===ct.BUILTIN_CLASS_AGGREGATE_ERROR&&(Ct.errors=dt(wt.errors))})(yt,bt,xt):ct.ALL_BUILTIN_INTLS.includes(xt)&&(bt[ct.OPTIONS_FIELD]=yt.resolvedOptions())),bt})(ut,mt)}function ft(ut){return ut.map((function(pt){return dt(pt)}))}it.getSerializeValueWithClassName=dt}},__webpack_module_cache__={};function __webpack_require__(rt){var it=__webpack_module_cache__[rt];if(it!==void 0)return it.exports;var lt=__webpack_module_cache__[rt]={exports:{}};return __webpack_modules__[rt].call(lt.exports,lt,lt.exports,__webpack_require__),lt.exports}var __webpack_exports__=__webpack_require__(607),__webpack_export_target__=exports;for(var i in __webpack_exports__)__webpack_export_target__[i]=__webpack_exports__[i];__webpack_exports__.__esModule&&Object.defineProperty(__webpack_export_target__,"__esModule",{value:!0})})()})(bundle)),bundle}var bundleExports=requireBundle();const ESSerializer=getDefaultExportFromCjs(bundleExports),alreadyWarnFor=[],warnStorageNotFound=rt=>{const it=typeof process<"u"&&!0;if(!alreadyWarnFor.includes(rt)&&!it){let lt=`Unable to find the ${rt}. No data will be persisted.`;typeof window>"u"&&(lt+=`
Are you running on a server? Most of storages are not available while running on a server.`),console.warn(lt),alreadyWarnFor.push(rt)}},serialize=rt=>ESSerializer.serialize(rt),deserialize=rt=>{if(rt!=="undefined"){if(rt!=null){try{return ESSerializer.deserialize(rt)}catch{}try{return JSON.parse(rt)}catch{}}return rt}};function persist(rt,it,lt){const ct=it.getValue(lt);return ct!==null&&rt.set(ct),"addListener"in it&&it.addListener(lt,ht=>{rt.set(ht)}),rt.subscribe(ht=>{it.setValue(lt,ht)}),{...rt,delete(){it.deleteValue(lt)}}}function getBrowserStorage(rt,it=!1){const lt=[],ct=ft=>{const ut=ft.key;if(ft.storageArea===rt)for(const{listener:pt}of lt.filter(({key:gt})=>gt===ut))pt(deserialize(ft.newValue))},ht=()=>{it&&typeof window<"u"&&window.addEventListener&&window.addEventListener("storage",ct)},dt=()=>{it&&typeof window<"u"&&window.removeEventListener&&window.removeEventListener("storage",ct)};return{addListener(ft,ut){lt.push({key:ft,listener:ut}),lt.length===1&&ht()},deleteValue(ft){rt.removeItem(ft)},getValue(ft){const ut=rt.getItem(ft);return deserialize(ut)},removeListener(ft,ut){const pt=lt.indexOf({key:ft,listener:ut});pt!==-1&&lt.splice(pt,1),lt.length===0&&dt()},setValue(ft,ut){rt.setItem(ft,serialize(ut))}}}function localStorage$1(rt=!1){return typeof window<"u"&&window.localStorage?getBrowserStorage(window.localStorage,rt):(warnStorageNotFound("window.localStorage"),noopStorage())}function noopStorage(){return{getValue(){return null},deleteValue(){},setValue(){}}}const _hasBuffer=typeof Buffer=="function",_TD=typeof TextDecoder=="function"?new TextDecoder:void 0,_TE=typeof TextEncoder=="function"?new TextEncoder:void 0,b64ch="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",b64chs=Array.prototype.slice.call(b64ch),b64tab=(rt=>{let it={};return rt.forEach((lt,ct)=>it[lt]=ct),it})(b64chs),b64re=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,_fromCC=String.fromCharCode.bind(String),_U8Afrom=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):rt=>new Uint8Array(Array.prototype.slice.call(rt,0)),_mkUriSafe=rt=>rt.replace(/=/g,"").replace(/[+\/]/g,it=>it=="+"?"-":"_"),_tidyB64=rt=>rt.replace(/[^A-Za-z0-9\+\/]/g,""),btoaPolyfill=rt=>{let it,lt,ct,ht,dt="";const ft=rt.length%3;for(let ut=0;ut<rt.length;){if((lt=rt.charCodeAt(ut++))>255||(ct=rt.charCodeAt(ut++))>255||(ht=rt.charCodeAt(ut++))>255)throw new TypeError("invalid character found");it=lt<<16|ct<<8|ht,dt+=b64chs[it>>18&63]+b64chs[it>>12&63]+b64chs[it>>6&63]+b64chs[it&63]}return ft?dt.slice(0,ft-3)+"===".substring(ft):dt},_btoa=typeof btoa=="function"?rt=>btoa(rt):_hasBuffer?rt=>Buffer.from(rt,"binary").toString("base64"):btoaPolyfill,_fromUint8Array=_hasBuffer?rt=>Buffer.from(rt).toString("base64"):rt=>{let lt=[];for(let ct=0,ht=rt.length;ct<ht;ct+=4096)lt.push(_fromCC.apply(null,rt.subarray(ct,ct+4096)));return _btoa(lt.join(""))},fromUint8Array=(rt,it=!1)=>it?_mkUriSafe(_fromUint8Array(rt)):_fromUint8Array(rt),cb_utob=rt=>{if(rt.length<2){var it=rt.charCodeAt(0);return it<128?rt:it<2048?_fromCC(192|it>>>6)+_fromCC(128|it&63):_fromCC(224|it>>>12&15)+_fromCC(128|it>>>6&63)+_fromCC(128|it&63)}else{var it=65536+(rt.charCodeAt(0)-55296)*1024+(rt.charCodeAt(1)-56320);return _fromCC(240|it>>>18&7)+_fromCC(128|it>>>12&63)+_fromCC(128|it>>>6&63)+_fromCC(128|it&63)}},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=rt=>rt.replace(re_utob,cb_utob),_encode=_hasBuffer?rt=>Buffer.from(rt,"utf8").toString("base64"):_TE?rt=>_fromUint8Array(_TE.encode(rt)):rt=>_btoa(utob(rt)),encode=(rt,it=!1)=>it?_mkUriSafe(_encode(rt)):_encode(rt),re_btou=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,cb_btou=rt=>{switch(rt.length){case 4:var it=(7&rt.charCodeAt(0))<<18|(63&rt.charCodeAt(1))<<12|(63&rt.charCodeAt(2))<<6|63&rt.charCodeAt(3),lt=it-65536;return _fromCC((lt>>>10)+55296)+_fromCC((lt&1023)+56320);case 3:return _fromCC((15&rt.charCodeAt(0))<<12|(63&rt.charCodeAt(1))<<6|63&rt.charCodeAt(2));default:return _fromCC((31&rt.charCodeAt(0))<<6|63&rt.charCodeAt(1))}},btou=rt=>rt.replace(re_btou,cb_btou),atobPolyfill=rt=>{if(rt=rt.replace(/\s+/g,""),!b64re.test(rt))throw new TypeError("malformed base64.");rt+="==".slice(2-(rt.length&3));let it,lt="",ct,ht;for(let dt=0;dt<rt.length;)it=b64tab[rt.charAt(dt++)]<<18|b64tab[rt.charAt(dt++)]<<12|(ct=b64tab[rt.charAt(dt++)])<<6|(ht=b64tab[rt.charAt(dt++)]),lt+=ct===64?_fromCC(it>>16&255):ht===64?_fromCC(it>>16&255,it>>8&255):_fromCC(it>>16&255,it>>8&255,it&255);return lt},_atob=typeof atob=="function"?rt=>atob(_tidyB64(rt)):_hasBuffer?rt=>Buffer.from(rt,"base64").toString("binary"):atobPolyfill,_toUint8Array=_hasBuffer?rt=>_U8Afrom(Buffer.from(rt,"base64")):rt=>_U8Afrom(_atob(rt).split("").map(it=>it.charCodeAt(0))),toUint8Array=rt=>_toUint8Array(_unURI(rt)),_decode=_hasBuffer?rt=>Buffer.from(rt,"base64").toString("utf8"):_TD?rt=>_TD.decode(_toUint8Array(rt)):rt=>btou(_atob(rt)),_unURI=rt=>_tidyB64(rt.replace(/[-_]/g,it=>it=="-"?"+":"/")),decode=rt=>_decode(_unURI(rt));/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Z_FIXED$1=4,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN$1=2;function zero$1(rt){let it=rt.length;for(;--it>=0;)rt[it]=0}const STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,BL_CODES$1=19,HEAP_SIZE$1=2*L_CODES$1+1,MAX_BITS$1=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),extra_dbits=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),extra_blbits=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),bl_order=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),DIST_CODE_LEN=512,static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);const static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);const _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);const _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);const base_length=new Array(LENGTH_CODES$1);zero$1(base_length);const base_dist=new Array(D_CODES$1);zero$1(base_dist);function StaticTreeDesc(rt,it,lt,ct,ht){this.static_tree=rt,this.extra_bits=it,this.extra_base=lt,this.elems=ct,this.max_length=ht,this.has_stree=rt&&rt.length}let static_l_desc,static_d_desc,static_bl_desc;function TreeDesc(rt,it){this.dyn_tree=rt,this.max_code=0,this.stat_desc=it}const d_code=rt=>rt<256?_dist_code[rt]:_dist_code[256+(rt>>>7)],put_short=(rt,it)=>{rt.pending_buf[rt.pending++]=it&255,rt.pending_buf[rt.pending++]=it>>>8&255},send_bits=(rt,it,lt)=>{rt.bi_valid>Buf_size-lt?(rt.bi_buf|=it<<rt.bi_valid&65535,put_short(rt,rt.bi_buf),rt.bi_buf=it>>Buf_size-rt.bi_valid,rt.bi_valid+=lt-Buf_size):(rt.bi_buf|=it<<rt.bi_valid&65535,rt.bi_valid+=lt)},send_code=(rt,it,lt)=>{send_bits(rt,lt[it*2],lt[it*2+1])},bi_reverse=(rt,it)=>{let lt=0;do lt|=rt&1,rt>>>=1,lt<<=1;while(--it>0);return lt>>>1},bi_flush=rt=>{rt.bi_valid===16?(put_short(rt,rt.bi_buf),rt.bi_buf=0,rt.bi_valid=0):rt.bi_valid>=8&&(rt.pending_buf[rt.pending++]=rt.bi_buf&255,rt.bi_buf>>=8,rt.bi_valid-=8)},gen_bitlen=(rt,it)=>{const lt=it.dyn_tree,ct=it.max_code,ht=it.stat_desc.static_tree,dt=it.stat_desc.has_stree,ft=it.stat_desc.extra_bits,ut=it.stat_desc.extra_base,pt=it.stat_desc.max_length;let gt,mt,_t,yt,bt,xt,wt=0;for(yt=0;yt<=MAX_BITS$1;yt++)rt.bl_count[yt]=0;for(lt[rt.heap[rt.heap_max]*2+1]=0,gt=rt.heap_max+1;gt<HEAP_SIZE$1;gt++)mt=rt.heap[gt],yt=lt[lt[mt*2+1]*2+1]+1,yt>pt&&(yt=pt,wt++),lt[mt*2+1]=yt,!(mt>ct)&&(rt.bl_count[yt]++,bt=0,mt>=ut&&(bt=ft[mt-ut]),xt=lt[mt*2],rt.opt_len+=xt*(yt+bt),dt&&(rt.static_len+=xt*(ht[mt*2+1]+bt)));if(wt!==0){do{for(yt=pt-1;rt.bl_count[yt]===0;)yt--;rt.bl_count[yt]--,rt.bl_count[yt+1]+=2,rt.bl_count[pt]--,wt-=2}while(wt>0);for(yt=pt;yt!==0;yt--)for(mt=rt.bl_count[yt];mt!==0;)_t=rt.heap[--gt],!(_t>ct)&&(lt[_t*2+1]!==yt&&(rt.opt_len+=(yt-lt[_t*2+1])*lt[_t*2],lt[_t*2+1]=yt),mt--)}},gen_codes=(rt,it,lt)=>{const ct=new Array(MAX_BITS$1+1);let ht=0,dt,ft;for(dt=1;dt<=MAX_BITS$1;dt++)ht=ht+lt[dt-1]<<1,ct[dt]=ht;for(ft=0;ft<=it;ft++){let ut=rt[ft*2+1];ut!==0&&(rt[ft*2]=bi_reverse(ct[ut]++,ut))}},tr_static_init=()=>{let rt,it,lt,ct,ht;const dt=new Array(MAX_BITS$1+1);for(lt=0,ct=0;ct<LENGTH_CODES$1-1;ct++)for(base_length[ct]=lt,rt=0;rt<1<<extra_lbits[ct];rt++)_length_code[lt++]=ct;for(_length_code[lt-1]=ct,ht=0,ct=0;ct<16;ct++)for(base_dist[ct]=ht,rt=0;rt<1<<extra_dbits[ct];rt++)_dist_code[ht++]=ct;for(ht>>=7;ct<D_CODES$1;ct++)for(base_dist[ct]=ht<<7,rt=0;rt<1<<extra_dbits[ct]-7;rt++)_dist_code[256+ht++]=ct;for(it=0;it<=MAX_BITS$1;it++)dt[it]=0;for(rt=0;rt<=143;)static_ltree[rt*2+1]=8,rt++,dt[8]++;for(;rt<=255;)static_ltree[rt*2+1]=9,rt++,dt[9]++;for(;rt<=279;)static_ltree[rt*2+1]=7,rt++,dt[7]++;for(;rt<=287;)static_ltree[rt*2+1]=8,rt++,dt[8]++;for(gen_codes(static_ltree,L_CODES$1+1,dt),rt=0;rt<D_CODES$1;rt++)static_dtree[rt*2+1]=5,static_dtree[rt*2]=bi_reverse(rt,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS$1+1,L_CODES$1,MAX_BITS$1),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES$1,MAX_BITS$1),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES$1,MAX_BL_BITS)},init_block=rt=>{let it;for(it=0;it<L_CODES$1;it++)rt.dyn_ltree[it*2]=0;for(it=0;it<D_CODES$1;it++)rt.dyn_dtree[it*2]=0;for(it=0;it<BL_CODES$1;it++)rt.bl_tree[it*2]=0;rt.dyn_ltree[END_BLOCK*2]=1,rt.opt_len=rt.static_len=0,rt.sym_next=rt.matches=0},bi_windup=rt=>{rt.bi_valid>8?put_short(rt,rt.bi_buf):rt.bi_valid>0&&(rt.pending_buf[rt.pending++]=rt.bi_buf),rt.bi_buf=0,rt.bi_valid=0},smaller=(rt,it,lt,ct)=>{const ht=it*2,dt=lt*2;return rt[ht]<rt[dt]||rt[ht]===rt[dt]&&ct[it]<=ct[lt]},pqdownheap=(rt,it,lt)=>{const ct=rt.heap[lt];let ht=lt<<1;for(;ht<=rt.heap_len&&(ht<rt.heap_len&&smaller(it,rt.heap[ht+1],rt.heap[ht],rt.depth)&&ht++,!smaller(it,ct,rt.heap[ht],rt.depth));)rt.heap[lt]=rt.heap[ht],lt=ht,ht<<=1;rt.heap[lt]=ct},compress_block=(rt,it,lt)=>{let ct,ht,dt=0,ft,ut;if(rt.sym_next!==0)do ct=rt.pending_buf[rt.sym_buf+dt++]&255,ct+=(rt.pending_buf[rt.sym_buf+dt++]&255)<<8,ht=rt.pending_buf[rt.sym_buf+dt++],ct===0?send_code(rt,ht,it):(ft=_length_code[ht],send_code(rt,ft+LITERALS$1+1,it),ut=extra_lbits[ft],ut!==0&&(ht-=base_length[ft],send_bits(rt,ht,ut)),ct--,ft=d_code(ct),send_code(rt,ft,lt),ut=extra_dbits[ft],ut!==0&&(ct-=base_dist[ft],send_bits(rt,ct,ut)));while(dt<rt.sym_next);send_code(rt,END_BLOCK,it)},build_tree=(rt,it)=>{const lt=it.dyn_tree,ct=it.stat_desc.static_tree,ht=it.stat_desc.has_stree,dt=it.stat_desc.elems;let ft,ut,pt=-1,gt;for(rt.heap_len=0,rt.heap_max=HEAP_SIZE$1,ft=0;ft<dt;ft++)lt[ft*2]!==0?(rt.heap[++rt.heap_len]=pt=ft,rt.depth[ft]=0):lt[ft*2+1]=0;for(;rt.heap_len<2;)gt=rt.heap[++rt.heap_len]=pt<2?++pt:0,lt[gt*2]=1,rt.depth[gt]=0,rt.opt_len--,ht&&(rt.static_len-=ct[gt*2+1]);for(it.max_code=pt,ft=rt.heap_len>>1;ft>=1;ft--)pqdownheap(rt,lt,ft);gt=dt;do ft=rt.heap[1],rt.heap[1]=rt.heap[rt.heap_len--],pqdownheap(rt,lt,1),ut=rt.heap[1],rt.heap[--rt.heap_max]=ft,rt.heap[--rt.heap_max]=ut,lt[gt*2]=lt[ft*2]+lt[ut*2],rt.depth[gt]=(rt.depth[ft]>=rt.depth[ut]?rt.depth[ft]:rt.depth[ut])+1,lt[ft*2+1]=lt[ut*2+1]=gt,rt.heap[1]=gt++,pqdownheap(rt,lt,1);while(rt.heap_len>=2);rt.heap[--rt.heap_max]=rt.heap[1],gen_bitlen(rt,it),gen_codes(lt,pt,rt.bl_count)},scan_tree=(rt,it,lt)=>{let ct,ht=-1,dt,ft=it[1],ut=0,pt=7,gt=4;for(ft===0&&(pt=138,gt=3),it[(lt+1)*2+1]=65535,ct=0;ct<=lt;ct++)dt=ft,ft=it[(ct+1)*2+1],!(++ut<pt&&dt===ft)&&(ut<gt?rt.bl_tree[dt*2]+=ut:dt!==0?(dt!==ht&&rt.bl_tree[dt*2]++,rt.bl_tree[REP_3_6*2]++):ut<=10?rt.bl_tree[REPZ_3_10*2]++:rt.bl_tree[REPZ_11_138*2]++,ut=0,ht=dt,ft===0?(pt=138,gt=3):dt===ft?(pt=6,gt=3):(pt=7,gt=4))},send_tree=(rt,it,lt)=>{let ct,ht=-1,dt,ft=it[1],ut=0,pt=7,gt=4;for(ft===0&&(pt=138,gt=3),ct=0;ct<=lt;ct++)if(dt=ft,ft=it[(ct+1)*2+1],!(++ut<pt&&dt===ft)){if(ut<gt)do send_code(rt,dt,rt.bl_tree);while(--ut!==0);else dt!==0?(dt!==ht&&(send_code(rt,dt,rt.bl_tree),ut--),send_code(rt,REP_3_6,rt.bl_tree),send_bits(rt,ut-3,2)):ut<=10?(send_code(rt,REPZ_3_10,rt.bl_tree),send_bits(rt,ut-3,3)):(send_code(rt,REPZ_11_138,rt.bl_tree),send_bits(rt,ut-11,7));ut=0,ht=dt,ft===0?(pt=138,gt=3):dt===ft?(pt=6,gt=3):(pt=7,gt=4)}},build_bl_tree=rt=>{let it;for(scan_tree(rt,rt.dyn_ltree,rt.l_desc.max_code),scan_tree(rt,rt.dyn_dtree,rt.d_desc.max_code),build_tree(rt,rt.bl_desc),it=BL_CODES$1-1;it>=3&&rt.bl_tree[bl_order[it]*2+1]===0;it--);return rt.opt_len+=3*(it+1)+5+5+4,it},send_all_trees=(rt,it,lt,ct)=>{let ht;for(send_bits(rt,it-257,5),send_bits(rt,lt-1,5),send_bits(rt,ct-4,4),ht=0;ht<ct;ht++)send_bits(rt,rt.bl_tree[bl_order[ht]*2+1],3);send_tree(rt,rt.dyn_ltree,it-1),send_tree(rt,rt.dyn_dtree,lt-1)},detect_data_type=rt=>{let it=4093624447,lt;for(lt=0;lt<=31;lt++,it>>>=1)if(it&1&&rt.dyn_ltree[lt*2]!==0)return Z_BINARY;if(rt.dyn_ltree[18]!==0||rt.dyn_ltree[20]!==0||rt.dyn_ltree[26]!==0)return Z_TEXT;for(lt=32;lt<LITERALS$1;lt++)if(rt.dyn_ltree[lt*2]!==0)return Z_TEXT;return Z_BINARY};let static_init_done=!1;const _tr_init$1=rt=>{static_init_done||(tr_static_init(),static_init_done=!0),rt.l_desc=new TreeDesc(rt.dyn_ltree,static_l_desc),rt.d_desc=new TreeDesc(rt.dyn_dtree,static_d_desc),rt.bl_desc=new TreeDesc(rt.bl_tree,static_bl_desc),rt.bi_buf=0,rt.bi_valid=0,init_block(rt)},_tr_stored_block$1=(rt,it,lt,ct)=>{send_bits(rt,(STORED_BLOCK<<1)+(ct?1:0),3),bi_windup(rt),put_short(rt,lt),put_short(rt,~lt),lt&&rt.pending_buf.set(rt.window.subarray(it,it+lt),rt.pending),rt.pending+=lt},_tr_align$1=rt=>{send_bits(rt,STATIC_TREES<<1,3),send_code(rt,END_BLOCK,static_ltree),bi_flush(rt)},_tr_flush_block$1=(rt,it,lt,ct)=>{let ht,dt,ft=0;rt.level>0?(rt.strm.data_type===Z_UNKNOWN$1&&(rt.strm.data_type=detect_data_type(rt)),build_tree(rt,rt.l_desc),build_tree(rt,rt.d_desc),ft=build_bl_tree(rt),ht=rt.opt_len+3+7>>>3,dt=rt.static_len+3+7>>>3,dt<=ht&&(ht=dt)):ht=dt=lt+5,lt+4<=ht&&it!==-1?_tr_stored_block$1(rt,it,lt,ct):rt.strategy===Z_FIXED$1||dt===ht?(send_bits(rt,(STATIC_TREES<<1)+(ct?1:0),3),compress_block(rt,static_ltree,static_dtree)):(send_bits(rt,(DYN_TREES<<1)+(ct?1:0),3),send_all_trees(rt,rt.l_desc.max_code+1,rt.d_desc.max_code+1,ft+1),compress_block(rt,rt.dyn_ltree,rt.dyn_dtree)),init_block(rt),ct&&bi_windup(rt)},_tr_tally$1=(rt,it,lt)=>(rt.pending_buf[rt.sym_buf+rt.sym_next++]=it,rt.pending_buf[rt.sym_buf+rt.sym_next++]=it>>8,rt.pending_buf[rt.sym_buf+rt.sym_next++]=lt,it===0?rt.dyn_ltree[lt*2]++:(rt.matches++,it--,rt.dyn_ltree[(_length_code[lt]+LITERALS$1+1)*2]++,rt.dyn_dtree[d_code(it)*2]++),rt.sym_next===rt.sym_end);var _tr_init_1=_tr_init$1,_tr_stored_block_1=_tr_stored_block$1,_tr_flush_block_1=_tr_flush_block$1,_tr_tally_1=_tr_tally$1,_tr_align_1=_tr_align$1,trees={_tr_init:_tr_init_1,_tr_stored_block:_tr_stored_block_1,_tr_flush_block:_tr_flush_block_1,_tr_tally:_tr_tally_1,_tr_align:_tr_align_1};const adler32=(rt,it,lt,ct)=>{let ht=rt&65535|0,dt=rt>>>16&65535|0,ft=0;for(;lt!==0;){ft=lt>2e3?2e3:lt,lt-=ft;do ht=ht+it[ct++]|0,dt=dt+ht|0;while(--ft);ht%=65521,dt%=65521}return ht|dt<<16|0};var adler32_1=adler32;const makeTable=()=>{let rt,it=[];for(var lt=0;lt<256;lt++){rt=lt;for(var ct=0;ct<8;ct++)rt=rt&1?3988292384^rt>>>1:rt>>>1;it[lt]=rt}return it},crcTable=new Uint32Array(makeTable()),crc32=(rt,it,lt,ct)=>{const ht=crcTable,dt=ct+lt;rt^=-1;for(let ft=ct;ft<dt;ft++)rt=rt>>>8^ht[(rt^it[ft])&255];return rt^-1};var crc32_1=crc32,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},constants$2={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init,_tr_stored_block,_tr_flush_block,_tr_tally,_tr_align}=trees,{Z_NO_FLUSH:Z_NO_FLUSH$2,Z_PARTIAL_FLUSH,Z_FULL_FLUSH:Z_FULL_FLUSH$1,Z_FINISH:Z_FINISH$3,Z_BLOCK:Z_BLOCK$1,Z_OK:Z_OK$3,Z_STREAM_END:Z_STREAM_END$3,Z_STREAM_ERROR:Z_STREAM_ERROR$2,Z_DATA_ERROR:Z_DATA_ERROR$2,Z_BUF_ERROR:Z_BUF_ERROR$1,Z_DEFAULT_COMPRESSION:Z_DEFAULT_COMPRESSION$1,Z_FILTERED,Z_HUFFMAN_ONLY,Z_RLE,Z_FIXED,Z_DEFAULT_STRATEGY:Z_DEFAULT_STRATEGY$1,Z_UNKNOWN,Z_DEFLATED:Z_DEFLATED$2}=constants$2,MAX_MEM_LEVEL=9,MAX_WBITS$1=15,DEF_MEM_LEVEL=8,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,PRESET_DICT=32,INIT_STATE=42,GZIP_STATE=57,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3,err=(rt,it)=>(rt.msg=messages[it],it),rank=rt=>rt*2-(rt>4?9:0),zero=rt=>{let it=rt.length;for(;--it>=0;)rt[it]=0},slide_hash=rt=>{let it,lt,ct,ht=rt.w_size;it=rt.hash_size,ct=it;do lt=rt.head[--ct],rt.head[ct]=lt>=ht?lt-ht:0;while(--it);it=ht,ct=it;do lt=rt.prev[--ct],rt.prev[ct]=lt>=ht?lt-ht:0;while(--it)};let HASH_ZLIB=(rt,it,lt)=>(it<<rt.hash_shift^lt)&rt.hash_mask,HASH=HASH_ZLIB;const flush_pending=rt=>{const it=rt.state;let lt=it.pending;lt>rt.avail_out&&(lt=rt.avail_out),lt!==0&&(rt.output.set(it.pending_buf.subarray(it.pending_out,it.pending_out+lt),rt.next_out),rt.next_out+=lt,it.pending_out+=lt,rt.total_out+=lt,rt.avail_out-=lt,it.pending-=lt,it.pending===0&&(it.pending_out=0))},flush_block_only=(rt,it)=>{_tr_flush_block(rt,rt.block_start>=0?rt.block_start:-1,rt.strstart-rt.block_start,it),rt.block_start=rt.strstart,flush_pending(rt.strm)},put_byte=(rt,it)=>{rt.pending_buf[rt.pending++]=it},putShortMSB=(rt,it)=>{rt.pending_buf[rt.pending++]=it>>>8&255,rt.pending_buf[rt.pending++]=it&255},read_buf=(rt,it,lt,ct)=>{let ht=rt.avail_in;return ht>ct&&(ht=ct),ht===0?0:(rt.avail_in-=ht,it.set(rt.input.subarray(rt.next_in,rt.next_in+ht),lt),rt.state.wrap===1?rt.adler=adler32_1(rt.adler,it,ht,lt):rt.state.wrap===2&&(rt.adler=crc32_1(rt.adler,it,ht,lt)),rt.next_in+=ht,rt.total_in+=ht,ht)},longest_match=(rt,it)=>{let lt=rt.max_chain_length,ct=rt.strstart,ht,dt,ft=rt.prev_length,ut=rt.nice_match;const pt=rt.strstart>rt.w_size-MIN_LOOKAHEAD?rt.strstart-(rt.w_size-MIN_LOOKAHEAD):0,gt=rt.window,mt=rt.w_mask,_t=rt.prev,yt=rt.strstart+MAX_MATCH;let bt=gt[ct+ft-1],xt=gt[ct+ft];rt.prev_length>=rt.good_match&&(lt>>=2),ut>rt.lookahead&&(ut=rt.lookahead);do if(ht=it,!(gt[ht+ft]!==xt||gt[ht+ft-1]!==bt||gt[ht]!==gt[ct]||gt[++ht]!==gt[ct+1])){ct+=2,ht++;do;while(gt[++ct]===gt[++ht]&&gt[++ct]===gt[++ht]&&gt[++ct]===gt[++ht]&&gt[++ct]===gt[++ht]&&gt[++ct]===gt[++ht]&&gt[++ct]===gt[++ht]&&gt[++ct]===gt[++ht]&&gt[++ct]===gt[++ht]&&ct<yt);if(dt=MAX_MATCH-(yt-ct),ct=yt-MAX_MATCH,dt>ft){if(rt.match_start=it,ft=dt,dt>=ut)break;bt=gt[ct+ft-1],xt=gt[ct+ft]}}while((it=_t[it&mt])>pt&&--lt!==0);return ft<=rt.lookahead?ft:rt.lookahead},fill_window=rt=>{const it=rt.w_size;let lt,ct,ht;do{if(ct=rt.window_size-rt.lookahead-rt.strstart,rt.strstart>=it+(it-MIN_LOOKAHEAD)&&(rt.window.set(rt.window.subarray(it,it+it-ct),0),rt.match_start-=it,rt.strstart-=it,rt.block_start-=it,rt.insert>rt.strstart&&(rt.insert=rt.strstart),slide_hash(rt),ct+=it),rt.strm.avail_in===0)break;if(lt=read_buf(rt.strm,rt.window,rt.strstart+rt.lookahead,ct),rt.lookahead+=lt,rt.lookahead+rt.insert>=MIN_MATCH)for(ht=rt.strstart-rt.insert,rt.ins_h=rt.window[ht],rt.ins_h=HASH(rt,rt.ins_h,rt.window[ht+1]);rt.insert&&(rt.ins_h=HASH(rt,rt.ins_h,rt.window[ht+MIN_MATCH-1]),rt.prev[ht&rt.w_mask]=rt.head[rt.ins_h],rt.head[rt.ins_h]=ht,ht++,rt.insert--,!(rt.lookahead+rt.insert<MIN_MATCH)););}while(rt.lookahead<MIN_LOOKAHEAD&&rt.strm.avail_in!==0)},deflate_stored=(rt,it)=>{let lt=rt.pending_buf_size-5>rt.w_size?rt.w_size:rt.pending_buf_size-5,ct,ht,dt,ft=0,ut=rt.strm.avail_in;do{if(ct=65535,dt=rt.bi_valid+42>>3,rt.strm.avail_out<dt||(dt=rt.strm.avail_out-dt,ht=rt.strstart-rt.block_start,ct>ht+rt.strm.avail_in&&(ct=ht+rt.strm.avail_in),ct>dt&&(ct=dt),ct<lt&&(ct===0&&it!==Z_FINISH$3||it===Z_NO_FLUSH$2||ct!==ht+rt.strm.avail_in)))break;ft=it===Z_FINISH$3&&ct===ht+rt.strm.avail_in?1:0,_tr_stored_block(rt,0,0,ft),rt.pending_buf[rt.pending-4]=ct,rt.pending_buf[rt.pending-3]=ct>>8,rt.pending_buf[rt.pending-2]=~ct,rt.pending_buf[rt.pending-1]=~ct>>8,flush_pending(rt.strm),ht&&(ht>ct&&(ht=ct),rt.strm.output.set(rt.window.subarray(rt.block_start,rt.block_start+ht),rt.strm.next_out),rt.strm.next_out+=ht,rt.strm.avail_out-=ht,rt.strm.total_out+=ht,rt.block_start+=ht,ct-=ht),ct&&(read_buf(rt.strm,rt.strm.output,rt.strm.next_out,ct),rt.strm.next_out+=ct,rt.strm.avail_out-=ct,rt.strm.total_out+=ct)}while(ft===0);return ut-=rt.strm.avail_in,ut&&(ut>=rt.w_size?(rt.matches=2,rt.window.set(rt.strm.input.subarray(rt.strm.next_in-rt.w_size,rt.strm.next_in),0),rt.strstart=rt.w_size,rt.insert=rt.strstart):(rt.window_size-rt.strstart<=ut&&(rt.strstart-=rt.w_size,rt.window.set(rt.window.subarray(rt.w_size,rt.w_size+rt.strstart),0),rt.matches<2&&rt.matches++,rt.insert>rt.strstart&&(rt.insert=rt.strstart)),rt.window.set(rt.strm.input.subarray(rt.strm.next_in-ut,rt.strm.next_in),rt.strstart),rt.strstart+=ut,rt.insert+=ut>rt.w_size-rt.insert?rt.w_size-rt.insert:ut),rt.block_start=rt.strstart),rt.high_water<rt.strstart&&(rt.high_water=rt.strstart),ft?BS_FINISH_DONE:it!==Z_NO_FLUSH$2&&it!==Z_FINISH$3&&rt.strm.avail_in===0&&rt.strstart===rt.block_start?BS_BLOCK_DONE:(dt=rt.window_size-rt.strstart,rt.strm.avail_in>dt&&rt.block_start>=rt.w_size&&(rt.block_start-=rt.w_size,rt.strstart-=rt.w_size,rt.window.set(rt.window.subarray(rt.w_size,rt.w_size+rt.strstart),0),rt.matches<2&&rt.matches++,dt+=rt.w_size,rt.insert>rt.strstart&&(rt.insert=rt.strstart)),dt>rt.strm.avail_in&&(dt=rt.strm.avail_in),dt&&(read_buf(rt.strm,rt.window,rt.strstart,dt),rt.strstart+=dt,rt.insert+=dt>rt.w_size-rt.insert?rt.w_size-rt.insert:dt),rt.high_water<rt.strstart&&(rt.high_water=rt.strstart),dt=rt.bi_valid+42>>3,dt=rt.pending_buf_size-dt>65535?65535:rt.pending_buf_size-dt,lt=dt>rt.w_size?rt.w_size:dt,ht=rt.strstart-rt.block_start,(ht>=lt||(ht||it===Z_FINISH$3)&&it!==Z_NO_FLUSH$2&&rt.strm.avail_in===0&&ht<=dt)&&(ct=ht>dt?dt:ht,ft=it===Z_FINISH$3&&rt.strm.avail_in===0&&ct===ht?1:0,_tr_stored_block(rt,rt.block_start,ct,ft),rt.block_start+=ct,flush_pending(rt.strm)),ft?BS_FINISH_STARTED:BS_NEED_MORE)},deflate_fast=(rt,it)=>{let lt,ct;for(;;){if(rt.lookahead<MIN_LOOKAHEAD){if(fill_window(rt),rt.lookahead<MIN_LOOKAHEAD&&it===Z_NO_FLUSH$2)return BS_NEED_MORE;if(rt.lookahead===0)break}if(lt=0,rt.lookahead>=MIN_MATCH&&(rt.ins_h=HASH(rt,rt.ins_h,rt.window[rt.strstart+MIN_MATCH-1]),lt=rt.prev[rt.strstart&rt.w_mask]=rt.head[rt.ins_h],rt.head[rt.ins_h]=rt.strstart),lt!==0&&rt.strstart-lt<=rt.w_size-MIN_LOOKAHEAD&&(rt.match_length=longest_match(rt,lt)),rt.match_length>=MIN_MATCH)if(ct=_tr_tally(rt,rt.strstart-rt.match_start,rt.match_length-MIN_MATCH),rt.lookahead-=rt.match_length,rt.match_length<=rt.max_lazy_match&&rt.lookahead>=MIN_MATCH){rt.match_length--;do rt.strstart++,rt.ins_h=HASH(rt,rt.ins_h,rt.window[rt.strstart+MIN_MATCH-1]),lt=rt.prev[rt.strstart&rt.w_mask]=rt.head[rt.ins_h],rt.head[rt.ins_h]=rt.strstart;while(--rt.match_length!==0);rt.strstart++}else rt.strstart+=rt.match_length,rt.match_length=0,rt.ins_h=rt.window[rt.strstart],rt.ins_h=HASH(rt,rt.ins_h,rt.window[rt.strstart+1]);else ct=_tr_tally(rt,0,rt.window[rt.strstart]),rt.lookahead--,rt.strstart++;if(ct&&(flush_block_only(rt,!1),rt.strm.avail_out===0))return BS_NEED_MORE}return rt.insert=rt.strstart<MIN_MATCH-1?rt.strstart:MIN_MATCH-1,it===Z_FINISH$3?(flush_block_only(rt,!0),rt.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):rt.sym_next&&(flush_block_only(rt,!1),rt.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_slow=(rt,it)=>{let lt,ct,ht;for(;;){if(rt.lookahead<MIN_LOOKAHEAD){if(fill_window(rt),rt.lookahead<MIN_LOOKAHEAD&&it===Z_NO_FLUSH$2)return BS_NEED_MORE;if(rt.lookahead===0)break}if(lt=0,rt.lookahead>=MIN_MATCH&&(rt.ins_h=HASH(rt,rt.ins_h,rt.window[rt.strstart+MIN_MATCH-1]),lt=rt.prev[rt.strstart&rt.w_mask]=rt.head[rt.ins_h],rt.head[rt.ins_h]=rt.strstart),rt.prev_length=rt.match_length,rt.prev_match=rt.match_start,rt.match_length=MIN_MATCH-1,lt!==0&&rt.prev_length<rt.max_lazy_match&&rt.strstart-lt<=rt.w_size-MIN_LOOKAHEAD&&(rt.match_length=longest_match(rt,lt),rt.match_length<=5&&(rt.strategy===Z_FILTERED||rt.match_length===MIN_MATCH&&rt.strstart-rt.match_start>4096)&&(rt.match_length=MIN_MATCH-1)),rt.prev_length>=MIN_MATCH&&rt.match_length<=rt.prev_length){ht=rt.strstart+rt.lookahead-MIN_MATCH,ct=_tr_tally(rt,rt.strstart-1-rt.prev_match,rt.prev_length-MIN_MATCH),rt.lookahead-=rt.prev_length-1,rt.prev_length-=2;do++rt.strstart<=ht&&(rt.ins_h=HASH(rt,rt.ins_h,rt.window[rt.strstart+MIN_MATCH-1]),lt=rt.prev[rt.strstart&rt.w_mask]=rt.head[rt.ins_h],rt.head[rt.ins_h]=rt.strstart);while(--rt.prev_length!==0);if(rt.match_available=0,rt.match_length=MIN_MATCH-1,rt.strstart++,ct&&(flush_block_only(rt,!1),rt.strm.avail_out===0))return BS_NEED_MORE}else if(rt.match_available){if(ct=_tr_tally(rt,0,rt.window[rt.strstart-1]),ct&&flush_block_only(rt,!1),rt.strstart++,rt.lookahead--,rt.strm.avail_out===0)return BS_NEED_MORE}else rt.match_available=1,rt.strstart++,rt.lookahead--}return rt.match_available&&(ct=_tr_tally(rt,0,rt.window[rt.strstart-1]),rt.match_available=0),rt.insert=rt.strstart<MIN_MATCH-1?rt.strstart:MIN_MATCH-1,it===Z_FINISH$3?(flush_block_only(rt,!0),rt.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):rt.sym_next&&(flush_block_only(rt,!1),rt.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_rle=(rt,it)=>{let lt,ct,ht,dt;const ft=rt.window;for(;;){if(rt.lookahead<=MAX_MATCH){if(fill_window(rt),rt.lookahead<=MAX_MATCH&&it===Z_NO_FLUSH$2)return BS_NEED_MORE;if(rt.lookahead===0)break}if(rt.match_length=0,rt.lookahead>=MIN_MATCH&&rt.strstart>0&&(ht=rt.strstart-1,ct=ft[ht],ct===ft[++ht]&&ct===ft[++ht]&&ct===ft[++ht])){dt=rt.strstart+MAX_MATCH;do;while(ct===ft[++ht]&&ct===ft[++ht]&&ct===ft[++ht]&&ct===ft[++ht]&&ct===ft[++ht]&&ct===ft[++ht]&&ct===ft[++ht]&&ct===ft[++ht]&&ht<dt);rt.match_length=MAX_MATCH-(dt-ht),rt.match_length>rt.lookahead&&(rt.match_length=rt.lookahead)}if(rt.match_length>=MIN_MATCH?(lt=_tr_tally(rt,1,rt.match_length-MIN_MATCH),rt.lookahead-=rt.match_length,rt.strstart+=rt.match_length,rt.match_length=0):(lt=_tr_tally(rt,0,rt.window[rt.strstart]),rt.lookahead--,rt.strstart++),lt&&(flush_block_only(rt,!1),rt.strm.avail_out===0))return BS_NEED_MORE}return rt.insert=0,it===Z_FINISH$3?(flush_block_only(rt,!0),rt.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):rt.sym_next&&(flush_block_only(rt,!1),rt.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_huff=(rt,it)=>{let lt;for(;;){if(rt.lookahead===0&&(fill_window(rt),rt.lookahead===0)){if(it===Z_NO_FLUSH$2)return BS_NEED_MORE;break}if(rt.match_length=0,lt=_tr_tally(rt,0,rt.window[rt.strstart]),rt.lookahead--,rt.strstart++,lt&&(flush_block_only(rt,!1),rt.strm.avail_out===0))return BS_NEED_MORE}return rt.insert=0,it===Z_FINISH$3?(flush_block_only(rt,!0),rt.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):rt.sym_next&&(flush_block_only(rt,!1),rt.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE};function Config(rt,it,lt,ct,ht){this.good_length=rt,this.max_lazy=it,this.nice_length=lt,this.max_chain=ct,this.func=ht}const configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],lm_init=rt=>{rt.window_size=2*rt.w_size,zero(rt.head),rt.max_lazy_match=configuration_table[rt.level].max_lazy,rt.good_match=configuration_table[rt.level].good_length,rt.nice_match=configuration_table[rt.level].nice_length,rt.max_chain_length=configuration_table[rt.level].max_chain,rt.strstart=0,rt.block_start=0,rt.lookahead=0,rt.insert=0,rt.match_length=rt.prev_length=MIN_MATCH-1,rt.match_available=0,rt.ins_h=0};function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED$2,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(HEAP_SIZE*2),this.dyn_dtree=new Uint16Array((2*D_CODES+1)*2),this.bl_tree=new Uint16Array((2*BL_CODES+1)*2),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(MAX_BITS+1),this.heap=new Uint16Array(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*L_CODES+1),zero(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const deflateStateCheck=rt=>{if(!rt)return 1;const it=rt.state;return!it||it.strm!==rt||it.status!==INIT_STATE&&it.status!==GZIP_STATE&&it.status!==EXTRA_STATE&&it.status!==NAME_STATE&&it.status!==COMMENT_STATE&&it.status!==HCRC_STATE&&it.status!==BUSY_STATE&&it.status!==FINISH_STATE?1:0},deflateResetKeep=rt=>{if(deflateStateCheck(rt))return err(rt,Z_STREAM_ERROR$2);rt.total_in=rt.total_out=0,rt.data_type=Z_UNKNOWN;const it=rt.state;return it.pending=0,it.pending_out=0,it.wrap<0&&(it.wrap=-it.wrap),it.status=it.wrap===2?GZIP_STATE:it.wrap?INIT_STATE:BUSY_STATE,rt.adler=it.wrap===2?0:1,it.last_flush=-2,_tr_init(it),Z_OK$3},deflateReset=rt=>{const it=deflateResetKeep(rt);return it===Z_OK$3&&lm_init(rt.state),it},deflateSetHeader=(rt,it)=>deflateStateCheck(rt)||rt.state.wrap!==2?Z_STREAM_ERROR$2:(rt.state.gzhead=it,Z_OK$3),deflateInit2=(rt,it,lt,ct,ht,dt)=>{if(!rt)return Z_STREAM_ERROR$2;let ft=1;if(it===Z_DEFAULT_COMPRESSION$1&&(it=6),ct<0?(ft=0,ct=-ct):ct>15&&(ft=2,ct-=16),ht<1||ht>MAX_MEM_LEVEL||lt!==Z_DEFLATED$2||ct<8||ct>15||it<0||it>9||dt<0||dt>Z_FIXED||ct===8&&ft!==1)return err(rt,Z_STREAM_ERROR$2);ct===8&&(ct=9);const ut=new DeflateState;return rt.state=ut,ut.strm=rt,ut.status=INIT_STATE,ut.wrap=ft,ut.gzhead=null,ut.w_bits=ct,ut.w_size=1<<ut.w_bits,ut.w_mask=ut.w_size-1,ut.hash_bits=ht+7,ut.hash_size=1<<ut.hash_bits,ut.hash_mask=ut.hash_size-1,ut.hash_shift=~~((ut.hash_bits+MIN_MATCH-1)/MIN_MATCH),ut.window=new Uint8Array(ut.w_size*2),ut.head=new Uint16Array(ut.hash_size),ut.prev=new Uint16Array(ut.w_size),ut.lit_bufsize=1<<ht+6,ut.pending_buf_size=ut.lit_bufsize*4,ut.pending_buf=new Uint8Array(ut.pending_buf_size),ut.sym_buf=ut.lit_bufsize,ut.sym_end=(ut.lit_bufsize-1)*3,ut.level=it,ut.strategy=dt,ut.method=lt,deflateReset(rt)},deflateInit=(rt,it)=>deflateInit2(rt,it,Z_DEFLATED$2,MAX_WBITS$1,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY$1),deflate$2=(rt,it)=>{if(deflateStateCheck(rt)||it>Z_BLOCK$1||it<0)return rt?err(rt,Z_STREAM_ERROR$2):Z_STREAM_ERROR$2;const lt=rt.state;if(!rt.output||rt.avail_in!==0&&!rt.input||lt.status===FINISH_STATE&&it!==Z_FINISH$3)return err(rt,rt.avail_out===0?Z_BUF_ERROR$1:Z_STREAM_ERROR$2);const ct=lt.last_flush;if(lt.last_flush=it,lt.pending!==0){if(flush_pending(rt),rt.avail_out===0)return lt.last_flush=-1,Z_OK$3}else if(rt.avail_in===0&&rank(it)<=rank(ct)&&it!==Z_FINISH$3)return err(rt,Z_BUF_ERROR$1);if(lt.status===FINISH_STATE&&rt.avail_in!==0)return err(rt,Z_BUF_ERROR$1);if(lt.status===INIT_STATE&&lt.wrap===0&&(lt.status=BUSY_STATE),lt.status===INIT_STATE){let ht=Z_DEFLATED$2+(lt.w_bits-8<<4)<<8,dt=-1;if(lt.strategy>=Z_HUFFMAN_ONLY||lt.level<2?dt=0:lt.level<6?dt=1:lt.level===6?dt=2:dt=3,ht|=dt<<6,lt.strstart!==0&&(ht|=PRESET_DICT),ht+=31-ht%31,putShortMSB(lt,ht),lt.strstart!==0&&(putShortMSB(lt,rt.adler>>>16),putShortMSB(lt,rt.adler&65535)),rt.adler=1,lt.status=BUSY_STATE,flush_pending(rt),lt.pending!==0)return lt.last_flush=-1,Z_OK$3}if(lt.status===GZIP_STATE){if(rt.adler=0,put_byte(lt,31),put_byte(lt,139),put_byte(lt,8),lt.gzhead)put_byte(lt,(lt.gzhead.text?1:0)+(lt.gzhead.hcrc?2:0)+(lt.gzhead.extra?4:0)+(lt.gzhead.name?8:0)+(lt.gzhead.comment?16:0)),put_byte(lt,lt.gzhead.time&255),put_byte(lt,lt.gzhead.time>>8&255),put_byte(lt,lt.gzhead.time>>16&255),put_byte(lt,lt.gzhead.time>>24&255),put_byte(lt,lt.level===9?2:lt.strategy>=Z_HUFFMAN_ONLY||lt.level<2?4:0),put_byte(lt,lt.gzhead.os&255),lt.gzhead.extra&&lt.gzhead.extra.length&&(put_byte(lt,lt.gzhead.extra.length&255),put_byte(lt,lt.gzhead.extra.length>>8&255)),lt.gzhead.hcrc&&(rt.adler=crc32_1(rt.adler,lt.pending_buf,lt.pending,0)),lt.gzindex=0,lt.status=EXTRA_STATE;else if(put_byte(lt,0),put_byte(lt,0),put_byte(lt,0),put_byte(lt,0),put_byte(lt,0),put_byte(lt,lt.level===9?2:lt.strategy>=Z_HUFFMAN_ONLY||lt.level<2?4:0),put_byte(lt,OS_CODE),lt.status=BUSY_STATE,flush_pending(rt),lt.pending!==0)return lt.last_flush=-1,Z_OK$3}if(lt.status===EXTRA_STATE){if(lt.gzhead.extra){let ht=lt.pending,dt=(lt.gzhead.extra.length&65535)-lt.gzindex;for(;lt.pending+dt>lt.pending_buf_size;){let ut=lt.pending_buf_size-lt.pending;if(lt.pending_buf.set(lt.gzhead.extra.subarray(lt.gzindex,lt.gzindex+ut),lt.pending),lt.pending=lt.pending_buf_size,lt.gzhead.hcrc&&lt.pending>ht&&(rt.adler=crc32_1(rt.adler,lt.pending_buf,lt.pending-ht,ht)),lt.gzindex+=ut,flush_pending(rt),lt.pending!==0)return lt.last_flush=-1,Z_OK$3;ht=0,dt-=ut}let ft=new Uint8Array(lt.gzhead.extra);lt.pending_buf.set(ft.subarray(lt.gzindex,lt.gzindex+dt),lt.pending),lt.pending+=dt,lt.gzhead.hcrc&&lt.pending>ht&&(rt.adler=crc32_1(rt.adler,lt.pending_buf,lt.pending-ht,ht)),lt.gzindex=0}lt.status=NAME_STATE}if(lt.status===NAME_STATE){if(lt.gzhead.name){let ht=lt.pending,dt;do{if(lt.pending===lt.pending_buf_size){if(lt.gzhead.hcrc&&lt.pending>ht&&(rt.adler=crc32_1(rt.adler,lt.pending_buf,lt.pending-ht,ht)),flush_pending(rt),lt.pending!==0)return lt.last_flush=-1,Z_OK$3;ht=0}lt.gzindex<lt.gzhead.name.length?dt=lt.gzhead.name.charCodeAt(lt.gzindex++)&255:dt=0,put_byte(lt,dt)}while(dt!==0);lt.gzhead.hcrc&&lt.pending>ht&&(rt.adler=crc32_1(rt.adler,lt.pending_buf,lt.pending-ht,ht)),lt.gzindex=0}lt.status=COMMENT_STATE}if(lt.status===COMMENT_STATE){if(lt.gzhead.comment){let ht=lt.pending,dt;do{if(lt.pending===lt.pending_buf_size){if(lt.gzhead.hcrc&&lt.pending>ht&&(rt.adler=crc32_1(rt.adler,lt.pending_buf,lt.pending-ht,ht)),flush_pending(rt),lt.pending!==0)return lt.last_flush=-1,Z_OK$3;ht=0}lt.gzindex<lt.gzhead.comment.length?dt=lt.gzhead.comment.charCodeAt(lt.gzindex++)&255:dt=0,put_byte(lt,dt)}while(dt!==0);lt.gzhead.hcrc&&lt.pending>ht&&(rt.adler=crc32_1(rt.adler,lt.pending_buf,lt.pending-ht,ht))}lt.status=HCRC_STATE}if(lt.status===HCRC_STATE){if(lt.gzhead.hcrc){if(lt.pending+2>lt.pending_buf_size&&(flush_pending(rt),lt.pending!==0))return lt.last_flush=-1,Z_OK$3;put_byte(lt,rt.adler&255),put_byte(lt,rt.adler>>8&255),rt.adler=0}if(lt.status=BUSY_STATE,flush_pending(rt),lt.pending!==0)return lt.last_flush=-1,Z_OK$3}if(rt.avail_in!==0||lt.lookahead!==0||it!==Z_NO_FLUSH$2&&lt.status!==FINISH_STATE){let ht=lt.level===0?deflate_stored(lt,it):lt.strategy===Z_HUFFMAN_ONLY?deflate_huff(lt,it):lt.strategy===Z_RLE?deflate_rle(lt,it):configuration_table[lt.level].func(lt,it);if((ht===BS_FINISH_STARTED||ht===BS_FINISH_DONE)&&(lt.status=FINISH_STATE),ht===BS_NEED_MORE||ht===BS_FINISH_STARTED)return rt.avail_out===0&&(lt.last_flush=-1),Z_OK$3;if(ht===BS_BLOCK_DONE&&(it===Z_PARTIAL_FLUSH?_tr_align(lt):it!==Z_BLOCK$1&&(_tr_stored_block(lt,0,0,!1),it===Z_FULL_FLUSH$1&&(zero(lt.head),lt.lookahead===0&&(lt.strstart=0,lt.block_start=0,lt.insert=0))),flush_pending(rt),rt.avail_out===0))return lt.last_flush=-1,Z_OK$3}return it!==Z_FINISH$3?Z_OK$3:lt.wrap<=0?Z_STREAM_END$3:(lt.wrap===2?(put_byte(lt,rt.adler&255),put_byte(lt,rt.adler>>8&255),put_byte(lt,rt.adler>>16&255),put_byte(lt,rt.adler>>24&255),put_byte(lt,rt.total_in&255),put_byte(lt,rt.total_in>>8&255),put_byte(lt,rt.total_in>>16&255),put_byte(lt,rt.total_in>>24&255)):(putShortMSB(lt,rt.adler>>>16),putShortMSB(lt,rt.adler&65535)),flush_pending(rt),lt.wrap>0&&(lt.wrap=-lt.wrap),lt.pending!==0?Z_OK$3:Z_STREAM_END$3)},deflateEnd=rt=>{if(deflateStateCheck(rt))return Z_STREAM_ERROR$2;const it=rt.state.status;return rt.state=null,it===BUSY_STATE?err(rt,Z_DATA_ERROR$2):Z_OK$3},deflateSetDictionary=(rt,it)=>{let lt=it.length;if(deflateStateCheck(rt))return Z_STREAM_ERROR$2;const ct=rt.state,ht=ct.wrap;if(ht===2||ht===1&&ct.status!==INIT_STATE||ct.lookahead)return Z_STREAM_ERROR$2;if(ht===1&&(rt.adler=adler32_1(rt.adler,it,lt,0)),ct.wrap=0,lt>=ct.w_size){ht===0&&(zero(ct.head),ct.strstart=0,ct.block_start=0,ct.insert=0);let pt=new Uint8Array(ct.w_size);pt.set(it.subarray(lt-ct.w_size,lt),0),it=pt,lt=ct.w_size}const dt=rt.avail_in,ft=rt.next_in,ut=rt.input;for(rt.avail_in=lt,rt.next_in=0,rt.input=it,fill_window(ct);ct.lookahead>=MIN_MATCH;){let pt=ct.strstart,gt=ct.lookahead-(MIN_MATCH-1);do ct.ins_h=HASH(ct,ct.ins_h,ct.window[pt+MIN_MATCH-1]),ct.prev[pt&ct.w_mask]=ct.head[ct.ins_h],ct.head[ct.ins_h]=pt,pt++;while(--gt);ct.strstart=pt,ct.lookahead=MIN_MATCH-1,fill_window(ct)}return ct.strstart+=ct.lookahead,ct.block_start=ct.strstart,ct.insert=ct.lookahead,ct.lookahead=0,ct.match_length=ct.prev_length=MIN_MATCH-1,ct.match_available=0,rt.next_in=ft,rt.input=ut,rt.avail_in=dt,ct.wrap=ht,Z_OK$3};var deflateInit_1=deflateInit,deflateInit2_1=deflateInit2,deflateReset_1=deflateReset,deflateResetKeep_1=deflateResetKeep,deflateSetHeader_1=deflateSetHeader,deflate_2$1=deflate$2,deflateEnd_1=deflateEnd,deflateSetDictionary_1=deflateSetDictionary,deflateInfo="pako deflate (from Nodeca project)",deflate_1$2={deflateInit:deflateInit_1,deflateInit2:deflateInit2_1,deflateReset:deflateReset_1,deflateResetKeep:deflateResetKeep_1,deflateSetHeader:deflateSetHeader_1,deflate:deflate_2$1,deflateEnd:deflateEnd_1,deflateSetDictionary:deflateSetDictionary_1,deflateInfo};const _has=(rt,it)=>Object.prototype.hasOwnProperty.call(rt,it);var assign=function(rt){const it=Array.prototype.slice.call(arguments,1);for(;it.length;){const lt=it.shift();if(lt){if(typeof lt!="object")throw new TypeError(lt+"must be non-object");for(const ct in lt)_has(lt,ct)&&(rt[ct]=lt[ct])}}return rt},flattenChunks=rt=>{let it=0;for(let ct=0,ht=rt.length;ct<ht;ct++)it+=rt[ct].length;const lt=new Uint8Array(it);for(let ct=0,ht=0,dt=rt.length;ct<dt;ct++){let ft=rt[ct];lt.set(ft,ht),ht+=ft.length}return lt},common={assign,flattenChunks};let STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(rt){STR_APPLY_UIA_OK=!1}const _utf8len=new Uint8Array(256);for(let rt=0;rt<256;rt++)_utf8len[rt]=rt>=252?6:rt>=248?5:rt>=240?4:rt>=224?3:rt>=192?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=rt=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(rt);let it,lt,ct,ht,dt,ft=rt.length,ut=0;for(ht=0;ht<ft;ht++)lt=rt.charCodeAt(ht),(lt&64512)===55296&&ht+1<ft&&(ct=rt.charCodeAt(ht+1),(ct&64512)===56320&&(lt=65536+(lt-55296<<10)+(ct-56320),ht++)),ut+=lt<128?1:lt<2048?2:lt<65536?3:4;for(it=new Uint8Array(ut),dt=0,ht=0;dt<ut;ht++)lt=rt.charCodeAt(ht),(lt&64512)===55296&&ht+1<ft&&(ct=rt.charCodeAt(ht+1),(ct&64512)===56320&&(lt=65536+(lt-55296<<10)+(ct-56320),ht++)),lt<128?it[dt++]=lt:lt<2048?(it[dt++]=192|lt>>>6,it[dt++]=128|lt&63):lt<65536?(it[dt++]=224|lt>>>12,it[dt++]=128|lt>>>6&63,it[dt++]=128|lt&63):(it[dt++]=240|lt>>>18,it[dt++]=128|lt>>>12&63,it[dt++]=128|lt>>>6&63,it[dt++]=128|lt&63);return it};const buf2binstring=(rt,it)=>{if(it<65534&&rt.subarray&&STR_APPLY_UIA_OK)return String.fromCharCode.apply(null,rt.length===it?rt:rt.subarray(0,it));let lt="";for(let ct=0;ct<it;ct++)lt+=String.fromCharCode(rt[ct]);return lt};var buf2string=(rt,it)=>{const lt=it||rt.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(rt.subarray(0,it));let ct,ht;const dt=new Array(lt*2);for(ht=0,ct=0;ct<lt;){let ft=rt[ct++];if(ft<128){dt[ht++]=ft;continue}let ut=_utf8len[ft];if(ut>4){dt[ht++]=65533,ct+=ut-1;continue}for(ft&=ut===2?31:ut===3?15:7;ut>1&&ct<lt;)ft=ft<<6|rt[ct++]&63,ut--;if(ut>1){dt[ht++]=65533;continue}ft<65536?dt[ht++]=ft:(ft-=65536,dt[ht++]=55296|ft>>10&1023,dt[ht++]=56320|ft&1023)}return buf2binstring(dt,ht)},utf8border=(rt,it)=>{it=it||rt.length,it>rt.length&&(it=rt.length);let lt=it-1;for(;lt>=0&&(rt[lt]&192)===128;)lt--;return lt<0||lt===0?it:lt+_utf8len[rt[lt]]>it?lt:it},strings={string2buf,buf2string,utf8border};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream;const toString$1=Object.prototype.toString,{Z_NO_FLUSH:Z_NO_FLUSH$1,Z_SYNC_FLUSH,Z_FULL_FLUSH,Z_FINISH:Z_FINISH$2,Z_OK:Z_OK$2,Z_STREAM_END:Z_STREAM_END$2,Z_DEFAULT_COMPRESSION,Z_DEFAULT_STRATEGY,Z_DEFLATED:Z_DEFLATED$1}=constants$2;function Deflate$1(rt){this.options=common.assign({level:Z_DEFAULT_COMPRESSION,method:Z_DEFLATED$1,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY},rt||{});let it=this.options;it.raw&&it.windowBits>0?it.windowBits=-it.windowBits:it.gzip&&it.windowBits>0&&it.windowBits<16&&(it.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let lt=deflate_1$2.deflateInit2(this.strm,it.level,it.method,it.windowBits,it.memLevel,it.strategy);if(lt!==Z_OK$2)throw new Error(messages[lt]);if(it.header&&deflate_1$2.deflateSetHeader(this.strm,it.header),it.dictionary){let ct;if(typeof it.dictionary=="string"?ct=strings.string2buf(it.dictionary):toString$1.call(it.dictionary)==="[object ArrayBuffer]"?ct=new Uint8Array(it.dictionary):ct=it.dictionary,lt=deflate_1$2.deflateSetDictionary(this.strm,ct),lt!==Z_OK$2)throw new Error(messages[lt]);this._dict_set=!0}}Deflate$1.prototype.push=function(rt,it){const lt=this.strm,ct=this.options.chunkSize;let ht,dt;if(this.ended)return!1;for(it===~~it?dt=it:dt=it===!0?Z_FINISH$2:Z_NO_FLUSH$1,typeof rt=="string"?lt.input=strings.string2buf(rt):toString$1.call(rt)==="[object ArrayBuffer]"?lt.input=new Uint8Array(rt):lt.input=rt,lt.next_in=0,lt.avail_in=lt.input.length;;){if(lt.avail_out===0&&(lt.output=new Uint8Array(ct),lt.next_out=0,lt.avail_out=ct),(dt===Z_SYNC_FLUSH||dt===Z_FULL_FLUSH)&&lt.avail_out<=6){this.onData(lt.output.subarray(0,lt.next_out)),lt.avail_out=0;continue}if(ht=deflate_1$2.deflate(lt,dt),ht===Z_STREAM_END$2)return lt.next_out>0&&this.onData(lt.output.subarray(0,lt.next_out)),ht=deflate_1$2.deflateEnd(this.strm),this.onEnd(ht),this.ended=!0,ht===Z_OK$2;if(lt.avail_out===0){this.onData(lt.output);continue}if(dt>0&&lt.next_out>0){this.onData(lt.output.subarray(0,lt.next_out)),lt.avail_out=0;continue}if(lt.avail_in===0)break}return!0};Deflate$1.prototype.onData=function(rt){this.chunks.push(rt)};Deflate$1.prototype.onEnd=function(rt){rt===Z_OK$2&&(this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=rt,this.msg=this.strm.msg};function deflate$1(rt,it){const lt=new Deflate$1(it);if(lt.push(rt,!0),lt.err)throw lt.msg||messages[lt.err];return lt.result}var deflate_2=deflate$1,deflate_1$1={deflate:deflate_2};const BAD$1=16209,TYPE$1=16191;var inffast=function rt(it,lt){let ct,ht,dt,ft,ut,pt,gt,mt,_t,yt,bt,xt,wt,Ct,St,Tt,vt,kt,Et,Lt,At,It,Bt,Dt;const Rt=it.state;ct=it.next_in,Bt=it.input,ht=ct+(it.avail_in-5),dt=it.next_out,Dt=it.output,ft=dt-(lt-it.avail_out),ut=dt+(it.avail_out-257),pt=Rt.dmax,gt=Rt.wsize,mt=Rt.whave,_t=Rt.wnext,yt=Rt.window,bt=Rt.hold,xt=Rt.bits,wt=Rt.lencode,Ct=Rt.distcode,St=(1<<Rt.lenbits)-1,Tt=(1<<Rt.distbits)-1;t:do{xt<15&&(bt+=Bt[ct++]<<xt,xt+=8,bt+=Bt[ct++]<<xt,xt+=8),vt=wt[bt&St];e:for(;;){if(kt=vt>>>24,bt>>>=kt,xt-=kt,kt=vt>>>16&255,kt===0)Dt[dt++]=vt&65535;else if(kt&16){Et=vt&65535,kt&=15,kt&&(xt<kt&&(bt+=Bt[ct++]<<xt,xt+=8),Et+=bt&(1<<kt)-1,bt>>>=kt,xt-=kt),xt<15&&(bt+=Bt[ct++]<<xt,xt+=8,bt+=Bt[ct++]<<xt,xt+=8),vt=Ct[bt&Tt];r:for(;;){if(kt=vt>>>24,bt>>>=kt,xt-=kt,kt=vt>>>16&255,kt&16){if(Lt=vt&65535,kt&=15,xt<kt&&(bt+=Bt[ct++]<<xt,xt+=8,xt<kt&&(bt+=Bt[ct++]<<xt,xt+=8)),Lt+=bt&(1<<kt)-1,Lt>pt){it.msg="invalid distance too far back",Rt.mode=BAD$1;break t}if(bt>>>=kt,xt-=kt,kt=dt-ft,Lt>kt){if(kt=Lt-kt,kt>mt&&Rt.sane){it.msg="invalid distance too far back",Rt.mode=BAD$1;break t}if(At=0,It=yt,_t===0){if(At+=gt-kt,kt<Et){Et-=kt;do Dt[dt++]=yt[At++];while(--kt);At=dt-Lt,It=Dt}}else if(_t<kt){if(At+=gt+_t-kt,kt-=_t,kt<Et){Et-=kt;do Dt[dt++]=yt[At++];while(--kt);if(At=0,_t<Et){kt=_t,Et-=kt;do Dt[dt++]=yt[At++];while(--kt);At=dt-Lt,It=Dt}}}else if(At+=_t-kt,kt<Et){Et-=kt;do Dt[dt++]=yt[At++];while(--kt);At=dt-Lt,It=Dt}for(;Et>2;)Dt[dt++]=It[At++],Dt[dt++]=It[At++],Dt[dt++]=It[At++],Et-=3;Et&&(Dt[dt++]=It[At++],Et>1&&(Dt[dt++]=It[At++]))}else{At=dt-Lt;do Dt[dt++]=Dt[At++],Dt[dt++]=Dt[At++],Dt[dt++]=Dt[At++],Et-=3;while(Et>2);Et&&(Dt[dt++]=Dt[At++],Et>1&&(Dt[dt++]=Dt[At++]))}}else if((kt&64)===0){vt=Ct[(vt&65535)+(bt&(1<<kt)-1)];continue r}else{it.msg="invalid distance code",Rt.mode=BAD$1;break t}break}}else if((kt&64)===0){vt=wt[(vt&65535)+(bt&(1<<kt)-1)];continue e}else if(kt&32){Rt.mode=TYPE$1;break t}else{it.msg="invalid literal/length code",Rt.mode=BAD$1;break t}break}}while(ct<ht&&dt<ut);Et=xt>>3,ct-=Et,xt-=Et<<3,bt&=(1<<xt)-1,it.next_in=ct,it.next_out=dt,it.avail_in=ct<ht?5+(ht-ct):5-(ct-ht),it.avail_out=dt<ut?257+(ut-dt):257-(dt-ut),Rt.hold=bt,Rt.bits=xt};const MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),inflate_table=(rt,it,lt,ct,ht,dt,ft,ut)=>{const pt=ut.bits;let gt=0,mt=0,_t=0,yt=0,bt=0,xt=0,wt=0,Ct=0,St=0,Tt=0,vt,kt,Et,Lt,At,It=null,Bt;const Dt=new Uint16Array(MAXBITS+1),Rt=new Uint16Array(MAXBITS+1);let Pt=null,Ht,Nt,Ot;for(gt=0;gt<=MAXBITS;gt++)Dt[gt]=0;for(mt=0;mt<ct;mt++)Dt[it[lt+mt]]++;for(bt=pt,yt=MAXBITS;yt>=1&&Dt[yt]===0;yt--);if(bt>yt&&(bt=yt),yt===0)return ht[dt++]=1<<24|64<<16|0,ht[dt++]=1<<24|64<<16|0,ut.bits=1,0;for(_t=1;_t<yt&&Dt[_t]===0;_t++);for(bt<_t&&(bt=_t),Ct=1,gt=1;gt<=MAXBITS;gt++)if(Ct<<=1,Ct-=Dt[gt],Ct<0)return-1;if(Ct>0&&(rt===CODES$1||yt!==1))return-1;for(Rt[1]=0,gt=1;gt<MAXBITS;gt++)Rt[gt+1]=Rt[gt]+Dt[gt];for(mt=0;mt<ct;mt++)it[lt+mt]!==0&&(ft[Rt[it[lt+mt]]++]=mt);if(rt===CODES$1?(It=Pt=ft,Bt=20):rt===LENS$1?(It=lbase,Pt=lext,Bt=257):(It=dbase,Pt=dext,Bt=0),Tt=0,mt=0,gt=_t,At=dt,xt=bt,wt=0,Et=-1,St=1<<bt,Lt=St-1,rt===LENS$1&&St>ENOUGH_LENS$1||rt===DISTS$1&&St>ENOUGH_DISTS$1)return 1;for(;;){Ht=gt-wt,ft[mt]+1<Bt?(Nt=0,Ot=ft[mt]):ft[mt]>=Bt?(Nt=Pt[ft[mt]-Bt],Ot=It[ft[mt]-Bt]):(Nt=96,Ot=0),vt=1<<gt-wt,kt=1<<xt,_t=kt;do kt-=vt,ht[At+(Tt>>wt)+kt]=Ht<<24|Nt<<16|Ot|0;while(kt!==0);for(vt=1<<gt-1;Tt&vt;)vt>>=1;if(vt!==0?(Tt&=vt-1,Tt+=vt):Tt=0,mt++,--Dt[gt]===0){if(gt===yt)break;gt=it[lt+ft[mt]]}if(gt>bt&&(Tt&Lt)!==Et){for(wt===0&&(wt=bt),At+=_t,xt=gt-wt,Ct=1<<xt;xt+wt<yt&&(Ct-=Dt[xt+wt],!(Ct<=0));)xt++,Ct<<=1;if(St+=1<<xt,rt===LENS$1&&St>ENOUGH_LENS$1||rt===DISTS$1&&St>ENOUGH_DISTS$1)return 1;Et=Tt&Lt,ht[Et]=bt<<24|xt<<16|At-dt|0}}return Tt!==0&&(ht[At+Tt]=gt-wt<<24|64<<16|0),ut.bits=bt,0};var inftrees=inflate_table;const CODES=0,LENS=1,DISTS=2,{Z_FINISH:Z_FINISH$1,Z_BLOCK,Z_TREES,Z_OK:Z_OK$1,Z_STREAM_END:Z_STREAM_END$1,Z_NEED_DICT:Z_NEED_DICT$1,Z_STREAM_ERROR:Z_STREAM_ERROR$1,Z_DATA_ERROR:Z_DATA_ERROR$1,Z_MEM_ERROR:Z_MEM_ERROR$1,Z_BUF_ERROR,Z_DEFLATED}=constants$2,HEAD=16180,FLAGS=16181,TIME=16182,OS=16183,EXLEN=16184,EXTRA=16185,NAME=16186,COMMENT=16187,HCRC=16188,DICTID=16189,DICT=16190,TYPE=16191,TYPEDO=16192,STORED=16193,COPY_=16194,COPY=16195,TABLE=16196,LENLENS=16197,CODELENS=16198,LEN_=16199,LEN=16200,LENEXT=16201,DIST=16202,DISTEXT=16203,MATCH=16204,LIT=16205,CHECK=16206,LENGTH=16207,DONE=16208,BAD=16209,MEM=16210,SYNC=16211,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,zswap32=rt=>(rt>>>24&255)+(rt>>>8&65280)+((rt&65280)<<8)+((rt&255)<<24);function InflateState(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const inflateStateCheck=rt=>{if(!rt)return 1;const it=rt.state;return!it||it.strm!==rt||it.mode<HEAD||it.mode>SYNC?1:0},inflateResetKeep=rt=>{if(inflateStateCheck(rt))return Z_STREAM_ERROR$1;const it=rt.state;return rt.total_in=rt.total_out=it.total=0,rt.msg="",it.wrap&&(rt.adler=it.wrap&1),it.mode=HEAD,it.last=0,it.havedict=0,it.flags=-1,it.dmax=32768,it.head=null,it.hold=0,it.bits=0,it.lencode=it.lendyn=new Int32Array(ENOUGH_LENS),it.distcode=it.distdyn=new Int32Array(ENOUGH_DISTS),it.sane=1,it.back=-1,Z_OK$1},inflateReset=rt=>{if(inflateStateCheck(rt))return Z_STREAM_ERROR$1;const it=rt.state;return it.wsize=0,it.whave=0,it.wnext=0,inflateResetKeep(rt)},inflateReset2=(rt,it)=>{let lt;if(inflateStateCheck(rt))return Z_STREAM_ERROR$1;const ct=rt.state;return it<0?(lt=0,it=-it):(lt=(it>>4)+5,it<48&&(it&=15)),it&&(it<8||it>15)?Z_STREAM_ERROR$1:(ct.window!==null&&ct.wbits!==it&&(ct.window=null),ct.wrap=lt,ct.wbits=it,inflateReset(rt))},inflateInit2=(rt,it)=>{if(!rt)return Z_STREAM_ERROR$1;const lt=new InflateState;rt.state=lt,lt.strm=rt,lt.window=null,lt.mode=HEAD;const ct=inflateReset2(rt,it);return ct!==Z_OK$1&&(rt.state=null),ct},inflateInit=rt=>inflateInit2(rt,DEF_WBITS);let virgin=!0,lenfix,distfix;const fixedtables=rt=>{if(virgin){lenfix=new Int32Array(512),distfix=new Int32Array(32);let it=0;for(;it<144;)rt.lens[it++]=8;for(;it<256;)rt.lens[it++]=9;for(;it<280;)rt.lens[it++]=7;for(;it<288;)rt.lens[it++]=8;for(inftrees(LENS,rt.lens,0,288,lenfix,0,rt.work,{bits:9}),it=0;it<32;)rt.lens[it++]=5;inftrees(DISTS,rt.lens,0,32,distfix,0,rt.work,{bits:5}),virgin=!1}rt.lencode=lenfix,rt.lenbits=9,rt.distcode=distfix,rt.distbits=5},updatewindow=(rt,it,lt,ct)=>{let ht;const dt=rt.state;return dt.window===null&&(dt.wsize=1<<dt.wbits,dt.wnext=0,dt.whave=0,dt.window=new Uint8Array(dt.wsize)),ct>=dt.wsize?(dt.window.set(it.subarray(lt-dt.wsize,lt),0),dt.wnext=0,dt.whave=dt.wsize):(ht=dt.wsize-dt.wnext,ht>ct&&(ht=ct),dt.window.set(it.subarray(lt-ct,lt-ct+ht),dt.wnext),ct-=ht,ct?(dt.window.set(it.subarray(lt-ct,lt),0),dt.wnext=ct,dt.whave=dt.wsize):(dt.wnext+=ht,dt.wnext===dt.wsize&&(dt.wnext=0),dt.whave<dt.wsize&&(dt.whave+=ht))),0},inflate$2=(rt,it)=>{let lt,ct,ht,dt,ft,ut,pt,gt,mt,_t,yt,bt,xt,wt,Ct=0,St,Tt,vt,kt,Et,Lt,At,It;const Bt=new Uint8Array(4);let Dt,Rt;const Pt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(inflateStateCheck(rt)||!rt.output||!rt.input&&rt.avail_in!==0)return Z_STREAM_ERROR$1;lt=rt.state,lt.mode===TYPE&&(lt.mode=TYPEDO),ft=rt.next_out,ht=rt.output,pt=rt.avail_out,dt=rt.next_in,ct=rt.input,ut=rt.avail_in,gt=lt.hold,mt=lt.bits,_t=ut,yt=pt,It=Z_OK$1;t:for(;;)switch(lt.mode){case HEAD:if(lt.wrap===0){lt.mode=TYPEDO;break}for(;mt<16;){if(ut===0)break t;ut--,gt+=ct[dt++]<<mt,mt+=8}if(lt.wrap&2&&gt===35615){lt.wbits===0&&(lt.wbits=15),lt.check=0,Bt[0]=gt&255,Bt[1]=gt>>>8&255,lt.check=crc32_1(lt.check,Bt,2,0),gt=0,mt=0,lt.mode=FLAGS;break}if(lt.head&&(lt.head.done=!1),!(lt.wrap&1)||(((gt&255)<<8)+(gt>>8))%31){rt.msg="incorrect header check",lt.mode=BAD;break}if((gt&15)!==Z_DEFLATED){rt.msg="unknown compression method",lt.mode=BAD;break}if(gt>>>=4,mt-=4,At=(gt&15)+8,lt.wbits===0&&(lt.wbits=At),At>15||At>lt.wbits){rt.msg="invalid window size",lt.mode=BAD;break}lt.dmax=1<<lt.wbits,lt.flags=0,rt.adler=lt.check=1,lt.mode=gt&512?DICTID:TYPE,gt=0,mt=0;break;case FLAGS:for(;mt<16;){if(ut===0)break t;ut--,gt+=ct[dt++]<<mt,mt+=8}if(lt.flags=gt,(lt.flags&255)!==Z_DEFLATED){rt.msg="unknown compression method",lt.mode=BAD;break}if(lt.flags&57344){rt.msg="unknown header flags set",lt.mode=BAD;break}lt.head&&(lt.head.text=gt>>8&1),lt.flags&512&&lt.wrap&4&&(Bt[0]=gt&255,Bt[1]=gt>>>8&255,lt.check=crc32_1(lt.check,Bt,2,0)),gt=0,mt=0,lt.mode=TIME;case TIME:for(;mt<32;){if(ut===0)break t;ut--,gt+=ct[dt++]<<mt,mt+=8}lt.head&&(lt.head.time=gt),lt.flags&512&&lt.wrap&4&&(Bt[0]=gt&255,Bt[1]=gt>>>8&255,Bt[2]=gt>>>16&255,Bt[3]=gt>>>24&255,lt.check=crc32_1(lt.check,Bt,4,0)),gt=0,mt=0,lt.mode=OS;case OS:for(;mt<16;){if(ut===0)break t;ut--,gt+=ct[dt++]<<mt,mt+=8}lt.head&&(lt.head.xflags=gt&255,lt.head.os=gt>>8),lt.flags&512&&lt.wrap&4&&(Bt[0]=gt&255,Bt[1]=gt>>>8&255,lt.check=crc32_1(lt.check,Bt,2,0)),gt=0,mt=0,lt.mode=EXLEN;case EXLEN:if(lt.flags&1024){for(;mt<16;){if(ut===0)break t;ut--,gt+=ct[dt++]<<mt,mt+=8}lt.length=gt,lt.head&&(lt.head.extra_len=gt),lt.flags&512&&lt.wrap&4&&(Bt[0]=gt&255,Bt[1]=gt>>>8&255,lt.check=crc32_1(lt.check,Bt,2,0)),gt=0,mt=0}else lt.head&&(lt.head.extra=null);lt.mode=EXTRA;case EXTRA:if(lt.flags&1024&&(bt=lt.length,bt>ut&&(bt=ut),bt&&(lt.head&&(At=lt.head.extra_len-lt.length,lt.head.extra||(lt.head.extra=new Uint8Array(lt.head.extra_len)),lt.head.extra.set(ct.subarray(dt,dt+bt),At)),lt.flags&512&&lt.wrap&4&&(lt.check=crc32_1(lt.check,ct,bt,dt)),ut-=bt,dt+=bt,lt.length-=bt),lt.length))break t;lt.length=0,lt.mode=NAME;case NAME:if(lt.flags&2048){if(ut===0)break t;bt=0;do At=ct[dt+bt++],lt.head&&At&&lt.length<65536&&(lt.head.name+=String.fromCharCode(At));while(At&&bt<ut);if(lt.flags&512&&lt.wrap&4&&(lt.check=crc32_1(lt.check,ct,bt,dt)),ut-=bt,dt+=bt,At)break t}else lt.head&&(lt.head.name=null);lt.length=0,lt.mode=COMMENT;case COMMENT:if(lt.flags&4096){if(ut===0)break t;bt=0;do At=ct[dt+bt++],lt.head&&At&&lt.length<65536&&(lt.head.comment+=String.fromCharCode(At));while(At&&bt<ut);if(lt.flags&512&&lt.wrap&4&&(lt.check=crc32_1(lt.check,ct,bt,dt)),ut-=bt,dt+=bt,At)break t}else lt.head&&(lt.head.comment=null);lt.mode=HCRC;case HCRC:if(lt.flags&512){for(;mt<16;){if(ut===0)break t;ut--,gt+=ct[dt++]<<mt,mt+=8}if(lt.wrap&4&&gt!==(lt.check&65535)){rt.msg="header crc mismatch",lt.mode=BAD;break}gt=0,mt=0}lt.head&&(lt.head.hcrc=lt.flags>>9&1,lt.head.done=!0),rt.adler=lt.check=0,lt.mode=TYPE;break;case DICTID:for(;mt<32;){if(ut===0)break t;ut--,gt+=ct[dt++]<<mt,mt+=8}rt.adler=lt.check=zswap32(gt),gt=0,mt=0,lt.mode=DICT;case DICT:if(lt.havedict===0)return rt.next_out=ft,rt.avail_out=pt,rt.next_in=dt,rt.avail_in=ut,lt.hold=gt,lt.bits=mt,Z_NEED_DICT$1;rt.adler=lt.check=1,lt.mode=TYPE;case TYPE:if(it===Z_BLOCK||it===Z_TREES)break t;case TYPEDO:if(lt.last){gt>>>=mt&7,mt-=mt&7,lt.mode=CHECK;break}for(;mt<3;){if(ut===0)break t;ut--,gt+=ct[dt++]<<mt,mt+=8}switch(lt.last=gt&1,gt>>>=1,mt-=1,gt&3){case 0:lt.mode=STORED;break;case 1:if(fixedtables(lt),lt.mode=LEN_,it===Z_TREES){gt>>>=2,mt-=2;break t}break;case 2:lt.mode=TABLE;break;case 3:rt.msg="invalid block type",lt.mode=BAD}gt>>>=2,mt-=2;break;case STORED:for(gt>>>=mt&7,mt-=mt&7;mt<32;){if(ut===0)break t;ut--,gt+=ct[dt++]<<mt,mt+=8}if((gt&65535)!==(gt>>>16^65535)){rt.msg="invalid stored block lengths",lt.mode=BAD;break}if(lt.length=gt&65535,gt=0,mt=0,lt.mode=COPY_,it===Z_TREES)break t;case COPY_:lt.mode=COPY;case COPY:if(bt=lt.length,bt){if(bt>ut&&(bt=ut),bt>pt&&(bt=pt),bt===0)break t;ht.set(ct.subarray(dt,dt+bt),ft),ut-=bt,dt+=bt,pt-=bt,ft+=bt,lt.length-=bt;break}lt.mode=TYPE;break;case TABLE:for(;mt<14;){if(ut===0)break t;ut--,gt+=ct[dt++]<<mt,mt+=8}if(lt.nlen=(gt&31)+257,gt>>>=5,mt-=5,lt.ndist=(gt&31)+1,gt>>>=5,mt-=5,lt.ncode=(gt&15)+4,gt>>>=4,mt-=4,lt.nlen>286||lt.ndist>30){rt.msg="too many length or distance symbols",lt.mode=BAD;break}lt.have=0,lt.mode=LENLENS;case LENLENS:for(;lt.have<lt.ncode;){for(;mt<3;){if(ut===0)break t;ut--,gt+=ct[dt++]<<mt,mt+=8}lt.lens[Pt[lt.have++]]=gt&7,gt>>>=3,mt-=3}for(;lt.have<19;)lt.lens[Pt[lt.have++]]=0;if(lt.lencode=lt.lendyn,lt.lenbits=7,Dt={bits:lt.lenbits},It=inftrees(CODES,lt.lens,0,19,lt.lencode,0,lt.work,Dt),lt.lenbits=Dt.bits,It){rt.msg="invalid code lengths set",lt.mode=BAD;break}lt.have=0,lt.mode=CODELENS;case CODELENS:for(;lt.have<lt.nlen+lt.ndist;){for(;Ct=lt.lencode[gt&(1<<lt.lenbits)-1],St=Ct>>>24,Tt=Ct>>>16&255,vt=Ct&65535,!(St<=mt);){if(ut===0)break t;ut--,gt+=ct[dt++]<<mt,mt+=8}if(vt<16)gt>>>=St,mt-=St,lt.lens[lt.have++]=vt;else{if(vt===16){for(Rt=St+2;mt<Rt;){if(ut===0)break t;ut--,gt+=ct[dt++]<<mt,mt+=8}if(gt>>>=St,mt-=St,lt.have===0){rt.msg="invalid bit length repeat",lt.mode=BAD;break}At=lt.lens[lt.have-1],bt=3+(gt&3),gt>>>=2,mt-=2}else if(vt===17){for(Rt=St+3;mt<Rt;){if(ut===0)break t;ut--,gt+=ct[dt++]<<mt,mt+=8}gt>>>=St,mt-=St,At=0,bt=3+(gt&7),gt>>>=3,mt-=3}else{for(Rt=St+7;mt<Rt;){if(ut===0)break t;ut--,gt+=ct[dt++]<<mt,mt+=8}gt>>>=St,mt-=St,At=0,bt=11+(gt&127),gt>>>=7,mt-=7}if(lt.have+bt>lt.nlen+lt.ndist){rt.msg="invalid bit length repeat",lt.mode=BAD;break}for(;bt--;)lt.lens[lt.have++]=At}}if(lt.mode===BAD)break;if(lt.lens[256]===0){rt.msg="invalid code -- missing end-of-block",lt.mode=BAD;break}if(lt.lenbits=9,Dt={bits:lt.lenbits},It=inftrees(LENS,lt.lens,0,lt.nlen,lt.lencode,0,lt.work,Dt),lt.lenbits=Dt.bits,It){rt.msg="invalid literal/lengths set",lt.mode=BAD;break}if(lt.distbits=6,lt.distcode=lt.distdyn,Dt={bits:lt.distbits},It=inftrees(DISTS,lt.lens,lt.nlen,lt.ndist,lt.distcode,0,lt.work,Dt),lt.distbits=Dt.bits,It){rt.msg="invalid distances set",lt.mode=BAD;break}if(lt.mode=LEN_,it===Z_TREES)break t;case LEN_:lt.mode=LEN;case LEN:if(ut>=6&&pt>=258){rt.next_out=ft,rt.avail_out=pt,rt.next_in=dt,rt.avail_in=ut,lt.hold=gt,lt.bits=mt,inffast(rt,yt),ft=rt.next_out,ht=rt.output,pt=rt.avail_out,dt=rt.next_in,ct=rt.input,ut=rt.avail_in,gt=lt.hold,mt=lt.bits,lt.mode===TYPE&&(lt.back=-1);break}for(lt.back=0;Ct=lt.lencode[gt&(1<<lt.lenbits)-1],St=Ct>>>24,Tt=Ct>>>16&255,vt=Ct&65535,!(St<=mt);){if(ut===0)break t;ut--,gt+=ct[dt++]<<mt,mt+=8}if(Tt&&(Tt&240)===0){for(kt=St,Et=Tt,Lt=vt;Ct=lt.lencode[Lt+((gt&(1<<kt+Et)-1)>>kt)],St=Ct>>>24,Tt=Ct>>>16&255,vt=Ct&65535,!(kt+St<=mt);){if(ut===0)break t;ut--,gt+=ct[dt++]<<mt,mt+=8}gt>>>=kt,mt-=kt,lt.back+=kt}if(gt>>>=St,mt-=St,lt.back+=St,lt.length=vt,Tt===0){lt.mode=LIT;break}if(Tt&32){lt.back=-1,lt.mode=TYPE;break}if(Tt&64){rt.msg="invalid literal/length code",lt.mode=BAD;break}lt.extra=Tt&15,lt.mode=LENEXT;case LENEXT:if(lt.extra){for(Rt=lt.extra;mt<Rt;){if(ut===0)break t;ut--,gt+=ct[dt++]<<mt,mt+=8}lt.length+=gt&(1<<lt.extra)-1,gt>>>=lt.extra,mt-=lt.extra,lt.back+=lt.extra}lt.was=lt.length,lt.mode=DIST;case DIST:for(;Ct=lt.distcode[gt&(1<<lt.distbits)-1],St=Ct>>>24,Tt=Ct>>>16&255,vt=Ct&65535,!(St<=mt);){if(ut===0)break t;ut--,gt+=ct[dt++]<<mt,mt+=8}if((Tt&240)===0){for(kt=St,Et=Tt,Lt=vt;Ct=lt.distcode[Lt+((gt&(1<<kt+Et)-1)>>kt)],St=Ct>>>24,Tt=Ct>>>16&255,vt=Ct&65535,!(kt+St<=mt);){if(ut===0)break t;ut--,gt+=ct[dt++]<<mt,mt+=8}gt>>>=kt,mt-=kt,lt.back+=kt}if(gt>>>=St,mt-=St,lt.back+=St,Tt&64){rt.msg="invalid distance code",lt.mode=BAD;break}lt.offset=vt,lt.extra=Tt&15,lt.mode=DISTEXT;case DISTEXT:if(lt.extra){for(Rt=lt.extra;mt<Rt;){if(ut===0)break t;ut--,gt+=ct[dt++]<<mt,mt+=8}lt.offset+=gt&(1<<lt.extra)-1,gt>>>=lt.extra,mt-=lt.extra,lt.back+=lt.extra}if(lt.offset>lt.dmax){rt.msg="invalid distance too far back",lt.mode=BAD;break}lt.mode=MATCH;case MATCH:if(pt===0)break t;if(bt=yt-pt,lt.offset>bt){if(bt=lt.offset-bt,bt>lt.whave&&lt.sane){rt.msg="invalid distance too far back",lt.mode=BAD;break}bt>lt.wnext?(bt-=lt.wnext,xt=lt.wsize-bt):xt=lt.wnext-bt,bt>lt.length&&(bt=lt.length),wt=lt.window}else wt=ht,xt=ft-lt.offset,bt=lt.length;bt>pt&&(bt=pt),pt-=bt,lt.length-=bt;do ht[ft++]=wt[xt++];while(--bt);lt.length===0&&(lt.mode=LEN);break;case LIT:if(pt===0)break t;ht[ft++]=lt.length,pt--,lt.mode=LEN;break;case CHECK:if(lt.wrap){for(;mt<32;){if(ut===0)break t;ut--,gt|=ct[dt++]<<mt,mt+=8}if(yt-=pt,rt.total_out+=yt,lt.total+=yt,lt.wrap&4&&yt&&(rt.adler=lt.check=lt.flags?crc32_1(lt.check,ht,yt,ft-yt):adler32_1(lt.check,ht,yt,ft-yt)),yt=pt,lt.wrap&4&&(lt.flags?gt:zswap32(gt))!==lt.check){rt.msg="incorrect data check",lt.mode=BAD;break}gt=0,mt=0}lt.mode=LENGTH;case LENGTH:if(lt.wrap&&lt.flags){for(;mt<32;){if(ut===0)break t;ut--,gt+=ct[dt++]<<mt,mt+=8}if(lt.wrap&4&&gt!==(lt.total&4294967295)){rt.msg="incorrect length check",lt.mode=BAD;break}gt=0,mt=0}lt.mode=DONE;case DONE:It=Z_STREAM_END$1;break t;case BAD:It=Z_DATA_ERROR$1;break t;case MEM:return Z_MEM_ERROR$1;case SYNC:default:return Z_STREAM_ERROR$1}return rt.next_out=ft,rt.avail_out=pt,rt.next_in=dt,rt.avail_in=ut,lt.hold=gt,lt.bits=mt,(lt.wsize||yt!==rt.avail_out&&lt.mode<BAD&&(lt.mode<CHECK||it!==Z_FINISH$1))&&updatewindow(rt,rt.output,rt.next_out,yt-rt.avail_out),_t-=rt.avail_in,yt-=rt.avail_out,rt.total_in+=_t,rt.total_out+=yt,lt.total+=yt,lt.wrap&4&&yt&&(rt.adler=lt.check=lt.flags?crc32_1(lt.check,ht,yt,rt.next_out-yt):adler32_1(lt.check,ht,yt,rt.next_out-yt)),rt.data_type=lt.bits+(lt.last?64:0)+(lt.mode===TYPE?128:0)+(lt.mode===LEN_||lt.mode===COPY_?256:0),(_t===0&&yt===0||it===Z_FINISH$1)&&It===Z_OK$1&&(It=Z_BUF_ERROR),It},inflateEnd=rt=>{if(inflateStateCheck(rt))return Z_STREAM_ERROR$1;let it=rt.state;return it.window&&(it.window=null),rt.state=null,Z_OK$1},inflateGetHeader=(rt,it)=>{if(inflateStateCheck(rt))return Z_STREAM_ERROR$1;const lt=rt.state;return(lt.wrap&2)===0?Z_STREAM_ERROR$1:(lt.head=it,it.done=!1,Z_OK$1)},inflateSetDictionary=(rt,it)=>{const lt=it.length;let ct,ht,dt;return inflateStateCheck(rt)||(ct=rt.state,ct.wrap!==0&&ct.mode!==DICT)?Z_STREAM_ERROR$1:ct.mode===DICT&&(ht=1,ht=adler32_1(ht,it,lt,0),ht!==ct.check)?Z_DATA_ERROR$1:(dt=updatewindow(rt,it,lt,lt),dt?(ct.mode=MEM,Z_MEM_ERROR$1):(ct.havedict=1,Z_OK$1))};var inflateReset_1=inflateReset,inflateReset2_1=inflateReset2,inflateResetKeep_1=inflateResetKeep,inflateInit_1=inflateInit,inflateInit2_1=inflateInit2,inflate_2$1=inflate$2,inflateEnd_1=inflateEnd,inflateGetHeader_1=inflateGetHeader,inflateSetDictionary_1=inflateSetDictionary,inflateInfo="pako inflate (from Nodeca project)",inflate_1$2={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2$1,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo};function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader=GZheader;const toString=Object.prototype.toString,{Z_NO_FLUSH,Z_FINISH,Z_OK,Z_STREAM_END,Z_NEED_DICT,Z_STREAM_ERROR,Z_DATA_ERROR,Z_MEM_ERROR}=constants$2;function Inflate$1(rt){this.options=common.assign({chunkSize:1024*64,windowBits:15,to:""},rt||{});const it=this.options;it.raw&&it.windowBits>=0&&it.windowBits<16&&(it.windowBits=-it.windowBits,it.windowBits===0&&(it.windowBits=-15)),it.windowBits>=0&&it.windowBits<16&&!(rt&&rt.windowBits)&&(it.windowBits+=32),it.windowBits>15&&it.windowBits<48&&(it.windowBits&15)===0&&(it.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let lt=inflate_1$2.inflateInit2(this.strm,it.windowBits);if(lt!==Z_OK)throw new Error(messages[lt]);if(this.header=new gzheader,inflate_1$2.inflateGetHeader(this.strm,this.header),it.dictionary&&(typeof it.dictionary=="string"?it.dictionary=strings.string2buf(it.dictionary):toString.call(it.dictionary)==="[object ArrayBuffer]"&&(it.dictionary=new Uint8Array(it.dictionary)),it.raw&&(lt=inflate_1$2.inflateSetDictionary(this.strm,it.dictionary),lt!==Z_OK)))throw new Error(messages[lt])}Inflate$1.prototype.push=function(rt,it){const lt=this.strm,ct=this.options.chunkSize,ht=this.options.dictionary;let dt,ft,ut;if(this.ended)return!1;for(it===~~it?ft=it:ft=it===!0?Z_FINISH:Z_NO_FLUSH,toString.call(rt)==="[object ArrayBuffer]"?lt.input=new Uint8Array(rt):lt.input=rt,lt.next_in=0,lt.avail_in=lt.input.length;;){for(lt.avail_out===0&&(lt.output=new Uint8Array(ct),lt.next_out=0,lt.avail_out=ct),dt=inflate_1$2.inflate(lt,ft),dt===Z_NEED_DICT&&ht&&(dt=inflate_1$2.inflateSetDictionary(lt,ht),dt===Z_OK?dt=inflate_1$2.inflate(lt,ft):dt===Z_DATA_ERROR&&(dt=Z_NEED_DICT));lt.avail_in>0&&dt===Z_STREAM_END&&lt.state.wrap>0&&rt[lt.next_in]!==0;)inflate_1$2.inflateReset(lt),dt=inflate_1$2.inflate(lt,ft);switch(dt){case Z_STREAM_ERROR:case Z_DATA_ERROR:case Z_NEED_DICT:case Z_MEM_ERROR:return this.onEnd(dt),this.ended=!0,!1}if(ut=lt.avail_out,lt.next_out&&(lt.avail_out===0||dt===Z_STREAM_END))if(this.options.to==="string"){let pt=strings.utf8border(lt.output,lt.next_out),gt=lt.next_out-pt,mt=strings.buf2string(lt.output,pt);lt.next_out=gt,lt.avail_out=ct-gt,gt&&lt.output.set(lt.output.subarray(pt,pt+gt),0),this.onData(mt)}else this.onData(lt.output.length===lt.next_out?lt.output:lt.output.subarray(0,lt.next_out));if(!(dt===Z_OK&&ut===0)){if(dt===Z_STREAM_END)return dt=inflate_1$2.inflateEnd(this.strm),this.onEnd(dt),this.ended=!0,!0;if(lt.avail_in===0)break}}return!0};Inflate$1.prototype.onData=function(rt){this.chunks.push(rt)};Inflate$1.prototype.onEnd=function(rt){rt===Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=rt,this.msg=this.strm.msg};function inflate$1(rt,it){const lt=new Inflate$1(it);if(lt.push(rt),lt.err)throw lt.msg||messages[lt.err];return lt.result}var inflate_2=inflate$1,inflate_1$1={inflate:inflate_2};const{deflate}=deflate_1$1,{inflate}=inflate_1$1;var deflate_1=deflate,inflate_1=inflate;const base64Serde={serialize:rt=>encode(rt,!0),deserialize:rt=>decode(rt)},pakoSerde={serialize:rt=>{const it=new TextEncoder().encode(rt),lt=deflate_1(it,{level:9});return fromUint8Array(lt,!0)},deserialize:rt=>{const it=toUint8Array(rt);return inflate_1(it,{to:"string"})}},serdes={base64:base64Serde,pako:pakoSerde},serializeState=(rt,it="pako")=>{if(!(it in serdes))throw new Error(`Unknown serde type: ${it}`);const lt=JSON.stringify(rt),ct=serdes[it].serialize(lt);return`${it}:${ct}`},deserializeState=rt=>{let it,lt;if(rt.includes(":")){let ht;if([ht,lt]=rt.split(":"),ht in serdes)it=ht;else throw new Error(`Unknown serde type: ${ht}`)}else it="base64",lt=rt;const ct=serdes[it].deserialize(lt);return JSON.parse(ct)},initAnalytics=async()=>{},countLines=rt=>(rt.match(/\n/g)?.length??0)+1,saveStatistics=({code:rt,renderTime:it,isRough:lt,diagramType:ct})=>{if(!ct)return;const ht=countLines(rt);getBucket(ht),getBucket(it)},getBucket=rt=>{const it=[[10,"0-10"],[25,"10-25"],[50,"25-50"],[100,"50-100"],[200,"100-200"],[500,"200-500"],[700,"500-700"],[1e3,"700-1000"],[1500,"1000-1500"],[2500,"1500-2500"],[4500,"2500-4500"],[7e3,"4500-7000"],[1e4,"7000-10000"]];for(const[lt,ct]of it)if(rt<lt)return ct;return"10000+"},logEvent=(rt,it)=>{};var dist={},words={},hasRequiredWords;function requireWords(){return hasRequiredWords||(hasRequiredWords=1,(function(rt){var it=words&&words.__values||function(ct){var ht=typeof Symbol=="function"&&Symbol.iterator,dt=ht&&ct[ht],ft=0;if(dt)return dt.call(ct);if(ct&&typeof ct.length=="number")return{next:function(){return ct&&ft>=ct.length&&(ct=void 0),{value:ct&&ct[ft++],done:!ct}}};throw new TypeError(ht?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(rt,"__esModule",{value:!0}),rt.getWordsByCategory=rt.wordList=void 0,rt.wordList={noun:[{word:"accountant",categories:["profession"]},{word:"ability",categories:["thing"]},{word:"accident",categories:["thing"]},{word:"account",categories:["thing"]},{word:"action",categories:["thing"]},{word:"activity",categories:["thing"]},{word:"actor",categories:["profession"]},{word:"ad",categories:["media"]},{word:"addition",categories:["thing"]},{word:"address",categories:["thing"]},{word:"adult",categories:["people"]},{word:"advantage",categories:["thing"]},{word:"advertisement",categories:["media"]},{word:"afternoon",categories:["time"]},{word:"agency",categories:["thing"]},{word:"agent",categories:["people"]},{word:"air",categories:["thing"]},{word:"airline",categories:["transportation"]},{word:"airplane",categories:["transportation"]},{word:"airport",categories:["transportation","place"]},{word:"alarm",categories:["thing"]},{word:"alligator",categories:["animals"]},{word:"ambulance",categories:["health"]},{word:"analyst",categories:["profession"]},{word:"angle",categories:["thing"]},{word:"animal",categories:["animals"]},{word:"answer",categories:["thing"]},{word:"apartment",categories:["place"]},{word:"apple",categories:["food"]},{word:"application",categories:["thing"]},{word:"appointment",categories:["thing"]},{word:"architect",categories:["profession"]},{word:"argument",categories:["thing"]},{word:"area",categories:["thing"]},{word:"arm",categories:["thing"]},{word:"army",categories:["thing"]},{word:"art",categories:["thing"]},{word:"article",categories:["thing"]},{word:"artist",categories:["profession"]},{word:"australia",categories:["place"]},{word:"author",categories:["profession"]},{word:"autumn",categories:["time"]},{word:"baby",categories:["people","family"]},{word:"baker",categories:["profession"]},{word:"balloon",categories:["thing"]},{word:"banana",categories:["food"]},{word:"barista",categories:["profession"]},{word:"battery",categories:["thing"]},{word:"beach",categories:["place"]},{word:"bear",categories:["animals"]},{word:"beard",categories:["thing"]},{word:"bed",categories:["thing"]},{word:"belgium",categories:["place"]},{word:"bird",categories:["animals"]},{word:"bit",categories:["thing","technology"]},{word:"book",categories:["thing","education"]},{word:"boots",categories:["thing"]},{word:"boy",categories:["people"]},{word:"branch",categories:["thing"]},{word:"breakfast",categories:["thing"]},{word:"brother",categories:["family"]},{word:"businessperson",categories:["people","business"]},{word:"butcher",categories:["profession"]},{word:"byte",categories:["thing","technology"]},{word:"camera",categories:["thing"]},{word:"candle",categories:["thing"]},{word:"car",categories:["transportation"]},{word:"caravan",categories:["transportation"]},{word:"carpenter",categories:["profession"]},{word:"carpet",categories:["thing"]},{word:"cartoon",categories:["media"]},{word:"cat",categories:["animals"]},{word:"chef",categories:["profession"]},{word:"child",categories:["people","family"]},{word:"china",categories:["place"]},{word:"church",categories:["religion"]},{word:"city",categories:["place"]},{word:"coat",categories:["thing"]},{word:"coffeeshop",categories:["place"]},{word:"computer",categories:["thing","technology"]},{word:"continent",categories:["place"]},{word:"controller",categories:["thing","technology"]},{word:"country",categories:["place"]},{word:"cpu",categories:["thing","technology"]},{word:"crayon",categories:["thing"]},{word:"cricket",categories:["animals"]},{word:"crowd",categories:["people"]},{word:"daughter",categories:["family"]},{word:"dawn",categories:["time"]},{word:"daybreak",categories:["time"]},{word:"death",categories:["thing"]},{word:"denmark",categories:["place"]},{word:"dentist",categories:["profession"]},{word:"diamond",categories:["thing"]},{word:"dinner",categories:["food"]},{word:"disease",categories:["thing"]},{word:"doctor",categories:["profession"]},{word:"dog",categories:["animals"]},{word:"dream",categories:["thing"]},{word:"dress",categories:["thing"]},{word:"dusk",categories:["time"]},{word:"easter",categories:["religion"]},{word:"egg",categories:["food"]},{word:"eggplant",categories:["food"]},{word:"egypt",categories:["place"]},{word:"electrician",categories:["profession"]},{word:"elephant",categories:["animals"]},{word:"energy",categories:["thing"]},{word:"engine",categories:["transportation"]},{word:"engineer",categories:["profession"]},{word:"england",categories:["place"]},{word:"eve",categories:["time"]},{word:"evening",categories:["time"]},{word:"eventide",categories:["time"]},{word:"exabyte",categories:["thing","technology"]},{word:"eye",categories:["thing"]},{word:"fall",categories:["time"]},{word:"family",categories:["family"]},{word:"farmer",categories:["profession"]},{word:"father",categories:["people","family"]},{word:"finland",categories:["place"]},{word:"fireman",categories:["profession"]},{word:"fish",categories:["animals"]},{word:"flag",categories:["thing"]},{word:"florist",categories:["profession"]},{word:"flower",categories:["thing"]},{word:"football",categories:["sports"]},{word:"forest",categories:["place"]},{word:"fountain",categories:["thing"]},{word:"france",categories:["place"]},{word:"furniture",categories:["thing"]},{word:"garage",categories:["place"]},{word:"garden",categories:["food"]},{word:"gas",categories:["transportation"]},{word:"ghost",categories:["thing"]},{word:"gigabyte",categories:["thing","technology"]},{word:"girl",categories:["people"]},{word:"glass",categories:["thing"]},{word:"gold",categories:["thing"]},{word:"gpu",categories:["thing","technology"]},{word:"grandmother",categories:["people","family"]},{word:"grass",categories:["thing"]},{word:"greece",categories:["place"]},{word:"guitar",categories:["thing"]},{word:"hair",categories:["thing"]},{word:"hairdresser",categories:["profession"]},{word:"hamburger",categories:["food"]},{word:"helicopter",categories:["transportation"]},{word:"helmet",categories:["thing"]},{word:"holiday",categories:["thing"]},{word:"honey",categories:["food"]},{word:"horse",categories:["animals"]},{word:"hospital",categories:["place"]},{word:"house",categories:["place"]},{word:"hydrogen",categories:["science"]},{word:"ice",categories:["science"]},{word:"insect",categories:["animals"]},{word:"insurance",categories:["thing"]},{word:"intern",categories:["profession"]},{word:"iron",categories:["science"]},{word:"island",categories:["place"]},{word:"jackal",categories:["animals"]},{word:"jelly",categories:["food"]},{word:"jewellery",categories:["thing"]},{word:"jordan",categories:["place"]},{word:"journalist",categories:["profession"]},{word:"joystick",categories:["thing","technology"]},{word:"judge",categories:["profession"]},{word:"juice",categories:["food"]},{word:"kangaroo",categories:["animals"]},{word:"keyboard",categories:["thing","technology"]},{word:"kilobyte",categories:["thing","technology"]},{word:"king",categories:["people"]},{word:"kitchen",categories:["place"]},{word:"kite",categories:["thing"]},{word:"knife",categories:["thing"]},{word:"lamp",categories:["thing"]},{word:"laptop",categories:["thing","technology"]},{word:"lawyer",categories:["profession"]},{word:"leather",categories:["thing"]},{word:"librarian",categories:["profession"]},{word:"library",categories:["place"]},{word:"lifeguard",categories:["profession"]},{word:"lighter",categories:["thing"]},{word:"lion",categories:["animals"]},{word:"lizard",categories:["animals"]},{word:"lock",categories:["thing"]},{word:"london",categories:["place"]},{word:"lunch",categories:["food"]},{word:"machine",categories:["science"]},{word:"magazine",categories:["media"]},{word:"magician",categories:["people"]},{word:"man",categories:["people"]},{word:"manchester",categories:["place"]},{word:"market",categories:["place"]},{word:"match",categories:["thing"]},{word:"mechanic",categories:["profession"]},{word:"megabyte",categories:["thing","technology"]},{word:"memory",categories:["thing","technology"]},{word:"microphone",categories:["thing"]},{word:"midnight",categories:["time"]},{word:"minister",categories:["people","religion"]},{word:"monitor",categories:["thing","technology"]},{word:"monkey",categories:["animals"]},{word:"morn",categories:["time"]},{word:"morning",categories:["time"]},{word:"mother",categories:["people","family"]},{word:"motherboard",categories:["thing","technology"]},{word:"motorcycle",categories:["transportation"]},{word:"mouse",categories:["thing","technology","animals"]},{word:"musician",categories:["profession"]},{word:"nail",categories:["thing"]},{word:"napkin",categories:["thing"]},{word:"needle",categories:["thing"]},{word:"nest",categories:["thing"]},{word:"nigeria",categories:["place"]},{word:"night",categories:["time"]},{word:"nightfall",categories:["time"]},{word:"noon",categories:["time"]},{word:"notebook",categories:["thing"]},{word:"nurse",categories:["profession"]},{word:"ocean",categories:["place"]},{word:"oil",categories:["thing"]},{word:"optician",categories:["profession"]},{word:"orange",categories:["food"]},{word:"oxygen",categories:["science"]},{word:"oyster",categories:["animals"]},{word:"pager",categories:["thing","technology"]},{word:"painter",categories:["profession"]},{word:"painting",categories:["media"]},{word:"park",categories:["place"]},{word:"parrot",categories:["animals"]},{word:"pencil",categories:["thing","education"]},{word:"petabyte",categories:["thing","technology"]},{word:"pharmacist",categories:["profession"]},{word:"photographer",categories:["profession"]},{word:"piano",categories:["thing"]},{word:"pillow",categories:["thing"]},{word:"pilot",categories:["profession"]},{word:"pizza",categories:["food"]},{word:"planet",categories:["science"]},{word:"plastic",categories:["thing"]},{word:"plumber",categories:["profession"]},{word:"policeman",categories:["profession"]},{word:"portugal",categories:["place"]},{word:"postman",categories:["profession"]},{word:"potato",categories:["food"]},{word:"printer",categories:["thing","technology"]},{word:"processor",categories:["thing","technology"]},{word:"psychiatrist",categories:["profession"]},{word:"queen",categories:["people"]},{word:"quill",categories:["thing"]},{word:"rain",categories:["thing"]},{word:"rainbow",categories:["science"]},{word:"raincoat",categories:["thing"]},{word:"ram",categories:["thing","technology"]},{word:"receptionist",categories:["profession"]},{word:"refrigerator",categories:["food"]},{word:"restaurant",categories:["place"]},{word:"river",categories:["thing"]},{word:"rocket",categories:["science"]},{word:"room",categories:["place"]},{word:"rose",categories:["thing"]},{word:"russia",categories:["place"]},{word:"salesclerk",categories:["people","business"]},{word:"salesmen",categories:["profession"]},{word:"sandwich",categories:["food"]},{word:"school",categories:["education"]},{word:"scientist",categories:["profession"]},{word:"scooter",categories:["transportation"]},{word:"secretary",categories:["profession"]},{word:"shampoo",categories:["thing"]},{word:"shoe",categories:["thing"]},{word:"smartphone",categories:["thing","technology"]},{word:"soccer",categories:["sports"]},{word:"solstice",categories:["time"]},{word:"spoon",categories:["thing"]},{word:"spring",categories:["time"]},{word:"state",categories:["place"]},{word:"stone",categories:["thing"]},{word:"student",categories:["people","education"]},{word:"sugar",categories:["food"]},{word:"summer",categories:["time"]},{word:"sundown",categories:["time"]},{word:"sunset",categories:["time"]},{word:"sweden",categories:["place"]},{word:"table",categories:["thing"]},{word:"tailor",categories:["profession"]},{word:"teacher",categories:["people","education","profession"]},{word:"teenager",categories:["people","family"]},{word:"telephone",categories:["thing"]},{word:"television",categories:["media"]},{word:"tent",categories:["thing"]},{word:"terabyte",categories:["thing","technology"]},{word:"thailand",categories:["place"]},{word:"tiger",categories:["animals"]},{word:"toddler",categories:["people","family"]},{word:"tomato",categories:["food"]},{word:"toothbrush",categories:["thing"]},{word:"traffic",categories:["thing"]},{word:"train",categories:["transportation"]},{word:"translator",categories:["profession"]},{word:"truck",categories:["thing","transportation"]},{word:"twilight",categories:["time"]},{word:"uganda",categories:["place"]},{word:"umbrella",categories:["thing"]},{word:"van",categories:["transportation"]},{word:"vase",categories:["thing"]},{word:"vegetable",categories:["food"]},{word:"vr",categories:["thing","technology"]},{word:"vulture",categories:["animals"]},{word:"waiter",categories:["profession"]},{word:"waitress",categories:["profession"]},{word:"wall",categories:["thing"]},{word:"whale",categories:["animals"]},{word:"window",categories:["thing"]},{word:"winter",categories:["time"]},{word:"wire",categories:["thing"]},{word:"wolf",categories:["animals"]},{word:"woman",categories:["people"]},{word:"xylophone",categories:["thing"]},{word:"yacht",categories:["transportation"]},{word:"yak",categories:["animals"]},{word:"yottabyte",categories:["thing","technology"]},{word:"zebra",categories:["animals"]},{word:"zettabyte",categories:["thing","technology"]},{word:"zoo",categories:["animals"]}],adjective:[{word:"abandoned",categories:["condition"]},{word:"abiding",categories:["personality"]},{word:"able",categories:["condition"]},{word:"abrasive",categories:["condition","personality"]},{word:"abnormal",categories:["condition"]},{word:"absurd",categories:["condition"]},{word:"abundant",categories:["quantity"]},{word:"acceptable",categories:["condition"]},{word:"acidic",categories:["taste"]},{word:"acoustic",categories:["sounds"]},{word:"acrid",categories:["condition"]},{word:"adamant",categories:["personality"]},{word:"adorable",categories:["personality"]},{word:"adventurous",categories:["personality"]},{word:"aggressive",categories:["personality"]},{word:"agitated",categories:["personality"]},{word:"agreeable",categories:["personality"]},{word:"alert",categories:["condition"]},{word:"alive",categories:["condition"]},{word:"aloof",categories:["personality"]},{word:"ambitious",categories:["personality"]},{word:"ancient",categories:["time"]},{word:"angry",categories:["personality"]},{word:"annoyed",categories:["personality"]},{word:"antsy",categories:["personality"]},{word:"anxious",categories:["personality"]},{word:"appalling",categories:["personality"]},{word:"appetizing",categories:["taste"]},{word:"apprehensive",categories:["personality"]},{word:"arrogant",categories:["personality"]},{word:"ashamed",categories:["personality"]},{word:"astonishing",categories:["personality"]},{word:"attractive",categories:["appearance"]},{word:"average",categories:["appearance"]},{word:"bad",categories:["condition"]},{word:"bald",categories:["appearance"]},{word:"bashful",categories:["personality"]},{word:"beautiful",categories:["appearance"]},{word:"beefy",categories:["appearance"]},{word:"belligerent",categories:["personality"]},{word:"bent",categories:["condition"]},{word:"best",categories:["condition"]},{word:"better",categories:["condition"]},{word:"bewildered",categories:["personality"]},{word:"big",categories:["size"]},{word:"billions",categories:["quantity"]},{word:"billowy",categories:["appearance"]},{word:"bitter",categories:["taste"]},{word:"black",categories:["color"]},{word:"bland",categories:["taste"]},{word:"blue",categories:["color"]},{word:"blushing",categories:["appearance"]},{word:"bored",categories:["personality"]},{word:"boring",categories:["personality"]},{word:"boundless",categories:["personality"]},{word:"brainy",categories:["personality"]},{word:"brash",categories:["personality"]},{word:"brave",categories:["personality"]},{word:"breezy",categories:["touch"]},{word:"brief",categories:["time"]},{word:"bright",categories:["appearance"]},{word:"broad",categories:["shapes"]},{word:"broken",categories:["condition"]},{word:"brown",categories:["color"]},{word:"bulky",categories:["appearance"]},{word:"bumpy",categories:["touch"]},{word:"burly",categories:["appearance"]},{word:"busy",categories:["personality"]},{word:"cagey",categories:["personality"]},{word:"calm",categories:["personality"]},{word:"callous",categories:["personality"]},{word:"careful",categories:["condition"]},{word:"chilly",categories:["touch"]},{word:"chubby",categories:["appearance"]},{word:"clean",categories:["appearance"]},{word:"clever",categories:["condition"]},{word:"clumsy",categories:["personality"]},{word:"cold",categories:["touch"]},{word:"colossal",categories:["size"]},{word:"cool",categories:["touch"]},{word:"crashing",categories:["sounds"]},{word:"creamy",categories:["taste"]},{word:"crooked",categories:["shapes"]},{word:"cuddly",categories:["touch"]},{word:"curved",categories:["shapes"]},{word:"damaged",categories:["touch"]},{word:"damp",categories:["touch"]},{word:"dazzling",categories:["appearance"]},{word:"dead",categories:["condition"]},{word:"deafening",categories:["sounds"]},{word:"deep",categories:["shapes"]},{word:"defeated",categories:["personality"]},{word:"delicious",categories:["taste"]},{word:"delightful",categories:["personality"]},{word:"dirty",categories:["touch"]},{word:"disgusting",categories:["taste"]},{word:"drab",categories:["appearance"]},{word:"dry",categories:["touch"]},{word:"eager",categories:["personality"]},{word:"early",categories:["time"]},{word:"easy",categories:["condition"]},{word:"echoing",categories:["sounds"]},{word:"elegant",categories:["appearance"]},{word:"embarrassed",categories:["personality"]},{word:"enough",categories:["quantity"]},{word:"faint",categories:["sounds"]},{word:"faithful",categories:["personality"]},{word:"famous",categories:["condition"]},{word:"fancy",categories:["appearance"]},{word:"fast",categories:["time"]},{word:"fat",categories:["size"]},{word:"few",categories:["quantity"]},{word:"fierce",categories:["personality"]},{word:"fit",categories:["appearance"]},{word:"flabby",categories:["appearance"]},{word:"flaky",categories:["touch"]},{word:"flat",categories:["shapes"]},{word:"fluffy",categories:["touch"]},{word:"freezing",categories:["touch"]},{word:"fresh",categories:["taste"]},{word:"full",categories:["quantity"]},{word:"future",categories:["time"]},{word:"gentle",categories:["personality"]},{word:"gifted",categories:["condition"]},{word:"gigantic",categories:["size"]},{word:"glamorous",categories:["appearance"]},{word:"gorgeous",categories:["appearance"]},{word:"gray",categories:["color"]},{word:"greasy",categories:["touch","taste"]},{word:"great",categories:["size"]},{word:"green",categories:["color"]},{word:"grumpy",categories:["personality"]},{word:"hallowed",categories:["condition"]},{word:"handsome",categories:["appearance"]},{word:"happy",categories:["personality"]},{word:"harsh",categories:["sounds"]},{word:"helpful",categories:["condition"]},{word:"helpless",categories:["personality"]},{word:"high",categories:["shapes"]},{word:"hissing",categories:["sounds"]},{word:"hollow",categories:["shapes"]},{word:"hot",categories:["touch","taste"]},{word:"howling",categories:["sounds"]},{word:"huge",categories:["size"]},{word:"hundreds",categories:["quantity"]},{word:"icy",categories:["touch"]},{word:"immense",categories:["size"]},{word:"important",categories:["condition"]},{word:"incalculable",categories:["quantity"]},{word:"inexpensive",categories:["condition"]},{word:"itchy",categories:["personality"]},{word:"jealous",categories:["personality"]},{word:"jolly",categories:["personality"]},{word:"juicy",categories:["taste"]},{word:"kind",categories:["personality"]},{word:"large",categories:["size"]},{word:"late",categories:["time"]},{word:"lazy",categories:["personality"]},{word:"lemon",categories:["color"]},{word:"limited",categories:["quantity"]},{word:"little",categories:["size","quantity"]},{word:"lively",categories:["personality"]},{word:"long",categories:["time","appearance"]},{word:"loose",categories:["touch"]},{word:"loud",categories:["sounds"]},{word:"low",categories:["shapes"]},{word:"magnificent",categories:["appearance"]},{word:"mammoth",categories:["size"]},{word:"mango",categories:["color"]},{word:"many",categories:["quantity"]},{word:"massive",categories:["size"]},{word:"mealy",categories:["condition"]},{word:"melodic",categories:["sounds"]},{word:"melted",categories:["touch"]},{word:"microscopic",categories:["size"]},{word:"millions",categories:["quantity"]},{word:"miniature",categories:["size"]},{word:"modern",categories:["time"]},{word:"moldy",categories:["taste"]},{word:"most",categories:["quantity"]},{word:"muscular",categories:["appearance"]},{word:"mushy",categories:["condition"]},{word:"mysterious",categories:["personality"]},{word:"narrow",categories:["shapes"]},{word:"nervous",categories:["personality"]},{word:"nice",categories:["personality"]},{word:"noisy",categories:["sounds"]},{word:"numerous",categories:["quantity"]},{word:"nutritious",categories:["taste"]},{word:"nutty",categories:["taste"]},{word:"obedient",categories:["personality"]},{word:"obnoxious",categories:["personality"]},{word:"odd",categories:["condition"]},{word:"old",categories:["time"]},{word:"orange",categories:["color"]},{word:"panicky",categories:["personality"]},{word:"petite",categories:["size"]},{word:"pitiful",categories:["personality"]},{word:"plain",categories:["appearance"]},{word:"plump",categories:["appearance"]},{word:"polite",categories:["personality"]},{word:"poor",categories:["condition"]},{word:"powerful",categories:["condition"]},{word:"prehistoric",categories:["time"]},{word:"prickly",categories:["touch"]},{word:"proud",categories:["personality"]},{word:"puny",categories:["size"]},{word:"purple",categories:["color"]},{word:"purring",categories:["sounds"]},{word:"putrid",categories:["taste"]},{word:"quaint",categories:["appearance"]},{word:"quick",categories:["time"]},{word:"quiet",categories:["sounds"]},{word:"rancid",categories:["taste"]},{word:"rapid",categories:["time"]},{word:"rapping",categories:["sounds"]},{word:"raspy",categories:["sounds"]},{word:"red",categories:["color"]},{word:"refined",categories:["shapes"]},{word:"repulsive",categories:["personality"]},{word:"rhythmic",categories:["sounds"]},{word:"rich",categories:["condition"]},{word:"ripe",categories:["taste"]},{word:"rotten",categories:["taste"]},{word:"rough",categories:["touch"]},{word:"round",categories:["shapes"]},{word:"salmon",categories:["color"]},{word:"salty",categories:["taste"]},{word:"savory",categories:["taste"]},{word:"scarce",categories:["quantity"]},{word:"scary",categories:["personality"]},{word:"scrawny",categories:["size"]},{word:"screeching",categories:["sounds"]},{word:"scruffy",categories:["appearance"]},{word:"shaggy",categories:["touch"]},{word:"shallow",categories:["shapes"]},{word:"shapely",categories:["appearance"]},{word:"sharp",categories:["touch"]},{word:"short",categories:["size","appearance","time"]},{word:"shrilling",categories:["sounds"]},{word:"shy",categories:["condition"]},{word:"silly",categories:["personality"]},{word:"skinny",categories:["appearance","shapes"]},{word:"slimy",categories:["touch"]},{word:"slow",categories:["time"]},{word:"small",categories:["size"]},{word:"some",categories:["quantity"]},{word:"sour",categories:["taste"]},{word:"sparse",categories:["quantity"]},{word:"spicy",categories:["taste"]},{word:"spoiled",categories:["taste"]},{word:"square",categories:["shapes"]},{word:"squeaking",categories:["sounds"]},{word:"stale",categories:["taste"]},{word:"steep",categories:["shapes"]},{word:"sticky",categories:["touch"]},{word:"stocky",categories:["appearance"]},{word:"straight",categories:["shapes"]},{word:"strong",categories:["touch"]},{word:"substantial",categories:["quantity"]},{word:"sweet",categories:["taste"]},{word:"swift",categories:["time"]},{word:"tall",categories:["size"]},{word:"tangy",categories:["taste"]},{word:"tart",categories:["taste"]},{word:"tasteless",categories:["taste"]},{word:"tasty",categories:["taste"]},{word:"teeny",categories:["size"]},{word:"tender",categories:["condition"]},{word:"thankful",categories:["personality"]},{word:"thoughtless",categories:["personality"]},{word:"thousands",categories:["quantity"]},{word:"thundering",categories:["sounds"]},{word:"tight",categories:["touch"]},{word:"tinkling",categories:["sounds"]},{word:"tiny",categories:["size"]},{word:"ugly",categories:["appearance"]},{word:"uneven",categories:["touch"]},{word:"unimportant",categories:["condition"]},{word:"uninterested",categories:["condition"]},{word:"unkempt",categories:["appearance"]},{word:"unsightly",categories:["appearance"]},{word:"uptight",categories:["personality"]},{word:"vast",categories:["condition"]},{word:"victorious",categories:["personality"]},{word:"wailing",categories:["sounds"]},{word:"warm",categories:["touch"]},{word:"weak",categories:["touch"]},{word:"wet",categories:["touch"]},{word:"whining",categories:["sounds"]},{word:"whispering",categories:["sounds"]},{word:"white",categories:["color"]},{word:"wide",categories:["shapes"]},{word:"witty",categories:["personality"]},{word:"wonderful",categories:["personality"]},{word:"wooden",categories:["touch"]},{word:"worried",categories:["personality"]},{word:"wrong",categories:["condition"]},{word:"yellow",categories:["color"]},{word:"young",categories:["time"]},{word:"yummy",categories:["taste"]},{word:"zealous",categories:["personality"]}]};function lt(ct,ht){var dt,ft;ht===void 0&&(ht=[]);var ut=new Set(ht),pt=[];try{for(var gt=it(rt.wordList[ct]),mt=gt.next();!mt.done;mt=gt.next()){var _t=mt.value;(ht.length===0||_t.categories.some(function(yt){return ut.has(yt)}))&&pt.push(_t.word)}}catch(yt){dt={error:yt}}finally{try{mt&&!mt.done&&(ft=gt.return)&&ft.call(gt)}finally{if(dt)throw dt.error}}return pt}rt.getWordsByCategory=lt})(words)),words}var hasRequiredDist;function requireDist(){if(hasRequiredDist)return dist;hasRequiredDist=1;var rt=dist&&dist.__assign||function(){return rt=Object.assign||function(ut){for(var pt,gt=1,mt=arguments.length;gt<mt;gt++){pt=arguments[gt];for(var _t in pt)Object.prototype.hasOwnProperty.call(pt,_t)&&(ut[_t]=pt[_t])}return ut},rt.apply(this,arguments)};Object.defineProperty(dist,"__esModule",{value:!0}),dist.totalUniqueSlugs=dist.generateSlug=void 0;var it=requireWords(),lt=3;function ct(ut,pt){for(var gt=ut||lt,mt={partsOfSpeech:ht(gt),categories:{},format:"kebab"},_t=rt(rt({},mt),pt),yt=[],bt=0;bt<gt;bt++){var xt=_t.partsOfSpeech[bt],wt=it.getWordsByCategory(_t.partsOfSpeech[bt],_t.categories[xt]),Ct=wt[Math.floor(Math.random()*wt.length)];yt.push(Ct)}return dt(yt,_t.format)}dist.generateSlug=ct;function ht(ut){for(var pt=[],gt=0;gt<ut-1;gt++)pt.push("adjective");return pt.push("noun"),pt}function dt(ut,pt){return pt==="kebab"?ut.join("-").toLowerCase():pt==="camel"?ut.map(function(gt,mt){return mt===0?gt.toLowerCase():gt[0].toUpperCase()+gt.slice(1).toLowerCase()}).join(""):pt==="lower"?ut.join(" ").toLowerCase():pt==="sentence"?ut.map(function(gt,mt){return mt===0?gt[0].toUpperCase()+gt.slice(1).toLowerCase():gt}).join(" "):ut.map(function(gt){return gt[0].toUpperCase()+gt.slice(1).toLowerCase()}).join(" ")}function ft(ut,pt){for(var gt,mt,_t=it.getWordsByCategory("adjective",(gt=pt?.categories)===null||gt===void 0?void 0:gt.adjective).length,yt=it.getWordsByCategory("noun",(mt=pt?.categories)===null||mt===void 0?void 0:mt.noun).length,bt={adjective:_t,noun:yt},xt=ut||lt,wt=pt?.partsOfSpeech||ht(xt),Ct=1,St=0;St<xt;St++)Ct*=bt[wt[St]];return Ct}return dist.totalUniqueSlugs=ft,dist}var distExports=requireDist();let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const byteToHex=[];for(let rt=0;rt<256;++rt)byteToHex.push((rt+256).toString(16).slice(1));function unsafeStringify(rt,it=0){return byteToHex[rt[it+0]]+byteToHex[rt[it+1]]+byteToHex[rt[it+2]]+byteToHex[rt[it+3]]+"-"+byteToHex[rt[it+4]]+byteToHex[rt[it+5]]+"-"+byteToHex[rt[it+6]]+byteToHex[rt[it+7]]+"-"+byteToHex[rt[it+8]]+byteToHex[rt[it+9]]+"-"+byteToHex[rt[it+10]]+byteToHex[rt[it+11]]+byteToHex[rt[it+12]]+byteToHex[rt[it+13]]+byteToHex[rt[it+14]]+byteToHex[rt[it+15]]}const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(rt,it,lt){if(native.randomUUID&&!rt)return native.randomUUID();rt=rt||{};const ct=rt.random||(rt.rng||rng)();return ct[6]=ct[6]&15|64,ct[8]=ct[8]&63|128,unsafeStringify(ct)}const MAX_AUTO_HISTORY_LENGTH=30,historyModeStore=persist(writable("manual"),localStorage$1(),"autoHistoryMode"),autoHistoryStore=persist(writable([]),localStorage$1(),"autoHistoryStore"),manualHistoryStore=persist(writable([]),localStorage$1(),"manualHistoryStore"),loaderHistoryStore=writable([]),historyStore=derived([historyModeStore,autoHistoryStore,manualHistoryStore,loaderHistoryStore],([rt,it,lt,ct],ht)=>{switch(rt){case"auto":{ht(it);break}case"manual":{ht(lt);break}case"loader":{ht(ct);break}default:ht(it)}}),addHistoryEntry=rt=>{const it={...rt,id:v4()};if(it.type==="loader"){loaderHistoryStore.update(lt=>[it,...lt]);return}it.name||(it.name=distExports.generateSlug(2)),it.type==="auto"&&autoHistoryStore.update(lt=>(lt.length>=MAX_AUTO_HISTORY_LENGTH&&(lt=lt.slice(0,MAX_AUTO_HISTORY_LENGTH-1)),[it,...lt])),manualHistoryStore.update(lt=>[it,...lt])},clearHistoryData=rt=>{(get$2(historyModeStore)==="auto"?autoHistoryStore:manualHistoryStore).update(it=>(get$2(historyModeStore)!=="loader"&&(it=it.filter(({id:lt})=>rt&&lt!=rt)),it))},getPreviousState=rt=>{const it=get$2(rt?autoHistoryStore:manualHistoryStore);return it.length>0?JSON.stringify(it[0].state):""},restoreHistory=rt=>{const it=rt.filter(ct=>validateEntry(ct)),lt=rt.length-it.length;if(lt>0&&(console.error(`${lt} invalid history entries were removed.`),console.error(rt)),it.length>0){let ct=0;(it[0].type==="auto"?autoHistoryStore:manualHistoryStore).update(ht=>{const dt=new Set(ht.map(({id:pt})=>pt)),ft=it.filter(({id:pt})=>!dt.has(pt));ct=ft.length;const ut=[...ht,...ft];return ut.sort((pt,gt)=>gt.time-pt.time),ut}),alert(`${ct} entries restored. ${lt} invalid, ${it.length-ct} duplicates.`),logEvent("history",{duplicates:it.length-ct})}else alert("No valid entries found.")},setIDs=rt=>{for(const it of rt)it.id||(it.id=v4());return rt},injectHistoryIDs=()=>{autoHistoryStore.update(setIDs),manualHistoryStore.update(setIDs)},validateEntry=rt=>rt.type&&rt.state&&rt.time&&!0,codeFileName="code.mmd",configFileName="config.json",isValidGist=rt=>codeFileName in rt,getFileContent=async rt=>rt.truncated?await fetchText(rt.raw_url):rt.content,getGistData=async rt=>{const it=rt.split("github.com").pop();if(!it)throw new Error("Invalid GitHub URL"+rt);const[lt,ct,ht,dt]=it.split("/"),{html_url:ft,files:ut,history:pt}=await fetchJSON(`https://api.github.com/gists/${ht}${dt?"/"+dt:""}`);if(isValidGist(ut)){const gt=await getFileContent(ut[codeFileName]);let mt="{}";configFileName in ut&&(mt=await getFileContent(ut[configFileName]));const _t=pt[0];return{author:_t.user.login,code:gt,config:mt,time:new Date(_t.committed_at).getTime(),url:`${ft}/${_t.version}`,version:_t.version.slice(-7)}}else throw new Error("Invalid gist provided")},getStateFromGist=(rt,it=rt.url)=>{const lt={...defaultState,code:rt.code,loader:{config:{url:it},type:"gist"}};return rt.config&&(lt.mermaid=rt.config),lt},loadGistData=async rt=>{const it=rt.split("github.com").pop();if(!it)throw new Error("Invalid GitHub URL"+rt);const[lt,ct,ht,dt]=it.split("/"),{history:ft}=await fetchJSON(`https://api.github.com/gists/${ht}${dt?"/"+dt:""}`),ut=[];for(const mt of ft)try{const _t=await getGistData(mt.url);ut.push(_t)}catch(_t){console.error(_t)}if(ut.length===0)throw new Error("Invalid gist provided");ut.reverse();const pt=ut.at(-1);if(!pt)throw new Error("Invalid gist provided");const gt=getStateFromGist(pt,rt);for(const mt of ut)addHistoryEntry({name:`${mt.author} v${mt.version}`,state:getStateFromGist(mt),time:mt.time,type:"loader",url:mt.url});return gt},loaders={gist:loadGistData},loadDataFromUrl=async()=>{const rt=new URLSearchParams(window.location.search);let it=defaultState,lt=!1;const ct=rt.get("code")??void 0,ht=rt.get("config")??void 0;let dt;const ft=ht?await fetchText(ht):defaultState.mermaid;if(ct&&(dt=await fetchText(ct),lt=!0),dt){if(!ct)throw new Error("Code URL is not defined");it={code:dt,loader:{config:{codeURL:ct,configURL:ht},type:"files"},mermaid:ft}}else for(const[ut,pt]of rt.entries())if(ut in loaders)try{it=await loaders[ut](pt),lt=!0;break}catch(gt){console.error(gt)}lt&&updateCodeStore({...it,updateDiagram:!0})},migrations={injectHistoryIDs},migrationStore=persist(writable({version:-1}),localStorage$1(),"migrations"),applyMigrations=()=>{const{version:rt}=get$2(migrationStore),it=Object.entries(migrations);if(rt!==it.length-1){console.log(`Current migration version: v${rt}. Migrating to v${it.length-1}.`);for(let lt=rt+1;lt<it.length;lt++){const[ct,ht]=it[lt];console.log(`Applying migration ${lt}: ${ct}.`),ht(),migrationStore.set({version:lt})}logEvent("migration",{to:it.length-1})}},getDomain=rt=>rt?new URL(rt).hostname:"",loadStateFromURL=()=>{loadState(window.location.hash.slice(1))},syncDiagram=()=>{updateCodeStore({updateDiagram:!0})},initHandler=async()=>{applyMigrations(),loadStateFromURL(),await initLoading("Loading Gist...",loadDataFromUrl().catch(console.error)),syncDiagram(),initURLSubscription(),await initAnalytics(),verifyState()};navigator.platform.toUpperCase().includes("MAC");const MCBaseURL="https://example.com";let count=0;const errorDebug=(rt=1e3)=>{if(count+=1,count>rt){console.log(count,rt);debugger}},formatJSON=rt=>JSON.stringify(rt,void 0,2),fetchJSON=async rt=>(await fetch(rt)).json(),fetchText=async rt=>(await fetch(rt)).text(),copyToClipboard=async rt=>{try{await navigator.clipboard.writeText(rt)}catch{fallbackCopyToClipboard(rt)}};function fallbackCopyToClipboard(rt){const it=document.createElement("textarea");it.value=rt,it.style.position="fixed",it.style.left="-999999px",it.style.top="-999999px",document.body.append(it),it.focus(),it.select();try{document.execCommand("copy")}catch(lt){throw console.error("Failed to copy:",lt),lt}finally{it.remove()}}const defaultState={code:`flowchart TD
    A[Christmas] -->|Get money| B(Go shopping)
    B --> C{Let me think}
    C -->|One| D[Laptop]
    C -->|Two| E[iPhone]
    C -->|Three| F[fa:fa-car Car]
  `,grid:!0,mermaid:formatJSON({theme:"default"}),panZoom:!0,rough:!1,updateDiagram:!0},urlParseFailedState=`flowchart TD
    A[Loading URL failed. We can try to figure out why.] -->|Decode JSON| B(Please check the console to see the JSON and error details.)
    B --> C{Is the JSON correct?}
    C -->|Yes| D(Please Click here to Raise an issue in github.<br/>Including the broken link in the issue <br/> will speed up the fix.)
    C -->|No| E{Did someone <br/>send you this link?}
    E -->|Yes| F[Ask them to send <br/>you the complete link]
    E -->|No| G{Did you copy <br/> the complete URL?}
    G --> |Yes| D
    G --> |"No :("| H(Try using the Timeline tab in History <br/>from same browser you used to create the diagram.)
    click D href "https://github.com/mermaid-js/mermaid-live-editor/issues/new?assignees=&labels=bug&template=bug_report.md&title=Broken%20link" "Raise issue"`,inputStateStore=persist(writable(defaultState),localStorage$1(),"codeStore"),currentState=(()=>{const rt=get$2(inputStateStore);return{...rt,editorMode:rt.editorMode??"code",error:void 0,errorMarkers:[],serialized:serializeState(rt)}})();let lastDiagramType="";const processState=async rt=>{const it={...rt,editorMode:rt.editorMode??"code",error:void 0,errorMarkers:[],serialized:""};try{it.serialized=serializeState(rt);const{diagramType:lt}=await parse(rt.code);it.diagramType=lt,lastDiagramType==="zenuml"&&lt!==lastDiagramType&&setTimeout(()=>window.location.reload(),500),lastDiagramType=lt,JSON.parse(rt.mermaid)}catch(lt){if(it.error=lt,errorDebug(),console.error(lt),"hash"in lt)try{let ct=it.error.toString();const ht=extractErrorLineText(ct),dt=findMostRelevantLineNumber(ht,rt.code);let ft,ut,pt,gt;try{({first_line:ft,last_line:ut,first_column:pt,last_column:gt}=lt.hash.loc)}catch{const _t=findMostRelevantLineNumber(ct,rt.code);ft=_t,ut=_t+1,pt=0,gt=0}dt!==-1&&(ct=replaceLineNumberInErrorMessage(ct,dt)),it.error=new Error(ct);const mt={endColumn:gt+(pt===gt?0:5),endLineNumber:ut+(dt-ft),message:ct||"Syntax error",severity:8,startColumn:pt,startLineNumber:dt};it.errorMarkers=[mt]}catch(ct){console.error("Error without line helper",ct)}}return it},stateStore=derived([inputStateStore],([rt],it)=>{processState(rt).then(it)},currentState),urlsStore=derived([stateStore],([{code:rt,serialized:it}])=>({kroki:"",mdCode:"",mermaidChart:({medium:ct})=>{const ht=new URLSearchParams({utm_source:C$2.utmSource,utm_medium:ct}).toString();return{save:`${MCBaseURL}/app/plugin/save?state=${it}&${ht}`,playground:`${MCBaseURL}/play?${ht}#${it}`,plugins:`${MCBaseURL}/plugins?${ht}`,home:`${MCBaseURL}/?${ht}`}},new:`${window.location.protocol}//${window.location.host}${window.location.pathname}#${serializeState(defaultState)}`,png:"",svg:"",view:`/view#${it}`})),loadState=rt=>{let it;console.log(`Loading '${rt}'`);try{it=deserializeState(rt),it.mermaid||(it.mermaid=defaultState.mermaid);const lt=typeof it.mermaid=="string"?JSON.parse(it.mermaid):it.mermaid;lt.securityLevel&&lt.securityLevel!=="strict"&&confirm(`Removing "securityLevel":"${lt.securityLevel}" from the config for safety.
Click Cancel if you trust the source of this Diagram.`)&&delete lt.securityLevel,it.mermaid=formatJSON(lt)}catch(lt){it=get$2(inputStateStore),rt&&(console.error("Init error",lt),it.code=urlParseFailedState,it.mermaid=defaultState.mermaid)}updateCodeStore(it)};let renderCount=0;const updateCodeStore=rt=>{inputStateStore.update(it=>(renderCount++,{...it,...rt,renderCount}))},updateCode=(rt,{updateDiagram:it=!1,resetPanZoom:lt=!1}={})=>{errorDebug(),inputStateStore.update(ct=>(lt&&(ct.pan=void 0,ct.zoom=void 0),{...ct,code:rt,updateDiagram:it}))},updateConfig=rt=>{updateCodeStore({mermaid:rt})},toggleDarkTheme=rt=>{inputStateStore.update(it=>{const lt=JSON.parse(it.mermaid);return(!lt.theme||["dark","default"].includes(lt.theme))&&(lt.theme=rt?"dark":"default"),{...it,mermaid:formatJSON(lt)}})},initURLSubscription=()=>{const rt=debounce(it=>{history.replaceState(void 0,"",`#${it}`)},250);stateStore.subscribe(({serialized:it})=>{rt(it)})},getStateString=()=>JSON.stringify(get$2(inputStateStore)),verifyState=()=>{const rt=get$2(inputStateStore);rt.panZoom||(rt.panZoom=!0),updateCodeStore(rt)},renderB53XAZ4G=Object.freeze(Object.defineProperty({__proto__:null,render:render$3},Symbol.toStringTag,{value:"Module"}));export{darken as $,defaultConfig2 as A,rgba$1 as B,__export as C,setupGraphViewbox2 as D,cleanAndMerge as E,getConfig as F,defaultConfig_default as G,random as H,selectSvgElement as I,JSON_SCHEMA as J,package_default as K,getThemeVariables3 as L,hasKatex as M,calculateMathMLDimensions as N,parseFontSize as O,getUrl as P,renderKatexSanitized as Q,parseGenericTypes as R,line$1 as S,curveBasis as T,generateId as U,lineBreakRegex as V,setupGraphViewbox as W,isDark as X,lighten as Y,ZERO_WIDTH_SPACE as Z,__name as _,getAccTitle as a,keysIn as a$,commonDb_exports as a0,withPath as a1,halfPi as a2,epsilon as a3,tau as a4,cos as a5,sin as a6,min as a7,abs$1 as a8,constant as a9,clear as aA,clear$1 as aB,updateNodeBounds as aC,setNodeElem as aD,insertEdge as aE,positionEdgeLabel as aF,insertEdgeLabel as aG,computeDimensionOfText as aH,isArray as aI,isSymbol as aJ,Symbol$1 as aK,array as aL,commonjsGlobal as aM,getDefaultExportFromCjs as aN,__name$3 as aO,curveLinear as aP,getUserDefinedConfig as aQ,getIconSVG as aR,registerIconPacks as aS,unknownIcon as aT,to_style as aU,clsx as aV,set_class as aW,userPrefersMode as aX,theme as aY,toNumber as aZ,isIterateeCall as a_,pi as aa,sqrt as ab,atan2 as ac,asin as ad,acos as ae,max as af,insertCluster as ag,insertNode as ah,positionNode as ai,Utils as aj,Color$1 as ak,getLineFunctionsWithOffset as al,evaluate as am,createText as an,getSubGraphTitleMargins as ao,replaceIconSubstring as ap,decodeEntities as aq,getStylesFromArray as ar,__name$1 as as,baseRest as at,isArrayLikeObject as au,constant$3 as av,isFunction as aw,isEmpty as ax,markers_default as ay,clear2 as az,setAccTitle as b,isTypedArray as b$,eq as b0,isArrayLike as b1,identity$1 as b2,isObject$1 as b3,isIndex as b4,assignValue as b5,constant$1 as b6,interpolateNumber as b7,interpolateRgb as b8,interpolateString as b9,render as bA,saveStatistics as bB,inputStateStore as bC,setToString as bD,overRest as bE,baseFor as bF,baseAssignValue as bG,baseUnary as bH,merge$1 as bI,arrayLikeKeys as bJ,baseKeys as bK,memoize as bL,isArguments as bM,copyObject as bN,getPrototype as bO,cloneArrayBuffer as bP,cloneTypedArray as bQ,isObjectLike as bR,getTag as bS,nodeUtil as bT,copyArray as bU,isBuffer as bV,cloneBuffer as bW,initCloneObject as bX,Stack as bY,MapCache as bZ,Uint8Array$1 as b_,color as ba,styles2String as bb,isLabelStyle as bc,derivedMode as bd,derivedTheme as be,systemPrefersMode as bf,isValidMode as bg,disableTransitions as bh,themeColors as bi,darkClassNames as bj,lightClassNames as bk,modeStorageKey as bl,themeStorageKey as bm,toggleDarkTheme as bn,loadingStateStore as bo,Rgb as bp,rgbConvert as bq,define as br,extend$1 as bs,Color as bt,nogamma as bu,hue as bv,dayjs2 as bw,debounce as bx,stateStore as by,updateCodeStore as bz,getConfig2 as c,isLength as c0,Set$1 as c1,clsx$1 as c2,copyToClipboard as c3,TID as c4,getDomain as c5,urlsStore as c6,encode as c7,standardizeDiagramType as c8,errorDebug as c9,updateCode as ca,updateConfig as cb,historyModeStore as cc,loaderHistoryStore as cd,historyStore as ce,getStateString as cf,getPreviousState as cg,addHistoryEntry as ch,restoreHistory as ci,clearHistoryData as cj,persist as ck,localStorage$1 as cl,MCBaseURL as cm,getSampleDiagrams as cn,defaultState as co,logEvent as cp,createAssigner as cq,isPrototype as cr,baseGetTag as cs,select as d,configureSvgSize as e,assignWithDepth_default as f,getAccDescription as g,calculateTextWidth as h,initHandler as i,sanitizeText as j,distExports$1 as k,log as l,common_default as m,calculateTextHeight as n,setConfig2 as o,getRegisteredLayoutAlgorithm as p,setDiagramTitle as q,render$2 as r,setAccDescription as s,getDiagramTitle as t,utils_default as u,load as v,wrapLabel as w,isValidShape as x,getEdgeId as y,clear$2 as z};
